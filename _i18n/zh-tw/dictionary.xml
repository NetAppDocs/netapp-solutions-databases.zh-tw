<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="d1029167179320d8b6d70b11c3d01bd3" category="list-text">Ansible 控制節點的要求：</block>
  <block id="5c263f30899f93ff7ccd457ad3eb956f" category="list-text">安裝了以下軟體包的 RHEL/CentOS 機器：</block>
  <block id="ca60b3698dd3d27a5f91e4dc0a1a2546" category="list-text">Python3</block>
  <block id="4ce3ea126bb844d4f8c4ce1a65cbe3ae" category="list-text">Pip3</block>
  <block id="881cbd1ce3fdb52f73a82f8674a2a364" category="list-text">Ansible（版本高於 2.10.0）</block>
  <block id="0bcc70105ad279503e31fe7b3f47b665" category="list-text">Git</block>
  <block id="7b643b0eef9cf1199195fa05b77fc3c8" category="paragraph">如果您有一台新的 RHEL/CentOS 機器，但沒有安裝上述要求，請依照下列步驟將機器設定為 Ansible 控制節點：</block>
  <block id="d2052f202108defaf6afc7831ba59362" category="list-text">為 RHEL-8/RHEL-7 啟用 Ansible 儲存庫</block>
  <block id="61fbc2f21db84f17551fda6893429d16" category="list-text">對於 RHEL-8（以 root 身分執行以下命令）</block>
  <block id="77cd42f765e6b40764459a64a979f90c" category="list-text">對於 RHEL-7（以 root 身分執行以下命令）</block>
  <block id="675f82a779038c3f679b04bc0aadca1a" category="list-text">將以下內容貼到終端機中</block>
  <block id="9ced761647f5d80fe615526ffff63937" category="list-text">安裝了以下軟體包的 Ubuntu/Debian 機器：</block>
  <block id="6e3d8a0ff7934b777031953fe936bac8" category="paragraph">如果您有一台新的 Ubuntu/Debian 機器，但沒有安裝上述要求，請按照以下步驟將機器設定為 Ansible 控制節點：</block>
  <block id="56ee829a33ac57c3b6d427e35b3b2e86" category="list-text">將下面的內容貼到終端機中</block>
  <block id="c4053f20c3fe50fe899484a64367439e" category="list-text">配置憑證。</block>
  <block id="61efb6ce79debd57f1e5eb28b08f94ba" category="list-text">建立憑證類型。對於涉及ONTAP的解決方案，您必須配置憑證類型以符合使用者名稱和密碼項目，我們也會為 Cloud Central 和 AWS 新增項目。</block>
  <block id="c87e3da0a9f8d5eeacea4eac9bef80ea" category="list-text">導覽至管理 → 憑證類型，然後按一下新增。</block>
  <block id="e6bf632438290fdf98265b2b18943118" category="list-text">提供名稱和描述。</block>
  <block id="5f5a0974b600f86bd4e77595282fcf70" category="list-text">在輸入配置中貼上以下內容：</block>
  <block id="b95cd128bfca5d5c9181a46d0392c360" category="list-text">將以下內容貼到 Injector Configuration 中，然後按一下「儲存」：</block>
  <block id="75f3f97810b5eef177a5355b86dabfd0" category="list-text">為ONTAP/CVO/AWS 建立憑證</block>
  <block id="41dcc8a8aaaa79a511ba0ab4e6bde225" category="list-text">導覽至資源 → 憑證，然後按一下新增。</block>
  <block id="0a0aab79fb5a20fa5f830947226ef87c" category="list-text">輸入ONTAP憑證的名稱和組織詳細信息</block>
  <block id="81999e930ad44af27e84682c3ea1e750" category="list-text">選擇上一個步驟中建立的憑證類型。</block>
  <block id="68085bee9e04417d4d9e74101a357a22" category="list-text">在類型詳細資料下，輸入來源和 CVO 叢集、Cloud Central/Manager、AWS 存取/金鑰和 Cloud Central 刷新令牌的使用者名稱和密碼。</block>
  <block id="c4be718383c8ca0aa17633d911fc38fd" category="list-text">點選“儲存”</block>
  <block id="922922f515b0ac072e20128999512b50" category="list-text">為 Oracle 建立憑證（來源）</block>
  <block id="7ebca140d5dcaa006aeda44b19cfc52e" category="list-text">輸入 Oracle 主機的名稱和組織詳細信息</block>
  <block id="9ef3fcc446a5f500717f9b5e9291bce4" category="list-text">選擇機器憑證類型。</block>
  <block id="9fadc5c4eed350a8a1423628227dad59" category="list-text">在類型詳細資料下，輸入 Oracle 主機的使用者名稱和密碼。</block>
  <block id="b4ca3125325138b1dbfc309e6bd67b80" category="list-text">選擇正確的權限提升方法，並輸入使用者名稱和密碼。</block>
  <block id="ca530facf78f2112c60ee838d85b9b5b" category="list-text">為 Oracle 目標建立憑證</block>
  <block id="063e8368b0de123266b00f2c88e317fb" category="list-text">輸入 DR Oracle 主機的名稱和組織詳細信息</block>
  <block id="0d28c8cc8415971cf2cd02507176bf94" category="list-text">在類型詳細資料下，輸入使用者名稱（ec2-user，或如果您已將其從預設設定更改，請輸入該使用者名稱）和 SSH 私鑰</block>
  <block id="cb8f433dfb62a17f7a02f4d7a8839b1c" category="list-text">選擇正確的權限提升方法（sudo），並根據需要輸入使用者名稱和密碼。</block>
  <block id="761c6650d41a55d48a8779f30441d410" category="paragraph">[.underline]*安排二進位和資料庫複製劇本*</block>
  <block id="0676783b7d49061bfb23deb83b2d2f82" category="paragraph">*配置並啟動作業範本。 *</block>
  <block id="2c777d857235f251004d6d8d70c9751d" category="list-text">複製先前建立的作業範本。</block>
  <block id="3624b34cb634949984bcb28c79fd327f" category="list-text">導航至資源 → 範本。</block>
  <block id="1eb977b1f69b531db931e9c62c1a0de9" category="list-text">找到ONTAP/CVO 設定模板，然後在最右側點擊“複製模板”</block>
  <block id="3c96e57d33780bedfb652def025f39de" category="list-text">在複製的模板上按一下編輯模板，並將名稱變更為二進位和資料庫複製劇本。</block>
  <block id="b07fb736e8c17cea7e9e3753e7a67fd1" category="list-text">為範本保留相同的庫存、項目和憑證。</block>
  <block id="f42c6e71dcb07b403b8393d5ab7f7fe4" category="list-text">選擇 ora_replication_cg.yml 作為要執行的劇本。</block>
  <block id="69fa06239fd734936aac1af5250c7f57" category="list-text">變數將保持不變，但需要在變數 dst_cluster_ip 中設定 CVO 叢集 IP。</block>
  <block id="7557bd62e953fb4d48f07977151ea94f" category="list-text">按一下「Save（儲存）」。</block>
  <block id="ec7445bbcbadd1f11fe1bc3e5e56eef9" category="list-text">安排工作範本。</block>
  <block id="ce0d20e65f0354847807516cbcc696f6" category="list-text">按一下二進位和資料庫複製劇本模板，然後按一下頂部選項集中的計劃。</block>
  <block id="d9a6405dc4a6cd71f6d77c749070a5e6" category="list-text">按一下新增，新增二進位和資料庫複製的名稱計劃，選擇小時開始時的開始日期/時間，選擇本地時區和運行頻率。運行頻率將經常更新SnapMirror複製。</block>
  <block id="2dc4dec75c83aeb010419dc2a02da40b" category="admonition">將為日誌卷複製建立單獨的計劃，以便可以更頻繁地進行複製。</block>
  <block id="cc36ca6e0e804cbe384af97fa6777784" category="paragraph">[.underline]*排程日誌複製劇本*</block>
  <block id="2e5aaa84bafa09b7962d4388f8ea75f5" category="paragraph">*配置並啟動作業範本*</block>
  <block id="048f2ee27b8617cb0e13b6a0b7da956f" category="list-text">在複製的模板上按一下編輯模板，並將名稱變更為日誌複製劇本。</block>
  <block id="d4a86123c8e623e35eaa51ab9583e03b" category="list-text">選擇 ora_replication_logs.yml 作為要執行的劇本。</block>
  <block id="d6e504930da1d0732ea4162514a38e8e" category="list-text">按一下「日誌複製手冊」模板，然後按一下頂部選項集中的「計畫」。</block>
  <block id="1c03188c731004905466903c2eb763c4" category="list-text">按一下新增，新增日誌複製的名稱計劃，選擇小時開始時的開始日期/時間，選擇本地時區和運行頻率。運行頻率將經常更新SnapMirror複製。</block>
  <block id="d23bfe090a9fd09613c7a6573f619c02" category="admonition">建議將日誌計畫設定為每小時更新一次，以確保恢復到上次每小時更新。</block>
  <block id="50d33cb309a9ea4bacb0a5541498b670" category="list-text">建立憑證類型。對於涉及ONTAP的解決方案，您必須設定憑證類型以符合使用者名稱和密碼項目。</block>
  <block id="c048e95ab07253cc1cb87bef130c410b" category="list-text">將以下內容貼到 Injector Configuration 中，然後按一下 Save：</block>
  <block id="9302fe5c60a983a24bb8787c00db4862" category="list-text">為ONTAP建立憑證</block>
  <block id="1546222d368538c25b5704b5fcf160f5" category="list-text">在類型詳細資料下，輸入來源叢集和目標叢集的使用者名稱和密碼。</block>
  <block id="39f6f9fe82cbf0c0970d13b6a043ad84" category="list-text">為 Oracle 建立憑證</block>
  <block id="30d4be106e7fb63befec4c8c7c815ad0" category="list-text">輸入 Oracle 的名稱和組織詳細信息</block>
  <block id="61d6c643401e4a602f3c8b4b6fc0a93c" category="list-text">如果需要 dr_oracle 主機的不同憑證，請重複此程序。</block>
  <block id="79e25855a129063cf2ce44e0ab92dbde" category="paragraph">[.underline]* ONTAP和 CVO 設定*</block>
  <block id="b1171f0b44b8d9b11ac555972ebc8c3b" category="list-text">建立作業模板。</block>
  <block id="0fd181172a82ebe5219e9a30e5d97c0d" category="list-text">導覽至資源 → 範本 → 新增，然後按一下新增作業範本。</block>
  <block id="6bc14a28f101e9d80ecc643ef13ef7fb" category="list-text">輸入名稱ONTAP/CVO 設定</block>
  <block id="a7244f663b97629084f004e6c89b4a75" category="list-text">選擇作業類型；運行根據劇本配置系統。</block>
  <block id="daefcb84cec2b58089094a64cefb845f" category="list-text">為劇本選擇相應的庫存、項目、劇本和憑證。</block>
  <block id="57344b3bd58c0e451513e303e45d49b7" category="list-text">為 On-Prem 環境選擇 ontap_setup.yml 劇本，或選擇 cvo_setup.yml 複製到 CVO 實例。</block>
  <block id="ce150ce9cfe145db199958e7cd2ecce0" category="list-text">將從步驟 4 複製的全域變數貼上到 YAML 標籤下的範本變數欄位中。</block>
  <block id="31e2568c13fbdaaad088eb3b665dea9d" category="list-text">啟動作業模板。</block>
  <block id="56ae7378358ba2b1c55c47283f544991" category="list-text">按一下所需的模板，然後按一下啟動。</block>
  <block id="41c1d72990c270d0221458749497c3e6" category="admonition">我們將使用此模板並將其複製出來用於其他劇本。</block>
  <block id="8e43fbf8e210fdbb3e1d59ca59cde628" category="list-text">在複製的範本上按一下“編輯範本”，並將名稱變更為“還原和復原手冊”。</block>
  <block id="42f2159b893bbf4b6bf098ba9a026a1c" category="list-text">選擇 ora_recovery.yml 作為要執行的劇本。</block>
  <block id="0a3fe9b740fe79971ae2379eaec4822c" category="admonition">直到您準備好在遠端站點恢復資料庫時，才會執行此劇本。</block>
  <block id="5bbe8264b4d6c6787657c66d4017c183" category="doc">主機 VARS 配置</block>
  <block id="52320018ddc230fda7bdeccfda8b9f0a" category="doc">去哪裡尋求協助？</block>
  <block id="8a4b419d5126ba3004ad4d071ac8a766" category="list-text">以oracle用戶登入Oracle伺服器，執行以下命令：</block>
  <block id="f673434da0f39c1b4366cbc45f67da8a" category="admonition">如果安裝如預期完成且 Oracle DB 已啟動，這將列出 Oracle 進程</block>
  <block id="38333d478471b938020592b577fc16c2" category="list-text">登入資料庫，檢查資料庫配置設定和使用以下命令集建立的 PDB。</block>
  <block id="83669449150d17df292a91b9fdab8c54" category="paragraph">這證實 dNFS 運作正常。</block>
  <block id="b178089f1eac81c2c81eba2c223e2740" category="list-text">使用下列命令透過監聽器連接到資料庫來檢查 Oracle 監聽器配置。變更為適當的監聽連接埠和資料庫服務名稱。</block>
  <block id="9f4dc1f81d694d1c48953880d5be0ea7" category="paragraph">這證實 Oracle 監聽器正常運作。</block>
  <block id="1b6a5f8b328d3175066895d7ff5ea576" category="inline-link-macro">NetApp解決方案自動化社群支援 Slack 頻道</block>
  <block id="12f178498803c606c23e7166dcefb0cb" category="paragraph">如果您需要工具包的協助，請加入<block ref="f1bb21e2ce6888d898ae31a2098245a1" category="inline-link-macro-rx"></block>並尋找解決方案自動化管道來發布您的問題或詢問。</block>
  <block id="4bea7b97045c9b0e4ce9c8011fb9152f" category="summary">此解決方案提供了基於 Terraform 的自動化工具包，用於配置 FSx ONTAP叢集和 EC2 運算實例</block>
  <block id="40fe82be1dcddf04fa06215186892fca" category="doc">AWS FSx ONTAP叢集和 EC2 執行個體配置</block>
  <block id="1e7007fdca2061f9d6a2ce2a055e96ef" category="paragraph">NetApp解決方案工程團隊</block>
  <block id="eb5fc38b852160a5fb5ad993b7a41efe" category="paragraph">此解決方案提供了基於 Terraform 的自動化工具包，用於配置 FSx ONTAP叢集和 EC2 運算執行個體。</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="section-title">目的</block>
  <block id="e3637f41b7212e1a66abdc03f5c26148" category="paragraph">此工具包可自動執行 AWS FSx ONTAP儲存叢集和 EC2 運算執行個體的設定任務，隨後可用於資料庫部署。</block>
  <block id="e60de72a8067fd05498b03b24d9f93e7" category="paragraph">此解決方案適用於以下用例：</block>
  <block id="03a4416e24ed4a9b0f3d357eb5ee56b6" category="list-text">在預先定義的 VPC 子網路中的 AWS 雲端中配置 EC2 運算實例，並將用於 EC2 執行個體存取的 ssh 金鑰設定為 ec2-user。</block>
  <block id="44188940066649e119396216339b4869" category="list-text">在所需的可用區域中配置 AWS FSx ONTAP儲存集群，並配置儲存 SVM 並設定集群管理員使用者 fsxadmin 密碼。</block>
  <block id="ef1e6887c579ba81dcedc3f4e3793cd2" category="section-title">對象</block>
  <block id="82aa3e78c2089a2941fb745bb8c72f01" category="paragraph">此解決方案適用於以下人群：</block>
  <block id="8c695812e6b1d0da09e4112dcc98afd8" category="list-text">在 AWS EC2 環境中管理資料庫的 DBA。</block>
  <block id="db0b5d976134ac432c6b546956e1fc38" category="list-text">對 AWS EC2 生態系統中的資料庫部署有興趣的資料庫解決方案架構師。</block>
  <block id="15c649f61e0d97ef85f0d2d224019197" category="list-text">管理支援資料庫的 AWS FSx ONTAP儲存的儲存管理員。</block>
  <block id="bb09d79b045e0d8930bca68ba2651754" category="list-text">喜歡在 AWS EC2 生態系統中建立資料庫的應用程式擁有者。</block>
  <block id="794df3791a8c800841516007427a2aa3" category="section-title">執照</block>
  <block id="0baa4333d01c4608c10c4852824e68ad" category="inline-link-macro">許可證文件</block>
  <block id="0407397c670512dcadbf77a1ee9efa74" category="paragraph">透過存取、下載、安裝或使用此 GitHub 儲存庫中的內容，您同意<block ref="b109f24efb5af51bee6ff86849dfd222" category="inline-link-macro-rx"></block>。</block>
  <block id="eaec65e969505bc6e2570f344e081174" category="admonition">製作和/或分享此 GitHub 儲存庫中內容的任何衍生作品都受到某些限制。請確保在使用該內容之前閱讀許可條款。如果您不同意所有條款，請不要存取、下載或使用此儲存庫中的內容。</block>
  <block id="77e4d80ae2f4257081e17476b146608a" category="section-title">解決方案部署</block>
  <block id="782bd8949cb40c80fd3f3126eccab35a" category="section-title">部署先決條件</block>
  <block id="fd10b9eacfe4eed8040bda8cae9ea050" category="paragraph">部署需要以下先決條件。</block>
  <block id="fae7cbbd0ae5df13f97c6dfeea641d7c" category="section-title">下載工具包</block>
  <block id="27fdb8c570948be4eb4398435585214b" category="section-title">連線和身份驗證</block>
  <block id="c69ff338618074e4998292b223cb19e5" category="paragraph">該工具包應該從 AWS 雲殼執行。  AWS 雲殼是基於瀏覽器的殼，可以輕鬆安全地管理、探索和與 AWS 資源互動。 CloudShell 已使用您的控制台憑證進行預先驗證。常用的開發和操作工具已預先安裝，因此無需本地安裝或配置。</block>
  <block id="0669fa7d1422db0d2c494b9d3a9ff1fe" category="section-title">Terraform provider.tf 和 main.tf 檔案配置</block>
  <block id="08fcc92ec353c4f98b1154a2f8544890" category="paragraph">provider.tf 定義 Terraform 透過 API 呼叫提供資源的提供者。 main.tf 定義了要設定的資源和資源的屬性。以下是一些詳細資訊：</block>
  <block id="67761b4e694cd5f5a45c4ed0cc314099" category="section-title">Terraform Variables.tf 和 terraform.tfvars 配置</block>
  <block id="fd5f90c196b871dc50ecaf85f49b1656" category="paragraph">Variables.tf 宣告了在 main.tf 中要使用的變數。 terraform.tfvars 包含變數的實際值。以下是一些範例：</block>
  <block id="7215ebabbf870f26836f50f66cc5b6fd" category="section-title">逐步程序 - 按順序執行</block>
  <block id="43c9b395c61de869dc87f1da35eed2e4" category="list-text">在 AWS 雲殼中安裝 Terraform。</block>
  <block id="fc3090054fced18dc06b7eb57b234758" category="list-text">從NetApp GitHub 公共網站下載工具包</block>
  <block id="a9c7e2c70153c59e87147abf329cbb29" category="list-text">運行 init 來初始化 terraform</block>
  <block id="3165803a1a69113b1f417123a736b5ac" category="list-text">輸出執行計劃</block>
  <block id="fbe54173b4068c6e761f53f237a17b68" category="list-text">應用執行計劃</block>
  <block id="17f070e48ce0935f57d600652c3c8f21" category="list-text">完成後執行 destroy 以刪除資源</block>
  <block id="4bb047f8c530785002e490ef17fa725e" category="section-title">在哪裡可以找到更多信息</block>
  <block id="a6530f7b86636a9b3f5ae396fad90aca" category="inline-link-macro">NetApp解決方案自動化^</block>
  <block id="5824e315907398c1aa7941abbed12132" category="paragraph">要了解有關NetApp解決方案自動化的更多信息，請訪問以下網站<block ref="230dfc589866e347afe497262b15904b" category="inline-link-macro-rx"></block></block>
  <block id="7e68fdcdfd32073adeaee9e4bd613f62" category="summary">該解決方案提供了在 Microsoft Azure NetApp Files中自動部署 Oracle 的概述和詳細信息，該部署作為具有 NFS 協議的主資料庫存儲，並且 Oracle 資料庫部署為啟用 dNFS 的容器資料庫。</block>
  <block id="e1655476f44fb9ae3929b4294709cd58" category="doc">TR-4987：使用 NFS 在Azure NetApp Files上簡化、自動化 Oracle 部署</block>
  <block id="7e6f7643afec42d9c47efa933debef3e" category="paragraph">Allen Cao、Niyaz Mohamed， NetApp</block>
  <block id="0f2184f93ef197858e7e8ff357370b7c" category="paragraph">該解決方案提供了在 Microsoft Azure NetApp Files中自動部署 Oracle 的概述和詳細信息，該部署作為具有 NFS 協議的主資料庫存儲，並且 Oracle 資料庫部署為啟用 dNFS 的容器資料庫。</block>
  <block id="9dba703b69ec43e6d3b93ebe9143b7bc" category="paragraph">在雲端中運行效能密集且延遲敏感的 Oracle 工作負載可能具有挑戰性。  Azure NetApp Files (ANF) 讓企業業務線 (LOB) 和儲存專業人員可以輕鬆遷移和執行要求嚴苛的 Oracle 工作負載，而無需更改程式碼。  Azure NetApp Files被廣泛用作各種場景中的底層共用檔案儲存服務，例如 Oracle 資料庫的新部署或從本機到 Azure 的遷移（提升和轉移）。</block>
  <block id="71dc864bb8cdf05644d9a323eb255160" category="paragraph">本文檔示範了使用 Ansible 自動化透過 NFS 掛載在 Azure NetApp檔案中簡化 Oracle 資料庫的部署。 Oracle 資料庫部署在容器資料庫 (CDB) 和可插拔資料庫 (PDB) 配置中，並啟用 Oracle dNFS 協定以提高效能。此外，可以使用自動化 PDB 遷移方法將本機 Oracle 單一執行個體資料庫或 PDB 遷移到 Azure 中新部署的容器資料庫中，同時最大程度地減少服務中斷。它還提供有關使用 Azure Cloud 中的NetApp SnapCenter UI 工具快速備份、還原和克隆 Oracle 資料庫的資訊。</block>
  <block id="5ddba5a30df05b067a7f1c29425f8ebe" category="list-text">Azure NetApp檔案上的自動 Oracle 容器資料庫部署</block>
  <block id="48c81fe5bacafca589a05c9d8b99cea6" category="list-text">本地端和 Azure 雲端之間的自動 Oracle 資料庫遷移</block>
  <block id="8d80eec422e5f3f1e3a978925d495397" category="list-text">想要在Azure NetApp Files上部署 Oracle 的 DBA。</block>
  <block id="3f13d9adda12e73807626015fc986092" category="list-text">想要在Azure NetApp Files上測試 Oracle 工作負載的資料庫解決方案架構師。</block>
  <block id="7bbba384efcd8c1f1760837638bad8f5" category="list-text">想要在Azure NetApp Files上部署和管理 Oracle 資料庫的儲存管理員。</block>
  <block id="39ab0d44839c151a3d462df3c663cbfa" category="list-text">希望在Azure NetApp Files上建立 Oracle 資料庫的應用程式擁有者。</block>
  <block id="d17a638ff086388dc5bfbe98528ccfab" category="section-title">解決方案測試和驗證環境</block>
  <block id="5d864181a518d8551d707a300d1fdaa0" category="paragraph">此解決方案的測試和驗證是在實驗室環境中進行的，可能與最終部署環境不符。請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block>了解更多。</block>
  <block id="2d242bb36ec91b32005f9296ff03a912" category="section-title">架構</block>
  <block id="60eafe38e4de145948f4622ffcf3fecf" category="inline-image-macro">此圖提供了具有 iSCSI 和 ASM 的 AWS 公有雲中的 Oracle 部署配置的詳細圖片。</block>
  <block id="536da40446e056455d54a3850ad13053" category="paragraph"><block ref="536da40446e056455d54a3850ad13053" category="inline-image-macro-rx" type="image"></block></block>
  <block id="34d0b9b49aa480630e91a3619ba7ffb2" category="section-title">硬體和軟體組件</block>
  <block id="958c530ea1ae0e18b942f8784148734c" category="cell">*硬體*</block>
  <block id="7450cfde7058dc5e1f7909d0280fd7ae" category="cell">Azure NetApp Files</block>
  <block id="e334cd79329c228cad2c140c5b8d1466" category="cell">Microsoft 目前在 Azure 中提供的產品</block>
  <block id="6c17db0cce1350a7ee8a752f7b961575" category="cell">一個具有高級服務等級的容量池</block>
  <block id="337f2d0a9780863bf956cbd164244280" category="cell">用於資料庫伺服器的 Azure VM</block>
  <block id="1ddc8f4b0d860fd1b7f66f65f3a2a4ff" category="cell">Standard_B4ms - 4 個 vCPU，16GiB</block>
  <block id="4624ccb0e1c638f541fe98d0cb590fc4" category="cell">兩個 Linux 虛擬機器實例用於並發部署</block>
  <block id="c79e7f0c663764033ed88cf88db55c30" category="cell">用於SnapCenter的 Azure VM</block>
  <block id="5e29f32e9b6ef61ba5af29f3ff8d79ec" category="cell">一個 Windows 虛擬機器實例</block>
  <block id="7eef23b11d6e87eee968a9bef33fd707" category="cell">*軟體*</block>
  <block id="8b56d55f3caeb71ab2513c28fb1a52fc" category="cell">紅帽Linux</block>
  <block id="582dc61cba794b1ebaa0f1d5a0ab6fd5" category="cell">RHEL Linux 8.6（LVM）-x64 Gen2</block>
  <block id="fe6120dacb84838d71b1f43da1a3a514" category="cell">部署 RedHat 訂閱進行測試</block>
  <block id="95a90af1d5b68afaa24b9f917e25e4ec" category="cell">Windows 伺服器</block>
  <block id="c030b053d2fcc613e72470b248119720" category="cell">2022 資料中心；Azure 版本熱補丁 - x64 Gen2</block>
  <block id="815500b6cb0b06f1db60bc89ea48ae53" category="cell">託管SnapCenter伺服器</block>
  <block id="c30dd1a85cf86d95b11c1a08f70130ce" category="cell">Oracle 資料庫</block>
  <block id="8cbabca4a2c1b4268e8c216b1710182d" category="cell">版本 19.18</block>
  <block id="a7c40910ade029baa6baa8b8e613db65" category="cell">已套用RU補丁p34765931_190000_Linux-x86-64.zip</block>
  <block id="a8b401bad03767cc28230a30d6556c5b" category="cell">Oracle OPatch</block>
  <block id="cc61533b1a42263eaadfd935441bb4b5" category="cell">版本 12.2.0.1.36</block>
  <block id="8091f15fd8b9f1a609b3a98e8bcdda81" category="cell">最新補丁 p6880880_190000_Linux-x86-64.zip</block>
  <block id="f709ed2f05802131924f53cb483d0216" category="cell">SnapCenter伺服器</block>
  <block id="738e4f16a24a9e74c1f67ae2e7c02f3b" category="cell">版本 5.0</block>
  <block id="72867dcacfff3a93a471e5f8c9489599" category="cell">工作小組部署</block>
  <block id="8ae78dca8fef9243be9f1089e2a97fb7" category="cell">開啟 JDK</block>
  <block id="16e4f0fa15c5763a8b46a7276d96cf1c" category="cell">版本 java-11-openjdk</block>
  <block id="3782cc74a007a1871c7229f0fc16f9f4" category="cell">資料庫虛擬機器上的SnapCenter插件要求</block>
  <block id="1d1a594959ec615f56516f5d0f5e8ddb" category="cell">NFS</block>
  <block id="46b9839969e4bc429da9cc245c756450" category="cell">版本 3.0</block>
  <block id="bed44da4616a4ffa447c183fb1c3ca09" category="cell">已啟用 Oracle dNFS</block>
  <block id="d51d5ee15f404c2f4f7863bebcde1fac" category="cell">Ansible</block>
  <block id="a033248533a019132f66d63d159e9310" category="cell">核心 2.16.2</block>
  <block id="fc70b7599e5ae1b544d73cf02fccc91a" category="cell">Python 3.6.8</block>
  <block id="696ee8cdabfa8fdd24a026188354d0b7" category="section-title">實驗室環境中的 Oracle 資料庫配置</block>
  <block id="40142fee915d9c636c34c1581018dfaa" category="cell">*伺服器*</block>
  <block id="7a8d3dc7f0e719542e9e706dbca4f3ec" category="cell">*資料庫*</block>
  <block id="0086e85e653acc061fd4d7315e2fa26d" category="cell">*資料庫儲存*</block>
  <block id="f1fc3d8c09aa84e7962b7352b4ff77d0" category="cell">ora-01</block>
  <block id="96767712a689a097a11e94abd86cc050" category="cell">NTAP1(NTAP1_PDB1、NTAP1_PDB2、NTAP1_PDB3)</block>
  <block id="45e595507a12edb8eba89711f9a72814" category="cell">/u01、/u02、/u03 在 ANF 容量池上掛載 NFS</block>
  <block id="40a01cd2d5c81f8bbe1ed2d28d4cafaa" category="cell">ora-02</block>
  <block id="46be4f57ab41b19252133f7da26ea98c" category="cell">NTAP2(NTAP2_PDB1、NTAP2_PDB2、NTAP2_PDB3)</block>
  <block id="cd1aedf83959dd52fc058b9120f500e3" category="section-title">部署考慮的關鍵因素</block>
  <block id="71f5cff1bdc5f944cf1edf33ff9e411f" category="list-text">Oracle 資料庫儲存佈局。在此自動化 Oracle 部署中，我們預設為每個資料庫配置三個資料庫磁碟區來託管 Oracle 二進位檔案、資料和日誌。這些磁碟區透過 NFS 安裝在 Oracle DB 伺服器上，作為 /u01 - 二進位、/u02 - 資料、/u03 - 日誌。在 /u02 和 /u03 掛載點上配置雙控製檔以實現冗餘。</block>
  <block id="755e2a8326e346588d02e48b85b044a5" category="list-text">*多個資料庫伺服器部署。 *自動化解決方案可以在單一 Ansible 劇本運行中將 Oracle 容器資料庫部署到多個 DB 伺服器。無論資料庫伺服器的數量有多少，劇本的執行都保持不變。您可以透過使用不同的資料庫執行個體 ID（Oracle SID）重複部署將多個容器資料庫部署到單一 VM 執行個體。但要確保主機上有足夠的記憶體來支援部署的資料庫。</block>
  <block id="d15b8c5aac4428cb7f6506c56eb633f5" category="list-text">*dNFS 配置。 *透過使用 dNFS（自 Oracle 11g 起可用），在 Azure 虛擬機器上執行的 Oracle 資料庫可以比本機 NFS 用戶端驅動更多的 I/O。自動化 Oracle 部署預設在 NFSv3 上配置 dNFS。</block>
  <block id="d37225cccdfda955e0eb0ba299e4abd9" category="list-text">*分配大尺寸卷以加快部署速度。 * ANF 檔案系統 IO 吞吐量根據磁碟區的大小進行調整。對於初始部署，分配大尺寸磁碟區可以加快部署速度。隨後可以動態縮小磁碟區的大小，而不會對應用程式產生影響。</block>
  <block id="e1d479f830dc9bfc4ed574a1c8cc0c98" category="list-text">*資料庫備份。 *  NetApp提供了SnapCenter software套件，用於資料庫備份、復原和克隆，並具有使用者友好的 UI 介面。  NetApp建議實施這樣的管理工具，以實現快速（一分鐘內）快照備份、快速（幾分鐘內）資料庫復原和資料庫複製。</block>
  <block id="2853404fffac22cebc324f82a3f1a9fe" category="paragraph">以下部分提供了在Azure NetApp Files上自動部署 Oracle 19c 和資料庫遷移的逐步過程，其中資料庫磁碟區透過 NFS 直接裝載到 Azure VM。</block>
  <block id="cefb723f87cc807402d8139074dd7ba2" category="list-text">已設定 Azure 帳戶，並在您的 Azure 帳戶內建立了必要的 VNet 和網路區段。</block>
  <block id="a73e5c65844b18c49122a8a79ef3fa65" category="inline-link-macro">Azure VM 和Azure NetApp Files上的逐步 Oracle 部署流程</block>
  <block id="9531533fef6109e5980a624b8d961d56" category="list-text">從 Azure 雲端門戶，將 Azure Linux VM 部署為 Oracle DB 伺服器。為 Oracle 資料庫建立Azure NetApp Files容量池和資料庫磁碟區。為 azureuser 到 DB 伺服器啟用 VM SSH 私鑰/公鑰身份驗證。有關環境設定的詳細信息，請參閱上一節中的架構圖。也提到<block ref="e7ca3adb4ee235aaa10f6530a8b9fdf7" category="inline-link-macro-rx"></block>了解詳細資訊。</block>
  <block id="07f21d2d04d4d0605607368462f37f38" category="admonition">對於使用本機磁碟冗餘部署的 Azure VM，請確保在 VM 根磁碟中指派至少 128G，以便有足夠的空間來暫存 Oracle 安裝檔案並新增 OS 交換檔。相應地擴展 /tmplv 和 /rootlv OS 分區。如果rootvg-homelv的可用空間小於1G，則新增1G的可用空間。確保資料庫磁碟區命名遵循 VMname-u01、VMname-u02 和 VMname-u03 約定。</block>
  <block id="d39d360863f3fda3c5d615dc978e14ae" category="inline-link-macro">安裝SnapCenter伺服器</block>
  <block id="958a975d9bb698c899681bd5b20130f9" category="list-text">從 Azure 雲端入口網站設定 Windows 伺服器以執行最新版本的NetApp SnapCenter UI 工具。詳細資訊請參考以下連結：<block ref="131e9eb1b10c693e5b08c2ea655bbc23" category="inline-link-macro-rx"></block></block>
  <block id="0aff1c6d7de090edcae9c8e75a60de2a" category="inline-link-macro">NetApp解決方案自動化入門^</block>
  <block id="e591b534830a9addfae6ff00f86de3d5" category="list-text">將 Linux VM 配置為 Ansible 控制器節點，並安裝最新版本的 Ansible 和 Git。詳細資訊請參考以下連結：<block ref="5611d9cfd1946804a6fc54c4e7defca3" category="inline-link-macro-rx"></block>在第 -<block ref="3d45b043c5518eca1e47fb4ba8a813da" prefix=" " category="inline-code"></block>或者<block ref="2afb5cc3404c6c8162722fd41895c2de" prefix=" " category="inline-code"></block>。</block>
  <block id="a219cd1e2fd41772e39373e9c510f73b" category="admonition">Ansible 控制器節點可以位於本機或 Azure 雲端中，只要它可以透過 ssh 連接埠存取 Azure DB VM。</block>
  <block id="1bd19d215e29e048034930d3b3953ef8" category="list-text">克隆適用於 NFS 的NetApp Oracle 部署自動化工具包的副本。</block>
  <block id="d15efb03f8ec068e9d6d6926f079f1b3" category="list-text">在 Azure DB VM /tmp/archive 目錄上以 777 權限執行下列 Oracle 19c 安裝檔案階段。</block>
  <block id="c7cce81dff9cf2d89de25a04e65022ff" category="list-text">觀看以下影片：</block>
  <block id="5fb0031d6dfea0b65cedbf5ef342e74c" category="video-title">使用 NFS 在Azure NetApp Files上簡化和自動化 Oracle 部署</block>
  <block id="0d7d691fad590aa9a630443ea67bd9e3" category="section-title">自動化參數文件</block>
  <block id="fba0c848a47cb6bb0240eff0160df8c6" category="paragraph">Ansible playbook 使用預先定義參數執行資料庫安裝和設定任務。對於此 Oracle 自動化解決方案，有三個使用者定義的參數檔案需要在劇本執行之前使用者輸入。</block>
  <block id="855c2f749e58e35ceee58f4017dc530f" category="list-text">主機 - 定義自動化劇本運作的目標。</block>
  <block id="6f45aa108f0f48a8f2287aacfb4783b0" category="list-text">vars/vars.yml - 定義適用於所有目標的變數的全域變數檔案。</block>
  <block id="b8e52c009307e1df8a80bbea8f5176d9" category="list-text">host_vars/host_name.yml - 定義僅適用於命名目標的變數的本機變數檔案。在我們的用例中，這些是 Oracle DB 伺服器。</block>
  <block id="0e67f9b1dd3b15c078e6f2a316790949" category="paragraph">除了這些使用者定義的變數文件之外，還有幾個預設變數文件，其中包含預設參數，除非必要，否則不需要更改。以下部分介紹如何設定使用者定義的變數檔。</block>
  <block id="20cc11da843aa0ce89fbbd78488ae8e4" category="section-title">參數檔案配置</block>
  <block id="d54f40d7ab3c0634ad1696cedcc056e5" category="list-text">Ansible 目標<block ref="85cf4e6d42a71e693fd780c8b29accdd" prefix=" " category="inline-code"></block>文件配置：</block>
  <block id="5a4926a405d0ccf33e709fb7c676de97" category="list-text">全球的<block ref="014d194d817c312b5ce910e74b4d3836" prefix=" " category="inline-code"></block>文件配置</block>
  <block id="1a759fef0c9f698bb151c9b107a2fb30" category="list-text">本地資料庫伺服器<block ref="0c83664bfb17d8d2c0bbc3551297e488" prefix=" " category="inline-code"></block>配置如ora_01.yml，ora_02.yml...</block>
  <block id="3fde1508528c4b7e4e8ed67ccec6aa4a" category="section-title">劇本執行</block>
  <block id="14d9db80ea19110225e53e6d5acbfd0a" category="paragraph">自動化工具包中共有五個劇本。每個執行不同的任務區塊並服務於不同的目的。</block>
  <block id="23dd50b88058bb1b19714aa9e0075a39" category="paragraph">有三個選項可以使用以下命令運行劇本。</block>
  <block id="0950679600889e0ecb0fcb4adff23fd9" category="list-text">在一次組合運行中執行所有部署劇本。</block>
  <block id="349525a68f403cd1f88f72915b15991b" category="list-text">依照 1-4 的數字序列逐一執行劇本。</block>
  <block id="084e0a87eeeb8271a247c015eee77631" category="list-text">使用標籤執行 0-all_playbook.yml。</block>
  <block id="a9b2ae37ad24a5f409f16a4e39642547" category="list-text">撤銷環境</block>
  <block id="ea74dbc6158f42a810daaf43cd099b11" category="section-title">執行後驗證</block>
  <block id="3ecdefb0fe9b92fb5dada4a1b9246b77" category="paragraph">劇本運行後，登入 Oracle DB 伺服器 VM 以驗證 Oracle 是否已安裝和配置，以及是否已成功建立容器資料庫。以下是主機 ora-01 上的 Oracle 資料庫驗證的範例。</block>
  <block id="3eb5235599c703aade8d4a3ae8a6c244" category="list-text">驗證 NFS 掛載</block>
  <block id="aabe8782eb2ec64b895e31945ebe1e42" category="list-text">驗證 Oracle 偵聽器</block>
  <block id="39182d8bb094516788625069e7ecaf1d" category="list-text">驗證 Oracle 資料庫和 dNFS</block>
  <block id="04bd1d337fb9a151a616cc5294c0c92a" category="list-text">登入 Oracle Enterprise Manager Express 來驗證資料庫。</block>
  <block id="5c77c055267014cd170539e91c06519a" category="inline-image-macro">此映像提供 Oracle Enterprise Manager Express 的登入畫面</block>
  <block id="85ebbf6138572e940325e081dbbe45e6" category="inline-image-macro">此映像提供了 Oracle Enterprise Manager Express 的容器資料庫視圖</block>
  <block id="93e9015bbb23f8ac1dec4f2da478a5af" category="paragraph"><block ref="b500a0bc379f39e074bf4ed98e1ebd04" category="inline-image-macro-rx" type="image"></block> <block ref="8c7e4d6669b30ed5716e92fd32bc5fbf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3a9e92fed2a83eee60f3bac7ce51cbed" category="section-title">將 Oracle 資料庫遷移到 AzureMigrate Oracle database to Azure</block>
  <block id="3b99478aefcc6039ddcb29f19ce3f1ee" category="inline-link-macro">資料庫從本地遷移到 Azure 雲端</block>
  <block id="b7a4b3dc8366c7906ed251b94c62061b" category="paragraph">Oracle 資料庫從本機遷移到雲端是一項繁重的工作。使用正確的策略和自動化可以使流程更加順暢，並最大限度地減少服務中斷和停機時間。按照這個詳細的說明操作<block ref="f0df0b80af17528fa6d4c24c3c88e033" category="inline-link-macro-rx"></block>指導您的資料庫遷移之旅。</block>
  <block id="d372b360dda93a1ed98b047b474a8d14" category="section-title">使用SnapCenter進行 Oracle 備份、復原和克隆</block>
  <block id="7d5231eeeadfe71a5efcd24a1d5e0be9" category="inline-link-macro">使用SnapCenter在 ANF 上進行 Oracle 資料庫備份、復原和克隆</block>
  <block id="734e4448a9c61098f93b9002833a2d03" category="paragraph">NetApp建議使用SnapCenter UI 工具來管理部署在 Azure 雲端的 Oracle 資料庫。請參考TR-4988：<block ref="807c75daf7e90625495755e44a290bc1" category="inline-link-macro-rx"></block>了解詳情。</block>
  <block id="aa5a3d07c03024007dadc921fdbe67cb" category="paragraph">要了解有關本文檔中描述的信息的更多信息，請查看以下文檔和/或網站：</block>
  <block id="807c75daf7e90625495755e44a290bc1" category="paragraph"><block ref="807c75daf7e90625495755e44a290bc1" category="inline-link-macro-rx"></block></block>
  <block id="855ff2118de8410b364ef10dd2bb08cf" category="inline-link-macro"><block ref="855ff2118de8410b364ef10dd2bb08cf" category="inline-link-rx"></block></block>
  <block id="cbadf086d67897b3b1aaeecf728b288c" category="paragraph"><block ref="cbadf086d67897b3b1aaeecf728b288c" category="inline-link-macro-rx"></block></block>
  <block id="03b3d2a7a581e28eade41b2069651904" category="list-text">部署 Oracle Direct NFS</block>
  <block id="54d61c6a6d7438a74568da42787fa14b" category="inline-link-macro"><block ref="54d61c6a6d7438a74568da42787fa14b" category="inline-link-rx"></block></block>
  <block id="a31fb0666cfd1ef716527d49b2f71a7a" category="paragraph"><block ref="a31fb0666cfd1ef716527d49b2f71a7a" category="inline-link-macro-rx"></block></block>
  <block id="8ae84196c6f373ef488c40b0b95e030d" category="list-text">使用回應檔案安裝和配置 Oracle 資料庫</block>
  <block id="ee622e67d0075e37fff43bbf337e98b2" category="inline-link-macro"><block ref="ee622e67d0075e37fff43bbf337e98b2" category="inline-link-rx"></block></block>
  <block id="2d94d091f5afb89e4f1aab002cef14a3" category="paragraph"><block ref="2d94d091f5afb89e4f1aab002cef14a3" category="inline-link-macro-rx"></block></block>
  <block id="6fe128158b3a49eb57fa5fd65f346285" category="summary">該解決方案提供了在NetApp ASA陣列中自動部署和保護 Oracle 的概述和詳細信息，該陣列作為使用 iSCSI 協議的主數據庫存儲，並在獨立 ReStart 中使用 asm 作為捲管理器配置 Oracle 數據庫。</block>
  <block id="9f46a807ff699639e2cc7823e6e6af0c" category="doc">TR-4983：在NetApp ASA上使用 iSCSI 實現簡化、自動化的 Oracle 部署</block>
  <block id="bb58ec8ec1fa1b1ed0aed48ba069b683" category="paragraph">該解決方案提供了在NetApp ASA陣列中自動部署和保護 Oracle 的概述和詳細信息，該陣列作為使用 iSCSI 協議的主數據庫存儲，並在獨立 ReStart 中使用 asm 作為捲管理器配置 Oracle 數據庫。</block>
  <block id="81874fefb73d3377cc2035212ff1140d" category="paragraph">NetApp ASA系統為您的 SAN 基礎架構提供現代化解決方案。它們可以大規模簡化並使您能夠加速業務關鍵型應用程式（如資料庫），確保您的資料始終可用（99.9999％的正常運行時間），並降低 TCO 和碳足跡。  NetApp ASA系統包括專為效能要求最高的應用程式設計的 A 系列型號和針對經濟高效、大容量部署進行最佳化的 C 系列型號。  ASA A 系列和 C 系列系統共同提供卓越的效能，以改善客戶體驗並縮短獲得結果的時間，保持關鍵業務資料的可用性、受保護性和安全性，並為任何工作負載提供更有效的容量，並以業界最有效的保證為後盾。</block>
  <block id="57ae91c192e5448dfd58b60a55eaa521" category="paragraph">本文檔示範了使用 Ansible 自動化在ASA系統建置的 SAN 環境中簡化 Oracle 資料庫的部署。 Oracle 資料庫部署在獨立的 ReStart 配置中，使用 iSCSI 協定進行資料訪問，並使用 Oracle ASM 進行ASA儲存陣列上的資料庫磁碟管理。它還提供有關使用NetApp SnapCenter UI 工具備份、恢復和克隆 Oracle 資料庫的信息，以便在NetApp ASA系統中實現高效的儲存資料庫操作。</block>
  <block id="5e1389ae5f652921b9ffd76077a35898" category="list-text">在NetApp ASA系統中自動部署 Oracle 資料庫作為主資料庫存儲</block>
  <block id="2904575eaf0239e26839c87b5886427e" category="list-text">使用NetApp SnapCenter工具在NetApp ASA系統中備份和還原 Oracle 資料庫</block>
  <block id="c9a02887c464e3024b4e7b8853bd3731" category="list-text">使用NetApp SnapCenter工具在NetApp ASA系統中克隆 Oracle 資料庫以用於開發/測試或其他用例</block>
  <block id="475d53db06ccc49c194cd167ad6b6a7c" category="list-text">一位想要在NetApp ASA系統中部署 Oracle 的 DBA。</block>
  <block id="489fc03d48bb97d0eaaf947d524863e3" category="list-text">一位資料庫解決方案架構師想要在NetApp ASA系統中測試 Oracle 工作負載。</block>
  <block id="48b96d37ce8b7763e19ce55ff6b38bbc" category="list-text">一位儲存管理員想要在NetApp ASA系統上部署和管理 Oracle 資料庫。</block>
  <block id="4d9a01e17799c2443651952a5571e588" category="list-text">希望在NetApp ASA系統中建立 Oracle 資料庫的應用程式擁有者。</block>
  <block id="f8554b7127d48d5c30c710f4cca8e8d0" category="inline-image-macro">此圖提供了具有 iSCSI 和 ASM 的NetApp ASA系統中的 Oracle 部署配置的詳細圖片。</block>
  <block id="34f97fc8ba58a36a772e7d66c79328b2" category="paragraph"><block ref="34f97fc8ba58a36a772e7d66c79328b2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="50ca835c71c489ce33e359fe138d33a1" category="cell">NetApp ASA A400</block>
  <block id="4fec937db99b8a74dd5bef9285d0e4c0" category="cell">版本 9.13.1P1</block>
  <block id="37f8b8f146367f24cfb85a152645d03f" category="cell">2 個 NS224 磁碟架、48 個 NVMe AFF驅動器，總容量為 69.3 TiB</block>
  <block id="9c08b0397caf8f25e294bcbc2a0e51e0" category="cell">UCSB-B200-M4</block>
  <block id="e2ff57aae17fb4ecdf52974845c54701" category="cell">英特爾® 至強® CPU E5-2690 v4 @ 2.60GHz</block>
  <block id="c491601abe9558a73f61ab26d912bb5f" category="cell">4節點VMware ESXi集群</block>
  <block id="1c212a485e9ad2c1762d607a18b009c7" category="cell">RHEL-8.6，4.18.0-372.9.1.el8.x86_64 內核</block>
  <block id="42d321198a77603330bc430ffb26bda9" category="cell">2022 標準版，10.0.20348 內部版本 20348</block>
  <block id="357401b243915afd7226703258f54f69" category="cell">Oracle 網格基礎架構</block>
  <block id="4cd47afc935feac95110477afb324f6f" category="cell">已套用RU補丁p34762026_190000_Linux-x86-64.zip</block>
  <block id="53a1507a1f45d24e7525d19279ab1ce7" category="cell">版本 4.9P1</block>
  <block id="f53b4e7c2027602d331a4c185b942cc0" category="cell">VMware vSphere 虛擬機器管理程序</block>
  <block id="1b0ad5208e7d764ed80119ac20af542d" category="cell">版本 6.5.0.20000</block>
  <block id="128d81403c72151caa28f9cb8909d048" category="cell">VMware Tools，版本：11365 - Linux，12352 - Windows</block>
  <block id="3848bc77489b71d744f003ab713f7429" category="cell">版本 java-1.8.0-openjdk.x86_64</block>
  <block id="460dc55b5ffb0266f2c889b06ee73344" category="cell">ora_01</block>
  <block id="4fb5214b8185c21390fdea76917c92a6" category="cell">ASA A400上的 iSCSI LUN</block>
  <block id="57fd581683176a30051cde40522ddce1" category="cell">ora_02</block>
  <block id="b0398625aacfb5d5b9822b7812c9b00b" category="list-text">Oracle 資料庫儲存佈局。在此自動化 Oracle 部署中，我們預設配置四個資料庫磁碟區來託管 Oracle 二進位檔案、資料和日誌。然後，我們從資料和日誌 LUN 建立兩個 ASM 磁碟組。在 +DATA asm 磁碟組中，我們在每個ASA A400叢集節點上的磁碟區中配置兩個資料 lun。在 +LOGS asm 磁碟組中，我們在單一ASA A400節點上的日誌磁碟區中建立兩個 lun。  ONTAP磁碟區內佈局的多個 LUN 通常可提供更好的效能。</block>
  <block id="0d4f29ed9e7a7e62ee7c1007f59cf4fd" category="list-text">*多個資料庫伺服器部署。 *自動化解決方案可以在單一 Ansible 劇本運行中將 Oracle 容器資料庫部署到多個 DB 伺服器。無論資料庫伺服器的數量有多少，劇本的執行都保持不變。如果發生多資料庫伺服器部署，劇本將使用演算法構建，以最佳方式將資料庫 LUN 放置在ASA A400的雙控制器上。伺服器主機索引中奇數 DB 伺服器的二進位檔案和日誌 lun 位於控制器 1 上。伺服器主機索引中偶數 DB 伺服器的二進位檔案和日誌 lun 位於控制器 2 上。  DB資料lun均勻分佈到兩個控制器上。  Oracle ASM 將兩個控制器上的資料 LUN 合併為一個 ASM 磁碟組，以充分利用兩個控制器的處理能力。</block>
  <block id="d736c1553b176f562bec3a52c7666a46" category="list-text">iSCSI 配置。資料庫虛擬機器透過 iSCSI 協定連接到ASA儲存以進行儲存存取。您應該在每個控制器節點上配置雙路徑以實現冗餘，並在 DB 伺服器上設定 iSCSI 多路徑以實現多路徑儲存存取。在儲存網路上啟用巨型幀以最大化效能和吞吐量。</block>
  <block id="324218b4c8087f7e5c5645ab81e7e37f" category="list-text">*您建立的每個 Oracle ASM 磁碟組所使用的 Oracle ASM 冗餘等級。 *由於ASA A400在RAID DP中配置儲存以在叢集磁碟層級進行資料保護，因此您應該使用<block ref="1f9ad4982cbae9fb459c61ba4e63bac9" prefix=" " category="inline-code"></block>，這表示該選項不允許 Oracle ASM 鏡像磁碟組的內容。</block>
  <block id="5b9eec312e4891b17065381671c7234b" category="list-text">*資料庫備份。 *  NetApp提供了SnapCenter software套件，用於資料庫備份、復原和克隆，並具有使用者友好的 UI 介面。  NetApp建議實施這樣的管理工具，以實現快速（一分鐘內）的 SnapShot 備份、快速（幾分鐘內）的資料庫復原和資料庫複製。</block>
  <block id="e75571d5f211bacdfc757d78a94b1174" category="paragraph">以下部分提供了在NetApp ASA A400中自動部署和保護 Oracle 19c 的逐步流程，其中透過 iSCSI 將資料庫 lun 直接安裝到單節點重新啟動配置中的 DB VM，並使用 Oracle ASM 作為資料庫磁碟區管理器。</block>
  <block id="2b6209b8cfa6394be638dd05678f5955" category="inline-link-macro">詳細指南 - ASA A400</block>
  <block id="31204f552767acd2692e7c823fa43de2" category="list-text">假設已經安裝並設定了NetApp ASA儲存陣列。這包括 iSCSI 廣播網域、兩個控制器節點上的 LACP 介面組 a0a、兩個控制器節點上的 iSCSI VLAN 連接埠（a0a-&lt;iscsi-a-vlan-id&gt;、a0a-&lt;iscsi-b-vlan-id&gt;）。如果需要協助，以下連結提供了詳細的逐步說明。<block ref="dac36656cf4136f69adb63b41114dcfc" category="inline-link-macro-rx"></block></block>
  <block id="22743347e11c05a6ceecf7b35ad046d4" category="list-text">將 Linux VM 配置為 Ansible 控制器節點，並安裝最新版本的 Ansible 和 Git。詳細資訊請參考以下連結：<block ref="5611d9cfd1946804a6fc54c4e7defca3" category="inline-link-macro-rx"></block>在第 -<block ref="3d45b043c5518eca1e47fb4ba8a813da" prefix=" " category="inline-code"></block>或者<block ref="2afb5cc3404c6c8162722fd41895c2de" prefix=" " category="inline-code"></block>。</block>
  <block id="4b7f6d2449e34b4ea603f0da9f1fbe25" category="list-text">克隆適用於 iSCSI 的NetApp Oracle 部署自動化工具包的副本。</block>
  <block id="21b9d06e7d54191458538a265ac76c29" category="list-text">配置 Windows 伺服器以運行最新版本的NetApp SnapCenter UI 工具。詳細資訊請參考以下連結：<block ref="131e9eb1b10c693e5b08c2ea655bbc23" category="inline-link-macro-rx"></block></block>
  <block id="708e23b82d10932400d291c3e2b3bc71" category="list-text">建置兩個 RHEL Oracle DB 伺服器，可以是裸機，也可以是虛擬化 VM。在 DB 伺服器上建立一個具有 sudo 權限且沒有密碼權限的管理員用戶，並在 Ansible 主機和 Oracle DB 伺服器主機之間啟用 SSH 私鑰/公鑰認證。階段遵循資料庫伺服器 /tmp/archive 目錄中的 Oracle 19c 安裝檔案。</block>
  <block id="bed197af3286bd48fb98fb5ab7c412e8" category="admonition">請確定您已在 Oracle VM 根磁碟區中指派至少 50G，以便有足夠的空間儲存 Oracle 安裝檔案。</block>
  <block id="7c0e65d458719c1a00061043a5c9b695" category="video-title">使用 iSCSI 在NetApp ASA上簡化和自動化 Oracle 部署</block>
  <block id="472b525267a1a194a67c4917378fdee0" category="list-text">host_vars/host_name.yml - 定義僅適用於本機目標的變數的本機變數檔案。在我們的用例中，這些是 Oracle DB 伺服器。</block>
  <block id="cab5395d741aa9c28cd5c2a21d7a0d82" category="paragraph">除了這些使用者定義的變數文件之外，還有幾個預設變數文件，其中包含預設參數，除非必要，否則不需要更改。以下部分展示如何設定使用者定義變數檔案。</block>
  <block id="ca238f0541280751b05d697a897544e7" category="list-text">本地資料庫伺服器<block ref="0c83664bfb17d8d2c0bbc3551297e488" prefix=" " category="inline-code"></block>配置</block>
  <block id="273fd96f97f0a813313984b6447b0c0a" category="paragraph">自動化工具包中共有六個劇本。每個執行不同的任務區塊並服務於不同的目的。</block>
  <block id="4a14bc710ed72d934f5ba41fcf17501d" category="paragraph">劇本運行後，以 oracle 使用者登入 Oracle DB 伺服器，驗證 Oracle 網格基礎架構和資料庫是否成功建立。以下是主機 ora_01 上的 Oracle 資料庫驗證的範例。</block>
  <block id="4bdbd55cbefd29d973edca906ecf6bb7" category="list-text">驗證創建的電網基礎設施和資源。</block>
  <block id="a773c985c5b1ab20847bc20444a2ada8" category="admonition">忽略<block ref="6ea3b08636255f181e49cd8acbf4d75b" prefix=" " category="inline-code"></block>在州詳細資訊中。這是由於手動和動態資料庫註冊與偵聽器發生衝突而導致的，可以安全地忽略。</block>
  <block id="57f7f3c35be8fec41fec2c4cf2cd226c" category="list-text">驗證 ASM 過濾器驅動程式是否如預期運作。</block>
  <block id="87f1f1a667c7926537b7a88ef5f5874f" category="paragraph"><block ref="e447fd004562055962b0dd7ff96b587e" category="inline-image-macro-rx" type="image"></block> <block ref="d832a1e78a4cf36ce36729c88f7de3b4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="daacada39b443fddce73dce4738f4337" category="inline-image-macro">此映像提供了 Oracle Enterprise Manager Express 的 PDB 資料庫視圖</block>
  <block id="2def11668aff705fd4e20945f07cb239" category="paragraph"><block ref="2def11668aff705fd4e20945f07cb239" category="inline-image-macro-rx" type="image"></block></block>
  <block id="91935697a3dec69875fc666d39a8fef8" category="inline-link-macro">VMware Cloud on AWS 中簡化的自主管理 Oracle，附有用戶端安裝的 FSx ONTAP</block>
  <block id="d49572b6f320bb9c7fb90a4c4fc671fe" category="paragraph">參考 TR-4979<block ref="b3e18c7c22919dcba778748c61b50f2e" category="inline-link-macro-rx"></block>部分<block ref="d372b360dda93a1ed98b047b474a8d14" prefix=" " category="inline-code"></block>有關設定SnapCenter和執行資料庫備份、復原和複製工作流程的詳細資訊。</block>
  <block id="6a56c935b27efdd9e9fde9e036ca687b" category="list-text">NETAPP ASA：全快閃 SAN 陣列</block>
  <block id="fa78b7e09f15ae55ea12cbcb34d44847" category="inline-link-macro"><block ref="fa78b7e09f15ae55ea12cbcb34d44847" category="inline-link-rx"></block></block>
  <block id="1d2dc43013dd6328b22d33484061bd50" category="paragraph"><block ref="1d2dc43013dd6328b22d33484061bd50" category="inline-link-macro-rx"></block></block>
  <block id="5424ed1a1b4c4815e1d1676f23aa1da4" category="list-text">使用新資料庫安裝為獨立伺服器安裝 Oracle Grid Infrastructure</block>
  <block id="a7410994d191ba6c350f0f764df86934" category="inline-link-macro"><block ref="a7410994d191ba6c350f0f764df86934" category="inline-link-rx"></block></block>
  <block id="094328bca120efd3d6fba90d69b806f8" category="paragraph"><block ref="094328bca120efd3d6fba90d69b806f8" category="inline-link-macro-rx"></block></block>
  <block id="2b77070b5c32e55f23537589ffd4f81f" category="list-text">將 Red Hat Enterprise Linux 8.2 與ONTAP結合使用</block>
  <block id="0a70ec939ee7a15f5b26fe9f48cb7667" category="inline-link-macro"><block ref="0a70ec939ee7a15f5b26fe9f48cb7667" category="inline-link-rx"></block></block>
  <block id="b37dd5ca6d78b3f11a3df8e7a9070fac" category="paragraph"><block ref="b37dd5ca6d78b3f11a3df8e7a9070fac" category="inline-link-macro-rx"></block></block>
  <block id="9defd6af131e71c31d1fe854d4bebe84" category="summary">該解決方案提供了在Amazon FSx ONTAP中自動部署和保護 Oracle 的概述和詳細信息，其中 Amazon FSx ONTAP 是使用 iSCSI 協議作為主數據庫存儲，而 Oracle 數據庫則在獨立 ReStart 中配置，並使用 Oracle asm 作為捲管理器。</block>
  <block id="3ec32ad563e52362b7be3ad6c2a06885" category="doc">TR-4986：使用 iSCSI 在Amazon FSx ONTAP上簡化、自動化 Oracle 部署</block>
  <block id="f49a4d1c30b33e65fdb2c76442c2dd16" category="paragraph">該解決方案提供了在Amazon FSx ONTAP中自動部署和保護 Oracle 的概述和詳細信息，該部署和保護作為具有 iSCSI 協議的主數據庫存儲，並在獨立 ReStart 中使用 Oracle asm 作為捲管理器配置 Oracle 數據庫。</block>
  <block id="dfc7d4d50944e079eb978ccd0af36909" category="paragraph">Amazon FSx ONTAP是一種儲存服務，可讓您在 AWS 雲端中啟動和執行完全託管的NetApp ONTAP檔案系統。它提供NetApp檔案系統熟悉的功能、效能、能力和 API，以及完全託管的 AWS 服務的靈活性、可擴充性和簡單性。它可讓您安心地在 AWS 雲端中執行最嚴苛的資料庫工作負載，例如 Oracle。</block>
  <block id="ad023f21227a34bd31c4a07a26c3ceeb" category="paragraph">本文檔示範了使用 Ansible 自動化在Amazon FSx ONTAP檔案系統中簡化 Oracle 資料庫的部署。 Oracle 資料庫部署在獨立的 ReStart 配置中，使用 iSCSI 協定進行資料訪問，使用 Oracle ASM 進行資料庫儲存磁碟管理。它還提供有關使用NetApp SnapCenter UI 工具備份、恢復和克隆 Oracle 資料庫的信息，以便在 AWS 雲端中進行儲存高效的資料庫操作。</block>
  <block id="36efee6c5a9ee80f8e017f827d0aa10f" category="list-text">在Amazon FSx ONTAP檔案系統上自動部署 Oracle 資料庫</block>
  <block id="67edc5be7c44db05533e39c0f055b6e1" category="list-text">使用NetApp SnapCenter工具在Amazon FSx ONTAP檔案系統上備份和還原 Oracle 資料庫</block>
  <block id="d9fdf48773f4a0e6b5b486cb7ec20ead" category="list-text">使用NetApp SnapCenter工具在Amazon FSx ONTAP檔案系統上複製用於開發/測試或其他使用案例的 Oracle 資料庫</block>
  <block id="b3dbcb0d704aa6ab5e0e9325ece5ed0a" category="list-text">想要在Amazon FSx ONTAP檔案系統上部署 Oracle 的 DBA。</block>
  <block id="35c5697c1fb69cf8f643be61e3004cda" category="list-text">一位資料庫解決方案架構師想要在Amazon FSx ONTAP檔案系統上測試 Oracle 工作負載。</block>
  <block id="20434e12c335486055c3510da159f861" category="list-text">一位儲存管理員想要在Amazon FSx ONTAP檔案系統上部署和管理 Oracle 資料庫。</block>
  <block id="23daaf0d27ae240487b8a4d1938bc5ef" category="list-text">希望在Amazon FSx ONTAP檔案系統上建立 Oracle 資料庫的應用程式擁有者。</block>
  <block id="3bda535ecfc3f5746f88922464446b72" category="paragraph"><block ref="3bda535ecfc3f5746f88922464446b72" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d7e4e3e15ade6aac7796a854a656276" category="cell">Amazon FSx ONTAP存儲</block>
  <block id="f90fb2d1bd04ce25f4b6a79bead231a3" category="cell">AWS 提供的目前版本</block>
  <block id="ceafc9f8393b625e8cce03cbeba6e867" category="cell">同一 VPC 和可用區中的一個 FSx HA 集群</block>
  <block id="6a79356b19d3b59e92b358357c5b9053" category="cell">用於計算的 EC2 實例</block>
  <block id="cc4def82629f09f253176dba801a85f0" category="cell">t2.xlarge/4vCPU/16G</block>
  <block id="7e6308718e9f24d724f497fc5ef23cd2" category="cell">兩個 EC2 T2 xlarge EC2 執行個體用於並發部署</block>
  <block id="53c4eb7bf80a61459560a0d2c63d513a" category="cell">Amazon FSx ONTAP檔案系統上的 iSCSI lun</block>
  <block id="94b06bafed4a2fc40a5a6d7e8836f0e6" category="list-text">Oracle 資料庫儲存佈局。在此自動化 Oracle 部署中，我們預設配置四個資料庫磁碟區來託管 Oracle 二進位檔案、資料和日誌。磁碟區中的單一 LUN 指派給 Oracle 二進位。然後，我們從資料和日誌 LUN 建立兩個 ASM 磁碟組。在 +DATA asm 磁碟組中，我們配置兩個資料卷，每個磁碟區有兩個 LUN。在 +LOGS asm 磁碟組中，我們在日誌磁碟區中建立兩個 lun。  ONTAP磁碟區內佈局的多個 LUN 通常可提供更好的效能。</block>
  <block id="515a6f662581dbf5fadf71e23b6029a6" category="list-text">*多個資料庫伺服器部署。 *自動化解決方案可以在單一 Ansible 劇本運行中將 Oracle 容器資料庫部署到多個 DB 伺服器。無論資料庫伺服器的數量有多少，劇本的執行都保持不變。您可以將多個容器資料庫部署到具有不同資料庫執行個體 ID（Oracle SID）的單一 EC2 執行個體。但要確保主機上有足夠的記憶體來支援部署的資料庫。</block>
  <block id="d54a80e2830c5cb42b06497a7012bf36" category="list-text">iSCSI 配置。  EC2 執行個體資料庫伺服器透過 iSCSI 協定連接到 FSx 儲存。 EC2 執行個體通常部署單一網路介面或 ENI。單一 NIC 介面同時承載 iSCSI 和應用程式流量。透過仔細分析 Oracle AWR 報告來衡量 Oracle 資料庫峰值 I/O 吞吐量需求非常重要，這樣才能選擇滿足應用程式和 iSCSI 流量吞吐量要求的正確 EC2 計算執行個體。此外，AWS EC2 通常將每個 TCP 流限制為 5 Gbps。每個 iSCSI 路徑提供 5 Gbps (625 MBps) 的頻寬，並且可能需要多個 iSCSI 連線來支援更高的吞吐量需求。</block>
  <block id="e20408188cf4521115d65495b7b67a54" category="list-text">*您建立的每個 Oracle ASM 磁碟組所使用的 Oracle ASM 冗餘等級。 *由於Amazon FSx ONTAP已啟用 HA 以在叢集磁碟層級進行資料保護，因此您應該使用<block ref="1f9ad4982cbae9fb459c61ba4e63bac9" prefix=" " category="inline-code"></block>，這表示該選項不允許 Oracle ASM 鏡像磁碟組的內容。</block>
  <block id="6775f2209818a69f1e1e3a6ed8b4aecf" category="paragraph">以下部分提供了在Amazon FSx ONTAP檔案系統上自動部署和保護 Oracle 19c 的逐步過程，其中資料庫 lun 透過 iSCSI 直接安裝到單節點重新啟動配置中的 EC2 執行個體 VM，並使用 Oracle ASM 作為資料庫磁碟區管理器。</block>
  <block id="e7491272f69c8efda69a595782f44d45" category="list-text">已設定 AWS 帳戶，並在您的 AWS 帳戶內建立了必要的 VPC 和網路段。</block>
  <block id="f71558e9ad22e37a70099d8b5d8ac06c" category="inline-link-macro">Linux 實例使用者指南</block>
  <block id="960e137d6acb4fa6cfda82d7568472c0" category="list-text">從 AWS EC2 控制台，將 EC2 Linux 執行個體部署為 Oracle DB 伺服器。為 ec2-user 啟用 SSH 私鑰/公鑰身份驗證。有關環境設定的詳細信息，請參閱上一節中的架構圖。還請查看<block ref="b75ecbbec453f67f58d497ccd97a8075" category="inline-link-macro-rx"></block>了解更多。</block>
  <block id="789982683d79fb5edc37dd0d0d6c384c" category="inline-link-macro">建立 FSx ONTAP檔案系統</block>
  <block id="e9f28f95b2ecbfc3cf86cc05d9cdf07d" category="list-text">從 AWS FSx 控制台，設定符合需求的Amazon FSx ONTAP檔案系統。查看文件<block ref="818df05ad3ddda222f02b6b0e29bbd61" category="inline-link-macro-rx"></block>以獲得逐步說明。</block>
  <block id="3445b7a1a574c2ac22f90caa85f25371" category="list-text">步驟 2 和 3 可以使用以下 Terraform 自動化工具包執行，該工具包會建立一個名為<block ref="460dc55b5ffb0266f2c889b06ee73344" prefix=" " category="inline-code"></block>以及一個名為<block ref="8cbb7b3050d3c3aa08a529f429bc4555" prefix=" " category="inline-code"></block>。在執行之前，請仔細檢查說明並更改變數以適合您的環境。此範本可以根據您自己的部署要求輕鬆修改。</block>
  <block id="0eeb89347dab000a6da0be3179446583" category="list-text">將 EC2 Linux 執行個體配置為 Ansible 控制器節點，並安裝最新版本的 Ansible 和 Git。詳細資訊請參考以下連結：<block ref="5611d9cfd1946804a6fc54c4e7defca3" category="inline-link-macro-rx"></block>在第 -<block ref="3d45b043c5518eca1e47fb4ba8a813da" prefix=" " category="inline-code"></block>或者<block ref="2afb5cc3404c6c8162722fd41895c2de" prefix=" " category="inline-code"></block>。</block>
  <block id="1f9545764510c505dd39a46cecb920cf" category="list-text">在 EC2 執行個體 /tmp/archive 目錄上依照 Oracle 19c 安裝檔案進行階段。</block>
  <block id="29a85eb1ecf92566b79f102d023963d4" category="video-title">使用 iSCSI 在Amazon FSx ONTAP上簡化和自動化 Oracle 部署</block>
  <block id="72ff430412347ee147549697444cc1b2" category="list-text">驗證 EC2 執行個體上的 Oracle 容器資料庫</block>
  <block id="c6d315df01ffba499100948d7f6d68c1" category="list-text">驗證 Oracle 監聽器。</block>
  <block id="dd4284a741b150a5c9e18aa61fe4f607" category="list-text">驗證 Oracle ASM。</block>
  <block id="1ebaf7b44bfaeaa84f6f5f6b91336a43" category="paragraph"><block ref="a320703b5a8b98288585e716fce375bc" category="inline-image-macro-rx" type="image"></block> <block ref="7e8c508166a8e95a804f504d5ad27cab" category="inline-image-macro-rx" type="image"></block> <block ref="1c5f51a56c6a724c049c77ac53dd14c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="35f7c29efc923e8a7920a0b331095d71" category="list-text">Amazon FSx ONTAP</block>
  <block id="73bc97f640d8c1cae3fa624183216b41" category="inline-link-macro"><block ref="73bc97f640d8c1cae3fa624183216b41" category="inline-link-rx"></block></block>
  <block id="40285fa8e3dc4d66bfadb679f67dfde6" category="paragraph"><block ref="40285fa8e3dc4d66bfadb679f67dfde6" category="inline-link-macro-rx"></block></block>
  <block id="c421d122321bec48d6b30858f4e7b515" category="list-text">亞馬遜 EC2</block>
  <block id="68253b5715937494905ba0cb9db91d2e" category="inline-link-macro"><block ref="be48c1546d351a5e48dcf4f28738754b" category="inline-link-rx"></block></block>
  <block id="6dcfba5adaa9302bd59dd5a601b947a2" category="paragraph"><block ref="95bfcff1050e9160bb2bd645993e8c18" category="inline-link-macro-rx"></block></block>
  <block id="aa3338034e5f9917e68fbffbd38a9bde" category="summary">此解決方案概述並詳細介紹了在NetApp AFF C 系列中透過 NFS 協定自動部署 Oracle 作為主資料庫儲存。  Oracle 資料庫部署為啟用了 dNFS 的容器資料庫。</block>
  <block id="11f3eb227b0ca48a26b66d16bfe3ff21" category="doc">TR-4992：使用 NFS 在NetApp C 系列上簡化、自動化 Oracle 部署</block>
  <block id="1cb33c04f94de65f46eb6bcf23c859d8" category="paragraph">NetApp AFF C 系列是一種大容量快閃存儲，它使全快閃存儲對於統一存儲來說更易於存取且更經濟實惠。對於許多第 1 層或第 2 層 Oracle 資料庫工作負載而言，其效能已足夠。  AFF C 系列系統由NetApp ONTAP資料管理軟體提供支持，可提供業界領先的效率、卓越的靈活性、一流的資料服務和雲端集成，幫助您擴展 IT 基礎架構、簡化資料管理並降低儲存成本和功耗。</block>
  <block id="e5a05a44ceadf873c0a817cdfcf109c3" category="paragraph">本文檔示範了使用 Ansible 自動化透過 NFS 掛載在NetApp C 系列中簡化 Oracle 資料庫的部署。 Oracle 資料庫部署在容器資料庫 (CDB) 和可插拔資料庫 (PDB) 配置中，並啟用 Oracle dNFS 協定以提高效能。此外，該解決方案還提供了在 C 系列儲存控制器上使用 NFS 協定設定儲存網路和儲存虛擬機器 (SVM) 的最佳實務。該解決方案還包括使用NetApp SnapCenter UI 工具快速備份、還原和克隆 Oracle 資料庫的資訊。</block>
  <block id="f0769fc3ef89fce80ed36eb7dcf99eda" category="list-text">在NetApp C 系列儲存控制器上自動部署 Oracle 容器資料庫。</block>
  <block id="8f0161a618bc32589831b9f8bf70f6db" category="list-text">使用SnapCenter UI 工具在 C 系列上進行 Oracle 資料庫保護和複製。</block>
  <block id="c9b1fa3fdccdd94576d677ff3ddce437" category="list-text">一位 DBA 想要在NetApp C 系列上部署 Oracle。</block>
  <block id="1e2c69e839117d54a65f89aa1060c538" category="list-text">一位資料庫解決方案架構師想要在NetApp C 系列上測試 Oracle 工作負載。</block>
  <block id="8723f9a870d9a4198ce59cc711b5f4fa" category="list-text">一位儲存管理員想要在NetApp C 系列上部署和管理 Oracle 資料庫。</block>
  <block id="c6eb7a53365fcf51f5713c3c85e14f49" category="list-text">希望在NetApp C 系列上建立 Oracle 資料庫的應用程式擁有者。</block>
  <block id="9868615f0d797dd2b1dea4a8582de61f" category="paragraph"><block ref="9868615f0d797dd2b1dea4a8582de61f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb2c46c282239d9c1f284fea93c79a3b" category="cell">NetApp C系列 C400</block>
  <block id="e0843363fa72773de427718dd92c0fc0" category="cell">ONTAP版本 9.13.1P3</block>
  <block id="32c395a2b06b9086d86d4dfe1bb80ffa" category="cell">兩個磁碟架/24 個磁碟，容量為 278 TiB</block>
  <block id="643264b15909ae5e928729543d262592" category="cell">資料庫伺服器虛擬機</block>
  <block id="60484db4cc2fdb040058f86b98997415" category="cell">4 個 vCPU，16GiB RAM</block>
  <block id="e7ef03a019ea637cdf77b74e359ddc3d" category="cell">兩個 Linux VM 實例用於並發部署</block>
  <block id="f5d8703c01271912567d6313da8dfc46" category="cell">SnapCenter的虛擬機</block>
  <block id="a7883280fee68e09e925d0887123d673" category="cell">一個 Windows VM 實例</block>
  <block id="31d042536c6a7e341bd99c1fca5d1c46" category="cell">2022 年資料中心 x64 Gen2</block>
  <block id="3721fcf1dad7c5c271fac2eb4f6aae73" category="cell">/u01、/u02、/u03 NFS 在 C400 冊上掛載</block>
  <block id="4373e4a9fb75a8ec4b82860cd3ca1909" category="list-text">*dNFS 配置。 *透過使用 dNFS（自 Oracle 11g 起可用），在 DB VM 上執行的 Oracle 資料庫可以比本機 NFS 用戶端驅動更多的 I/O。自動化 Oracle 部署預設在 NFSv3 上配置 dNFS。</block>
  <block id="ffcff30c73fd29ead74df7e471009447" category="list-text">*C400 控制器對上的負載平衡。 *將 Oracle 資料庫磁碟區均勻地放置在 C400 控制器節點上，以平衡工作負載。控制器 1 上的 DB1、控制器 2 上的 DB2，依此類推。將 DB 磁碟區安裝到其本機 lif 位址。</block>
  <block id="9b5267ed46c15534d45129b35cae0c9b" category="paragraph">以下部分提供了 Oracle 19c 自動部署的逐步流程以及部署後的 Oracle 資料庫保護和複製的資訊。</block>
  <block id="5ab526c2d8a23c39c3d68b1080ca3e89" category="inline-link">詳細指南 - AFF C400</block>
  <block id="92b608ca9ce1795976c4a2bf228d2099" category="list-text">NetApp C 系列儲存控制器對已安裝、堆疊，並且已安裝並設定最新版本的ONTAP作業系統。必要時請參考本設定指南：<block ref="e88d834ba7a3375860b38af3a1d379dd" category="inline-link-rx"></block></block>
  <block id="9ed0a0ec8afe137ee719d175c28ddf02" category="list-text">配置兩個 Linux VM 作為 Oracle DB 伺服器。有關環境設定的詳細信息，請參閱上一節中的架構圖。</block>
  <block id="cfdfdf87e328d2403ba6f06ad54b7b47" category="paragraph">在 Ansible 控制器和資料庫虛擬機器之間啟用 ssh 公鑰/私鑰認證。</block>
  <block id="5df121953eda8c31a1747dc7be05ccd5" category="list-text">從 Ansible 控制器管理員使用者主目錄，複製一份用於 NFS 的NetApp Oracle 部署自動化工具包的副本。</block>
  <block id="6ee479787e15beb58f7ac04e73265440" category="list-text">在 DB VM /tmp/archive 目錄上以 777 權限執行下列 Oracle 19c 安裝檔案階段。</block>
  <block id="3d3d0c1886de65e7e8cfba6499948bed" category="section-title">在 C 系列上為 Oracle 設定網路和 SVM</block>
  <block id="93ce386a5a93aad444dfe4d874d861b3" category="paragraph">本部署指南部分介紹了使用ONTAP系統管理器 UI 在 C 系列控制器上為具有 NFS 協定的 Oracle 工作負載設定網路和儲存虛擬機器 (SVM) 的最佳實務。</block>
  <block id="e42382129810446d30b7f0e35e7ba6f2" category="list-text">登入ONTAP系統管理員以檢查初始ONTAP叢集安裝後，廣播網域是否已設定並已正確指派給每個網域的乙太網路連接埠。一般情況下，應該有一個叢集的廣播域，一個管理的廣播域，以及一個資料等工作負載的廣播域。</block>
  <block id="d1fa27de8d8338309cef73f4f051dfa1" category="inline-image-macro">此圖提供了 c 系列控制器配置的螢幕截圖</block>
  <block id="fa55b7d7526852ad254537c52ada4ff2" category="paragraph"><block ref="fa55b7d7526852ad254537c52ada4ff2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="27272e370d688e62f1762f4ecfa62012" category="list-text">從網路 - 乙太網路端口，點擊<block ref="2a7ef566e4611d5e0d698db86ff278cf" prefix=" " category="inline-code"></block>建立LACP鏈路聚合組連接埠a0a，為聚合組連接埠中的成員連接埠之間提供負載平衡和故障切換。  C400 控制器上有 4 個資料連接埠 - e0e、e0f、e0g、e0h。</block>
  <block id="0a46044708fc119b41886f3b1084d5f6" category="paragraph"><block ref="0a46044708fc119b41886f3b1084d5f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6d0bcaf4fdfec037d3208a91ad3123bf" category="list-text">選擇群組中的乙太網路端口，<block ref="4d6b33d75644552dcc843a5fd248e03f" prefix=" " category="inline-code"></block>對於模式，以及<block ref="60aaf44d4b562252c04db7f98497e9aa" prefix=" " category="inline-code"></block>用於負載分配。</block>
  <block id="3847d434046e9f91acad503a44df07c3" category="paragraph"><block ref="3847d434046e9f91acad503a44df07c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0b27139ac86fb7bb1b7f301bd32f8905" category="list-text">驗證 LACP 連接埠 a0a 已建立並廣播網域<block ref="f6068daa29dbb05a7ead1e3b5a48bbee" prefix=" " category="inline-code"></block>現在正在 LACP 連接埠上運行。</block>
  <block id="01dd450d198c51beb60e97612a9e4210" category="paragraph"><block ref="6b6bb02cfff77088e13efe909a8bd894" category="inline-image-macro-rx" type="image"></block> <block ref="4f905dc51177e8497493856e8c3cbd9a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8b776a52e34291c3467b7d12cb3cf707" category="list-text">從<block ref="9c20ed40366c2dc673b52748abbb3e86" prefix=" " category="inline-code"></block>， 點選<block ref="9881f82f0dd89588831f9d1682bd5492" prefix=" " category="inline-code"></block>在每個控制器節點上為 NFS 協定上的 Oracle 工作負載新增一個 VLAN。</block>
  <block id="3a530a462061ba3ece3cc559a4ca7e7c" category="paragraph"><block ref="03a9f15b044a022128c5282ebc704ce5" category="inline-image-macro-rx" type="image"></block> <block ref="bc4aab0522486a37c585af300258ff7b" category="inline-image-macro-rx" type="image"></block> <block ref="ff3bd34c3e83c69ae7f34251e5976ded" category="inline-image-macro-rx" type="image"></block></block>
  <block id="77524ec9652ad1c3885999303318b3dd" category="list-text">透過 ssh 從叢集管理 IP 登入 C 系列控制器，以驗證網路故障轉移群組是否配置正確。  ONTAP自動建立和管理故障轉移群組。</block>
  <block id="51be646d68b430236b17aabb10aedcb9" category="list-text">從<block ref="c52ccdb94b7474376c104927d53c3fc8" prefix=" " category="inline-code"></block>，按一下「+新增」為 Oracle 建立 SVM。</block>
  <block id="e5043239b4a10b2d4764c248529f3188" category="paragraph"><block ref="e5043239b4a10b2d4764c248529f3188" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d48e145ef1e843250dd732d196ff81d4" category="list-text">命名您的 Oracle SVM，檢查<block ref="d708b594e7e0a7aa1a646a9cd21f15b9" prefix=" " category="inline-code"></block>和<block ref="9cefa5e8e8937e8e15a5f3684fe03d50" prefix=" " category="inline-code"></block>。</block>
  <block id="df35a2650003cb0d948717b06553bb03" category="paragraph"><block ref="df35a2650003cb0d948717b06553bb03" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c148577c00c1a76fece9914b4688ad7" category="list-text">新增 NFS 導出策略<block ref="7a1920d61156abc05a60135aefe8bc67" prefix=" " category="inline-code"></block>規則。</block>
  <block id="7cb338f8abf9a9c49ff7a259a199f03b" category="paragraph"><block ref="7cb338f8abf9a9c49ff7a259a199f03b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0cdf45facf4fbfefd052d813dfab0f4" category="list-text">在<block ref="d4e6248d7cc29f3bee70e788b0851aef" prefix=" " category="inline-code"></block>，填入每個節點上用於 NFS lif 位址的 IP 位址。</block>
  <block id="21840ef16e1b090e9d45318e1ccbfc6e" category="paragraph"><block ref="21840ef16e1b090e9d45318e1ccbfc6e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f17d25a0a013067c4d6fb8e7e9acd6cd" category="list-text">驗證 Oracle 的 SVM 是否啟動/正在運作以及 NFS lifs 狀態是否處於活動狀態。</block>
  <block id="d8c4952eb2e57f6128c159251619719b" category="paragraph"><block ref="fe61ad7d441154002119570da7363036" category="inline-image-macro-rx" type="image"></block> <block ref="bfb50a785d28c3ce3734c6386c499553" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b087c50a3fa783cca91b82d2fb3098fc" category="list-text">從<block ref="f479f39e9dfbfd094f968fbbb1351938" prefix=" " category="inline-code"></block>選項卡為 Oracle 資料庫新增 NFS 磁碟區。</block>
  <block id="fa5e7f85dbbccef5dfab5527174f9ba6" category="paragraph"><block ref="fa5e7f85dbbccef5dfab5527174f9ba6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8cee929dfc24fff28ebb05f7a1be1bc2" category="list-text">命名您的捲，分配容量和效能等級。</block>
  <block id="72d0cf157abf887a0d086afe9f55a456" category="paragraph"><block ref="72d0cf157abf887a0d086afe9f55a456" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d92a821034527d62c75eea067c9a5fe" category="list-text">在<block ref="acfc4449202469cc3ef4bcbaffd6f5bc" prefix=" " category="inline-code"></block>，選擇上一步驟建立的預設策略。取消選取<block ref="371536d7caaef32502ae7f42d2d07165" prefix=" " category="inline-code"></block>因為我們更喜歡使用SnapCenter來創建應用程式一致的快照。</block>
  <block id="dec0d912f582a31c85d4e45ba286663a" category="paragraph"><block ref="dec0d912f582a31c85d4e45ba286663a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2662721ab316ab57543a07b1669e77da" category="list-text">為每個 DB 伺服器建立三個 DB 磁碟區：server_name_u01 - 二進位、server_name_u02 - 資料、server_name_u03 - 日誌。</block>
  <block id="f52eff1251afec4b18f509ac9e56e903" category="paragraph"><block ref="f52eff1251afec4b18f509ac9e56e903" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6dc4458eccb6a98c7ca05ff4abbfa962" category="admonition">DB 磁碟區命名約定應嚴格遵循上述格式，以確保自動化正常運作。</block>
  <block id="d97f7e118529cec7713e262bd2a5bdc4" category="paragraph">這樣就完成了 Oracle 的 C 系列控制器配置。</block>
  <block id="d6aab67e6d8a14ee71a66aabc8604134" category="paragraph">劇本運行後，登入 Oracle DB 伺服器 VM 以驗證 Oracle 是否已安裝和配置，以及是否已成功建立容器資料庫。以下是 DB VM ora_01 或 ora_02 上的 Oracle 資料庫驗證的範例。</block>
  <block id="20ac2e87723a880d85686f07b4704df9" category="paragraph"><block ref="0bb972b8595213848965e3243d9d9139" category="inline-image-macro-rx" type="image"></block> <block ref="8c9f3342c68a769993a1d940545ebb67" category="inline-image-macro-rx" type="image"></block> <block ref="7fb0091c992da4cd5a50829bcadb7329" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5803335e5bcae83badcbc5583ac2d60e" category="inline-link-macro">VMware Cloud on AWS 中簡化的自主管理 Oracle，附有用戶端安裝的 FSx ONTAP</block>
  <block id="7747db3e6614970aeeeeaef060f430c8" category="paragraph">NetApp建議使用SnapCenter UI 工具來管理部署在 C 系列中的 Oracle 資料庫。參考 TR-4979<block ref="353ca98728b30d2ae31625a468ea2722" category="inline-link-macro-rx"></block>部分<block ref="d372b360dda93a1ed98b047b474a8d14" prefix=" " category="inline-code"></block>有關設定SnapCenter和執行資料庫備份、復原和複製工作流程的詳細資訊。</block>
  <block id="0f48ba7e158160e65859ff8d64ceec40" category="inline-link-macro">NetApp AFF C 系列</block>
  <block id="2f76b6fc093e529f4873d6981e8dfccb" category="list-text"><block ref="2f76b6fc093e529f4873d6981e8dfccb" category="inline-link-macro-rx"></block></block>
  <block id="f18e1c3f82c945878e4905241940fa6b" category="list-text"><block ref="f18e1c3f82c945878e4905241940fa6b" category="inline-link-macro-rx"></block></block>
  <block id="77848b259d26eb7f84ae5e2cbfc59ed1" category="summary">該解決方案提供了一個基於 Ansible 的自動化工具包，用於從託管在Azure NetApp Files儲存上的 Azure 雲端中的 Oracle Data Guard 實體備用資料庫設定、複製和刷新 Oracle 克隆資料庫，並配置 ASM。</block>
  <block id="93a5d2dc01885a305bad9a0a7f8be64b" category="doc">使用 ASM 在 ANF 上實現 Oracle 克隆生命週期自動化</block>
  <block id="76091c0fef09352136ad3a11d071d752" category="paragraph">將 Oracle Data Guard 配置中的實體備用 Oracle 資料庫的複製用於其他用例可以實現多種目的。它為開發或 UAT 目的提供了生產資料庫的可寫入副本。因此，如果可以接受短暫的報告延遲（10-15分鐘），則可以消除昂貴的Active Data Guard許可證成本。它可以節省儲存成本，特別是當可以選擇瘦克隆時。這個基於 Ansible 的自動化工具包使用戶能夠根據使用者計劃設定、複製和刷新克隆的 Oracle 資料庫，從而簡化生命週期管理。此工具包適用於使用Azure NetApp Files儲存部署至 Azure 公有雲的 Oracle 資料庫和在 Data Guard 設定中配置的 Oracle 資料庫。</block>
  <block id="a695118e43d96e3ca94c3990ceef4a4e" category="list-text">為 Ansible 自動化設定 Oracle 備用資料庫克隆設定檔。</block>
  <block id="e59e4d60fdfa2126f6b9a36db6b1dbea" category="list-text">依照使用者定義的計劃，使用 Ansible 劇本從 Data Guard 備用資料庫建立或刷新克隆 Oracle 資料庫。</block>
  <block id="335ee4a1db6ccc27946df089f9e2c7ee" category="list-text">管理 Azure 雲端中的 Oracle 資料庫的 DBA。</block>
  <block id="84d67d73b34d50c29f35724541718626" category="list-text">管理Azure NetApp Files儲存的儲存管理員。</block>
  <block id="ee355a02589f9ee3f9bafccf6919063e" category="list-text">喜歡從 Data Guard 備用資料庫複製 Oracle 資料庫以用於其他用例的應用程式擁有者。</block>
  <block id="02b4aec5a0aa88fe33a0d2b88487b1bb" category="admonition">為了簡化，複製目標 Oracle 伺服器的配置應與備用 Oracle 伺服器相同，例如 Oracle 軟體堆疊以及 Oracle Home 的目錄佈局等。</block>
  <block id="8e0b0773b24447afef3c59e3fcb2e079" category="admonition">目前，只有具有 bitbucket 存取權限的NetApp內部使用者才能存取該工具包。對於有興趣的外部用戶，請向您的客戶團隊要求存取權限或聯絡NetApp解決方案工程團隊。</block>
  <block id="e811c558e8d47370b4215282c3e3d28e" category="section-title">Ansible 來源和目標 hosts 檔案配置</block>
  <block id="7d424515bd7f3886bb0e46962ce8ca61" category="paragraph">該工具包包含一個 hosts 文件，定義了 Ansible playbook 運行的來源 Oracle 主機和目標 Oracle 主機。通常，它包括 Data Guard 設定中的備用 DB 主機和目標 Oracle 克隆主機。以下是範例文件。主機條目包括目標主機 IP 位址以及 ssh 金鑰，以便使用者存取主機執行複製或刷新命令。 Azure NetApp Files儲存裝置透過 API 設定。因此，ANF 連線是透過 HTTP 協定透過本機進行的。</block>
  <block id="613fbd46486706dc14277a2503a8ddad" category="section-title">全域變數配置</block>
  <block id="5c72cbd8cdc13af12fa87c14987e87ba" category="paragraph">以下是典型的全域變數檔案 vars.yml 的範例，其中包含適用於全域層級的變數。</block>
  <block id="0c967c2ba96575fe1c2db47376151512" category="section-title">主機變數配置</block>
  <block id="2b4c1f65590194bab80c33edb574ac90" category="paragraph">主機變數在 host_vars 目錄中定義，名稱為 {{ host_name }}.yml，僅適用於特定主機。對於此解決方案，僅配置目標克隆DB主機參數檔。 Oracle 備用資料庫參數在全域 vars 檔案中配置。以下是目標 Oracle 克隆 DB 主機變數檔案 orac.yml 的範例，顯示了典型配置。</block>
  <block id="b9221ffda439eb4a537f8bb3073871aa" category="section-title">額外的克隆目標 Oracle 伺服器配置</block>
  <block id="24fc2bccaf1b2226aaa9558e14d31a00" category="paragraph">克隆目標 Oracle 伺服器應安裝並修補與來源 Oracle 伺服器相同的 Oracle 軟體堆疊。 Oracle 使用者 .bash_profile 已配置 $ORACLE_BASE 和 $ORACLE_HOME。此外，$ORACLE_HOME 變數應與來源 Oracle 伺服器設定相符。如果目標 ORACLE_HOME 設定與備用 Oracle 伺服器配置不同，請建立一個符號連結來解決這些差異。以下是一個例子。</block>
  <block id="7d680af01e8ad6da7ed4790900194ee1" category="paragraph">總共有兩個劇本來執行 Oracle 資料庫複製生命週期。資料庫複製或刷新可以按需執行或作為 crontab 作業排程。</block>
  <block id="56f060833065e38dfd98d52734f5c81c" category="list-text">安裝 Ansible 控制器先決條件 - 只需一次。</block>
  <block id="aeeb7c0907645801659d4d26af05e214" category="list-text">使用 shell 腳本按需或定期從 crontab 建立和刷新克隆資料庫以呼叫克隆或刷新劇本。</block>
  <block id="a3094ccd05fa805e9a971cd2439bd434" category="paragraph">若要複製任何其他資料庫，請建立單獨的 oracle_clone_n_asm_anf.yml 和 oracle_clone_n_asm_anf.sh。相應地設定 Ansible 目標主機、全域 vars.yml 和 host_vars 目錄中的 hostname.yml 檔案。</block>
  <block id="fcdfd8f1adc61cb853ab14287d48869d" category="admonition">工具包的執行在各個階段都會暫停以允許特定任務完成。例如，它會暫停兩分鐘以允許 DB 卷克隆完成。一般來說，預設值就足夠了，但根據特殊情況或實施情況，可能需要調整時間。</block>
  <block id="1736373901db26a181fcdc4db6eecabc" category="summary">該解決方案提供了一個基於 Ansible 的自動化工具包，用於從託管在 Google Cloud 中的 Oracle Data Guard 的實體備用資料庫（在具有 ASM 配置的Google Cloud NetApp Volumes儲存上）設定、複製和刷新 Oracle 克隆資料庫。</block>
  <block id="ff8537e6ab3d91d2980c2380649d7c58" category="doc">使用 ASM 在 GCNV 上實現 Oracle 克隆生命週期自動化</block>
  <block id="d2f69b3d351b7770615f8ac01d603d86" category="paragraph">利用 Oracle Data Guard 配置中的實體備用 Oracle 資料庫的快速複製來實現其他用例可以實現多種目的。它提供了接近即時的報告資料庫以及用於開發或 UAT 目的的生產資料庫的可寫入副本。因此，如果可以接受短暫的報告延遲（10-15分鐘），則可以消除昂貴的Active Data Guard許可證成本。它可以節省儲存成本，特別是當可以選擇主資料卷的精簡克隆時。這個基於 Ansible 的自動化工具包使用戶能夠根據使用者計劃設定、複製和刷新克隆的 Oracle 資料庫，從而簡化生命週期管理。此工具包適用於使用Google Cloud NetApp Volumes (GCNV) 儲存和 Data Guard 配置中的 Oracle 資料庫設定部署到 Google 公有雲的 Oracle 資料庫。</block>
  <block id="6c6fb98d11b9a1b475f86b74383ac5ec" category="list-text">管理 Google 雲端中的 Oracle 資料庫的 DBA。</block>
  <block id="1322d4f821966d9d952f4509812e2e88" category="list-text">管理 Google NetApp Volumes 儲存的儲存管理員。</block>
  <block id="0bcda13064561041e51947b017c1f633" category="paragraph">該工具包包含一個 hosts 文件，定義了 Ansible playbook 運行的來源 Oracle 主機和目標 Oracle 主機。通常，它包括 Data Guard 設定中的備用 DB 主機和目標 Oracle 克隆主機。以下是範例文件。主機條目包括目標主機 IP 位址以及 ssh 金鑰，以便使用者存取主機執行複製或刷新命令。透過 gcloud cli 存取和管理Google Cloud NetApp Volumes儲存。</block>
  <block id="f87c12e62d09427fd8f65eb350caaee9" category="inline-link-macro">使用 Ansible Vault 保護敏感數據</block>
  <block id="e08c579bbaab6d571e125e974e35a664" category="admonition">為了實現更安全的自動化部署，可以使用 Ansible vault 來加密敏感資訊，例如密碼、存取令牌或金鑰等。此解決方案不涵蓋 Ansible vault 的實施，但在 Ansible 文件中有詳細記錄。請參閱<block ref="7e9a46400566ec57e6c7f648f20dbbae" category="inline-link-macro-rx"></block>了解詳情。</block>
  <block id="4d9a3b4f6ed4bdb8056531d663a765ca" category="admonition">確保 DB 複製主機上的 asm_diskstring 配置參數包含所有複製磁碟區的 NFS 掛載點和磁碟裝置的目錄路徑。</block>
  <block id="61691ad1db58d69fcd3efeb57d04cb3a" category="paragraph">若要複製任何其他資料庫，請建立單獨的 oracle_clone_n_asm_gcnv.yml 和 oracle_clone_n_asm_gcnv.sh。相應地設定 Ansible 目標主機、全域 vars.yml 和 host_vars 目錄中的 hostname.yml 檔案。</block>
  <block id="371030f28f5be2c632ed0ece307114d3" category="summary">該解決方案提供了基於 Ansible 的自動化工具包，用於從主資料庫設定、複製和刷新 Oracle 克隆資料庫。主資料庫可以是 Oracle Data Guard 配置中的實體備用資料庫。此解決方案可套用於私人資料中心或具有 NFS 或 ASM 配置的 FSx ONTAP儲存的 AWS 雲，或具有 NFS 配置的Azure NetApp Files儲存的 Azure 雲。</block>
  <block id="ca9f31b430e2d1494cf56125653b71e1" category="doc">SnapCenter Oracle 克隆生命週期自動化</block>
  <block id="09d55934f7bf0b7311388e7edeaa6ba2" category="paragraph">客戶喜歡NetApp ONTAP儲存的FlexClone功能，因為如果在私有資料中心或公有雲中的特定儲存產品上啟用了精簡克隆功能，則可以快速（幾分鐘）複製大型資料庫並節省額外的儲存。此基於 Ansible 的工具包使用NetApp SnapCenter命令列公用程式自動按計劃設定、複製和刷新複製的 Oracle 資料庫，從而簡化生命週期管理。此工具包適用於部署至本機或公有雲（AWS 或 Azure） ONTAP儲存並由NetApp SnapCenter UI 工具管理的 Oracle 資料庫。</block>
  <block id="305b49cab56a63db69a75b8a90237992" category="list-text">設定 Oracle 資料庫克隆規範設定檔。</block>
  <block id="ffe89dfaf822383b1610d2235661b139" category="list-text">依照使用者定義的計畫建立和刷新克隆 Oracle 資料庫。</block>
  <block id="5a82f1374e653dd60890a248f3da4afa" category="list-text">使用SnapCenter管理 Oracle 資料庫的 DBA。</block>
  <block id="eeb8bce8b54b9d524c33c1838a0d56ff" category="list-text">使用SnapCenter管理ONTAP儲存的儲存管理員。</block>
  <block id="d2d0cadcec645d853fb3c7ebf1705d31" category="list-text">有權存取SnapCenter UI 的應用程式擁有者。</block>
  <block id="c0d630f834359abb2109cebb1b7d3612" category="admonition">為了簡化，複製目標 Oracle 伺服器的配置應與備用 Oracle 伺服器相同，例如 Oracle 軟體堆疊以及 Oracle Home 的目錄佈局等。</block>
  <block id="ec26bffdac6e146ef20365de82135a71" category="section-title">Ansible 目標主機檔案配置</block>
  <block id="cece6deec155c16f4782e115edea6f41" category="paragraph">該工具包包含一個 hosts 文件，該文件定義了 Ansible playbook 所執行的目標。通常，它是目標 Oracle 克隆主機。以下是範例文件。主機條目包括目標主機 IP 位址以及管理員使用者存取主機以執行複製或刷新命令的 ssh 金鑰。</block>
  <block id="f4516853063c4206701e5aa89787feaa" category="paragraph">#Oracle 克隆主機</block>
  <block id="dd5cc97aa774a3a1c065bbb01fcf3e7d" category="paragraph">Ansible 劇本從幾個變數檔案中取得變數輸入。下面是一個範例全域變數檔 vars.yml。</block>
  <block id="a4f107861ae1069b802d4818e857efeb" category="paragraph">主機變數在 host_vars 目錄中定義，名稱為 {{ host_name }}.yml。以下是目標 Oracle 主機變數檔案 ora_04.cie.netapp.com.yml 的範例，顯示了典型的配置。</block>
  <block id="2f01e5ebc3a23c97162906c2483ec827" category="paragraph">克隆目標 Oracle 伺服器應具有與來源 Oracle 伺服器相同的安裝和修補的 Oracle 軟體堆疊。 Oracle 使用者 .bash_profile 已配置 $ORACLE_BASE 和 $ORACLE_HOME。此外，$ORACLE_HOME 變數應與來源 Oracle 伺服器設定相符。以下是一個例子。</block>
  <block id="9ed50a56f8c83c496fdb2d3fe909497f" category="paragraph">總共有三個劇本可使用SnapCenter CLI 實用程式執行 Oracle 資料庫複製生命週期。</block>
  <block id="230f70b0a7d8d86c8ea52493d17f962f" category="list-text">設定克隆規範檔案 - 僅一次。</block>
  <block id="6a1fa0bf47a6db0c3d4281d1316fd9e0" category="list-text">使用 shell 腳本呼叫刷新劇本，定期從 crontab 建立和刷新克隆資料庫。</block>
  <block id="ce4b27db9e7d3dff9f5bfd613fc3157e" category="admonition">將使用者名稱變更為SnapCenter配置的 sudo 使用者。</block>
  <block id="8aafbc88c398f3b5492811671ba656ad" category="paragraph">對於額外的克隆資料庫，建立單獨的 clone_n_setup.yml 和 clone_n_refresh.yml，以及 clone_n_refresh.sh。相應地設定 Ansible 目標主機和 host_vars 目錄中的 hostname.yml 檔案。</block>
  <block id="d65cd7440cb7c3d2954a848fa38e76ad" category="summary">該解決方案提供了一個基於 Ansible 的自動化工具包，用於配置 Oracle 資料庫高可用性和災難復原 (HA/DR)，其中 AWS FSx ONTAP作為 Oracle 資料庫存儲，EC2 實例作為 AWS 中的計算實例。</block>
  <block id="179da6be91ec55cc0787c674958241c1" category="doc">AWS FSx ONTAP中的自動化 Oracle HA/DR</block>
  <block id="622d3af9d0e348e827d4fbf78a6f0cdb" category="paragraph">該解決方案提供了一個基於 Ansible 的自動化工具包，用於配置 Oracle 資料庫高可用性和災難復原 (HA/DR)，其中 AWS FSx ONTAP作為 Oracle 資料庫存儲，EC2 實例作為 AWS 中的計算實例。</block>
  <block id="ea4e6c904df6b8ca1b4ec09e457c5415" category="paragraph">此工具包可自動執行在 AWS 雲端中部署的 Oracle 資料庫的高可用性和災難復原 (HR/DR) 環境的設定和管理任務，該資料庫具有 FSx ONTAP儲存和 EC2 運算執行個體。</block>
  <block id="4a33bb67171f627fe4d6f7f0aab6d032" category="list-text">設定 HA/DR 目標主機 - 核心配置、Oracle 配置以與來源伺服器主機相符。</block>
  <block id="497e7ba562ed7bbfac16fe52b6810372" category="list-text">設定 FSx ONTAP - 叢集對等、vserver 對等、從來源到目標的 Oracle 磁碟區 snapmirror 關係設定。</block>
  <block id="bda57e799072bafeaf42a5313a8206c5" category="list-text">透過快照備份 Oracle 資料庫資料 - 關閉 crontab 執行</block>
  <block id="5adf1aa082234fb813d8465d075205a9" category="list-text">透過快照備份 Oracle 資料庫存檔日誌 - 執行 crontab</block>
  <block id="4c8c6940cbdf156409787ce0cae0679d" category="list-text">在 HA/DR 主機上執行故障轉移和復原 - 測試並驗證 HA/DR 環境</block>
  <block id="041824f980a2368afbea3529f4a85a3b" category="list-text">故障轉移測試後執行重新同步 - 在 HA/DR 模式下重新建立資料庫磁碟區 SnapMirror 關係</block>
  <block id="39275aba85b7b3d5e108bf8a7f06b013" category="list-text">一位 DBA 在 AWS 中設定了 Oracle 資料庫，以實現高可用性、資料保護和災難復原。</block>
  <block id="98ad1b0bb680f4935dc6ec065ab7dd53" category="list-text">對 AWS 雲端中的儲存級 Oracle HA/DR 解決方案有興趣的資料庫解決方案架構師。</block>
  <block id="7d780f9063c90f956c5b395f01862b2c" category="list-text">管理支援 Oracle 資料庫的 AWS FSx ONTAP儲存的儲存管理員。</block>
  <block id="cac0f059e3c711509277efdd488db471" category="list-text">喜歡在 AWS FSx/EC2 環境中建立 Oracle 資料庫以實現 HA/DR 的應用程式擁有者。</block>
  <block id="91cc3cb48c2d9b7fe947f975bb6e12c2" category="paragraph">Ansible 劇本是變數驅動的。包含一個範例全域變數檔案 fsx_vars_example.yml 來示範典型配置。以下是主要考慮因素：</block>
  <block id="548d628ee47e884858313f141ed3e385" category="paragraph">主機變數在 host_vars 目錄中定義，名稱為 {{ host_name }}.yml。包含一個範例主機變數檔案 host_name.yml 來示範典型設定。以下是主要考慮因素：</block>
  <block id="dc4f36380101bead8c5e803fa39d75ac" category="section-title">資料庫伺服器主機檔案配置</block>
  <block id="405805427d2874a5f24a3b376f51c62a" category="paragraph">AWS EC2 執行個體預設使用 IP 位址進行主機命名。如果您在 Ansible 的 hosts 檔案中使用不同的名稱，請在 /etc/hosts 檔案中為來源伺服器和目標伺服器設定主機命名解析。以下是一個例子。</block>
  <block id="ba1f06e05d1c791f2b15c9e1088a97c0" category="section-title">Playbook 執行 - 依序執行</block>
  <block id="f438c38014afe1cb719dbcb14f389a74" category="list-text">安裝 Ansible 控制器先決條件。</block>
  <block id="4fd73e564820faeafea813887ea61f6f" category="list-text">設定目標 EC2 DB 執行個體。</block>
  <block id="7cfc03bc74a1c83d93eecac222f51283" category="list-text">設定來源資料庫磁碟區和目標資料庫磁碟區之間的 FSx ONTAP snapmirror 關係。</block>
  <block id="ad995c0821f0dec2ecd6c5d1361b2ee1" category="list-text">透過 crontab 的快照備份 Oracle 資料庫資料磁碟區。</block>
  <block id="06ddbe5b0f86c1d7fdff984cbe3f2ef5" category="list-text">透過 crontab 的快照備份 Oracle 資料庫檔日誌磁碟區。</block>
  <block id="4ffffdfa8108984ff063883f05b2cb05" category="list-text">在目標 EC2 DB 執行個體上執行故障轉移並還原 Oracle 資料庫 - 測試並驗證 HA/DR 配置。</block>
  <block id="665aea4799536e845b4d19fc4b3e4ee9" category="list-text">故障轉移測試後執行重新同步 - 在複製模式下重新建立資料庫磁碟區 snapmirror 關係。</block>
  <block id="b809961749987c861856cdba226ec9d6" category="summary">該解決方案提供了一個基於 Ansible 的自動化工具包，用於使用 PDB 重定位和最大可用性方法遷移 Oracle 資料庫。遷移可以是本地和雲端的任意組合，作為來源或目標</block>
  <block id="efe4709bf33362b47c6863c35ca74034" category="doc">自動 Oracle 遷移</block>
  <block id="86ed129fe60d52da62d64acc9e238f20" category="paragraph">該解決方案提供了一個基於 Ansible 的自動化工具包，用於使用 PDB 重定位和最大可用性方法遷移 Oracle 資料庫。遷移可以是本地和雲端的任意組合，作為來源或目標。</block>
  <block id="0c530f43a566539fb8e9da49f0404689" category="paragraph">此工具包以 FSx ONTAP儲存和 EC2 運算執行個體作為目標基礎設施，自動將 Oracle 資料庫從本地遷移到 AWS 雲端。它假設客戶已經在 CDB/PDB 模型中部署了內部 Oracle 資料庫。此工具包將允許客戶使用具有最大可用性選項的 Oracle PDB 重新定位程式從 Oracle 主機上的容器資料庫重新定位命名 PDB。這意味著任何本機儲存陣列上的來源 PDB 都會以最少的服務中斷重新定位到新的容器資料庫。 Oracle 遷移過程將在資料庫線上時移動 Oracle 資料檔。當所有資料檔案轉移到 AWS 雲端時，它會在切換時將使用者會話從本地重新路由到重新定位的資料庫服務。底線技術是經過驗證的 Oracle PDB 熱克隆方法。</block>
  <block id="2cb397312bce847a3821d2e60cf08aff" category="admonition">雖然遷移工具包是在 AWS 雲端基礎架構上開發和驗證的，但它建立在 Oracle 應用程式層級解決方案之上。因此工具包適用於其他公有雲平台，例如Azure，GCP等。</block>
  <block id="2243370defca1a4982b4883641ab7db6" category="list-text">在本機來源資料庫伺服器上建立遷移使用者並授予所需的權限。</block>
  <block id="c0e736291b01799f9f67b55a02e64b14" category="list-text">將 PDB 從本地 CDB 重新定位到雲端中的目標 CDB，同時來源 PDB 保持在線，直到切換為止。</block>
  <block id="491c7279129ef66f3b72abb0fa1c5226" category="list-text">將 Oracle 資料庫從本機遷移到 AWS 雲端的 DBA。</block>
  <block id="01afc77b414372b3af135907ed869982" category="list-text">對將 Oracle 資料庫從本地遷移到 AWS 雲端感興趣的資料庫解決方案架構師。</block>
  <block id="e41dc9cf512ed2ab6c255a63a5f967b4" category="list-text">喜歡將 Oracle 資料庫從本地遷移到 AWS 雲端的應用程式擁有者。</block>
  <block id="ed893dd012b708a5fd2d5f084ab862fb" category="paragraph">AWS EC2 執行個體預設使用 IP 位址進行主機命名。如果您在 Ansible 的 hosts 檔案中使用不同的名稱，請在 /etc/hosts 檔案中為來源伺服器和目標伺服器設定主機命名解析。以下是一個例子。</block>
  <block id="d3518be78ee50170d8c5adafaa49ddaa" category="list-text">安裝 Ansible 控制器先決條件。</block>
  <block id="fc6c92008801d751651a5b8d0facab6e" category="list-text">針對本機伺服器執行預先遷移任務 - 假設管理員是 ssh 用戶，具有 sudo 權限，可以連接到本機 Oracle 主機。</block>
  <block id="f4c57f09769c649b5fc9d173ca0b0872" category="list-text">執行從本機 CDB 到 AWS EC2 執行個體中的目標 CDB 的 Oracle PDB 重定位 - 假設 ec2-user 用於 EC2 DB 執行個體連接，並且 db1.pem 與 ec2-user ssh 金鑰對。</block>
  <block id="d4c96dcd516adf0c5bde093b0b7b7255" category="summary">本頁介紹在NetApp ONTAP儲存上部署 Oracle19c 的自動化方法。</block>
  <block id="6551468cb4811e7add616eea103efea9" category="doc">逐步部署流程</block>
  <block id="c150393fd3b1bd9d801cbd062234f73d" category="section-title">AWX/Tower 部署 Oracle 19c 資料庫</block>
  <block id="32003b051ef9368756d1e9cd79796719" category="section-title">1.為您的環境建立清單、群組、主機和憑證</block>
  <block id="2c8b94d570dd5a63a27d112e32a1c799" category="paragraph">本節介紹 AWX/Ansible Tower 中的庫存、群組、主機和存取憑證的設置，為使用NetApp自動化解決方案準備環境。</block>
  <block id="134d501fee5367069f0746f15302ce1f" category="list-text">配置庫存。</block>
  <block id="af2c7dd4ecef5e42e9bc8f88213d51d9" category="list-text">導覽至資源 → 庫存 → 新增，然後按一下新增庫存。</block>
  <block id="56fc26ef1c8ae54dced3529eec65fa26" category="list-text">提供姓名和組織詳細信息，然後按一下「儲存」。</block>
  <block id="fe0981da08a8d2f4fed2006bafd9fb30" category="list-text">在庫存頁面上，按一下建立的庫存。</block>
  <block id="3fa16e80574aff03c27de1253474a20f" category="list-text">如果有任何庫存變量，請將其貼到變數欄位中。</block>
  <block id="65d119ae335d9e7c9c798b3e6db1b2d0" category="list-text">導航至“群組”子選單並點擊“新增”。</block>
  <block id="396641e01a7451ca821b5d7d1377b0c7" category="list-text">提供ONTAP的群組名稱，貼上群組變數（如果有），然後按一下「儲存」。</block>
  <block id="a4f13b6e4100f2d5db093eb54a3ffe0c" category="list-text">對 Oracle 的另一個群組重複此程序。</block>
  <block id="6f29f21d5f3e40494291fb357b9f4f73" category="list-text">選擇已建立的ONTAP群組，前往「主機」子選單並點選「新增主機」。</block>
  <block id="8d92ffd9d0d2b033d05731ec4af50af8" category="list-text">提供ONTAP叢集管理 IP 的 IP 位址，貼上主機變數（如果有），然後按一下「儲存」。</block>
  <block id="f1254ecbe57ff98d850d541b8a1ab988" category="list-text">必須對 Oracle 群組和 Oracle 主機管理 IP/主機名稱重複此程序。</block>
  <block id="f11c5853bdca384314b28c9c59f2d6d0" category="list-text">建立憑證類型。對於涉及ONTAP的解決方案，您必須設定憑證類型以符合使用者名稱和密碼項目。</block>
  <block id="1616edbabbc3bbfd22afe144d1929386" category="list-text">將以下內容貼到注入器配置中：</block>
  <block id="cc865c923bcb1c61acf9985311675b93" category="list-text">輸入ONTAP的名稱和組織詳細資料。</block>
  <block id="ea314f484653e7f9f25144ea61d34888" category="list-text">選擇您為ONTAP建立的自訂憑證類型。</block>
  <block id="179cae6336461d9f165e8fa87146362a" category="list-text">在類型詳細資料下，輸入使用者名稱、密碼和 vsadmin_password。</block>
  <block id="659fb4c811f1a73cf40492056e6d3c3f" category="list-text">按一下“返回憑證”，然後按一下“新增”。</block>
  <block id="3b9c90c4bf202563a3cdeda5ec78fac2" category="list-text">輸入 Oracle 的名稱和組織詳細資訊。</block>
  <block id="51b04d83367483575e89740841d94262" category="section-title">2.創建專案</block>
  <block id="e56fa1e2655db1bc7664a00295bd62a2" category="list-text">前往資源 → 項目，然後按一下新增。</block>
  <block id="9c78f8d8687776e79018ded982e14c25" category="list-text">輸入姓名和組織詳細資料。</block>
  <block id="4096a1870a258e9d46585f08d4906f21" category="list-text">在原始碼控制憑證類型欄位中選擇 Git。</block>
  <block id="b1e5ab13b1f19ed768aa37d36124b04d" category="list-text">進入<block ref="7dfd05089fdfe3ce335a25f00540ff01" prefix=" " category="inline-code"></block>作為原始碼控制 URL。</block>
  <block id="99bc2ea435ea8ae0ed38ef3051a4350a" category="list-text">當原始程式碼發生變化時，專案可能需要偶爾同步。</block>
  <block id="14e017f358e18dd612a468713206093f" category="section-title">3.配置 Oracle host_vars</block>
  <block id="05557c38b20e42173356b53f42c92152" category="paragraph">本節定義的變數適用於每個單獨的 Oracle 伺服器和資料庫。</block>
  <block id="ac886b852fd1b481e9c7e68c217b5e21" category="list-text">在下列嵌入式 Oracle 主機變數或 host_vars 表單中輸入特定環境的參數。</block>
  <block id="93be2ec6954884b83ac9df8117967949" category="admonition">必須更改藍色項目以符合您的環境。</block>
  <block id="e1847b1a99378b07a0df71cf2baac5da" category="list-text">在藍色欄位中填寫所有變數。</block>
  <block id="741c92ab2429ff59927918c7a07ad9a5" category="list-text">完成變數輸入後，按一下表單上的複製按鈕，複製所有要傳輸到 AWX 或 Tower 的變數。</block>
  <block id="1e1ea51549ac2a644a3e965113c1d370" category="list-text">導覽回 AWX 或 Tower，前往資源 → 主機，然後選擇並開啟 Oracle 伺服器設定頁面。</block>
  <block id="0d630b14098a793ac4586173286d0805" category="list-text">在“詳細資料”標籤下，按一下“編輯”，然後將步驟 1 中複製的變數貼上到 YAML 標籤下的“變數”欄位中。</block>
  <block id="c6dca9e669d097298fc6059b27f96e09" category="list-text">對系統中的任何其他 Oracle 伺服器重複此程序。</block>
  <block id="7890327bd98d1ec932e453254511754d" category="section-title">4.配置全域變數</block>
  <block id="e5cac740ce6bd43e6ff83881e150d0f3" category="paragraph">本節定義的變數適用於所有 Oracle 主機、資料庫和ONTAP叢集。</block>
  <block id="87b55102ec2889891b0258253b739244" category="list-text">在以下嵌入式全域變數或 vars 形式中輸入特定於環境的參數。</block>
  <block id="7d2a3c2ad9ee2eeb7547d205d30b9335" category="list-text">在藍色欄位中填寫所有變數。</block>
  <block id="099f04b51539ed973890f1d1af2d5063" category="list-text">完成變數輸入後，點選表單上的複製按鈕，將所有要傳輸到 AWX 或 Tower 的變數複製到下列作業範本中。</block>
  <block id="c807b1735c1915c52547b9f7e917b55d" category="section-title">5.配置並啟動作業範本。</block>
  <block id="c7fa74fb4cbaab9d336a8e55bf164684" category="list-text">輸入名稱和描述</block>
  <block id="3dcca032e3328f54206079a87830aa27" category="list-text">選擇作業類型；運行根據劇本配置系統，檢查執行劇本的試運行而不實際配置系統。</block>
  <block id="b01c6189ccdc531874f3442803680525" category="list-text">選擇 all_playbook.yml 作為要執行的預設劇本。</block>
  <block id="e8f0426d97d09775fb78bdeb793b0b3e" category="list-text">勾選「作業標籤」欄位中的「啟動時提示」複選框。</block>
  <block id="ad7ad1bbc416fda1f9518ff4004d891c" category="list-text">啟動時提示輸入作業標籤時，輸入 requirements_config。您可能需要按一下 requirements_config 下方的「建立作業標籤」行來輸入作業標籤。</block>
  <block id="b9ef793a3db3f07ed7dc808f4709c6ca" category="admonition">requirements_config 確保您擁有正確的程式庫來執行其他角色。</block>
  <block id="6ac039e55dcf8a249f5122b1fdbbf60e" category="list-text">按一下“下一步”，然後按一下“啟動”以開始作業。</block>
  <block id="06f392c8dfb4783859e67f16fed69bc7" category="list-text">按一下檢視 → 作業來監控作業輸出和進度。</block>
  <block id="7f6a02c24592bd309f31b5a72a0f8d6d" category="list-text">啟動時提示輸入作業標籤時，輸入 ontap_config。您可能需要點擊 ontap_config 正下方的建立「作業標籤」行來輸入作業標籤。</block>
  <block id="18c003af9ed29d295877baabf7b42ce1" category="list-text">點選查看 → 作業來監控作業輸出和進度</block>
  <block id="c0029d5cdcaae1ceef3bed244b3ab3c6" category="list-text">ontap_config 角色完成後，再次為 linux_config 執行此程序。</block>
  <block id="fc71758268fe1c3aba4b75df3ee0560f" category="list-text">選擇所需的模板，然後按一下啟動。</block>
  <block id="bbe073bafc2875db8b48e59284636931" category="list-text">當啟動時提示在 linux_config 中輸入作業標籤類型時，您可能需要選擇 linux_config 正下方的建立「作業標籤」行來輸入作業標籤。</block>
  <block id="bc43b7acafead2cdee67de733ae10b13" category="list-text">選擇檢視 → 作業來監控作業輸出和進度。</block>
  <block id="e73718535637e07111f6a4925685c0bd" category="list-text">linux_config 角色完成後，再次為 oracle_config 執行此程序。</block>
  <block id="574f8726a5cc088da32ab84269c8e0f8" category="list-text">前往資源 → 模板。</block>
  <block id="252b85bc679cb8ecdccbcd127c65b795" category="list-text">啟動時提示輸入作業標籤時，請輸入 oracle_config。您可能需要選擇 oracle_config 正下方的建立「作業標籤」行來輸入作業標籤。</block>
  <block id="6757805f64ddba2566927ece0d9f30e1" category="section-title">6.在同一 Oracle 主機上部署附加資料庫</block>
  <block id="4edc1d4492ab93edbbb0a67c0c265b84" category="paragraph">劇本的 Oracle 部分每次執行都會在 Oracle 伺服器上建立一個 Oracle 容器資料庫。若要在同一伺服器上建立其他容器資料庫，請完成下列步驟。</block>
  <block id="a12a0fa7fe728658376da87df04fa7c2" category="list-text">修改 host_vars 變數。</block>
  <block id="ba52bf2d165115d60675d61a4b84b0c6" category="list-text">返回步驟 2 - 設定 Oracle host_vars。</block>
  <block id="ffcc6e6df9c3839334c063a9223c65b3" category="list-text">將 Oracle SID 變更為不同的命名字串。</block>
  <block id="a936a5fabc881eb3591658385409dfb8" category="list-text">將偵聽器連接埠變更為不同的號碼。</block>
  <block id="d9fa63a6f267402d4cf6068165e04a38" category="list-text">如果您正在安裝 EM Express，請將 EM Express 連接埠變更為其他號碼。</block>
  <block id="23f5c9b4f57b3075f9890f1bc1896ebe" category="list-text">將修改後的主機變數複製並貼上到「主機配置詳細資料」標籤中的「Oracle 主機變數」欄位。</block>
  <block id="4d4426a703dd8227727fef5758b680d8" category="list-text">僅使用 oracle_config 標籤啟動部署作業範本。</block>
  <block id="d90d5ea5174403c0eb77b8e80b80d6ad" category="paragraph">本文檔詳細介紹了使用自動化命令列介面 (cli) 部署 Oracle 19c。</block>
  <block id="0e6b1c16527d2792d391c578bbf12efe" category="section-title">CLI 部署 Oracle 19c 資料庫</block>
  <block id="57daddd847cdbab22b7363630de48a2f" category="inline-link-macro">入門和要求部分</block>
  <block id="875fa179f8abcdcc783a17ad0c94f6b0" category="paragraph">本節介紹使用 CLI 準備和部署 Oracle19c 資料庫所需的步驟。確保您已查看<block ref="f61e080fcac9ce40443edb11a98c59eb" category="inline-link-macro-rx"></block>並相應地準備您的環境。</block>
  <block id="0f2d7675188dbfc7b9df587588bff71b" category="section-title">下載 Oracle19c 倉庫</block>
  <block id="73977a3ad17c882a666b80c9eccec0e7" category="list-text">從您的 ansible 控制器執行以下命令：</block>
  <block id="60cc8e16ee1bd6e820e063f90fd35cbe" category="list-text">下載儲存庫後，將目錄變更為 na_oracle19c_deploy &lt;cd na_oracle19c_deploy&gt;。</block>
  <block id="4e2b619426350db7e7d5b09c96b8010b" category="section-title">編輯 hosts 文件</block>
  <block id="b183e47af1fa85c93e4a4368205c3249" category="paragraph">部署前請完成以下操作：</block>
  <block id="c4ab1530ffd8a3306d47c804ca88240c" category="list-text">編輯您的主機檔案na_oracle19c_deploy目錄。</block>
  <block id="bc1dd0e50a3c20e78cc2d680eaf32378" category="list-text">在 [ontap] 下，將 IP 位址變更為您的叢集管理 IP。</block>
  <block id="6475f51ce7ff0a21a5635ea50b1f1a86" category="list-text">在 [oracle] 群組下，新增 oracle 主機名稱。必須透過 DNS 或 hosts 檔案將主機名稱解析為其 IP 位址，或必須在主機中指定。</block>
  <block id="5c3f5e9dc815ca28c7cf1ff64cdc61a2" category="list-text">完成這些步驟後，請儲存所有變更。</block>
  <block id="b27994a7bba852ac9a8f1a262413e68b" category="paragraph">以下範例描述了一個主機檔案：</block>
  <block id="1caa2eee0ed6a6c5c6edcbc0320e8671" category="paragraph">此範例執行劇本並在兩個 Oracle DB 伺服器上同時部署 Oracle 19c。您也可以只使用一個資料庫伺服器進行測試。在這種情況下，您只需要設定一個主機變數檔案。</block>
  <block id="d11927d6f93a4edaa78dc52c6e34fd5f" category="admonition">無論您部署多少個 Oracle 主機和資料庫，劇本的執行方式都是相同的。</block>
  <block id="030c98564d5fbd7c8672a76e2a593b21" category="section-title">編輯 host_vars 下的 host_name.yml 文件</block>
  <block id="86c40bb4891f3e6b34a2eece7bb19532" category="paragraph">每個 Oracle 主機都有一個由其主機名稱識別的主機變數文件，其中包含特定於主機的變數。您可以為您的主機指定任何名稱。編輯並複製<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block>從主機 VARS 設定部分並將其貼上到您想要的<block ref="caa6779553864dba00727ae27752b182" prefix=" " category="inline-code"></block>文件。</block>
  <block id="44505c1007599884b05c0148599ad1b0" category="section-title">編輯 vars.yml 文件</block>
  <block id="41cdd95196e2753968e0d69375c41825" category="paragraph">這<block ref="5257c59f933f1208afadab7dd8ef3fe6" prefix=" " category="inline-code"></block>檔案整合了 Oracle 部署的所有環境特定變數（ONTAP、Linux 或 Oracle ）。</block>
  <block id="271f9ccf9c8189bb1888d25c7f0e025b" category="list-text">編輯並複製 VARS 部分中的變量，並將這些變量貼到您的<block ref="5257c59f933f1208afadab7dd8ef3fe6" prefix=" " category="inline-code"></block>文件。</block>
  <block id="78d77851709e21512097cee585c59d0c" category="section-title">運行劇本</block>
  <block id="8f42d9f703ada5b4f1374ca96a4f1cec" category="paragraph">完成所需的環境前提條件並將變數複製到<block ref="5257c59f933f1208afadab7dd8ef3fe6" prefix=" " category="inline-code"></block>和<block ref="97513b66e909abfd622924972387a816" prefix=" " category="inline-code"></block>，您現在就可以部署劇本了。</block>
  <block id="6226590ec5d4a109e4b93317425994c1" category="admonition">必須更改 &lt;username&gt; 以符合您的環境。</block>
  <block id="ca9312842450cb1907f68cbfe9e7ebdd" category="list-text">透過傳遞正確的標籤和ONTAP叢集使用者名稱來運行ONTAP劇本。出現提示時，填寫ONTAP集群和 vsadmin 的密碼。</block>
  <block id="27dddea37ed0de0ca5959c367057ba57" category="list-text">運行 Linux 劇本來執行部署的 Linux 部分。輸入管理員 ssh 密碼以及 sudo 密碼。</block>
  <block id="1c71909fca063bf285ff220dab00cfa1" category="list-text">執行 Oracle 劇本來執行部署的 Oracle 部分。輸入管理員 ssh 密碼以及 sudo 密碼。</block>
  <block id="24b2767982b51deb19947fb3e94279c6" category="section-title">在同一 Oracle 主機上部署附加資料庫</block>
  <block id="5cc75d1029461de7ddcd02bbc784af26" category="paragraph">劇本的 Oracle 部分每次執行都會在 Oracle 伺服器上建立一個 Oracle 容器資料庫。若要在同一台伺服器上建立額外的容器資料庫，請完成以下步驟：</block>
  <block id="b4a35a2d5c3a4f3efb7c77f6bcd2a905" category="list-text">修改 host_vars 變數。</block>
  <block id="5641cb71d4e10abef15918c2dd828917" category="list-text">返回步驟 3 - 編輯<block ref="caa6779553864dba00727ae27752b182" prefix=" " category="inline-code"></block>文件下<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block>。</block>
  <block id="24f0029973c35b16fc49847b27215915" category="list-text">如果您已經安裝了 EM Express，請將 EM Express 連接埠變更為其他號碼。</block>
  <block id="365c64de6adc281d7f484029d1356855" category="list-text">將修改後的主機變數複製並貼上到 Oracle 主機變數檔案下<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block>。</block>
  <block id="b64219fd8290ac8a154f733df0825dbb" category="list-text">使用以下方式執行劇本<block ref="b656a5ae2d7a83cf0ead9c81fb96ec17" prefix=" " category="inline-code"></block>標籤如上所示<block ref="1c892654e23ff69bf71caefc702aa8b4" category="inline-xref-macro-rx"></block>。</block>
  <block id="0dd197c8abd1f3c3607887dbc615148f" category="section-title">驗證 Oracle 安裝</block>
  <block id="40640c0c34d4427f5d18b9ca476e3158" category="summary">本頁介紹了NetApp ONTAP儲存上的 Oracle19c 的自動資料保護。</block>
  <block id="261e91a1afdfe1123497b1b9ba5ab3e1" category="section-title">AWX/Tower Oracle 資料保護</block>
  <block id="544348a8f04b16faced725115db5b6f3" category="section-title">為您的環境建立清單、群組、主機和憑證</block>
  <block id="db2b28449b6d868d910cd53527934988" category="list-text">為您的第一個群組提供名稱 oracle 並點擊儲存。</block>
  <block id="200e1fa09608b23de5cd04d22d3a5bdb" category="list-text">對第二個名為 dr_oracle 的群組重複此程序。</block>
  <block id="1e29c17b60e9145858da82263315e402" category="list-text">選擇已建立的oracle群組，進入Hosts子選單，點選Add New Host。</block>
  <block id="250d5368537e295251f9ccf63f950087" category="list-text">提供來源 Oracle 主機的管理 IP 的 IP 位址，然後按一下「儲存」。</block>
  <block id="22dcd973cf7a10ed9d03c5b959e65807" category="list-text">必須對 dr_oracle 群組重複此程序並新增 DR/目標 Oracle 主機的管理 IP/主機名稱。</block>
  <block id="1a4eca6a53be80f21117669b80a5dbc8" category="admonition">以下是使用ONTAP的 On-Prem 或 AWS 上的 CVO 建立憑證類型和憑證的說明。</block>
  <block id="cea575677c47839fde1e59dbfc9ad5bb" category="open-title">本地部署</block>
  <block id="f7fc367b5de87581ac78fc80805439af" category="open-title">冠狀動脈造影</block>
  <block id="be86ca474df5e14056bc0f20d2cdb767" category="section-title">創建專案</block>
  <block id="0a43bf0a8edd1a20044bf0cc16ffae7c" category="list-text">進入<block ref="3e78435f1dc860dd5abe55174b983b84" prefix=" " category="inline-code"></block>作為原始碼控制 URL。</block>
  <block id="d02a79fb6f05358e16f9d9cf02288ac3" category="section-title">配置全域變數</block>
  <block id="3506caa5fe966a4676faac2993bc1431" category="section-title">自動化劇本</block>
  <block id="285a3bb8fb6f692046facadb3c0984cf" category="paragraph">有四個單獨的劇本需要運行。</block>
  <block id="37472723bc7712fedddee6d02e29228d" category="list-text">用於設定您的環境（On-Prem 或 CVO）的劇本。</block>
  <block id="5138c89250c5086accf2d1a5961c9b17" category="list-text">按計劃複製 Oracle 二進位檔案和資料庫的劇本</block>
  <block id="3e552d6e5b2c316c63eb1fc2081d42a8" category="list-text">按計劃複製 Oracle 日誌的劇本</block>
  <block id="33f4f1514dc2ceb963af16685f4de58c" category="list-text">在目標主機上恢復資料庫的劇本</block>
  <block id="17ae7167fac3c2364c6ad7b58819a920" category="open-title">ONTAP/CVO 設定</block>
  <block id="16f928d0ebd67060f6b3b2abf0481928" category="open-title">二進制和資料庫卷的複製</block>
  <block id="b723f9a72bec39ac17d89e51ff0ba336" category="open-title">日誌卷的複製</block>
  <block id="f76dbca531ab83300165aacf97e1b7ff" category="open-title">還原和復原資料庫</block>
  <block id="ba985cf3c812e3ba064fedc7353bbb77" category="section-title">復原 Oracle 資料庫</block>
  <block id="b8a177e5fd059f33473cad4d1d073d38" category="list-text">本機生產 Oracle 資料庫資料磁碟區透過NetApp SnapMirror複製到二級資料中心的冗餘ONTAP叢集或公有雲中的 Cloud Volume ONTAP進行保護。在完全配置的災難復原環境中，輔助資料中心或公有雲中的復原運算執行個體處於待命狀態，並準備在發生災難時復原生產資料庫。透過對作業系統核心修補程式進行平行更新或同步升級，備用運算實例與本機實例保持同步。</block>
  <block id="57d8ad774cb4fef3d53ee8836bfee761" category="list-text">在此示範的解決方案中，Oracle 二進位磁碟區會複製到目標並安裝在目標實例上以啟動 Oracle 軟體堆疊。這種恢復 Oracle 的方法比災難發生時最後一刻全新安裝 Oracle 更有優勢。它保證 Oracle 安裝與目前的內部生產軟體安裝和修補程式等級等完全同步。但是，這可能會或可能不會對復原網站上複製的 Oracle 二進位磁碟區產生額外的軟體授權影響，具體取決於 Oracle 的軟體授權結構。建議使用者在決定使用相同方法之前，先諮詢其軟體授權人員，以評估潛在的 Oracle 授權要求。</block>
  <block id="74eaa493ffed695592003e0844d93c46" category="list-text">目標位置的備用 Oracle 主機已配置 Oracle 先決條件配置。</block>
  <block id="0be4357ac224d44b11800179b23eb202" category="list-text">SnapMirror 已損壞，磁碟區變為可寫入並安裝到備用 Oracle 主機。</block>
  <block id="69504b415e8aad20e18beca0de96ab6a" category="list-text">在備用運算執行個體上安裝所有資料庫磁碟區後，Oracle 復原模組執行下列任務以在復原網站復原並啟動 Oracle。</block>
  <block id="5e52a9563e31960cdf02c7b83e6495e7" category="list-text">同步控製文件：我們在不同的資料庫磁碟區上部署了重複的 Oracle 控製文件，以保護關鍵的資料庫控製文件。一個位於資料磁碟區上，另一個位於日誌磁碟區上。由於資料和日誌卷以不同的頻率複製，因此在復原時它們將不同步。</block>
  <block id="26b9a788a0ef0527f25f68892b364d19" category="list-text">重新連結 Oracle 二進位檔案：由於 Oracle 二進位檔案已重新定位到新主機，因此需要重新連結。</block>
  <block id="b66ad18a7982f7c233e9d0af2f867856" category="list-text">復原 Oracle 資料庫：復原機制從控製檔案擷取 Oracle 日誌磁碟區中最後一個可用存檔日誌中的最後一個系統變更編號，並還原 Oracle 資料庫以收回故障時能夠複製到 DR 網站的所有業務交易。然後，資料庫以新形式啟動，以在復原網站進行使用者連線和業務交易。</block>
  <block id="861503fb33ea04fecb13449e713e8ac6" category="admonition">在執行復原劇本之前，請確保您具有以下內容：確保它將 /etc/oratab 和 /etc/oraInst.loc 從來源 Oracle 主機複製到目標主機</block>
  <block id="0679a51ae3a4071a6bd3dedbe97fd329" category="summary">本頁介紹在NetApp ONTAP儲存上部署 Oracle 資料保護的自動化方法。</block>
  <block id="cb59b87e00d11222bfd9159d0d23836f" category="doc">入門</block>
  <block id="22e3bbd761fbb7ae69b8035eb12f222d" category="paragraph">此解決方案設計用於在 AWX/Tower 環境中運作。</block>
  <block id="008ba800d97cb969def651e93f0d93fb" category="section-title">AWX/塔</block>
  <block id="a481f1841043d60245f18522a86731b1" category="paragraph">對於 AWX/Tower 環境，將引導您建立ONTAP叢集管理和 Oracle 伺服器（IP 和主機名稱）的清單、建立憑證、設定從NetApp Automation Github 中提取 Ansible 程式碼的專案以及啟動自動化的作業範本。</block>
  <block id="ad5310e9dcd8f367be2b92490488d86d" category="list-text">此解決方案設計用於在私有雲場景（本地到本地）和混合雲（本地到公有雲Cloud Volumes ONTAP [CVO]）中運行</block>
  <block id="5055de7b9d28f88e537f99f34959c80c" category="list-text">填寫特定於您的環境的變量，然後將其複製並貼上到作業範本中的 Extra Vars 欄位中。</block>
  <block id="d116f375db402ba471f519c0a4df15dc" category="list-text">將額外的變數新增至您的作業範本後，您可以啟動自動化。</block>
  <block id="4d0c05180ba83e5c8a9bbac094c365e2" category="list-text">自動化設定為運行三個階段（設定、Oracle 二進位檔案的複製計劃、資料庫、日誌和僅用於日誌的複製計劃），第四階段是在 DR 站點恢復資料庫。</block>
  <block id="936c99ed52ca08a052ebf611285dd998" category="inline-link-macro">收集 CVO 和連接器部署的先決條件</block>
  <block id="cb21368a15e2a3d47638571824353844" category="list-text">有關取得 CVO 資料保護所需金鑰和令牌的詳細說明，請訪問<block ref="541e8965c61ba24b34b7d00d5a5a7eae" category="inline-link-macro-rx"></block></block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="section-title">要求</block>
  <block id="5cc03ec574b226dc804a31cac74694cd" category="open-title">&lt;strong class="big"&gt;本地&lt;/strong&gt;</block>
  <block id="0ba29c6a1afacf586b03a26162c72274" category="cell">環境</block>
  <block id="9d5cfca4ad04b54536e5ad15210f7dc2" category="cell">Ansible 環境</block>
  <block id="3f0733e14ebf265f0abf4b32371043ac" category="cell">Ansible v.2.10 及更高版本</block>
  <block id="3c91a74236fab100f024452f6df13b5e" category="cell">Python 3</block>
  <block id="215b38d177939de20bbb7b7913ce32c1" category="cell">Python 函式庫 - netapp-lib - xmltodict - jmespath</block>
  <block id="d911b17f4f4cdcca62a04ad77aa9403d" category="cell">ONTAP</block>
  <block id="72bd33cc372377848ab3bb360deb365e" category="cell">ONTAP版本 9.8 以上</block>
  <block id="10aadda84b1b1da26c3757dfdb59379d" category="cell">兩個數據聚合</block>
  <block id="9f998f9668ffe69c62d78760d1c531f0" category="cell">NFS vlan 和 ifgrp 創建</block>
  <block id="ba5f343281b90f0408008806c66bce86" category="cell">Oracle 伺服器</block>
  <block id="6f1de5f0d7966ebf5f8d255fe28ebffe" category="cell">RHEL 7/8</block>
  <block id="aa596da3b79631d86c0d35e1c4b03aac" category="cell">Oracle Linux 7/8</block>
  <block id="814e8f57514db6134b6ffcd7a4ce20a6" category="cell">NFS、公共和可選管理的網路接口</block>
  <block id="3ca63226b942aff3abcf62934a91e382" category="cell">來源上現有的 Oracle 環境，以及目標（DR 站台或公有雲）上等效的 Linux 作業系統</block>
  <block id="6114118ecf4e8d86a2e7c80bfab462f6" category="open-title">&lt;strong class="big"&gt;CVO&lt;/strong&gt;</block>
  <block id="675b1e5a01195fa5d419962701704b96" category="cell">在 Oracle EC2 執行個體上設定適當的交換空間，預設情況下，某些 EC2 執行個體部署時交換空間為 0</block>
  <block id="2f960df807c8ad51e74c447149eb2033" category="cell">*雲端管理器/AWS*</block>
  <block id="571f37fae4494df03321c2abe1fcc053" category="cell">AWS 存取/金鑰</block>
  <block id="7a5be8c4513f3bd0696db24a6bd977f4" category="cell">NetApp雲端管理器帳戶</block>
  <block id="99e55608ac5f1697eb6804aaf586af09" category="cell">NetApp雲端管理器刷新令牌</block>
  <block id="90ce695bbcc395d9d5538cb54be705c8" category="cell">將來源集群間 LIF 新增至 AWS 安全群組</block>
  <block id="ae9205dab0c26cca7762be5149a93923" category="section-title">自動化詳細信息</block>
  <block id="ba0676e7ae183e2c0bbd54261818154f" category="paragraph">此自動化部署採用由三個獨立角色組成的單一 Ansible 劇本設計。這些角色適用於ONTAP、Linux 和 Oracle 配置。下表描述了正在自動化的任務。</block>
  <block id="3f9ec2a23fee1cafeb1a700de677caac" category="cell">劇本</block>
  <block id="ef615563c8e8ea902c7fcac3cd2c4246" category="cell">任務</block>
  <block id="1f959110c5104b300b1a3d5fe3ee80dc" category="cell">ontap_setup</block>
  <block id="c0563eda0fb9d63778efe04a13a5d744" category="cell">ONTAP環境的預檢查</block>
  <block id="b7ed1e5c864a764f83f035d7f4f774ee" category="cell">在來源集群上建立集群間 LIF（可選）</block>
  <block id="73ddb5848c16203494697871a4e993cd" category="cell">在目標集群上建立集群間 LIF（可選）</block>
  <block id="04a35ce053d611d390fc192544fa4899" category="cell">建立叢集和 SVM 對等連接</block>
  <block id="4605aea1d05aa2979e72d73dd2c51773" category="cell">建立目標SnapMirror並初始化指定的 Oracle 卷</block>
  <block id="0dd4c7b6672d8937b6eb899b454fb7fe" category="cell">*ora_replication_cg*</block>
  <block id="7187aaa97acef94360159347d76a84c9" category="cell">在 /etc/oratab 中為每個資料庫啟用備份模式</block>
  <block id="f9198142d6e5690166713858ae8a0cdd" category="cell">Oracle 二進位與資料庫磁碟區的快照</block>
  <block id="23ba14a0a5cf33c38faec5b66fff712e" category="cell">SnapMirror 已更新</block>
  <block id="114debcae141b96db77c72e8a1e8fadb" category="cell">在 /etc/oratab 中關閉每個資料庫的備份模式</block>
  <block id="682094861a79bcba0e0ab2e193198762" category="cell">ora_replication_log</block>
  <block id="1d03ae98454d1c807318a1e29a4e2736" category="cell">在 /etc/oratab 中切換每個資料庫的目前日誌</block>
  <block id="47e4696811eedec695f727189503e8df" category="cell">Oracle 日誌卷的快照</block>
  <block id="86836efae3e3d868a96ae69bcbc987ba" category="cell">*ora_recovery*</block>
  <block id="6ceab4515ef4144abed0f0ce5ed3038f" category="cell">中斷SnapMirror</block>
  <block id="a6066c717f63ac99226b48abb4cf1d85" category="cell">啟用 NFS 並為目標上的 Oracle 磁碟區建立連線路徑</block>
  <block id="aa46cdc29b66725a1180f57d02f0cee3" category="cell">配置 DR Oracle 主機</block>
  <block id="dea9253f9b15f57a0c2161848a3c27a3" category="cell">掛載並驗證 Oracle 卷</block>
  <block id="ee95819ff53983a149759d555a93ba4b" category="cell">復原並啟動 Oracle 資料庫</block>
  <block id="5a6b57bc1fdf2f0e1259ed22f1d027a4" category="cell">*cvo_設定*</block>
  <block id="331c87cd495ffdc9cd55d8b3935a75f5" category="cell">環境預檢</block>
  <block id="5f17c8d8d95282db12506044ba4d6ab9" category="cell">AWS 配置/AWS 存取金鑰 ID/金鑰/預設區域</block>
  <block id="cef449920fe163cdd74231266cbdf23d" category="cell">創建AWS角色</block>
  <block id="85a4bcbc96cde90931ad369de96535b2" category="cell">在 AWS 中建立NetApp Cloud Manager Connector 實例</block>
  <block id="abe14752834b641e86064c7214f6719c" category="cell">在 AWS 中建立Cloud Volumes ONTAP (CVO) 實例</block>
  <block id="c2a9449cd3b0ae879520f450b65b1621" category="cell">將本機來源ONTAP叢集新增至NetApp Cloud Manager</block>
  <block id="fbb54d6efa6ca64af90fbe2289812be8" category="cell">啟用 NFS 並為目標 CVO 上的 Oracle 磁碟區建立連線路徑</block>
  <block id="bf60025632dd0c4a2cf35e8b33e80619" category="section-title">預設參數</block>
  <block id="3ef6389d9b9aacdce331793dd2a96ce8" category="paragraph">為了簡化自動化，我們預設了許多必要的 Oracle 參數的預設值。對於大多數部署來說，通常不需要更改預設參數。更高級的用戶可以謹慎地更改預設參數。預設參數位於 defaults 目錄下的每個角色資料夾中。</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link-macro">這裡</block>
  <block id="19adadc497199e16f07f9744d43b2899" category="paragraph">您應該閱讀 Github 儲存庫中所述的許可證資訊。透過存取、下載、安裝或使用此儲存庫中的內容，您同意所列出的授權條款<block ref="07d15b3b85718d883b437fb3739e59a7" category="inline-link-macro-rx"></block>。</block>
  <block id="87d624bc8a7f555a711e7214ee002eec" category="paragraph">請注意，製作和/或共享此存儲庫中的內容的任何衍生作品都受到某些限制。請務必閱讀<block ref="49480c711afcff6aca610d8294731030" category="inline-link-macro-rx"></block>在使用內容之前。如果您不同意所有條款，請不要存取、下載或使用此儲存庫中的內容。</block>
  <block id="a98d844e94ad28c8e0fb089e005d6b9f" category="inline-link-macro">點擊此處查看 AWX/Tower 詳細流程</block>
  <block id="8c0b74b24c0796d904107941c0434187" category="paragraph">準備好後，點擊<block ref="7eee2430c5f3886ce85eab1c7e8a8191" category="inline-link-macro-rx"></block>。</block>
  <block id="cb2418c01859c7704da751aa5a7d2421" category="doc">解決方案概述</block>
  <block id="63c0320f73b5f4e528bbe1488acc5103" category="section-title">Oracle 資料庫的自動資料保護</block>
  <block id="d798c6a829fee4b3d8316144e8769e91" category="paragraph">組織正在實現其環境自動化，以提高效率、加速部署並減少人工工作量。 Ansible 等組態管理工具正被用來簡化企業資料庫操作。在此解決方案中，我們示範如何使用 Ansible 透過NetApp ONTAP自動化 Oracle 的資料保護。透過讓儲存管理員、系統管理員和 DBA 能夠一致且快速地設定資料複製到異地資料中心或公有雲，您可以獲得以下好處：</block>
  <block id="5291cb8e681983247b899ce2364188f2" category="list-text">消除設計複雜性和人為錯誤，並實施可重複的一致部署和最佳實踐</block>
  <block id="1d4694b7ed077df8b2c51d4ef956ce0c" category="list-text">減少叢集間複製、CVO 實例化和 Oracle 資料庫復原的配置時間</block>
  <block id="a54e59b6b063d8a2bf18acffab877d09" category="list-text">提高資料庫管理員、系統和儲存管理員的工作效率</block>
  <block id="60bcf8682ddc3583a74e6cd2d95e1ccb" category="list-text">提供資料庫復原工作流程，以便於測試 DR 場景。</block>
  <block id="7d85c5a5f016aefeda6b89687f1307bb" category="paragraph">NetApp為客戶提供經過驗證的 Ansible 模組和角色，以加速 Oracle 資料庫環境的部署、設定和生命週期管理。此解決方案提供了說明和 Ansible 劇本程式碼，以協助您：</block>
  <block id="7fa4d3428dbef9829f6325b288c071bc" category="section-title">本地到本地複製</block>
  <block id="911a9e8dd85bfeeba31c1ed049e41e1c" category="list-text">在來源和目標上建立集群間 LIF</block>
  <block id="2f4eb56dd9301fc33f559b4345b90eb3" category="list-text">建立叢集和虛擬伺服器對等連接</block>
  <block id="2b71f4136dce37491ef0f319f5d1fbd9" category="list-text">建立並初始化 Oracle 磁碟區的SnapMirror</block>
  <block id="20f4a46f5b12b0533f7a2268c4c2bf41" category="list-text">透過 AWX/Tower 為 Oracle 二進位檔案、資料庫和日誌建立複製計劃</block>
  <block id="6ef1c2ae7c9ca61a54d88de28349a772" category="list-text">在目標上還原 Oracle DB，並使資料庫聯機</block>
  <block id="f4ec61d9ffa147f621f854609523a0fb" category="section-title">從本地到 AWS 中的 CVO</block>
  <block id="3f155aa6a9345b3e25f3bb44ecccfc0a" category="list-text">建立 AWS 連接器</block>
  <block id="1531cb3c2d4db27dcd3bfa2ad4711ec5" category="list-text">在 AWS 中建立 CVO 實例</block>
  <block id="2f159b717f78e9925b219e87cbd20f9a" category="list-text">將 On-Prem 叢集新增至 Cloud Manager</block>
  <block id="df16a1e23dbbcc2f19f07ab1af741617" category="list-text">在來源上建立集群間 LIF</block>
  <block id="68eff5f8d34b801d40ab55f098bc6478" category="inline-link-macro">點擊此處開始解決方案</block>
  <block id="54424c2f7d76f368ad64784745368677" category="paragraph">準備好後，點擊<block ref="34c80bad36975dcefa19451aa4330554" category="inline-link-macro-rx"></block>。</block>
  <block id="def8ebf26c2dec5f6af5a00893fae037" category="paragraph">此解決方案設計為在 AWX/Tower 環境中運作或透過 Ansible 控制主機上的 CLI 運作。</block>
  <block id="8ca0a52cf9938328875e0a8803ae71dd" category="list-text">作業範本透過為 ontap_config、linux_config 和 oracle_config 指定標籤分三個階段運作。</block>
  <block id="da3d0d670ace8a327170aa25ee29f272" category="section-title">透過 Ansible 控制主機的 CLI</block>
  <block id="8c649830ad367719c501f8fc9ba4d387" category="inline-link-macro">按此處查看詳細說明</block>
  <block id="ef284736d2c4bfcf65ee26d43359d9ab" category="list-text">設定 Linux 主機，以便將其用作 Ansible 控制主機<block ref="40c15f7a9c77327121f90c13f61a149b" category="inline-link-macro-rx"></block></block>
  <block id="28e934ddab7714830f8afe8d3b641dc9" category="list-text">設定 Ansible 控制主機後，您可以 git clone Ansible Automation 儲存庫。</block>
  <block id="f667be8dac02593d217a02ac5bfb18de" category="list-text">使用ONTAP叢集管理的 IP 和/或主機名稱以及 Oracle 伺服器的管理 IP 編輯 hosts 檔案。</block>
  <block id="95bd15e6b4a109de659c54c331c06284" category="list-text">填寫特定於您的環境的變量，然後將其複製並貼上到<block ref="5257c59f933f1208afadab7dd8ef3fe6" prefix=" " category="inline-code"></block>文件。</block>
  <block id="ca548be3e5f238d32286d43dc4c89f7b" category="list-text">每個 Oracle 主機都有一個由其主機名稱識別的變數文件，其中包含特定於主機的變數。</block>
  <block id="87192ebbcab92216d25fd694a282971d" category="list-text">所有變數檔案完成後，您可以透過指定標籤分三個階段運行劇本<block ref="0aadb2735557202c6ab978c489e2b6e9" prefix=" " category="inline-code"></block>，<block ref="7ee7ce51db32cbf806a0c21c648f4c2b" prefix=" " category="inline-code"></block> ， 和<block ref="b656a5ae2d7a83cf0ead9c81fb96ec17" prefix=" " category="inline-code"></block>。</block>
  <block id="eebc1357e7d1e88ed4e4908d5ae86c0b" category="cell">AWX/Tower 或 Linux 主機作為 Ansible 控制主機</block>
  <block id="0a928fe81d89083ed303ea3d9f1af8c9" category="cell">ONTAP版本 9.3 - 9.7</block>
  <block id="515f291f3ecc550c5d13cf31fadba91d" category="cell">Oracle 伺服器上的 Oracle 安裝文件</block>
  <block id="bbbabdbe1b262f75d99d62880b953be1" category="cell">角色</block>
  <block id="9bb642814808cd0cab510ddfb9e5969c" category="cell">ontap_config</block>
  <block id="79b814c8267c6b7822e78ab4624db8e0" category="cell">為 Oracle 建立基於 NFS 的 SVM</block>
  <block id="0c981d6164da0d8e69cdb199966316b0" category="cell">制定出口政策</block>
  <block id="99179ac01bbb0236fc540871377c55c4" category="cell">為 Oracle 建立卷</block>
  <block id="db738705829d97db1e287ad8ea9e5400" category="cell">建立 NFS LIF</block>
  <block id="089c4c184b079d771501d8ceb0f3bb05" category="cell">*linux_配置*</block>
  <block id="3ea572544d30a39d236496578f980d13" category="cell">建立掛載點並掛載 NFS 卷</block>
  <block id="db6c0f994cc39fbf66d58eea6c627e6a" category="cell">驗證 NFS 掛載</block>
  <block id="6a882e7966e7869ab1d2112a0b1c0074" category="cell">作業系統特定配置</block>
  <block id="6e6d41d1398fafd8809de20e831c9ce3" category="cell">建立 Oracle 目錄</block>
  <block id="6f965a5d44e1653dac9825f465f71c84" category="cell">配置大頁面</block>
  <block id="be577868fe0712b7bbb6d5cb5eae613c" category="cell">停用 SELinux 和防火牆守護進程</block>
  <block id="bb6f16330211bf24baa83db38b11e4a9" category="cell">啟用並啟動 chronyd 服務</block>
  <block id="e9e5cefa281d2c696aac82ef9c756f51" category="cell">增加檔案描述符的硬限制</block>
  <block id="a4acc779f882208c081f943aedfeab5c" category="cell">建立 pam.d 會話文件</block>
  <block id="d03021f9e02b9fa9ebac591ad4bfea08" category="cell">*oracle_配置*</block>
  <block id="5e706781d4bf141c80e249a244179235" category="cell">Oracle軟體安裝</block>
  <block id="1a98fce6d77de1126bf3cb8247747621" category="cell">建立 Oracle 監聽器</block>
  <block id="841df7bfbef212936073c6d261d4dba9" category="cell">建立 Oracle 資料庫</block>
  <block id="845a6e024025bb13aafdc167511e5e7d" category="cell">Oracle環境配置</block>
  <block id="666113957f940ba4319b4f0d9c3e86c0" category="cell">保存 PDB 狀態</block>
  <block id="264bca6ddd5a16346460d9c21e8f926d" category="cell">啟用實例存檔模式</block>
  <block id="620ca5ae835411d2031ca0fdbbbe61a1" category="cell">啟用 DNFS 用戶端</block>
  <block id="4d7e6c9b84f6f86cf4817262ad424eeb" category="cell">在作業系統重新啟動之間啟用資料庫自動啟動和關閉</block>
  <block id="ebda2606845855cc07ce0ce15ecf8a00" category="paragraph">為了簡化自動化，我們預設了許多必要的 Oracle 部署參數的預設值。對於大多數部署來說，通常不需要更改預設參數。更高級的用戶可以謹慎地更改預設參數。預設參數位於 defaults 目錄下的每個角色資料夾中。</block>
  <block id="452eff11ca6d680a279a3e81b8dc8974" category="section-title">部署說明</block>
  <block id="1cf7ad9cd74067dd3f4aee3c1690ea32" category="paragraph">在開始之前，請下載以下 Oracle 安裝和修補程式文件，並將它們放在<block ref="d66a510d21988f96fd9c018f6843c729" prefix=" " category="inline-code"></block>每個要部署的資料庫伺服器上的所有使用者均具有讀取、寫入和執行存取權限的目錄。自動化任務在該特定目錄中尋找指定的安裝檔案以進行 Oracle 安裝和設定。</block>
  <block id="5abe869dd828ac1e4527f07db79841a8" category="inline-link-macro">點擊此處查看 AWX/Tower 部署的詳細步驟</block>
  <block id="c3bcf861ccc9247a7c0a9b4749747e4e" category="inline-link-macro">此處用於 CLI 部署</block>
  <block id="fa01f068eaaf85b625368055e22487ea" category="paragraph">準備好後，點擊<block ref="db0e51d6d77e869c7da6e8cb4dc7151c" category="inline-link-macro-rx"></block>或者<block ref="205ff37c8db6a7182f8647c7a493f2c7" category="inline-link-macro-rx"></block>。</block>
  <block id="13d13fda6fbfbd83ab30f9a5bee17b08" category="section-title">在 NFS 上自動部署 Oracle19c for ONTAP</block>
  <block id="9ce6d30135c2644ff34390c65af4061b" category="paragraph">組織正在實現其環境自動化，以提高效率、加速部署並減少人工工作量。 Ansible 等組態管理工具正被用來簡化企業資料庫操作。在此解決方案中，我們示範如何使用 Ansible 自動設定和設定具有NetApp ONTAP的 Oracle 19c。透過讓儲存管理員、系統管理員和 DBA 能夠一致、快速地部署新儲存、配置資料庫伺服器和安裝 Oracle 19c 軟體，您可以獲得以下好處：</block>
  <block id="a90516bf4597e04e1a97bd9cb37087d8" category="list-text">減少儲存配置、資料庫主機配置和 Oracle 安裝的時間</block>
  <block id="d18d76441366273feb36bde890ad5e1c" category="list-text">輕鬆實現儲存和資料庫的擴展</block>
  <block id="547b893b7cd300d6a8335f5b179ad12e" category="list-text">為 Oracle 資料庫建立和配置ONTAP NFS 存儲</block>
  <block id="36bb01ec9f02292fb44b9f10f57ceae7" category="list-text">在 RedHat Enterprise Linux 7/8 或 Oracle Linux 7/8 上安裝 Oracle 19c</block>
  <block id="548bf87c41c9d3bb76981decbd599c90" category="list-text">在ONTAP NFS 儲存上配置 Oracle 19c</block>
  <block id="950496934d91d07bb089d6ed0999b5a9" category="paragraph">欲了解更多詳細資訊或開始，請觀看下面的概述影片。</block>
  <block id="b923f56ad2a53fa1a3ca1160e48f141e" category="section-title">AWX/塔式部署</block>
  <block id="ab81e47672e89830ec16c581f44cb23c" category="paragraph">第 1 部分：入門、需求、自動化詳細資訊和初始 AWX/Tower 配置</block>
  <block id="44f9187dc57a34800a68152bf3e51e8f" category="video-title">AWX 部署</block>
  <block id="cf7bbd18f18fdc73ee49ffea888126c7" category="paragraph">第 2 部分：變數和運行劇本</block>
  <block id="9234eaf4b40d25f09b5abdd71c1e1a7b" category="video-title">AWX 劇本運行</block>
  <block id="f5e227cfa54c5693c512c6adf41a3772" category="section-title">CLI部署</block>
  <block id="0b8a09b5974336d1f5e510d18205c03c" category="paragraph">第 1 部分：入門、需求、自動化詳細資訊和 Ansible 控制主機設置</block>
  <block id="9225d2c6eb68109e4084ab87f17664fa" category="video-title">CLI Playbook 運行</block>
  <block id="cdac44ff22ec226b2a64bcc97a676457" category="summary">閱讀博客，了解有關將ONTAP儲存與NetApp資料庫解決方案整合的實用指導和最佳實踐。</block>
  <block id="bdcf5e7d166fb271b3f746d3e9045375" category="doc">閱讀NetApp專家的資料庫解決方案博客</block>
  <block id="6a211bce28b13011e81530086a186758" category="inline-link-macro">使用NetApp SnapCenter和Amazon FSx ONTAP保護您的 SQL Server 工作負載</block>
  <block id="e3611377b31e2b1fab270cf0ecadd740" category="list-text"><block ref="e3611377b31e2b1fab270cf0ecadd740" category="inline-link-macro-rx"></block></block>
  <block id="aeb79a141f3c3f603cee05dfa64277aa" category="inline-link-macro">使用Amazon FSx儲存在混合雲中實現 Oracle 資料庫操作的現代化</block>
  <block id="a35641294527bf47526671d78d910a7e" category="list-text"><block ref="a35641294527bf47526671d78d910a7e" category="inline-link-macro-rx"></block></block>
  <block id="c4ff33edf6e94fb434fb59e4ad2c286b" category="inline-link-macro">採用SnapCenter的混合雲資料庫解決方案</block>
  <block id="e6c9e9316fee7048645938d93d674056" category="list-text"><block ref="e6c9e9316fee7048645938d93d674056" category="inline-link-macro-rx"></block></block>
  <block id="fc25c016a8fb35a621842044a8d4f2e7" category="inline-link-macro">在混合雲中自動化您的 Oracle 資料庫基礎架構</block>
  <block id="3e78754f8bb90f06073e18a2399d0b7f" category="list-text"><block ref="3e78754f8bb90f06073e18a2399d0b7f" category="inline-link-macro-rx"></block></block>
  <block id="ac9bef0f960e3a46befd2d06b223b61d" category="summary">本節描述了用於開發/測試和 DR 操作的典型混合雲架構。</block>
  <block id="9f6302143996033ebb94d536b860acc3" category="doc">解決方案架構</block>
  <block id="4085a97aa705c0122bbcec0c84dd97d3" category="paragraph">下圖架構圖展示了混合雲中企業資料庫操作的典型實現，用於開發/測試和災難復原操作。</block>
  <block id="5e8f0f670e38fbdf628b0883f946934f" category="inline-image-macro">此圖顯示輸入/輸出對話框或表示書面內容</block>
  <block id="baa9f1b18527b789ada465cfa654f1f3" category="paragraph"><block ref="baa9f1b18527b789ada465cfa654f1f3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3cdc302c6d83b60c8ec7ad0b550e55a8" category="paragraph">在正常的業務運作中，可以將雲端中的同步資料庫磁碟區複製並掛載到開發/測試資料庫實例，以進行應用程式開發或測試。一旦發生故障，就可以啟動雲端中同步的資料庫磁碟區進行災難復原。</block>
  <block id="467bda78c0e1adcc5ed650843fbfbdf5" category="summary">本節介紹在 AWS 中部署 Cloud Manager 和Cloud Volumes ONTAP的流程。</block>
  <block id="298a4809d5445df75b6c4a9fb94074a4" category="doc">AWS 公有雲入門</block>
  <block id="8a3f037eef48de78bfe13d14e3d7cdfa" category="section-title">AWS 公有雲</block>
  <block id="87aa698992e009d04733c9906225592c" category="admonition">為了讓事情更容易理解，我們根據 AWS 中的部署建立了此文件。但是，Azure 和 GCP 的流程非常相似。</block>
  <block id="39845311263ccad04c0d4f0b9aa9d4c6" category="section-title">1.飛行前檢查</block>
  <block id="12ed93944854c12caa37886d620f16db" category="paragraph">在部署之前，請確保基礎架構已到位，以便進行下一階段的部署。其中包括以下內容：</block>
  <block id="c6368ae044df0f7bb26ed60afda5c591" category="list-text">AWS 帳號</block>
  <block id="4019c185756035c18c03fabfccd7d4b2" category="list-text">您選擇的區域中的 VPC</block>
  <block id="fca5d2fece6e360f78dff4573ba04a20" category="list-text">可存取公共網際網路的子網</block>
  <block id="e3e5c3dadc3e70d536645a3be9744f79" category="list-text">將 IAM 角色新增至您的 AWS 帳戶的權限</block>
  <block id="bd5c82fb0e0371a168f609848b11e92a" category="list-text">您的 AWS 使用者的金鑰和存取金鑰</block>
  <block id="c3d1ff3c88148b2246bb0972916da82a" category="section-title">2.在 AWS 中部署 Cloud Manager 和Cloud Volumes ONTAP 的步驟</block>
  <block id="6d0eb695a99109617b806676e9610075" category="inline-link">NetApp雲端文檔</block>
  <block id="593581e466784760a050bceaea5e0c48" category="admonition">部署 Cloud Manager 和Cloud Volumes ONTAP 的方法有很多；這個方法最簡單，但需要的權限最多。如果此方法不適合您的 AWS 環境，請諮詢<block ref="97a20614f8c0e53f461a9353634e5e51" category="inline-link-rx"></block>。</block>
  <block id="bb3e779fdf877143137572122cf424e3" category="section-title">部署 Cloud Manager 連接器</block>
  <block id="1273c8a63109161e6fd1f18d6998523f" category="inline-link">NetApp BlueXP</block>
  <block id="1bb916142b871b5d3ca15de98567916e" category="list-text">導航至<block ref="830bc671a5f7a65e4c0ded8f63d397ba" category="inline-link-rx"></block>並登入或註冊。</block>
  <block id="e282a5afe40f9227d1f4acfdd3e5e741" category="paragraph"><block ref="e282a5afe40f9227d1f4acfdd3e5e741" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2300b8579a8761e452d89a2af6636b7d" category="list-text">登入後，您將進入 Canvas。</block>
  <block id="7ac8c7bcb29721730eca3892f6e6f8c7" category="paragraph"><block ref="7ac8c7bcb29721730eca3892f6e6f8c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a3fbf2c408ce86ff3403990e7e32dcb3" category="list-text">按一下「新增工作環境」並選擇 AWS 中的Cloud Volumes ONTAP 。在這裡，您還可以選擇是否要部署單節點系統或高可用性對。我已選擇部署高可用性對。</block>
  <block id="cabea866322ee15f6ad51d3a7a478bd0" category="paragraph"><block ref="cabea866322ee15f6ad51d3a7a478bd0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="016aa0c0a7322975ec4b8eeac805f2c0" category="list-text">如果尚未建立連接器，則會出現一個彈出窗口，要求您建立連接器。</block>
  <block id="6fcf6b9fcfb4b68ea9b356249917f8b4" category="paragraph"><block ref="6fcf6b9fcfb4b68ea9b356249917f8b4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4fc3362a0d8ab63cc8fa21bbd0fb07db" category="list-text">按一下“開始”，然後選擇 AWS。</block>
  <block id="7af8af3ae01ae5f5dac500ebebdcfff4" category="paragraph"><block ref="7af8af3ae01ae5f5dac500ebebdcfff4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="deae4c054bb3102bbf634b14534da9bf" category="inline-link">NetApp政策頁面</block>
  <block id="651d429a2b6cfcd93f6adb1d4825a214" category="list-text">輸入您的密鑰和存取密鑰。確保您的用戶具有<block ref="fb0c65a047527c32e46baadcaacb4fe2" category="inline-link-rx"></block>。</block>
  <block id="ed76687fb3bd96d32653a4364e17843a" category="paragraph"><block ref="ed76687fb3bd96d32653a4364e17843a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d8d59b60a74630e45f83fd3c48207b47" category="list-text">為連接器命名，並使用預定義角色（如上所述）<block ref="fb0c65a047527c32e46baadcaacb4fe2" category="inline-link-rx"></block>或要求 Cloud Manager 為您建立角色。</block>
  <block id="de6bc4c9b9d28ba5c38022a1273a6f8d" category="paragraph"><block ref="de6bc4c9b9d28ba5c38022a1273a6f8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02d395705fb063ad8d33d8c83c856e6f" category="list-text">提供部署連接器所需的網路資訊。透過以下方式驗證是否已啟用出站網際網路存取：</block>
  <block id="8215126360cbe5d8f5566c7ffc8cf224" category="list-text">為連接器提供公用 IP 位址</block>
  <block id="22adb619c008bfd7495288573093ae44" category="list-text">為連接器提供代理來工作</block>
  <block id="58a149795bbe86e4e0d4ab8f10413219" category="list-text">透過互聯網網關為連接器提供到公共互聯網的路由</block>
  <block id="4eeccd1cb887dc911ed82bc677d8d983" category="paragraph"><block ref="4eeccd1cb887dc911ed82bc677d8d983" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7c58ebc9f032dc8d2e5c4f522cedbe0b" category="list-text">透過提供安全群組或建立新的安全群組，透過 SSH、HTTP 和 HTTPs 提供與連接器的通訊。我已啟用僅從我的 IP 位址存取連接器。</block>
  <block id="9fa6c6b8e5eb14feb24cb9d696157553" category="paragraph"><block ref="9fa6c6b8e5eb14feb24cb9d696157553" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cb444cfaba774437ecdbbb95856d94cd" category="list-text">查看摘要頁面上的信息，然後按一下「新增」以部署連接器。</block>
  <block id="154cd816f1285c58e16ece21967da034" category="paragraph"><block ref="154cd816f1285c58e16ece21967da034" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4255ace47c9ad7f2907c18df7512bb9f" category="list-text">連接器現在使用雲形成堆疊進行部署。您可以從 Cloud Manager 或透過 AWS 監控其進度。</block>
  <block id="057efd602c076f03093e38cc99809898" category="paragraph"><block ref="057efd602c076f03093e38cc99809898" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ca320cc147e2b9fac2dd7379e91012b6" category="list-text">部署完成後，會出現成功頁面。</block>
  <block id="87085175bd7e42e9ef939779233b1cde" category="paragraph"><block ref="87085175bd7e42e9ef939779233b1cde" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6382283fd45b13b5c983745731fec990" category="section-title">部署Cloud Volumes ONTAP</block>
  <block id="5fe90897c7135ba3020c4a397f55adb6" category="list-text">根據您的要求選擇 AWS 和部署類型。</block>
  <block id="b6bcc3b2a65dfe49900cc36f9acb3b2a" category="paragraph"><block ref="b6bcc3b2a65dfe49900cc36f9acb3b2a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ccf1300c5621fdebe8c1a70fade44f3b" category="list-text">如果尚未分配訂閱並且您希望使用 PAYGO 購買，請選擇編輯憑證。</block>
  <block id="0f7cc3cf4af39efaea394cb57ecc125b" category="paragraph"><block ref="0f7cc3cf4af39efaea394cb57ecc125b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="88eb84b1a8f0417c9de6e1202125df56" category="list-text">選擇新增訂閱。</block>
  <block id="91efa79ff5f66479423223a997f1b40f" category="paragraph"><block ref="91efa79ff5f66479423223a997f1b40f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="052208bafdfe08bc8f0735a78226e541" category="list-text">選擇您想要訂閱的合約類型。我選擇了現收現付。</block>
  <block id="462124be98dbf5df5b3711d4f6c77a63" category="paragraph"><block ref="462124be98dbf5df5b3711d4f6c77a63" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65577508f7897e730adb501d0db73913" category="list-text">您將被重定向到 AWS；選擇繼續訂閱。</block>
  <block id="49a6585bc40dcafc761db93ca75ed3c6" category="paragraph"><block ref="49a6585bc40dcafc761db93ca75ed3c6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="439c4fb23c120f0a99894c630cedaabd" category="list-text">訂閱後您將被重定向回NetApp Cloud Central。如果您已經訂閱且沒有被重新導向，請選擇「按一下此處」連結。</block>
  <block id="72b26a095b546317a1edbb45780701ee" category="paragraph"><block ref="72b26a095b546317a1edbb45780701ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="14b9e98d2b57da92c29826ce7de32c32" category="list-text">您將被重定向到 Cloud Central，您必須在其中命名您的訂閱並將其指派給您的 Cloud Central 帳戶。</block>
  <block id="4dc70c9e1cfa86bc3ece7f5fd5341124" category="paragraph"><block ref="4dc70c9e1cfa86bc3ece7f5fd5341124" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4508f5994d1b34ff85cd1e8a1884d6c1" category="list-text">成功後，會出現一個複選標記頁面。導航回您的“雲端管理器”標籤。</block>
  <block id="f8420c2b2f2432184965cc0cd80ef5a0" category="paragraph"><block ref="f8420c2b2f2432184965cc0cd80ef5a0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3294e5fb9ec1c42cde7ebf9b206c583" category="list-text">訂閱現在出現在 Cloud Central 中。點擊“應用”繼續。</block>
  <block id="ad10b8c573c47bcb7c2f6750597c3a08" category="paragraph"><block ref="ad10b8c573c47bcb7c2f6750597c3a08" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f7927b068a5dddb4852b2e7dc256544" category="list-text">輸入工作環境詳細信息，例如：</block>
  <block id="0dbae4d42c7a0db53e2eb32adee12892" category="list-text">叢集名稱</block>
  <block id="0c191ee206a91460fd94e2ff976a38e7" category="list-text">叢集密碼</block>
  <block id="53aa18427d1e2c7b7113c668561a62d2" category="list-text">AWS 標籤（可選）</block>
  <block id="3c6089f7361889520b00f7575c90e93e" category="paragraph"><block ref="3c6089f7361889520b00f7575c90e93e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e3acd739fdfa810ca8857d8784a12d39" category="inline-link">BlueXP：現代數據資產運營變得簡單</block>
  <block id="7d660e4b5afe11344e161db394235b71" category="list-text">選擇您想要部署的附加服務。要了解有關這些服務的更多信息，請訪問<block ref="e261d37fe9d84ead5e578786e73e06d6" category="inline-link-rx"></block>。</block>
  <block id="a31642aee7d43c2824d20eb29cc4ef27" category="paragraph"><block ref="a31642aee7d43c2824d20eb29cc4ef27" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e0dffa77d5644a3816ba69e24ce813ff" category="list-text">選擇是在多個可用區中部署（需要三個子網，每個子網路位於不同的 AZ 中），還是在單一可用區中部署。我選擇了多個可用區。</block>
  <block id="373394cacbff6f77a52fde009c163d3d" category="paragraph"><block ref="373394cacbff6f77a52fde009c163d3d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b889b7255c34e7f230e392668605860" category="list-text">選擇要部署叢集的區域、VPC 和安全群組。在本節中，您還將分配每個節點（和中介）的可用區域以及它們佔用的子網路。</block>
  <block id="815e3827acb1c1b8d9d8a51937da90cd" category="paragraph"><block ref="815e3827acb1c1b8d9d8a51937da90cd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="be43ebbf5380089f153e4f1b13e35e6f" category="list-text">選擇節點和中介的連接方法。</block>
  <block id="82d184747f0abe75a5d983d70aae4972" category="paragraph"><block ref="82d184747f0abe75a5d983d70aae4972" category="inline-image-macro-rx" type="image"></block></block>
  <block id="204bd52e1d13052712299779cf041df6" category="admonition">中介需要與 AWS API 進行通訊。只要在部署中介 EC2 執行個體後 API 可以訪問，就不需要公用 IP 位址。</block>
  <block id="52fade87431f9acc43b7bf6e4c5fd2f1" category="inline-link">NetApp雲端文檔</block>
  <block id="0c79e4a46253eeb94ba6b8218928aa99" category="list-text">浮動 IP 位址用於允許存取Cloud Volumes ONTAP使用的各種 IP 位址，包括叢集管理和資料服務 IP。這些必須是您的網路內尚未路由的位址，並且已新增至您的 AWS 環境中的路由表中。這些是在故障轉移期間為 HA 對啟用一致的 IP 位址所必需的。有關浮動 IP 位址的更多信息，請參閱<block ref="72cde540b4f97efa19e071f729439801" category="inline-link-rx"></block>。</block>
  <block id="f1618e40be863e66cd75f24e4cc7ad6a" category="paragraph"><block ref="f1618e40be863e66cd75f24e4cc7ad6a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="95ca6b5e9b64aed9132a6be07d061f3b" category="list-text">選擇將浮動 IP 位址新增至哪些路由表。客戶端使用這些路由表與Cloud Volumes ONTAP進行通訊。</block>
  <block id="66bdb0f1c34a4b7ba044d0d6a7570891" category="paragraph"><block ref="66bdb0f1c34a4b7ba044d0d6a7570891" category="inline-image-macro-rx" type="image"></block></block>
  <block id="af918e519f9c0db1ed5ab4fd4b6e9e05" category="list-text">選擇是否啟用 AWS 託管加密或 AWS KMS 來加密ONTAP根磁碟、啟動磁碟和資料磁碟。</block>
  <block id="141e915d3c15643bd1e7f08d11ba8ae3" category="paragraph"><block ref="141e915d3c15643bd1e7f08d11ba8ae3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="01bd54fa77587425fca4a6c352309b5c" category="list-text">選擇您的授權模式。如果您不知道選擇哪一個，請聯絡您的NetApp代表。</block>
  <block id="a223ede8eeb34284274940e7b11bbcec" category="paragraph"><block ref="a223ede8eeb34284274940e7b11bbcec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="04110b24d1459a6e21e35ad976a8f10e" category="list-text">選擇最適合您的用例的配置。這與先決條件頁面中涵蓋的尺寸考量有關。</block>
  <block id="b4f3c2a2c1f02c4a4a482b595655fca8" category="paragraph"><block ref="b4f3c2a2c1f02c4a4a482b595655fca8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ed47788a525c6d08246bfa2f90922da" category="list-text">（可選）建立一個磁碟區。這不是必需的，因為下一步使用SnapMirror，它會為我們建立磁碟區。</block>
  <block id="6f02bb954ac3558619d2e463a48e8331" category="paragraph"><block ref="6f02bb954ac3558619d2e463a48e8331" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76011f95c4e1b3f68fa5829dab0fb786" category="list-text">檢查所做的選擇並勾選對應方塊以驗證您了解 Cloud Manager 將資源部署到您的 AWS 環境中。準備就緒後，按一下“Go”。</block>
  <block id="502e46e84b4616db614c669176be0d9a" category="paragraph"><block ref="502e46e84b4616db614c669176be0d9a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="13b7f009673a469e5482a96832be1473" category="list-text">Cloud Volumes ONTAP現在開始其部署過程。 Cloud Manager 使用 AWS API 和雲端形成堆疊來部署Cloud Volumes ONTAP。然後，它會根據您的要求配置系統，為您提供可立即使用的即用型系統。過程的時間根據所做的選擇而有所不同。</block>
  <block id="899952570e24fd3fc37c3e57d3d1271b" category="paragraph"><block ref="899952570e24fd3fc37c3e57d3d1271b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5e63d2329924bb302fb012e7916b3614" category="list-text">您可以透過導航到時間軸來監控進度。</block>
  <block id="a080dfe218cdd73e65880324f6d560f6" category="paragraph"><block ref="a080dfe218cdd73e65880324f6d560f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b4df7cc92b3ee31f5d95082a78c7903" category="list-text">時間軸可作為在雲端管理器中執行的所有操作的審核。您可以查看 Cloud Manager 在設定期間對 AWS 和ONTAP叢集發出的所有 API 呼叫。這也可以有效地用於解決您遇到的任何問題。</block>
  <block id="5801fcc13531ac6e2bab84a7380e103f" category="paragraph"><block ref="5801fcc13531ac6e2bab84a7380e103f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c5674ad1910f0a25455fdeb0f3f097a" category="list-text">部署完成後，CVO 叢集將出現在 Canvas 上，其目前容量。  ONTAP叢集在其目前狀態下已完全配置，可提供真正的開箱即用體驗。</block>
  <block id="22798f34a34152e28c020493921d7b15" category="paragraph"><block ref="22798f34a34152e28c020493921d7b15" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28d2e01957d5845ff59688f17bd34339" category="section-title">配置從本地到雲端的SnapMirror</block>
  <block id="081494b1a178710486921a42e2bdfa87" category="paragraph">現在您已經部署了來源ONTAP系統和目標ONTAP系統，您可以將包含資料庫資料的磁碟區複製到雲端。</block>
  <block id="cb3269c2496a99fb03bebe82b6a3e4bc" category="inline-link">SnapMirror相容性列表</block>
  <block id="46aad6288d89ba29f38b4742bf018aca" category="paragraph">有關SnapMirror相容ONTAP版本的指南，請參閱<block ref="f75a4f2138bf92eb17ef87cad85a9e34" category="inline-link-rx"></block>。</block>
  <block id="36c5350a8474f2212fecc811eb77df57" category="list-text">點擊來源ONTAP系統（本機）並將其拖曳到目標，選擇“複製”&gt;“啟用”，或選擇“複製”&gt;“選單”&gt;“複製”。</block>
  <block id="fd6d4e8848e8d4adc582f03e2f612053" category="paragraph"><block ref="fd6d4e8848e8d4adc582f03e2f612053" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8771a8fdaa9e84a7eef7540edcca5f40" category="paragraph">選擇啟用。</block>
  <block id="96450438aa2997b7c812909fa4df78c7" category="paragraph"><block ref="96450438aa2997b7c812909fa4df78c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a6a8dc55f6f333187a100f6ed328bdc0" category="paragraph">或選項。</block>
  <block id="bf014988275a6a68a8aea85a9c506c90" category="paragraph"><block ref="bf014988275a6a68a8aea85a9c506c90" category="inline-image-macro-rx" type="image"></block></block>
  <block id="066bf779660ad446aa9b0d4021c4bf40" category="paragraph">複製。</block>
  <block id="0826b46757f4933901b6c22820cdda65" category="paragraph"><block ref="0826b46757f4933901b6c22820cdda65" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5a803b2a55429f981d25fbb8da94aef7" category="list-text">如果您沒有進行拖放，請選擇要複製到的目標群集。</block>
  <block id="3b8d04b611a7f56afdf4446966fd5145" category="paragraph"><block ref="3b8d04b611a7f56afdf4446966fd5145" category="inline-image-macro-rx" type="image"></block></block>
  <block id="761124dc5e0730086556a7d33d43418c" category="list-text">選擇您想要複製的磁碟區。我們複製了資料和所有日誌卷。</block>
  <block id="77ae956b66b100d51263a6259495dece" category="paragraph"><block ref="77ae956b66b100d51263a6259495dece" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bde4e8497f5ecaef866c0f049aada776" category="list-text">選擇目標磁碟類型和分層策略。對於災難復原，我們建議使用 SSD 作為磁碟類型並維持資料分層。資料分層將鏡像資料分層到低成本的物件儲存中，從而節省本機磁碟的成本。當您中斷關係或複製磁碟區時，資料將使用快速的本機儲存。</block>
  <block id="5a1df9c1cf24f75033e265b1af247a15" category="paragraph"><block ref="5a1df9c1cf24f75033e265b1af247a15" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52f06f2f09c024b69ef3944a8cd78ad9" category="list-text">選擇目標磁碟區名稱：我們選擇<block ref="47456946fa180c1578446a0fa28fca75" prefix=" " category="inline-code"></block>。</block>
  <block id="f487f19ba7c577c89543481c7c13ddc6" category="paragraph"><block ref="f487f19ba7c577c89543481c7c13ddc6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2882a0dbc1a6ad74198ac2cb6316870d" category="list-text">選擇複製的最大傳輸速率。如果您與雲端的連線頻寬較低（例如 VPN），這可以節省頻寬。</block>
  <block id="a127301ec987f10a430a133488e8721b" category="paragraph"><block ref="a127301ec987f10a430a133488e8721b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f81dd66e0f0847d4cb1d2d12fadcc2f3" category="list-text">定義複製策略。我們選擇了鏡像，它獲取最新的資料集並將其複製到目標磁碟區中。您也可以根據您的要求選擇不同的保單。</block>
  <block id="89db4113eb86c6ebd683f41a52597113" category="paragraph"><block ref="89db4113eb86c6ebd683f41a52597113" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4db5384e8d04b01ff24a9178b3efaf6a" category="list-text">選擇觸發複製的計劃。  NetApp建議為資料卷設定「每日」計劃，為日誌卷設定「每小時」計劃，但這可以根據需求進行更改。</block>
  <block id="88bb947a9d39428caa209ad67ae72578" category="paragraph"><block ref="88bb947a9d39428caa209ad67ae72578" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02e3a269661e3c96a86a075872a1b269" category="list-text">檢查輸入的信息，按一下「Go」以觸發叢集對等和 SVM 對等（如果這是您第一次在兩個叢集之間進行複製），然後實施並初始化SnapMirror關係。</block>
  <block id="cd89073929b0f96bebb967e45c151c9c" category="paragraph"><block ref="cd89073929b0f96bebb967e45c151c9c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c160366cab97ee8f1a35416d1294ddb" category="list-text">對資料捲和日誌卷繼續此程序。</block>
  <block id="64853c47f4f907262466c1e5ad154c8c" category="list-text">若要檢查所有關係，請導覽至 Cloud Manager 內的「複製」標籤。您可以在這裡管理您的關係並檢查其狀態。</block>
  <block id="84385394a29330eb8f3ddc777e052ead" category="paragraph"><block ref="84385394a29330eb8f3ddc777e052ead" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c88bec52f9e24233a78b6a90efa32ec6" category="list-text">複製所有磁碟區後，您將處於穩定狀態並準備繼續進行災難復原和開發/測試工作流程。</block>
  <block id="86fb3ee49ae2f8c0ee121c551a8f08c2" category="section-title">3.為資料庫工作負載部署 EC2 運算執行個體</block>
  <block id="91ba52045df2b9244f28270482f749c9" category="inline-link">EC2 執行個體類型</block>
  <block id="33aaa72e62140af9cecb2c48f836b84b" category="paragraph">AWS 已為各種工作負載預先配置了 EC2 運算執行個體。實例類型的選擇決定了CPU核心數、記憶體容量、儲存類型和容量以及網路效能。對於用例，除了作業系統分區之外，運行資料庫工作負載的主儲存是從 CVO 或 FSx ONTAP儲存引擎分配的。因此，主要考慮的因素是CPU核心、記憶體和網路效能水準的選擇。典型的 AWS EC2 執行個體類型可以在這裡找到：<block ref="9334d5b9e602c5921b4f295f6041489b" category="inline-link-rx"></block> 。</block>
  <block id="0af43c3d809d6e56a6a7a0d1ed039bbc" category="section-title">調整計算實例的大小</block>
  <block id="0b6e77aedd6bd733f979314fef2a98d7" category="list-text">根據所需的工作負載選擇正確的執行個體類型。需要考慮的因素包括要支援的業務交易數量、並髮用戶數量、資料集大小等等。</block>
  <block id="ed4b68006572e288530a2152f7fbe5fe" category="list-text">可以透過 EC2 儀表板啟動 EC2 執行個體部署。確切的部署過程超出了本解決方案的範圍。看<block ref="3a5862dd365e3998013717e9cf118a9a" category="inline-link-rx"></block>了解詳情。</block>
  <block id="708991723f71fa1bd7b8081be442552c" category="section-title">Oracle 工作負載的 Linux 實例配置</block>
  <block id="5c17b7d75ff16063f772234e1ea8eeb1" category="paragraph">本節包含部署 EC2 Linux 執行個體後的附加設定步驟。</block>
  <block id="39d786446455bb2b3017b793805fc902" category="list-text">將 Oracle 備用執行個體新增至 DNS 伺服器，以便在SnapCenter管理網域內進行名稱解析。</block>
  <block id="385a2a4f5305fe5ce8017f18fb7eabd4" category="list-text">新增 Linux 管理使用者 ID 作為SnapCenter OS 憑證，具有 sudo 權限且無需密碼。在EC2實例上啟用帶有SSH密碼驗證的ID。  （預設情況下，EC2 實例上的 SSH 密碼驗證和無密碼 sudo 是關閉的。）</block>
  <block id="a2b4677d7a72840a78373c600441681a" category="list-text">配置 Oracle 安裝以符合內部 Oracle 安裝，例如作業系統修補程式、Oracle 版本和修補程式等。</block>
  <block id="66b65364302a847feb2630bfd7974256" category="inline-link">Oracle 19c 自動部署</block>
  <block id="fa470598a181c1ed905bace243e46aa3" category="list-text">可以利用NetApp Ansible DB 自動化角色來設定 EC2 執行個體以用於資料庫開發/測試和災難復原用例。可從NetApp公用 GitHub 網站下載自動化程式碼：<block ref="437f8b44ff65600fb5697e9d369a0c54" category="inline-link-rx"></block> 。目標是在 EC2 執行個體上安裝和配置資料庫軟體堆疊以匹配本機作業系統和資料庫配置。</block>
  <block id="97875b4799caf4c948118e7b4776c9fb" category="section-title">SQL Server 工作負載的 Windows 執行個體配置</block>
  <block id="c63751cfdcf8c0b4e26635a47c7f0d97" category="paragraph">本節列出了初始部署 EC2 Windows 執行個體後的其他設定步驟。</block>
  <block id="5f44e6a78874f9f49acae3caa71cc14d" category="list-text">檢索 Windows 管理員密碼以透過 RDP 登入實例。</block>
  <block id="eabafc642b0901afd6622ab0f19d9ef0" category="list-text">停用 Windows 防火牆，將主機加入 Windows SnapCenter網域，並將執行個體新增至 DNS 伺服器進行名稱解析。</block>
  <block id="08bf2d7ff3ac9ab37cfa8dc449b3c8da" category="list-text">配置SnapCenter日誌磁碟區來儲存 SQL Server 日誌檔案。</block>
  <block id="f97ac9d1946c873247af15165559b47a" category="list-text">在 Windows 主機上設定 iSCSI 以掛載磁碟區並格式化磁碟機。</block>
  <block id="6c2a9c611f48cae767f6ebea6fca0457" category="inline-link">NetApp自動化</block>
  <block id="6dea6226167bd38268de4c4d948d72de" category="list-text">同樣，許多先前的任務可以透過NetApp針對 SQL Server 的自動化解決方案實現自動化。查看NetApp自動化公共 GitHub 站點，了解新發布的角色和解決方案：<block ref="8cafb3a3b1222d318fcd262791229701" category="inline-link-rx"></block> 。</block>
  <block id="a10998cc3e1dc7f2a013754d935c4f26" category="summary">NetApp SnapCenter工具使用基於角色的存取控制 (RBAC) 來管理使用者資源存取和權限授予，並且SnapCenter安裝會建立預先填入的角色。您也可以根據您的需求或應用程式建立自訂角色。</block>
  <block id="7e3b07f9add4cd78ade3c795a52dfad2" category="doc">在本地開始</block>
  <block id="7146594a919f2b006b1b0911c7b6d7da" category="section-title">本地</block>
  <block id="d30e54646ba482722332f48ddc22bde5" category="section-title">1.在SnapCenter中設定資料庫管理員用戶</block>
  <block id="305421fd1d1b88bcd273862dd1e901c1" category="paragraph">為SnapCenter支援的每個資料庫平台設定專用的管理員使用者 ID 以進行資料庫備份、復原和/或災難復原是有意義的。您也可以使用單一 ID 來管理所有資料庫。在我們的測試案例和演示中，我們分別為 Oracle 和 SQL Server 建立了一個專用的管理員使用者。</block>
  <block id="27733e8f07432bb94ac7621b28d3b2c8" category="paragraph">某些SnapCenter資源只能透過 SnapCenterAdmin 角色進行設定。然後可以將資源分配給其他使用者 ID 進行存取。</block>
  <block id="64784aa3cec13e83af6e941f8489cf06" category="paragraph">在預先安裝和設定的本機SnapCenter環境中，以下任務可能已經完成。如果沒有，請按照以下步驟建立資料庫管理員使用者：</block>
  <block id="c8867eac833e7bb55520105b00139f1a" category="list-text">將管理員使用者新增至 Windows Active Directory。</block>
  <block id="dd3e743eb52cbe7c2b6104573a9767e0" category="list-text">使用授予 SnapCenterAdmin 角色的 ID 登入SnapCenter 。</block>
  <block id="a6bd76cb24271ba173d16f01bf4108d0" category="list-text">導覽至「設定和使用者」下的「存取」選項卡，然後按一下「新增」以新增使用者。新的使用者 ID 連結到步驟 1 中在 Windows Active Directory 中建立的管理員使用者。 。根據需要為使用者分配適當的角色。根據情況將資源分配給管理員使用者。</block>
  <block id="d81202c1709c994bd492ddc9a55b821a" category="paragraph"><block ref="d81202c1709c994bd492ddc9a55b821a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5d2c51e83f473f137861a132554d1916" category="section-title">2.SnapCenter插件安裝前提條件</block>
  <block id="7bd973d4d28d6fcf5f50379b33a49758" category="paragraph">SnapCenter使用在 DB 主機上執行的插件代理程式執行備份、復原、複製和其他功能。它透過在「設定和憑證」標籤下配置的憑證連接到資料庫主機和資料庫，以進行插件安裝和其他管理功能。根據目標主機類型（例如 Linux 或 Windows）以及資料庫類型，有特定的權限要求。</block>
  <block id="c342f214098114b90cb67297a2ef5dc3" category="paragraph">在安裝SnapCenter插件之前必須設定 DB 主機憑證。通常，您希望使用 DB 主機上的管理員使用者帳戶作為外掛程式安裝的主機連線憑證。您也可以使用基於作業系統的身份驗證授予相同的使用者 ID 以存取資料庫。另一方面，您也可以採用資料庫身份驗證，使用不同的資料庫使用者 ID 進行資料庫管理存取。如果您決定使用基於作業系統的身份驗證，則必須授予作業系統管理員使用者 ID 資料庫存取權限。對於基於 Windows 網域的 SQL Server 安裝，可以使用網域管理員帳戶來管理網域內的所有 SQL Server。</block>
  <block id="19df1192effefad83e57653fd3a47415" category="paragraph">SQL 伺服器的 Windows 主機：</block>
  <block id="e1cc3ce53d7753e33588201db3d3b147" category="list-text">如果您使用 Windows 憑證進行驗證，則必須在安裝外掛程式之前設定您的憑證。</block>
  <block id="a82f1290b72a26d654b93632a1ec50bb" category="list-text">如果您使用 SQL Server 執行個體進行驗證，則必須在安裝外掛程式後新增憑證。</block>
  <block id="63f74bef6650942c6795f96366a39e6a" category="list-text">如果您在設定憑證時啟用了 SQL 驗證，則發現的執行個體或資料庫將顯示紅色鎖定圖示。如果出現鎖定圖標，則必須指定實例或資料庫憑證才能成功將實例或資料庫新增至資源組。</block>
  <block id="b61dad3bbbf3270bf2dada5c2ac1f775" category="list-text">當滿足下列條件時，您必須將憑證指派給沒有 sysadmin 存取權限的 RBAC 使用者：</block>
  <block id="34cefb5a19894e4f9b1b068544c0f591" category="list-text">憑證已指派給 SQL 實例。</block>
  <block id="6707464a5871a6aa26dcf785bea4052c" category="list-text">SQL 實例或主機被指派給 RBAC 使用者。</block>
  <block id="4bc8aac02ff00d874ad8b4ccd4d745ed" category="list-text">RBAC DB 管理員使用者必須同時具有資源群組和備份權限。</block>
  <block id="9198b455aa67840c7a69c7a54e94301a" category="paragraph">Oracle 的 Unix 主機：</block>
  <block id="71d53e54a48cfe7de69347bcd854ef30" category="list-text">您必須透過編輯 sshd.conf 並重新啟動 sshd 服務為 root 或非 root 使用者啟用基於密碼的 SSH 連線。預設情況下，AWS 執行個體上的基於密碼的 SSH 驗證是關閉的。</block>
  <block id="efa873f0464a14d54b066f475ad74480" category="list-text">為非root使用者配置sudo權限，以安裝並啟動插件進程。安裝插件後，進程將以有效的 root 使用者身分執行。</block>
  <block id="82a2174029175f8fbc3f52fea4e18c84" category="list-text">為安裝使用者建立具有 Linux 驗證模式的憑證。</block>
  <block id="86b3cc44ebd8e0a9185e48c4f22e81e9" category="list-text">您必須在 Linux 主機上安裝 Java 1.8.x（64 位元）。</block>
  <block id="c1e8851d10ecc615c47a47f704569d29" category="list-text">安裝 Oracle 資料庫插件也會安裝適用於 Unix 的SnapCenter插件。</block>
  <block id="7efb27733d1fb21feae901a41580dced" category="section-title">3.SnapCenter主機插件安裝</block>
  <block id="37a5c714defad8175b81b4d49eb0544c" category="admonition">在嘗試在雲端 DB 伺服器實例上安裝SnapCenter插件之前，請確保已完成運算實例部署相關雲端部分中列出的所有設定步驟。</block>
  <block id="283aa502c28fe1c9ff8dadd1700955fc" category="paragraph">以下步驟說明如何在主機上安裝SnapCenter外掛程式時將資料庫主機新增至SnapCenter 。此過程適用於新增本機和雲端主機。以下示範新增了駐留在 AWS 中的 Windows 或 Linux 主機。</block>
  <block id="81ed46777c39c0d0618953601572fc27" category="section-title">配置SnapCenter VMware 全域設定</block>
  <block id="2aa8a40dbbfb6b52621408c81aa5373c" category="paragraph">導覽至設定 &gt; 全域設定。在虛擬機器管理程式設定下選擇“虛擬機器為所有主機配備 iSCSI 直連磁碟或 NFS”，然後按一下更新。</block>
  <block id="630d2f2ed5a911f843220a33278bd218" category="paragraph"><block ref="630d2f2ed5a911f843220a33278bd218" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1f63a469619859e4cfab52fd63523aca" category="section-title">新增Windows主機並在主機上安裝插件</block>
  <block id="997da6deedab4436b559e3a8f7f05a2e" category="list-text">使用具有 SnapCenterAdmin 權限的使用者 ID 登入SnapCenter 。</block>
  <block id="97e7f600216a2e9ae18423777e11ad9c" category="list-text">點擊左側選單中的“主機”選項卡，然後按一下“新增”以開啟“新增主機”工作流程。</block>
  <block id="35314bae57d7ff62ab36156211c1cc71" category="list-text">主機類型選擇 Windows；主機名稱可以是主機名稱或 IP 位址。必須將主機名稱解析為SnapCenter主機的正確主機 IP 位址。選擇在步驟 2 中建立的主機憑證。選擇Microsoft Windows和Microsoft SQL Server作為要安裝的插件套件。</block>
  <block id="43c147a0be605e0cc8ffded299f5c93f" category="paragraph"><block ref="43c147a0be605e0cc8ffded299f5c93f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31efcd689861354799bb539ab2571ebe" category="list-text">該插件在Windows主機上安裝後，其總體狀態顯示為「配置日誌目錄」。</block>
  <block id="1a913d932659d3d35b4180759a773272" category="paragraph"><block ref="1a913d932659d3d35b4180759a773272" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d2aeaa4503c6d72513c0dbe0f205ee3b" category="list-text">點選主機名稱開啟SQL Server日誌目錄配置。</block>
  <block id="4980596e0ec39fa5b3da0c04d170c15e" category="paragraph"><block ref="4980596e0ec39fa5b3da0c04d170c15e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8cb2b40646a77b4f044e7fa04ea20306" category="list-text">點選“設定日誌目錄”，開啟“設定SQL Server插件”。</block>
  <block id="3478df9e78b0299e0e178a5930a40303" category="paragraph"><block ref="3478df9e78b0299e0e178a5930a40303" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f7143b5d162d385dfb1af07f61c59f65" category="list-text">按一下「瀏覽」以發現NetApp存儲，以便可以設定日誌目錄； SnapCenter使用此日誌目錄來匯總 SQL 伺服器交易日誌檔案。然後點擊“儲存”。</block>
  <block id="5c0d12eb9a2ddfa9290c6622825ca9c2" category="paragraph"><block ref="5c0d12eb9a2ddfa9290c6622825ca9c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0d88588bdb07dd412a4ba1d08348b29" category="admonition">若要發現配置到 DB 主機的NetApp存儲，必須將儲存空間（本機或 CVO）新增至SnapCenter，如步驟 6 中 CVO 的範例所示。</block>
  <block id="d744af12906d55ab51aa932b3ffcd121" category="list-text">日誌目錄配置完成後，Windows主機插件「總體狀態」變為「正在運行」。</block>
  <block id="938b6bc2586cc7e65b6bfe8e127627c9" category="paragraph"><block ref="938b6bc2586cc7e65b6bfe8e127627c9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f41517f2e270a138f4ae92988a4cbdd2" category="list-text">若要將主機指派給資料庫管理使用者 ID，請導覽至「設定和使用者」下的「存取」標籤，按一下資料庫管理使用者 ID（在我們的範例中是需要指派主機的 sqldba），然後按一下「儲存」以完成主機資源指派。</block>
  <block id="f5992d2f2d3cd160bef3a5808ea9c7a8" category="paragraph"><block ref="f5992d2f2d3cd160bef3a5808ea9c7a8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6365b1367d600687545af5ce78d7db70" category="paragraph"><block ref="6365b1367d600687545af5ce78d7db70" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e2fe19c733a6342990513e02264db163" category="section-title">新增Unix主機並在主機上安裝插件</block>
  <block id="6a0f36be9f208d20c3c1145c3a09b876" category="list-text">點擊左側選單中的“主機”選項卡，然後按一下“新增”以開啟“新增主機”工作流程。</block>
  <block id="dd8c6d773e31c4254eb58b4b5e2ae1be" category="list-text">選擇 Linux 作為主機類型。主機名稱可以是主機名稱或 IP 位址。但是，必須將主機名稱解析為來自SnapCenter主機的正確主機 IP 位址。選擇在步驟 2 中建立的主機憑證。主機憑證需要 sudo 權限。選取要安裝的外掛程式“Oracle Database”，將同時安裝 Oracle 和 Linux 主機外掛程式。</block>
  <block id="80d821bdc7cae847f4be7da623786019" category="paragraph"><block ref="80d821bdc7cae847f4be7da623786019" category="inline-image-macro-rx" type="image"></block></block>
  <block id="711730391561a228d41f7fede13ca6e8" category="list-text">點擊更多選項並選擇“跳過預安裝檢查”。系統會提示您確認是否跳過預安裝檢查。按一下“是”，然後按一下“儲存”。</block>
  <block id="c9d2490259e25f3e50c0258ad77bad7c" category="paragraph"><block ref="c9d2490259e25f3e50c0258ad77bad7c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e095a093138c6b1968d313d5f799255a" category="list-text">點擊“提交”開始插件安裝。系統將提示您確認指紋，如下所示。</block>
  <block id="291f6500b7d39224bfa92d457c248ccc" category="paragraph"><block ref="291f6500b7d39224bfa92d457c248ccc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53dcda6f2c03efbe73ae5eb311852a8d" category="list-text">SnapCenter執行主機驗證和註冊，然後將外掛程式安裝在 Linux 主機上。狀態從“安裝插件”變更為“正在運行”。</block>
  <block id="f81df29b374ae9743afe1d3716f4dc6b" category="paragraph"><block ref="f81df29b374ae9743afe1d3716f4dc6b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="33ea9d9313933c68d640ebb655ec43dc" category="list-text">將新新增的主機指派給適當的資料庫管理使用者 ID（在我們的範例中為 oradba）。</block>
  <block id="b1dbe45375d0b7d2baf48b5aed7e8b63" category="paragraph"><block ref="b1dbe45375d0b7d2baf48b5aed7e8b63" category="inline-image-macro-rx" type="image"></block></block>
  <block id="af252eb4b41e7d4cf60750cceafa2713" category="paragraph"><block ref="af252eb4b41e7d4cf60750cceafa2713" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2b4c839521fd41e845e6e8c3158b809b" category="section-title">4.資料庫資源發現</block>
  <block id="45e46a9524f23884445bf542bf464b93" category="paragraph">插件安裝成功後，可以立即發現主機上的資料庫資源。點選左側選單中的“資源”標籤。根據資料庫平台的類型，有許多可用的視圖，例如資料庫、資源組等等。如果未發現並顯示主機上的資源，您可能需要按一下「刷新資源」標籤。</block>
  <block id="7b7e19406faf494c29928bb6d5e54d67" category="paragraph"><block ref="7b7e19406faf494c29928bb6d5e54d67" category="inline-image-macro-rx" type="image"></block></block>
  <block id="66789731e61fd3d4b6024e5fcb0945e1" category="paragraph">當資料庫最初被發現時，總體狀態顯示為「未受保護」。上圖顯示的是尚未受到備份策略保護的 Oracle 資料庫。</block>
  <block id="68148a1249ca9110d03c698ae152932a" category="paragraph">當設定了備份配置或策略並執行了備份時，資料庫的整體狀態會顯示備份狀態為「備份成功」以及上次備份的時間戳記。以下螢幕截圖顯示了 SQL Server 使用者資料庫的備份狀態。</block>
  <block id="1089618247726f9460b3a543d1a6c812" category="paragraph"><block ref="1089618247726f9460b3a543d1a6c812" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9c9616324bc00808729d46fba94ad75" category="paragraph">如果資料庫存取憑證未正確設置，則紅色鎖定按鈕表示資料庫無法存取。例如，如果 Windows 憑證沒有資料庫執行個體的系統管理員存取權限，則必須重新配置資料庫憑證才能解鎖紅鎖。</block>
  <block id="262b33baf188a7ac429e46f8ed441b1f" category="paragraph"><block ref="262b33baf188a7ac429e46f8ed441b1f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e12fdcefc6e3b3694659412d66fd46b0" category="paragraph"><block ref="e12fdcefc6e3b3694659412d66fd46b0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0024854a814ddd68bcf3907357c46bc2" category="paragraph">在 Windows 層級或資料庫層級配置適當的憑證後，紅色鎖定將消失，並且會收集和審查 SQL Server 類型資訊。</block>
  <block id="8c5ca337f7fe77045b6b45a8d2362283" category="paragraph"><block ref="8c5ca337f7fe77045b6b45a8d2362283" category="inline-image-macro-rx" type="image"></block></block>
  <block id="864f4d2595d06e5e8b46b08edb3899e6" category="section-title">5.設定儲存叢集對等和資料庫磁碟區複製</block>
  <block id="785196ec55a9e713ad1a4f962baa31dd" category="paragraph">為了使用公有雲作為目標來保護您的內部部署資料庫數據，內部部署ONTAP叢集資料庫磁碟區將使用NetApp SnapMirror技術複製到雲端 CVO。然後可以克隆複製的目標磁碟區以用於 DEV/OPS 或災難復原。以下進階步驟可讓您設定叢集對等和資料庫磁碟區複製。</block>
  <block id="1f1927293f04e4cf0fc91a7e389612eb" category="list-text">在本地群集和 CVO 群集實例上配置群集間 LIF 以進行群集對等連接。可以使用ONTAP系統管理員執行此步驟。預設 CVO 部署已自動配置叢集間 LIF。</block>
  <block id="9547803d96e78bbc38305e6300f7a800" category="paragraph">本地集群：</block>
  <block id="28eb75cb56ac4175ecce720173939cac" category="paragraph"><block ref="28eb75cb56ac4175ecce720173939cac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f3c5b3e342f57b792e2263e69e41677a" category="paragraph">目標 CVO 叢集：</block>
  <block id="47606021eb1d565acf6479f493e74c8f" category="paragraph"><block ref="47606021eb1d565acf6479f493e74c8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="79d372933b80ed2ca8ca14d8458828af" category="inline-link-macro">入門 - AWS 公有雲</block>
  <block id="0ef3d64368b20c785b5a1ab6823ac793" category="list-text">配置叢集間 LIF 後，可以透過在NetApp Cloud Manager 中使用拖放操作來設定叢集對等和磁碟區複製。看<block ref="f96690c3cd38947f0a81f723268654a2" category="inline-link-macro-rx"></block>了解詳情。</block>
  <block id="d1567c6c8f0752cbc7deb6d9f639ba12" category="paragraph">或者，也可以使用ONTAP系統管理器執行叢集對等和資料庫磁碟區複製，如下所示：</block>
  <block id="494c0b53ff31502c0c1105881e2e389a" category="list-text">登入ONTAP系統管理員。導航至“集群”&gt;“設定”，然後按一下“對等集群”以與雲端中的 CVO 實例設定集群對等。</block>
  <block id="c316f4b63a7964f3f7835cdfe46965de" category="paragraph"><block ref="c316f4b63a7964f3f7835cdfe46965de" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54de72c782c4b4ccc7f2914a858d5356" category="list-text">轉到“卷”選項卡。選擇要複製的資料庫卷，然後按一下「保護」。</block>
  <block id="a620ebb290809125fe594a9be0359963" category="paragraph"><block ref="a620ebb290809125fe594a9be0359963" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0aace069b478e8b2b0753f855f2be94" category="list-text">將保護策略設定為非同步。選擇目標叢集和儲存 SVM。</block>
  <block id="4ef6d9836c61eceec7758ddd5c16188f" category="paragraph"><block ref="4ef6d9836c61eceec7758ddd5c16188f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a2a64fe8af0790615a9344069794e2e" category="list-text">驗證來源和目標之間的磁碟區是否同步以及複製關係是否正常。</block>
  <block id="65e7e4f999fa65ed9a789399a590bf72" category="paragraph"><block ref="65e7e4f999fa65ed9a789399a590bf72" category="inline-image-macro-rx" type="image"></block></block>
  <block id="36097c4ad6058de288de8992f89adbb8" category="section-title">6.將 CVO 資料庫儲存 SVM 新增至SnapCenter</block>
  <block id="ebcf85d67af3f672ade8bd7b224a8a2b" category="list-text">按一下選單中的「儲存系統」標籤，然後按一下「新」將託管複製目標資料庫磁碟區的 CVO 儲存 SVM 新增至SnapCenter。在儲存系統欄位中輸入叢集管理IP，並輸入對應的使用者名稱和密碼。</block>
  <block id="ae9439d1532092362c8f3b8303476016" category="paragraph"><block ref="ae9439d1532092362c8f3b8303476016" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a27406b63f99780f65572b95f2f72348" category="list-text">按一下更多選項以開啟其他儲存配置選項。在平台欄位中，選擇Cloud Volumes ONTAP，選取輔助，然後按一下儲存。</block>
  <block id="b5399383fbd5f0b8ac64078cd608ed01" category="paragraph"><block ref="b5399383fbd5f0b8ac64078cd608ed01" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b474a0a2de59b8e3013112beb48af7b7" category="list-text">將儲存系統指派給SnapCenter資料庫管理使用者 ID，如下所示<block ref="8a46cbc3838a53b9205abb25a577bbc8" category="inline-xref-macro-rx"></block>。</block>
  <block id="46ffdf610903ff8e06610b7bc5f9189f" category="paragraph"><block ref="46ffdf610903ff8e06610b7bc5f9189f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39ec95149453e7bb6b73f1c03228e85c" category="section-title">7.在SnapCenter中設定資料庫備份策略</block>
  <block id="37d9f685e375f77a2231e13c88ccc606" category="paragraph">以下步驟示範如何建立完整資料庫或日誌檔案備份策略。然後可以實施該策略來保護資料庫資源。復原點目標 (RPO) 或復原時間目標 (RTO) 決定了資料庫和/或日誌備份的頻率。</block>
  <block id="739184f368f13e142dd034fcdc853594" category="section-title">為 Oracle 建立完整資料庫備份策略</block>
  <block id="94b39254a7aba068b68fec64f6331b0b" category="list-text">以資料庫管理使用者 ID 登入SnapCenter ，按一下“設定”，然後按一下“原則”。</block>
  <block id="597029eb56a33e7df07c2acfef695a2e" category="paragraph"><block ref="597029eb56a33e7df07c2acfef695a2e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a1d144b8c78fc8541b57aa9f0ca863a6" category="list-text">按一下「新建」以啟動新的備份策略建立工作流程或選擇現有策略進行修改。</block>
  <block id="89baf6cf5c890597c9ffff0454f8cc23" category="paragraph"><block ref="89baf6cf5c890597c9ffff0454f8cc23" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8c9dac29c26006ce512153a9bdabcc95" category="list-text">選擇備份類型和計畫頻率。</block>
  <block id="e606119e88a509a0eba656724e81371b" category="paragraph"><block ref="e606119e88a509a0eba656724e81371b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4df94ad44381c9fb7fe2f8d01dcd16d8" category="list-text">設定備份保留設定。這定義了要保留多少個完整資料庫備份副本。</block>
  <block id="793d3dfb27d9493b47c700cf38d91870" category="paragraph"><block ref="793d3dfb27d9493b47c700cf38d91870" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fd634020906b35a41e0ba633eddeb96a" category="list-text">選擇輔助複製選項以將本機主快照備份推送到雲端中的輔助位置進行複製。</block>
  <block id="b671175e47abd949c3f803072031d77f" category="paragraph"><block ref="b671175e47abd949c3f803072031d77f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b2e3af55a4355bc46e91425ac5701174" category="list-text">指定在備份運行之前和之後運行的任何可選腳本。</block>
  <block id="8229fb3c24d23e3eadfd3f10cc3c5afe" category="paragraph"><block ref="8229fb3c24d23e3eadfd3f10cc3c5afe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cd009bc210e371d36d466b592179e883" category="list-text">如果需要，請執行備份驗證。</block>
  <block id="57bf5cb4144425b86f38426b7e9400ed" category="paragraph"><block ref="57bf5cb4144425b86f38426b7e9400ed" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dba73d3ec3f929ff18665087076291ac" category="list-text">概括。</block>
  <block id="833f169640e7aae8d9c8237462dbae9e" category="paragraph"><block ref="833f169640e7aae8d9c8237462dbae9e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3594f2789840eda9633139ca530384a" category="section-title">為 Oracle 建立資料庫日誌備份策略</block>
  <block id="be763ec2afcb0358426bb0abcae4dd60" category="list-text">使用資料庫管理使用者 ID 登入SnapCenter ，按一下“設定”，然後按一下“策略”。</block>
  <block id="b0e663a3d363868d6c71ab9ec37940c6" category="list-text">按一下「新建」以啟動新的備份策略建立工作流程，或選擇現有策略進行修改。</block>
  <block id="6e6bc8382b822de936fe02f51082b927" category="paragraph"><block ref="6e6bc8382b822de936fe02f51082b927" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e82bddb75849367c6b805cf5828e7dc" category="paragraph"><block ref="6e82bddb75849367c6b805cf5828e7dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="59480846ec23463481d361bf3026235e" category="list-text">設定日誌保留期限。</block>
  <block id="89e49e7adbb1d972bbf6798f79893ae0" category="paragraph"><block ref="89e49e7adbb1d972bbf6798f79893ae0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="04ba33c0584145006ca637b4556aa919" category="list-text">啟用到公有雲中輔助位置的複製。</block>
  <block id="b79a4461ef310e85fddb55227f4f3555" category="paragraph"><block ref="b79a4461ef310e85fddb55227f4f3555" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ab9406cbd3a8f082700523fdac8a0c1d" category="list-text">指定在日誌備份之前和之後執行的任何選用腳本。</block>
  <block id="e6e3ef8e512c79dadb11169085c93c4f" category="paragraph"><block ref="e6e3ef8e512c79dadb11169085c93c4f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f4b55e05a9ae89fe14377b98bc8a8166" category="list-text">指定任何備份驗證腳本。</block>
  <block id="5aaccd70e671edd43b639ae58f22b475" category="paragraph"><block ref="5aaccd70e671edd43b639ae58f22b475" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1192400fde3ce64af2088554b7a471ec" category="paragraph"><block ref="1192400fde3ce64af2088554b7a471ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe147647227dfec6603bc76daf30463e" category="section-title">為 SQL 建立完整資料庫備份策略</block>
  <block id="b652338a3c504c4175444b89658c7fd5" category="paragraph"><block ref="b652338a3c504c4175444b89658c7fd5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b270f32bae28c6a5f4154dd957765b80" category="paragraph"><block ref="b270f32bae28c6a5f4154dd957765b80" category="inline-image-macro-rx" type="image"></block></block>
  <block id="30637cfd5a5cc820d6bc4116fccfff7e" category="list-text">定義備份選項和計劃頻率。對於配置了可用性群組的 SQL Server，可以設定首選備份副本。</block>
  <block id="9840dcea2084bc211485cc5880cf05d3" category="paragraph"><block ref="9840dcea2084bc211485cc5880cf05d3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f74ada8393aecd40e892de04b5b30f8" category="list-text">設定備份保留期。</block>
  <block id="ddce79f0bfda935c386e6b2bf81fc461" category="paragraph"><block ref="ddce79f0bfda935c386e6b2bf81fc461" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f1a67a80a7ad9403781b210983ea778d" category="list-text">啟用備份副本複製到雲端中的輔助位置。</block>
  <block id="8cac64b8ffdc5a8d8504720bab0fd0ce" category="paragraph"><block ref="8cac64b8ffdc5a8d8504720bab0fd0ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="17b7b360fc2163537795a34cd8d14d6a" category="list-text">指定在備份作業之前或之後執行的任何選用腳本。</block>
  <block id="b057844f0ff6b9888172c07f396657c0" category="paragraph"><block ref="b057844f0ff6b9888172c07f396657c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb836d972496d965dd2170ed1480917b" category="list-text">指定運行備份驗證的選項。</block>
  <block id="786513f2732486a860f0d19c24ed3c3c" category="paragraph"><block ref="786513f2732486a860f0d19c24ed3c3c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ca4323b2096ce652ce339ab2102fb2f8" category="paragraph"><block ref="ca4323b2096ce652ce339ab2102fb2f8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02b67ed2348002e614d5a35151577632" category="section-title">為SQL建立資料庫日誌備份策略。</block>
  <block id="b405195aec7cf62440373fcdc490dec6" category="list-text">使用資料庫管理使用者 ID 登入SnapCenter ，按一下“設定”&gt;“政策”，然後按一下“新建”以啟動新的政策建立工作流程。</block>
  <block id="2bb934d5ab773065a4fe72a2bcd8485a" category="paragraph"><block ref="2bb934d5ab773065a4fe72a2bcd8485a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="acdaf46fc90606d68f3f2b52cca5e95b" category="list-text">定義日誌備份選項和計畫頻率。對於配置了可用性群組的 SQL Server，可以設定首選備份副本。</block>
  <block id="0c2b36e2aaf86977df623ddabd7dfac5" category="paragraph"><block ref="0c2b36e2aaf86977df623ddabd7dfac5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="da00d968a5d810d846ddc815b8f405a4" category="list-text">SQL 伺服器資料備份策略定義日誌備份保留；在此接受預設值。</block>
  <block id="70fc1fbbf6810bb237bf48905035ba75" category="paragraph"><block ref="70fc1fbbf6810bb237bf48905035ba75" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d04d89062d3ed67bbc9c4aee35bdba7f" category="list-text">啟用日誌備份複製到雲端中的輔助伺服器。</block>
  <block id="9431d781d41c5c49274ca6ab4086fdaa" category="paragraph"><block ref="9431d781d41c5c49274ca6ab4086fdaa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1bd8b4104fa57ba3111251fa36502eb5" category="paragraph"><block ref="1bd8b4104fa57ba3111251fa36502eb5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3162e10ba6e069802f0785d7d4924827" category="paragraph"><block ref="3162e10ba6e069802f0785d7d4924827" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f28f6c36698b3a4cd47cbeead15eddf2" category="section-title">8.實施備份策略來保護資料庫</block>
  <block id="37b889cc1b57f66ae9018b6eacb891ba" category="paragraph">SnapCenter使用資源群組來備份資料庫資源邏輯分組中的資料庫，例如託管在伺服器上的多個資料庫、共用相同儲存磁碟區的資料庫、支援業務應用程式的多個資料庫等等。保護單一資料庫會建立自己的資源組。以下步驟示範如何實作第 7 節中建立的備份策略來保護 Oracle 和 SQL Server 資料庫。</block>
  <block id="0603dbbe978e4cd3ee1c45ba96a1aa6f" category="section-title">建立用於 Oracle 完整備份的資源群組</block>
  <block id="5f4e02f34bcd7993867c4b3297a171d0" category="list-text">使用資料庫管理使用者 ID 登入SnapCenter ，然後導覽至「資源」標籤。在視圖下拉清單中，選擇資料庫或資源組以啟動資源組建立工作流程。</block>
  <block id="d9af3d5b820b53bef952a82d15e6d0e9" category="paragraph"><block ref="d9af3d5b820b53bef952a82d15e6d0e9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="98dcf41bcde9cb6c4235a6a7dfe69346" category="list-text">為資源組提供名稱和標籤。您可以為 Snapshot 副本定義命名格式，並繞過冗餘存檔日誌目標（如果已配置）。</block>
  <block id="20d167c24bfbb26f3e843648a56367bf" category="paragraph"><block ref="20d167c24bfbb26f3e843648a56367bf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0cd85a82e6f02b779006b158b9c5f828" category="list-text">將資料庫資源新增至資源組。</block>
  <block id="38cc48f8929dfd1d38f1f8f4a0bca497" category="paragraph"><block ref="38cc48f8929dfd1d38f1f8f4a0bca497" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cee52cb6702e7590fbef45eccc8fb2df" category="list-text">從下拉清單中選擇在第 7 部分中建立的完整備份策略。</block>
  <block id="9732e70a09e06a4ae9b606ba59db0561" category="paragraph"><block ref="9732e70a09e06a4ae9b606ba59db0561" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8fe872cd84ea2e9051770379e63f9caf" category="list-text">按一下 (+) 號以設定所需的備份計畫。</block>
  <block id="c7e7766da7dbdb0a18d97ecdf1996d22" category="paragraph"><block ref="c7e7766da7dbdb0a18d97ecdf1996d22" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fdc27a4c5d48dbfc04f81ecac85acd64" category="list-text">按一下「載入定位器」以載入來源磁碟區和目標磁碟區。</block>
  <block id="83bfeb05c82d9fe2a1a13c23121cfad5" category="paragraph"><block ref="83bfeb05c82d9fe2a1a13c23121cfad5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a752afaf144d06159ca3eec8bb23455f" category="list-text">如果需要，請設定 SMTP 伺服器以接收電子郵件通知。</block>
  <block id="174a808cd5a71e9c98a86d9c3f0399d5" category="paragraph"><block ref="174a808cd5a71e9c98a86d9c3f0399d5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ee83a4b079ebbdc3a6096475af3a8edc" category="paragraph"><block ref="ee83a4b079ebbdc3a6096475af3a8edc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f7192b9766e6f09c261f3ca3d3bddc8" category="section-title">建立Oracle日誌備份資源組</block>
  <block id="2710a21662d5ec623abb0f7692600526" category="paragraph"><block ref="2710a21662d5ec623abb0f7692600526" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd7919cfbed777253c203996449d8258" category="paragraph"><block ref="bd7919cfbed777253c203996449d8258" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d57fffdfa4c7e51147b5cb012bf531f9" category="paragraph"><block ref="d57fffdfa4c7e51147b5cb012bf531f9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03955b73285eab0d68e90c627da9726d" category="list-text">從下拉清單中選擇在第 7 部分中建立的日誌備份策略。</block>
  <block id="4555180b9d93bbb9ca93ec97c28d0af5" category="paragraph"><block ref="4555180b9d93bbb9ca93ec97c28d0af5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="88c73129e9a418955658ce5c48d9d8b5" category="list-text">按一下 (+) 號以設定所需的備份計畫。</block>
  <block id="156aa910d609c0938379b7d442d924bc" category="paragraph"><block ref="156aa910d609c0938379b7d442d924bc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eacfd6f10777b8dfb41199e4d4dfa915" category="list-text">如果配置了備份驗證，則會顯示在這裡。</block>
  <block id="63752bb01664701cab74a20166d29b1f" category="paragraph"><block ref="63752bb01664701cab74a20166d29b1f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a27fac4b1d49d5468930a56c3a6de56" category="list-text">如果需要，請設定 SMTP 伺服器以接收電子郵件通知。</block>
  <block id="9edc30e4946421a9f350df9de13bcd5c" category="paragraph"><block ref="9edc30e4946421a9f350df9de13bcd5c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22784afa00b680fac09086672674be63" category="paragraph"><block ref="22784afa00b680fac09086672674be63" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cf688c7a95f421447e84a47fd03f3aa2" category="section-title">為 SQL Server 的完整備份建立資源組</block>
  <block id="d08ef097ee33c4a3506183adeb51c5e7" category="list-text">使用資料庫管理使用者 ID 登入SnapCenter ，然後導覽至「資源」標籤。在視圖下拉清單中，選擇資料庫或資源組以啟動資源組建立工作流程。為資源組提供名稱和標籤。您可以為 Snapshot 副本定義命名格式。</block>
  <block id="27c68a455881c491f8014eea4dba4a09" category="paragraph"><block ref="27c68a455881c491f8014eea4dba4a09" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ec1ace5324d60cb3faa1863efd675149" category="list-text">選擇需要備份的資料庫資源。</block>
  <block id="de605e47e64882cd1472999214eeb660" category="paragraph"><block ref="de605e47e64882cd1472999214eeb660" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2fc1974f486effa4a60bf216e63a88d5" category="list-text">選擇第 7 部分中建立的完整 SQL 備份策略。</block>
  <block id="6a35fb4c619e8438042022bd4f09fc35" category="paragraph"><block ref="6a35fb4c619e8438042022bd4f09fc35" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12b70beeb570488ba753a620378cacd8" category="list-text">新增備份的精確時間和頻率。</block>
  <block id="029f37d34402b41abc57c0b2c46385be" category="paragraph"><block ref="029f37d34402b41abc57c0b2c46385be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49252579bd8140847f4bbac20ef89b07" category="list-text">如果要執行備份驗證，請選擇輔助備份的驗證伺服器。按一下“載入定位器”以填滿輔助儲存位置。</block>
  <block id="64138f207c14d41c50db1da8ac387a29" category="paragraph"><block ref="64138f207c14d41c50db1da8ac387a29" category="inline-image-macro-rx" type="image"></block></block>
  <block id="97b1053da205a969928291f595ac1687" category="paragraph"><block ref="97b1053da205a969928291f595ac1687" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3526098f9d53a45dddc103ba9614f316" category="paragraph"><block ref="3526098f9d53a45dddc103ba9614f316" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4dd921984d3a8a89e7df5c97875b923" category="section-title">建立SQL Server日誌備份資源組</block>
  <block id="4e94ca9b995e68691b4e67b82b9f5bce" category="list-text">使用資料庫管理使用者 ID 登入SnapCenter ，然後導覽至「資源」標籤。在視圖下拉清單中，選擇資料庫或資源組以啟動資源組建立工作流程。提供資源組的名稱和標籤。您可以為 Snapshot 副本定義命名格式。</block>
  <block id="90cf6ccd30fd4717588b3b48e3a64efc" category="paragraph"><block ref="90cf6ccd30fd4717588b3b48e3a64efc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="01713bba13042fa78b83b68ab4ef7f3a" category="paragraph"><block ref="01713bba13042fa78b83b68ab4ef7f3a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23e15d7c127e66b1da1d72072a29e9eb" category="list-text">選擇在第 7 部分中建立的 SQL 日誌備份策略。</block>
  <block id="946640462547395bbd0efaf4bb06baf8" category="paragraph"><block ref="946640462547395bbd0efaf4bb06baf8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7e7cac98c16b45d7e4ebec8786b8fda1" category="list-text">新增備份的精確時間和頻率。</block>
  <block id="64b394b18ab2dd833920d12e77f7d11a" category="paragraph"><block ref="64b394b18ab2dd833920d12e77f7d11a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="68398b6746dde91649e96505d97acc40" category="list-text">如果要執行備份驗證，請選擇輔助備份的驗證伺服器。按一下“載入定位器”以填滿輔助儲存位置。</block>
  <block id="d2a868ac351c10befe825800013e5d1f" category="paragraph"><block ref="d2a868ac351c10befe825800013e5d1f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3f05f6b76364c6ce8ded407abcad74cc" category="paragraph"><block ref="3f05f6b76364c6ce8ded407abcad74cc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39d0db5f03e8e439a895cffab82b9cfb" category="paragraph"><block ref="39d0db5f03e8e439a895cffab82b9cfb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9c72629a46c2e88cf7f6a012167bb16" category="section-title">9.驗證備份</block>
  <block id="d1c55c296cbdaa8d88eda765a6158b62" category="paragraph">建立資料庫備份資源組來保護資料庫資源後，備份作業將依照預先定義的計畫執行。在「監視」標籤下檢查作業執行狀態。</block>
  <block id="ecb0d5aeea0387706628bbd3df34067c" category="paragraph"><block ref="ecb0d5aeea0387706628bbd3df34067c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="57882e224a8cbe8f694da9b1d8fa503e" category="paragraph">前往資源選項卡，按一下資料庫名稱以查看資料庫備份的詳細信息，並在本機副本和鏡像副本之間切換以驗證快照備份是否已複製到公有雲中的輔助位置。</block>
  <block id="cfd69a51fa8231de8ad8980aef5355f3" category="paragraph"><block ref="cfd69a51fa8231de8ad8980aef5355f3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28268d417882b5cf7a3d3ee3a15834c8" category="paragraph">此時，雲端中的資料庫備份副本已準備好複製以運行開發/測試流程或在發生主資料庫故障時進行災難復原。</block>
  <block id="d83342bb55cac062a4841a3b7a62a7fd" category="summary">本節概述了為滿足上一節所述的先決條件要求而必須完成的任務。以下部分提供了本地和公有雲操作的高階任務清單。點擊相關連結即可查看詳細流程和步驟。</block>
  <block id="21475c5fe4cf73cfbf7756ed71e43375" category="doc">入門概述</block>
  <block id="f0e69ccbb7ad96f546f7924206944bfa" category="section-title">本地</block>
  <block id="b2e7ae8381268c9d97dc3576aa67da04" category="list-text">在SnapCenter中設定資料庫管理員用戶</block>
  <block id="e1c4efcd7b5b155c8a6e57d348b6c071" category="list-text">SnapCenter插件安裝前提條件</block>
  <block id="cf69df8da81eda7b468d606f3e9aff06" category="list-text">SnapCenter主機插件安裝</block>
  <block id="2a6faa57bc6cc0f7a4c90cebd5e63344" category="list-text">資料庫資源發現</block>
  <block id="2a36af746a3cc41f6964edac717b5206" category="list-text">設定儲存叢集對等和資料庫磁碟區複製</block>
  <block id="a227a5da83d0a04e6e8e7e76a89eba09" category="list-text">將 CVO 資料庫儲存 SVM 新增至SnapCenter</block>
  <block id="c615eed91e2ab578525394d0ff0138d9" category="list-text">在SnapCenter中設定資料庫備份策略</block>
  <block id="8ecb914dad4186dafb38268be6fc8a1f" category="list-text">實施備份策略以保護資料庫</block>
  <block id="3041fe5faf49efefd030e278790b4faf" category="list-text">驗證備份</block>
  <block id="0bcf61b20ebca1ef90cb7982284867a6" category="list-text">飛行前檢查</block>
  <block id="c27b238e54d27696cafed4684c6f1335" category="list-text">在 AWS 中部署 Cloud Manager 和Cloud Volumes ONTAP 的步驟</block>
  <block id="2bb50575568fc6429e2c1cef751d40f4" category="list-text">為資料庫工作負載部署 EC2 運算執行個體</block>
  <block id="bc2dcb446bec0ecd131a2e612dbd1ecd" category="paragraph">請點擊以下連結查看詳細資訊：</block>
  <block id="21aa279d0a145dcaab5feaa02df2c02a" category="inline-link-macro">公有雲-AWS</block>
  <block id="4c3ec3c7fc32bc9cb169188e153d067b" category="paragraph"><block ref="0c369d4ca5388d640f4bc3a3eb7ef247" category="inline-link-macro-rx"></block>，<block ref="a338b576ea1760b44a3f6fbf9b4967f2" category="inline-link-macro-rx"></block></block>
  <block id="d0bb28dcc0cc1b523a41bbb46875db9e" category="summary">在安裝 Cloud Manager 連接器和Cloud Volumes ONTAP並設定SnapMirror之前，我們必須為我們的雲端環境進行一些準備。本頁介紹了部署Cloud Volumes ONTAP時需要完成的工作以及注意事項。</block>
  <block id="8c6fb9ece3bad11d3e76d1344d9ed9ab" category="doc">公有雲的先決條件</block>
  <block id="5a2798d22185b0e40ea502bbbb171d38" category="section-title">Cloud Manager 和Cloud Volumes ONTAP部署前提清單</block>
  <block id="1e094e6477be231098329b0096c7221f" category="list-text">NetApp Cloud Central 登入</block>
  <block id="b59e275c4ece2430dff67db92845ab7f" category="list-text">透過 Web 瀏覽器存取多個端點的網絡</block>
  <block id="d2ed5c7ede8a1ce9d218ec60b0f03935" category="list-text">連接器的網路位置</block>
  <block id="0d07862d67097acd517fe27c0de099d7" category="list-text">雲端提供者權限</block>
  <block id="203802866ac2835e79bd76c94a3761c2" category="list-text">個人服務網絡</block>
  <block id="c4d5e1cbdfc47a0fdcb4a1a9dddd9e17" category="inline-link">雲端文檔</block>
  <block id="1a22a3f7b690b2ec8919c8806633fb26" category="paragraph">有關入門所需內容的更多信息，請訪問我們的<block ref="247d95fa755d21bb8790cc6d7a2fc412" category="inline-link-rx"></block>。</block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="section-title">注意事項</block>
  <block id="176ca67b83510a1281a4cfc749a3543a" category="section-title">1.什麼是 Cloud Manager 連接器？</block>
  <block id="1681641037afae45bd6074dcde9eed00" category="paragraph">大多數情況下，Cloud Central 帳戶管理員必須在您的雲端或本機網路中部署連接器。此連接器使 Cloud Manager 能夠管理公有雲環境中的資源和流程。</block>
  <block id="8a78be5d168f00b24bf1625de3d5409c" category="paragraph">有關連接器的更多信息，請訪問我們的<block ref="f39c14bbbbdd46ca70a63fb06046c789" category="inline-link-rx"></block>。</block>
  <block id="fcc2bf38b8157a22b5fc6975b7054acc" category="section-title">2.Cloud Volumes ONTAP 的大小與架構</block>
  <block id="1c09b5154aa1f43cb9ebcbd6fea5eadc" category="paragraph">部署Cloud Volumes ONTAP時，您可以選擇預先定義套件或建立自己的設定。儘管其中的許多值可以在以後無中斷地進行更改，但在部署之前需要根據要在雲端中部署的工作負載做出一些關鍵決策。</block>
  <block id="d76a4ab0a55e4cce0b92ec2adcef2d62" category="inline-link">TCO計算機</block>
  <block id="e525512d8e8df679389265cf77783692" category="paragraph">每個雲端供應商都有不同的部署選項，幾乎每個工作負載都有其獨特的屬性。  NetApp擁有<block ref="0c467b50efa749a5a4e7d6c99c2fa4bc" category="inline-link-rx"></block>它可以幫助根據容量和性能正確確定部署規模，但它是圍繞一些值得考慮的基本概念構建的：</block>
  <block id="145c90afb7955854f2371e9decf3de9b" category="list-text">所需容量</block>
  <block id="f1521b662bf51f1af6c2d38bd610afae" category="list-text">雲端虛擬機的網路能力</block>
  <block id="f75d8ba5edc8017382d5df68baf9e30f" category="list-text">雲端儲存的效能特點</block>
  <block id="af9d66ea3132fcfeb46b85557bc1af1b" category="paragraph">關鍵是要規劃一個不僅能滿足當前容量和性能要求，還能考慮未來成長的配置。這通常被稱為容量餘裕和效能餘裕。</block>
  <block id="4847e034bb0a55fcbc8a3380d6a3ab80" category="inline-link">AWS</block>
  <block id="3a580f142203677f1f0bc30898f63f53" category="inline-link">Azure</block>
  <block id="c731f72e1d22a7c5e01a7cb789a8885e" category="inline-link">地理控制協議</block>
  <block id="180f0326dff3a03aecf5e184943d108a" category="paragraph">如果您想了解更多信息，請閱讀有關正確規劃的文檔<block ref="af5d70b69c3436f8bcf6f7b9579c4e83" category="inline-link-rx"></block>，<block ref="c2e85b51d3015b4c720388e64a3de23e" category="inline-link-rx"></block> ， 和<block ref="b1068926334a08925797774f64291db4" category="inline-link-rx"></block>。</block>
  <block id="c50ea1f0c6dcf02fbdd39e1e6b5befc2" category="section-title">3.單節點還是高可用性？</block>
  <block id="eadb13b9c72271dbf16967e78059fea4" category="paragraph">在所有雲端中，都可以選擇在單一節點或具有兩個節點的叢集高可用性對中部署 CVO。根據使用情況，您可能想要部署單一節點以節省成本或部署 HA 對以提供進一步的可用性和冗餘。</block>
  <block id="9cbd119b18cd836b6020fcfd3bfbe37f" category="paragraph">對於 DR 用例或為開發和測試啟動臨時存儲，單節點很常見，因為突然的區域或基礎設施中斷的影響較低。但是，對於任何生產用例，當資料僅位於單一位置時，或當資料集必須具有更多冗餘和可用性時，建議使用高可用性。</block>
  <block id="83d2ad0cda1f71c52878284cc7c1f713" category="paragraph">有關每個雲端版本的高可用性架構的更多信息，請訪問<block ref="4344469628657b2a6a0d147e5e6fbc9a" category="inline-link-rx"></block>，<block ref="28a8305eced80cb5b1351f5cffb268ae" category="inline-link-rx"></block>和<block ref="1b945d178a8347e94e5c5456dc9e6db8" category="inline-link-rx"></block>。</block>
  <block id="c94d29f1f4f8ef37e9d27f30b7d7c67d" category="summary">本節所述的任務必須在本機上完成，以準備SnapCenter混合雲資料庫工作負載環境。</block>
  <block id="f6a196d9d3a941e76765e4a9395630c4" category="doc">本地先決條件</block>
  <block id="40931dcd4d9132545ec0faf2c5fb1b64" category="paragraph">必須在本機完成以下任務才能準備SnapCenter混合雲資料庫工作負載環境。</block>
  <block id="79daf399b9626cde309801f41a1e2e14" category="section-title">SnapCenter安裝與配置</block>
  <block id="49fd917369dcf2b31d4f023bba0625a0" category="paragraph">NetApp SnapCenter工具是一個基於 Windows 的應用程序，通常在 Windows 網域環境中運行，但也可以進行工作組部署。它基於多層架構，包括集中管理伺服器（ SnapCenter伺服器）和資料庫伺服器主機上用於資料庫工作負載的SnapCenter插件。以下是混合雲部署的一些關鍵考慮因素。</block>
  <block id="9f8c0bcd11d7afd1dd2ee818191cb914" category="list-text">*單一實例或 HA 部署。 *當單一SnapCenter實例伺服器發生故障時，HA 部署可提供冗餘。</block>
  <block id="1bfa2867d5aa49106efbf3ac752f3084" category="list-text">*名稱解析。 *必須在SnapCenter伺服器上設定 DNS 以解析所有資料庫主機，並在儲存 SVM 上配置 DNS 以進行正向和反向查找。也必須在資料庫伺服器上設定 DNS 來解析SnapCenter伺服器和儲存 SVM 的正向和反向查找。</block>
  <block id="41f54308d86c1d7b525475d6ead22892" category="list-text">基於角色的存取控制 (RBAC) 配置。 *對於混合資料庫工作負載，您可能想要使用 RBAC 來劃分不同資料庫平台的管理責任，例如 Oracle 資料庫的管理員或 SQL Server 的管理員。必須為資料庫管理員使用者授予必要的權限。</block>
  <block id="5aee5dffd2e329652ec35995add763ae" category="list-text">*啟用基於策略的備份策略。 *強制備份的一致性和可靠性。</block>
  <block id="dde4790e572aa9d01cd58fcfd8498766" category="list-text">*在防火牆上開啟必要的網路連接埠。 *供本機SnapCenter伺服器與安裝在雲端 DB 主機中的代理程式進行通訊。</block>
  <block id="e2962676531ebdcf62cb2a7b96042e77" category="list-text">*必須開啟連接埠才能允許本地和公有雲之間的SnapMirror流量。 *  SnapCenter伺服器依賴ONTAP SnapMirror將現場 Snapshot 備份複製到雲端 CVO 儲存 SVM。</block>
  <block id="5ec6e06db1720ca3b517643f92ad748e" category="inline-link-macro">SnapCenter安裝前提條件</block>
  <block id="7d409546f13da568d73d1cf93ba4de82" category="paragraph">經過仔細的安裝前規劃和考慮後，請點擊此處<block ref="76a3e8de747ec65461865abe9011a915" category="inline-link-macro-rx"></block>有關SnapCenter安裝和配置的詳細資訊。</block>
  <block id="df3fb602185c77a88bab186791d02636" category="section-title">本地資料庫伺服器儲存配置</block>
  <block id="f7f3a649be867b87ccb26789453199db" category="paragraph">儲存效能對資料庫和應用程式的整體效能起著重要作用。精心設計的儲存佈局不僅可以提高資料庫效能，還可以方便管理資料庫備份和復原。定義儲存佈局時應考慮幾個因素，包括資料庫的大小、資料庫預期的資料變化率以及執行備份的頻率。</block>
  <block id="8481231881c8e64b34aa3c7e29510a25" category="paragraph">對於虛擬化資料庫工作負載，透過 NFS 或 iSCSI 將儲存 LUN 直接連接到客戶虛擬機器通常比透過 VMDK 分配的儲存提供更好的效能。  NetApp建議在下圖所示的 LUN 上對大型 SQL Server 資料庫採用儲存佈局。</block>
  <block id="39d8e2145d1f0d10bd3f6c2ec17ab9c0" category="paragraph"><block ref="39d8e2145d1f0d10bd3f6c2ec17ab9c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="99aea05cf884bfdec230afa5250968b2" category="paragraph">下圖顯示了NetApp針對 LUN 上的小型或中型 SQL Server 資料庫所建議的儲存佈局。</block>
  <block id="d7768ec0712c652418bd1ff715cfed36" category="paragraph"><block ref="d7768ec0712c652418bd1ff715cfed36" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76ecde8f778d0dd0676f392793ce4382" category="admonition">日誌目錄專用於SnapCenter ，用於執行資料庫復原的交易日誌總計。對於超大型資料庫，可以將多個 LUN 指派給一個磁碟區以獲得更好的效能。</block>
  <block id="ee9158729a15dbd90d166650ba285d0e" category="paragraph">對於 Oracle 資料庫工作負載， SnapCenter支援由ONTAP儲存支援的資料庫環境，這些儲存體會作為實體或虛擬設備安裝到主機。您可以根據環境的關鍵性將整個資料庫託管在一個或多個儲存裝置上。通常，客戶會將專用儲存上的資料檔案與所有其他檔案（例如控製檔案、重做檔案和存檔日誌檔案）隔離。這有助於管理員在幾秒鐘到幾分鐘內使用 Snapshot 技術快速復原（ONTAP單一檔案SnapRestore）或複製大型關鍵資料庫（PB 級）。</block>
  <block id="8d1d8980b28a79123d17d3fc6de5c48a" category="paragraph"><block ref="8d1d8980b28a79123d17d3fc6de5c48a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="959a3405dfdfb0469534f5276ffb8e5e" category="paragraph">對於對延遲敏感的關鍵任務工作負載，應將專用儲存磁碟區部署到不同類型的 Oracle 文件，以實現最佳延遲。對於大型資料庫，每個磁碟區應為資料檔案分配多個 LUN（NetApp建議最多八個）。</block>
  <block id="c934419b6361c84ad604a812343f13b2" category="paragraph"><block ref="c934419b6361c84ad604a812343f13b2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2702ce3d59ec94853fa030462b309f2f" category="paragraph">對於較小的 Oracle 資料庫， SnapCenter支援共享儲存佈局，您可以在同一個儲存磁碟區或 LUN 上託管多個資料庫或部分資料庫。作為此佈局的範例，您可以在 +DATA ASM 磁碟組或磁碟區組上託管所有資料庫的資料檔案。其餘檔案（重做、存檔日誌和控制檔案）可以託管在另一個專用磁碟組或磁碟區組（LVM）上。此類部署場景如下所示。</block>
  <block id="3cf0fdb257926c14675b2b90a427d751" category="paragraph"><block ref="3cf0fdb257926c14675b2b90a427d751" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93cf45b97655292e0536b810cb248828" category="paragraph">為了方便 Oracle 資料庫的重新定位，Oracle 二進位檔案應安裝在包含在常規備份原則中的單獨 LUN 上。這確保了在將資料庫遷移到新的伺服器主機時，可以啟動 Oracle 堆疊進行恢復，而不會因 Oracle 二進位檔案不同步而出現任何潛在問題。</block>
  <block id="1e69a4a8adec0842d1e110e970112268" category="section-title">許可要求</block>
  <block id="7f59934b2c0edd33f0d981f3bc4d12e7" category="paragraph">SnapCenter是NetApp授權的軟體。它通常包含在本地ONTAP許可證中。但是，對於混合雲部署，還需要SnapCenter的雲端授權才能將 CVO 新增至SnapCenter作為目標資料複製目的地。請查看以下連結以了解SnapCenter標準容量許可證的詳細資訊：</block>
  <block id="9e86ae6c96041e3cb31e88116102ee35" category="inline-link-macro">SnapCenter標準容量許可證</block>
  <block id="30a7dd2f33dbf8c793ab27dd0b00e818" category="paragraph"><block ref="30a7dd2f33dbf8c793ab27dd0b00e818" category="inline-link-macro-rx"></block></block>
  <block id="85db56d490cdd7a31d40697ad1c9be3c" category="section-title">網路和安全</block>
  <block id="254215e6d18fb5582ba78464fa468553" category="paragraph">在混合資料庫操作中，需要將本地生產資料庫突發傳輸到雲端以進行開發/測試和災難恢復，在設定環境並從本地資料中心連接到公有雲時，網路和安全是需要考慮的重要因素。</block>
  <block id="1e356fab450b44971b6cdbd1c25586b8" category="paragraph">公有雲通常使用虛擬私有雲 (VPC) 來隔離公有雲平台內的不同使用者。在單一 VPC 內，使用可根據使用者對 VPC 鎖定的需求配置的安全群組等措施來控制安全性。</block>
  <block id="5192a6d33c7a0127a67cbd7e07801735" category="paragraph">可透過 VPN 隧道保護從本機資料中心到 VPC 的連線。在 VPN 閘道上，可以使用 NAT 和防火牆規則來加強安全性，並阻止從網際網路上的主機到公司資料中心內的主機建立網路連線的嘗試。</block>
  <block id="04a3995237c020c6a587d8a7723af6a6" category="paragraph">基於網路和安全性方面的考慮，請查看您選擇的公有雲的相關入站和出站 CVO 規則：</block>
  <block id="d15513a147fbd525b88805bee9ea17ea" category="inline-link-macro">CVO 的安全群組規則 - AWS</block>
  <block id="f8d1f085169118c4d407be16136389c6" category="list-text"><block ref="f8d1f085169118c4d407be16136389c6" category="inline-link-macro-rx"></block></block>
  <block id="39f48b44d100d16ed6e2b931111663b7" category="inline-link-macro">CVO 的安全群組規則 - Azure</block>
  <block id="bcde746324630d82052a4fc9861cfea6" category="list-text"><block ref="bcde746324630d82052a4fc9861cfea6" category="inline-link-macro-rx"></block></block>
  <block id="7b20c547f2fd113499deaa3c0e418282" category="inline-link-macro">CVO - GCP 的防火牆規則</block>
  <block id="acde731d82a437ab33cb200791f7a197" category="list-text"><block ref="acde731d82a437ab33cb200791f7a197" category="inline-link-macro-rx"></block></block>
  <block id="d9446a69434b7c7fdec5c9e35d222834" category="section-title">使用 Ansible 自動化在本地和雲端之間同步資料庫執行個體 - 可選</block>
  <block id="1c7c9b49a62ea0dc765d1439120cfc8f" category="paragraph">為了簡化混合雲端資料庫環境的管理， NetApp強烈建議但不要求您部署 Ansible 控制器來自動執行某些管理任務，例如保持本機和雲端中的運算執行個體同步。這一點尤其重要，因為雲端中不同步的運算實例可能會因缺少核心包和其他問題而導致雲端中復原的資料庫容易出錯。</block>
  <block id="7468552c7fc3a7ca377b7fc2405a9940" category="paragraph">Ansible 控制器的自動化功能也可用於增強SnapCenter 的某些任務，例如分解SnapMirror執行個體以啟動生產的 DR 資料副本。</block>
  <block id="76873576c51d008df968086838d03984" category="paragraph">請依照以下說明為 RedHat 或 CentOS 機器設定 Ansible 控制節點：</block>
  <block id="b3cc847e28f05787703481d8da9a8de3" category="paragraph">請依照以下說明為 Ubuntu 或 Debian 機器設定 Ansible 控制節點：</block>
  <block id="0f22160e43c900ef7426d8a19e9f482d" category="summary">在執行混合雲端資料庫工作負載之前，必須在本機和雲端配置某些先決條件。以下部分提供了此過程的高級摘要，以下連結提供了有關必要係統配置的更多資訊。</block>
  <block id="1dad826770c4d2c619351c974f725b36" category="doc">先決條件配置</block>
  <block id="4df40e141b0559f15db8f84f78aed013" category="section-title">現場</block>
  <block id="caea8340e2d186a540518d08602aa065" category="list-text">自動化</block>
  <block id="761883c0d5c55fba5b200ac8ac0d86e5" category="section-title">公有雲</block>
  <block id="37aa83a33297d9d16b4423be342598bb" category="list-text">連接器的網路位置</block>
  <block id="74c043a4451dd260729a23ce96aa1550" category="paragraph">重要注意事項：</block>
  <block id="7aee27c83b5e3622c1d8cbd5c2098c60" category="list-text">在哪裡部署 Cloud Manager Connector？</block>
  <block id="43fd5c6fa3d9ba8a215c31f3bf0a9859" category="list-text">Cloud Volume ONTAP 的大小與架構</block>
  <block id="7a0e00d70e3b0ff06476a52565f923c4" category="list-text">單節點還是高可用性？</block>
  <block id="2d0b46fff3ae203a435b167c7111b389" category="paragraph">以下連結提供了更多詳細資訊：</block>
  <block id="3e3817204201a1a72832318e186660f2" category="paragraph"><block ref="3e3817204201a1a72832318e186660f2" category="inline-link-macro-rx"></block></block>
  <block id="704849d56e695ab8f9df0b106e0d7e33" category="inline-link-macro">公有雲</block>
  <block id="6262c102819dddec88d8170033aca3a6" category="paragraph"><block ref="6262c102819dddec88d8170033aca3a6" category="inline-link-macro-rx"></block></block>
  <block id="8f7280c86689be0a39cdf74aa673040d" category="summary">該解決方案採用混合雲設定設計，以支援可以爆發到所有流行公有雲進行開發/測試和災難復原作業的內部生產資料庫。</block>
  <block id="132f2888eb2cfdeef2730212f50c53e3" category="doc">SnapCenter要求</block>
  <block id="6546814199e52492fa0efe5fbff08d5a" category="paragraph">此解決方案支援SnapCenter目前支援的所有資料庫，儘管這裡僅示範了 Oracle 和 SQL Server 資料庫。此解決方案已通過虛擬化資料庫工作負載驗證，但也支援裸機工作負載。</block>
  <block id="185b108b21dccef917f415be6026c91c" category="paragraph">我們假設生產資料庫伺服器託管在本地，並且資料庫磁碟區從ONTAP儲存叢集呈現給資料庫主機。 SnapCenter software安裝在本機，用於資料庫備份和資料複製到雲端。建議使用 Ansible 控制器，但這不是資料庫部署自動化或 OS 核心和 DB 配置與公有雲中的備用 DR 執行個體或開發/測試執行個體同步的必要條件。</block>
  <block id="47099d9ea153f8abfa5b6b70da253b3a" category="cell">*本地*</block>
  <block id="d36407241494bfc1e84614ad1b0dd6a4" category="cell">SnapCenter支援的任何資料庫和版本</block>
  <block id="8c8c8ca7a4093a1210412a3a5e5ad55f" category="cell">SnapCenter v4.4 或更高版本</block>
  <block id="9d9ebf67dab68c3c892de99e981039cf" category="cell">Ansible v2.09 或更高版本</block>
  <block id="62dd4f48e99b13c8a00fbaba684f9592" category="cell">ONTAP叢集 9.x</block>
  <block id="d0fdc58e1e05d6cbc8b1beb072bfa235" category="cell">已配置群集間 LIF</block>
  <block id="7135df562bcb25bfdf20e4317b923b88" category="cell">從本地到雲端 VPC 的連線（VPN、互連等）</block>
  <block id="8c27863f5ffd0e66a9304eaca2e47fde" category="cell">網路連接埠開放 - ssh 22 - tcp 8145、8146、10000、11104、11105</block>
  <block id="bcb9f3419f724f768e30956a4427261d" category="cell">*雲端 - AWS*</block>
  <block id="61c90d44785278f980592f082ef500f1" category="inline-link">雲端管理器連接器</block>
  <block id="97bc5062dceccb6827b1e3f0522035f0" category="cell"><block ref="97bc5062dceccb6827b1e3f0522035f0" category="inline-link-rx"></block></block>
  <block id="117bdbda976fe8b3212bc3b6327a0a1b" category="inline-link">Cloud Volumes ONTAP</block>
  <block id="2f077494ceff1f33085c5b163c3673b3" category="cell"><block ref="2f077494ceff1f33085c5b163c3673b3" category="inline-link-rx"></block></block>
  <block id="59b2c9424963f98d73ec69c59dde54cb" category="cell">將 DB OS EC2 執行個體與本機執行個體進行匹配</block>
  <block id="e26786a16da88ee829ab76c48fd3b003" category="cell">*雲端 - Azure*</block>
  <block id="c2f8674b07907f393b67a3f9e98d3d56" category="cell"><block ref="c2f8674b07907f393b67a3f9e98d3d56" category="inline-link-rx"></block></block>
  <block id="a8dd724647657a383eb37fd8775ec1a9" category="cell"><block ref="a8dd724647657a383eb37fd8775ec1a9" category="inline-link-rx"></block></block>
  <block id="8bede1f0e559918be01f0646b75b4257" category="cell">將 DB OS Azure 虛擬機器與本機環境相符</block>
  <block id="b2a454fb4ff03b84162c59d674fdae25" category="cell">*雲 - GCP*</block>
  <block id="af072236983e991ab34e773871b10236" category="cell"><block ref="af072236983e991ab34e773871b10236" category="inline-link-rx"></block></block>
  <block id="499477cf7953707f63a1b1313c8c065a" category="cell"><block ref="499477cf7953707f63a1b1313c8c065a" category="inline-link-rx"></block></block>
  <block id="2900c5e1ee191606f20d007194e70edf" category="cell">將 DB OS Google Compute Engine 執行個體與本機執行個體相符</block>
  <block id="012b603d852affe4779f095a5c59f0c5" category="summary">公有雲的敏捷性、價值實現時間、成本節省都是企業採用公有雲進行資料庫應用程式開發和測試工作的有意義的價值主張。沒有比SnapCenter更好的工具可以快速實現這一目標。 SnapCenter不僅可以保護您的本機生產資料庫，還可以快速複製副本以用於公有雲中的應用程式開發或程式碼測試，同時僅消耗很少的額外儲存空間。以下是使用該工具的逐步過程的詳細資訊。</block>
  <block id="38da6679588aeb2754e14dd58994685e" category="doc">開發/測試爆發至雲端的工作流程</block>
  <block id="4d8a5b6bc9c43ab79e376d1aa4d83217" category="paragraph">對於採用公有雲進行資料庫應用程式開發和測試工作的企業來說，公有雲的靈活性、價值實現時間和成本節省都是有意義的價值主張。沒有比SnapCenter更好的工具來實現這一目標。 SnapCenter不僅可以在本地保護您的生產資料庫，還可以在公有雲中快速複製副本以用於應用程式開發或程式碼測試，同時僅消耗很少的額外儲存空間。以下是使用此工具的逐步過程的詳細資訊。</block>
  <block id="b47b42841be2e173707ab5884714970b" category="section-title">從複製的快照備份複製 Oracle 資料庫以用於開發/測試</block>
  <block id="8d90529d1117b8d3781bd6781acf4e91" category="list-text">使用 Oracle 的資料庫管理使用者 ID 登入SnapCenter 。導覽至「資源」標籤，其中顯示受SnapCenter保護的 Oracle 資料庫。</block>
  <block id="303d7b95b5531dc06ab1c2b378e5cc31" category="paragraph"><block ref="303d7b95b5531dc06ab1c2b378e5cc31" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d539d2e9659870aa79747206fac4769" category="list-text">按一下目標本機資料庫名稱以取得備份拓撲和詳細視圖。如果啟用了輔助複製位置，則會顯示連結的鏡像備份。</block>
  <block id="59231d25fbe75b7fac6548cb000cbac2" category="paragraph"><block ref="59231d25fbe75b7fac6548cb000cbac2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d4a9c1f33e524696d6f3adebf89947bb" category="list-text">點擊鏡像備份即可切換到鏡像備份視圖。然後顯示輔助鏡像備份。</block>
  <block id="a658125bc922edbecb47429add3b1367" category="paragraph"><block ref="a658125bc922edbecb47429add3b1367" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4726a244c3941457e8f62b49c83d35d1" category="list-text">選擇要複製的鏡像輔助資料庫備份副本，並透過時間和系統變更號碼或 SCN 確定復原點。通常，復原點應該落後於要克隆的完整資料庫備份時間或 SCN。確定復原點後，必須安裝所需的日誌檔案備份以進行還原。日誌檔案備份應安裝到要託管克隆資料庫的目標資料庫伺服器。</block>
  <block id="25e155c3f8353c0bde89c48b8e75b357" category="paragraph"><block ref="25e155c3f8353c0bde89c48b8e75b357" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ecc49528e0cc5f8dc38e8bad16f64bea" category="paragraph"><block ref="ecc49528e0cc5f8dc38e8bad16f64bea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22a17e5abcfc4b5e70ebdea098cd1891" category="admonition">如果啟用了日誌修剪且復原點超出了最後一次日誌修剪，則可能需要安裝多個存檔日誌備份。</block>
  <block id="e9606676533bbe916f4b4b6824eac195" category="list-text">反白顯示要克隆的完整資料庫備份副本，然後按一下克隆按鈕以啟動 DB 克隆工作流程。</block>
  <block id="4e2ec546ffca4528eb3a18d5692319a1" category="paragraph"><block ref="4e2ec546ffca4528eb3a18d5692319a1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6c06d82b497809fcc0fd06d00c6d91a5" category="list-text">為完整的容器資料庫或 CDB 克隆選擇適當的克隆 DB SID。</block>
  <block id="4e3da14809ac93cb4009ada57dd8b3eb" category="paragraph"><block ref="4e3da14809ac93cb4009ada57dd8b3eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e2c50a030b1c5313fca09568edf8c0f9" category="list-text">選擇雲端中的目標克隆主機，克隆工作流程建立資料檔案、控制檔案和重做日誌目錄。</block>
  <block id="2460044d38c11d1009ae24694a7eea8f" category="paragraph"><block ref="2460044d38c11d1009ae24694a7eea8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="701f017aeafb71656cf2bc3a9bd34862" category="list-text">None 憑證名稱用於基於作業系統的身份驗證，這使得資料庫連接埠無關緊要。依照目標複製資料庫伺服器中的設定填寫正確的 Oracle Home、Oracle OS User 和 Oracle OS Group。</block>
  <block id="f003ac371d5f232bdebd4321e54a14a3" category="paragraph"><block ref="f003ac371d5f232bdebd4321e54a14a3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26a911f3c85fc3c73d79253e65bf30e3" category="list-text">指定在克隆操作之前要執行的腳本。更重要的是，可以在這裡調整或定義資料庫實例參數。</block>
  <block id="9729b447443ac4901c6b4c619101c7f5" category="paragraph"><block ref="9729b447443ac4901c6b4c619101c7f5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09d7240367714707474d63a3a574222b" category="list-text">透過日期和時間或 SCN 指定恢復點。直到取消將資料庫還原到可用的存檔日誌。從掛載存檔日誌磁碟區的目標主機指定外部存檔日誌位置。如果目標伺服器 Oracle 擁有者與內部生產伺服器不同，請驗證目標伺服器 Oracle 擁有者是否可以讀取存檔日誌目錄。</block>
  <block id="9b40de27108f139fdd216f6f03be1bdf" category="paragraph"><block ref="9b40de27108f139fdd216f6f03be1bdf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49f5cdb9736a65ec1db2db78e1032432" category="paragraph"><block ref="49f5cdb9736a65ec1db2db78e1032432" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c2767b20dbecd16663b0249b06eb5466" category="paragraph"><block ref="c2767b20dbecd16663b0249b06eb5466" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0421be6f676ac1ddace9e39eeeb54f0f" category="list-text">克隆摘要。</block>
  <block id="bf68904799d4967d70ff4a5fac96de1e" category="paragraph"><block ref="bf68904799d4967d70ff4a5fac96de1e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="69d929881b22cd699e243e2343bd707d" category="list-text">您應該在克隆後進行驗證，以確保克隆的資料庫可以運行。可以在 dev/test 資料庫上執行一些額外的任務，例如啟動監聽器或關閉 DB 日誌歸檔模式。</block>
  <block id="9d46db4ac971cc1db20463ba195f6f03" category="paragraph"><block ref="9d46db4ac971cc1db20463ba195f6f03" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58732c8d9b1293bb6666ef2284840fd3" category="section-title">從複製的快照備份複製用於開發/測試的 SQL 資料庫</block>
  <block id="605f2bb9d099f78e26260848db117df7" category="list-text">使用 SQL Server 的資料庫管理使用者 ID 登入SnapCenter 。導覽至「資源」標籤，該標籤顯示受SnapCenter保護的 SQL Sever 使用者資料庫和公有雲中的目標備用 SQL 執行個體。</block>
  <block id="ca1a103b35e781a7d36dc2b62b075911" category="paragraph"><block ref="ca1a103b35e781a7d36dc2b62b075911" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39c34a717e197c67b1fc8d678db5815b" category="list-text">按一下目標本機 SQL Server 使用者資料庫名稱以取得備份拓撲和詳細視圖。如果啟用了輔助複製位置，則會顯示連結的鏡像備份。</block>
  <block id="7f41d1786e9c73edfe4c83777b423f56" category="paragraph"><block ref="7f41d1786e9c73edfe4c83777b423f56" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a5910fa5df5b6482c00b15ae683eef0f" category="list-text">按一下“鏡像備份”切換到“鏡像備份”視圖。然後顯示輔助鏡像備份。由於SnapCenter將 SQL Server 交易日誌備份到專用磁碟機以進行恢復，因此這裡僅顯示完整的資料庫備份。</block>
  <block id="a8d8c5ea6b104184633cb3921639dd25" category="paragraph"><block ref="a8d8c5ea6b104184633cb3921639dd25" category="inline-image-macro-rx" type="image"></block></block>
  <block id="368014bae8201ab49d2207a53c907069" category="list-text">選擇備份副本，然後按一下「複製」按鈕啟動「從備份複製」工作流程。</block>
  <block id="eba08e4bbd6b78f38043bce820db3835" category="paragraph"><block ref="eba08e4bbd6b78f38043bce820db3835" category="inline-image-macro-rx" type="image"></block></block>
  <block id="78599f9e73230a8212f30880551b813a" category="paragraph"><block ref="78599f9e73230a8212f30880551b813a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="44258030a87117191bde6d62511ddb9a" category="list-text">選擇雲端伺服器作為目標克隆伺服器、克隆執行個體名稱、複製資料庫名稱。選擇自動指派掛載點或使用者定義的掛載點路徑。</block>
  <block id="04b71eaff796b865b737d8c15e38163c" category="paragraph"><block ref="04b71eaff796b865b737d8c15e38163c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18145dc97ae06034ae9aafa8b98cb36e" category="list-text">透過日誌備份時間或特定日期和時間來確定復原點。</block>
  <block id="fdb1ecfef863749f0f9eb1780e7d739e" category="paragraph"><block ref="fdb1ecfef863749f0f9eb1780e7d739e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0b9becceddf802cada91d9e2aa84ac5a" category="list-text">指定在複製操作之前和之後執行的選用腳本。</block>
  <block id="40913b1d5fee1909218aaf7c15d94e06" category="paragraph"><block ref="40913b1d5fee1909218aaf7c15d94e06" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e41b01ffd717fd3d0b5788e608e50b52" category="list-text">如果需要電子郵件通知，請設定 SMTP 伺服器。</block>
  <block id="201595ba1d4e645cf16fce237931edd7" category="paragraph"><block ref="201595ba1d4e645cf16fce237931edd7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc89ae2ec0203249b8e60785a63ca258" category="list-text">克隆摘要。</block>
  <block id="2eb32fb20393f4cbe6233b791918752e" category="paragraph"><block ref="2eb32fb20393f4cbe6233b791918752e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28725828580a55d904e8b2a39f377eb9" category="list-text">監控作業狀態並驗證目標使用者資料庫是否已附加到雲端複製伺服器中的目標 SQL 執行個體。</block>
  <block id="2e6fba4820c2921c6ea0468bb8b0d709" category="paragraph"><block ref="2e6fba4820c2921c6ea0468bb8b0d709" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d512bf68b17268adfe539f9722d869b4" category="section-title">克隆後配置</block>
  <block id="50d9180ea26c89fbe6506d71d81d3fb1" category="list-text">本機的 Oracle 生產資料庫通常以日誌存檔模式運作。對於開發或測試資料庫來說，此模式不是必需的。若要關閉日誌存檔模式，請以 sysdba 登入 Oracle DB，執行日誌模式變更命令，然後啟動資料庫進行存取。</block>
  <block id="b205237d51ff9525496f4b2252942213" category="list-text">配置 Oracle 偵聽器，或將新複製的資料庫註冊到現有的偵聽器以供使用者存取。</block>
  <block id="800699a04cdaa75b2219988799b0a048" category="list-text">對於 SQL Server，將日誌模式從“完整”變更為“簡單”，以便 SQL Server dev/test 日誌檔案在填滿日誌磁碟區時可以輕鬆縮小。</block>
  <block id="89e018d207fd292a4926870904035c18" category="section-title">刷新克隆資料庫</block>
  <block id="d84550ba9a340ebf4fa6698dff5ba344" category="list-text">刪除克隆的資料庫並清理雲端資料庫伺服器環境。然後按照前面的步驟克隆一個包含新資料的新資料庫。克隆一個新資料庫只需要幾分鐘。</block>
  <block id="1170d6f09309cb8dc382034a34680937" category="inline-link-macro">刷新克隆</block>
  <block id="fef062eeb7771b01e620bb2460b1bf9a" category="list-text">關閉克隆資料庫，使用 CLI 執行克隆刷新指令。有關詳細信息，請參閱以下SnapCenter文件：<block ref="1e4035dee07650c706f8f0714c384872" category="inline-link-macro-rx"></block> 。</block>
  <block id="2d6962c20ba37b34437afc30e6838e0d" category="inline-link-macro">NetApp解決方案自動化社群支援 Slack 頻道</block>
  <block id="7b88d7d11804db6b079e226a6f043ea7" category="paragraph">如果您需要有關此解決方案和用例的協助，請加入<block ref="f9456f3b54a140d5d3858823c684363f" category="inline-link-macro-rx"></block>並尋找解決方案自動化管道來發布您的問題或詢問。</block>
  <block id="ff9d8653752bd48bb6b73cf97f207af1" category="summary">採用SnapCenter DR 工作流程的混合雲資料庫解決方案</block>
  <block id="ac2e8778240cb518ee14b1defbf55765" category="doc">災難復原工作流程</block>
  <block id="8e84608bd62584b2f262d60fd734714f" category="paragraph">企業已經將公有雲作為可行的資源和災難復原目的地。 SnapCenter使這個過程盡可能無縫。此災難復原工作流程與複製工作流程非常相似，但資料庫復原透過複製到雲端的最後一個可用日誌來還原所有可能的業務交易。但是，還有針對災難復原的額外預先配置和後配置步驟。</block>
  <block id="e230d95c57c5534b3e90b93fddbcb1c9" category="section-title">將本地 Oracle 生產資料庫複製到雲端以進行災難恢復</block>
  <block id="db9517755259859dbae095126c803544" category="list-text">為了驗證克隆恢復是否通過最後一個可用日誌運行，我們創建了一個小測試表並插入了一行。完全恢復到最後可用日誌後，測試資料將被恢復。</block>
  <block id="bf9b379030bc827f7fde47d402deb0c3" category="paragraph"><block ref="bf9b379030bc827f7fde47d402deb0c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4fd1337293be82f7472d90bc35f51e90" category="list-text">以 Oracle 資料庫管理使用者 ID 身分登入SnapCenter 。導覽至「資源」標籤，其中顯示受SnapCenter保護的 Oracle 資料庫。</block>
  <block id="c045754a6f6804ffaa3e8a3349bb61ea" category="paragraph"><block ref="c045754a6f6804ffaa3e8a3349bb61ea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e795ef17ab8e08159909afe558c32a1c" category="list-text">選擇 Oracle 日誌資源群組並按一下「立即備份」以手動執行 Oracle 日誌備份，將最新交易刷新到雲端中的目標。在真實的 DR 場景中，最後一個可復原的交易取決於資料庫日誌磁碟區複製到雲端的頻率，而這又取決於公司的 RTO 或 RPO 策略。</block>
  <block id="a2b3eebd207287850edd1177521be8c8" category="paragraph"><block ref="a2b3eebd207287850edd1177521be8c8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c64c9ffbfbb15dacd22606acf72da44" category="paragraph"><block ref="4c64c9ffbfbb15dacd22606acf72da44" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d77575716b9cd49ab1453e367c405abe" category="admonition">在災難復原場景中，非同步SnapMirror會遺失在資料庫日誌備份間隔內未到達雲端目標的資料。為了最大限度地減少資料遺失，可以安排更頻繁的日誌備份。然而，從技術上來說，日誌備份頻率是有限制的。</block>
  <block id="c684c2587fa959f3df40953faab1c1a1" category="list-text">選擇輔助鏡像備份上的最後一個日誌備份，並安裝該日誌備份。</block>
  <block id="6286aa5686611cc853dc091a6465aa7b" category="paragraph"><block ref="6286aa5686611cc853dc091a6465aa7b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8a8f78b581031f58f587c2c400e2d7e0" category="paragraph"><block ref="8a8f78b581031f58f587c2c400e2d7e0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fbfa0a2a63c1090863dedb14664d443c" category="list-text">選擇最後一個完整資料庫備份，然後按一下「克隆」以啟動克隆工作流程。</block>
  <block id="a15e54a17fb69aa641ceea5f9aaecabc" category="paragraph"><block ref="a15e54a17fb69aa641ceea5f9aaecabc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3aa765536eeb5bd55823afbb43c9efdc" category="list-text">在主機上選擇一個唯一的克隆資料庫 ID。</block>
  <block id="2f61defc08c838dd1776e8384de4d5e7" category="paragraph"><block ref="2f61defc08c838dd1776e8384de4d5e7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d57d235b31b66e982ae6d433fa33948e" category="list-text">為 Oracle 閃回復原區和線上日誌配置日誌磁碟區並將其掛載到目標 DR 伺服器。</block>
  <block id="9d13517407750da9676d0eacd64d2f61" category="paragraph"><block ref="9d13517407750da9676d0eacd64d2f61" category="inline-image-macro-rx" type="image"></block></block>
  <block id="37e13ec4617949d1839682f248c29345" category="paragraph"><block ref="37e13ec4617949d1839682f248c29345" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6142419cbd2b279a240db52011ea3cab" category="admonition">Oracle 克隆過程不會建立日誌卷，需要在克隆之前在 DR 伺服器上進行配置。</block>
  <block id="b20da77a777ef0a84d95f447b254387c" category="list-text">選擇目標複製主機和放置資料檔案、控制檔案和重做日誌的位置。</block>
  <block id="39ecc7e730fd5492ff22572380147383" category="paragraph"><block ref="39ecc7e730fd5492ff22572380147383" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b126b14adfdc04f12e6a00531155f4a" category="list-text">選擇克隆的憑證。填寫目標伺服器上 Oracle 主目錄配置的詳細資訊。</block>
  <block id="2f0654b2d4002cc86dd65a1dd1fdd620" category="paragraph"><block ref="2f0654b2d4002cc86dd65a1dd1fdd620" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c76f59dc52686a71eb5917bbcabfa212" category="list-text">指定克隆之前要執行的腳本。如果需要，可以調整資料庫參數。</block>
  <block id="ebfae66d0d19783737f56910903b2f4f" category="paragraph"><block ref="ebfae66d0d19783737f56910903b2f4f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7018f70f78c5e3154b2620e31167c12e" category="list-text">選擇「直到取消」作為復原選項，以便恢復執行所有可用的存檔日誌來還原複製到輔助雲端位置的最後一個交易。</block>
  <block id="cb6a3f006f851cb8fe602416d51249de" category="paragraph"><block ref="cb6a3f006f851cb8fe602416d51249de" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6233d74c8f9820a1029624d60ab66049" category="list-text">如果需要，請設定 SMTP 伺服器以接收電子郵件通知。</block>
  <block id="d1bed69a0f1e8e74876c7069be501886" category="paragraph"><block ref="d1bed69a0f1e8e74876c7069be501886" category="inline-image-macro-rx" type="image"></block></block>
  <block id="99a0cd00abfa258b121d480ce7d27e63" category="list-text">DR 克隆摘要。</block>
  <block id="da46ac31ccf219acaed3d495297a58c7" category="paragraph"><block ref="da46ac31ccf219acaed3d495297a58c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4ff014e6bff5ee06349d607c14fcf9e" category="list-text">複製完成後，複製的資料庫會立即在SnapCenter中註冊，然後可用於備份保護。</block>
  <block id="1a7649ea290421532d145807093a7772" category="paragraph"><block ref="1a7649ea290421532d145807093a7772" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22d74aee547ad10d104f875521cfa6d7" category="section-title">Oracle 的災難復原後複製驗證與配置</block>
  <block id="9d58cce71d4c85948ccecfea105367ed" category="list-text">驗證已在雲端中的 DR 位置刷新、複製和復原的最後一個測試交易。</block>
  <block id="254ca89c210a529d8172395ad07820f4" category="paragraph"><block ref="254ca89c210a529d8172395ad07820f4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="61b3573abc722a493f53ed27503f7eff" category="list-text">配置閃回恢復區。</block>
  <block id="660e02806b058564a27ae968882bb9d2" category="paragraph"><block ref="660e02806b058564a27ae968882bb9d2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4005d553f013abc53c6a1a65aed1d65f" category="list-text">配置 Oracle 監聽器以供使用者存取。</block>
  <block id="0c79c2a9e4fd1ea908a63d58f1f44917" category="list-text">將克隆卷從複製的來源卷中分離出來。</block>
  <block id="42e82bb35283d9f2e2b444419f518667" category="list-text">從雲端反向複製到本地並重建故障的本機資料庫伺服器。</block>
  <block id="4ce2420dd00dd0b543e2e51bf7c1c135" category="admonition">克隆分裂可能會導致臨時儲存空間利用率遠高於正常運作。但重建本地DB伺服器後，可以釋放額外的空間。</block>
  <block id="0e70133bb418f4025b82a6a35301e209" category="section-title">將本機 SQL 生產資料庫複製到雲端以進行災難復原</block>
  <block id="32bfa00a92b9f85d791a43f6d70a35cd" category="list-text">類似地，為了驗證 SQL 克隆復原是否運行了最後一個可用日誌，我們建立了一個小型測試表並插入了一行。完全恢復到最後一個可用日誌後，測試資料將被恢復。</block>
  <block id="97f3ffe7d5b98c3e08fbbbe98ebefec3" category="paragraph"><block ref="97f3ffe7d5b98c3e08fbbbe98ebefec3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a3b7f1fcf93afdd055ec19e230b54347" category="list-text">使用 SQL Server 的資料庫管理使用者 ID 登入SnapCenter 。導覽至「資源」標籤，其中顯示 SQL Server 保護資源群組。</block>
  <block id="7b8dfadb61967ada09a2574700fb3679" category="paragraph"><block ref="7b8dfadb61967ada09a2574700fb3679" category="inline-image-macro-rx" type="image"></block></block>
  <block id="608bfa3334f97023b71f6b7a04742bd6" category="list-text">手動執行日誌備份以刷新要複製到公有雲中的二級儲存的最後一個交易。</block>
  <block id="3731796124724265e7056364fe97de49" category="paragraph"><block ref="3731796124724265e7056364fe97de49" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9b9ced1d8d8e91eb2606cb7d0932fa4" category="list-text">選擇最後一個完整的 SQL Server 備份進行複製。</block>
  <block id="4f9447b8f96dd4e69d5420903d0ff31e" category="paragraph"><block ref="4f9447b8f96dd4e69d5420903d0ff31e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="82efcc579f2220a65dbe5cdd64f47253" category="list-text">設定克隆設置，例如克隆伺服器、克隆實例、克隆名稱和掛載選項。執行克隆的輔助儲存位置是自動填入的。</block>
  <block id="660b4652e7cc7126e9a114258a40d467" category="paragraph"><block ref="660b4652e7cc7126e9a114258a40d467" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9d84ecf0ed314694d6e3ad9b2a96a198" category="list-text">選擇要套用的所有日誌備份。</block>
  <block id="e91ab26b6566811aeea0708c6e5c268b" category="paragraph"><block ref="e91ab26b6566811aeea0708c6e5c268b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f68fbd76be71ebe267aa207f7bef25f" category="list-text">指定克隆之前或之後運行的任何可選腳本。</block>
  <block id="5b889c873c8e5957d9b60e72df5c2dc7" category="paragraph"><block ref="5b889c873c8e5957d9b60e72df5c2dc7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0ac43ede08a0b7154673a619b979f17d" category="list-text">如果需要電子郵件通知，請指定 SMTP 伺服器。</block>
  <block id="0cf1d9b1b5d8d0430cc2f17eb75e61ee" category="paragraph"><block ref="0cf1d9b1b5d8d0430cc2f17eb75e61ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f7338d3af995c4a281de85493129cc18" category="list-text">DR 克隆摘要。克隆的資料庫會立即在SnapCenter中註冊並可用於備份保護。</block>
  <block id="24ea5f6304d78943cb64b7203c62375b" category="paragraph"><block ref="24ea5f6304d78943cb64b7203c62375b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="15f7959b68f914a689bc1bd410c1587a" category="paragraph"><block ref="15f7959b68f914a689bc1bd410c1587a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f01a56e31a650c5bb83408b5238270e" category="section-title">災難復原後克隆 SQL 驗證和配置</block>
  <block id="029640b7bf09578f05703e407e99b8d7" category="list-text">監視克隆作業狀態。</block>
  <block id="9b2bc9accae58c4c3564ab1782a3460e" category="paragraph"><block ref="9b2bc9accae58c4c3564ab1782a3460e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="68236fcee9bee8dbdc1c54b7b2d84b34" category="list-text">驗證最後一個交易是否已透過所有日誌檔案複製和復原進行複製和復原。</block>
  <block id="84796a21de5593c952d0ae1c4869387f" category="paragraph"><block ref="84796a21de5593c952d0ae1c4869387f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="50159c53d6f87eb33c314abd9f0bd28f" category="list-text">在 DR 伺服器上設定新的SnapCenter日誌目錄以用於 SQL Server 日誌備份。</block>
  <block id="50f8c30e062c542679b96127a844db6a" category="paragraph">如果您需要有關此解決方案和用例的協助，請加入<block ref="f9456f3b54a140d5d3858823c684363f" category="inline-link-macro-rx"></block>並尋找解決方案自動化管道來發布您的問題或詢問。</block>
  <block id="d89002d36151bd13d2bba69f3533ee5f" category="summary">該解決方案為NetApp現場和客戶提供使用基於NetApp SnapCenter GUI 的工具和公有雲中的NetApp儲存服務 CVO 配置、操作和遷移資料庫到混合雲環境的說明和指導。</block>
  <block id="8269707c3930f3cbcd49193be33bc125" category="doc">TR-4908：採用SnapCenter的混合雲資料庫解決方案概述</block>
  <block id="7c4d94e1b484fb577b0aeafbec788ea1" category="paragraph">曹艾倫、菲利克斯·梅里根、 NetApp</block>
  <block id="268a30b4d0cad062acd42967ce0fab50" category="paragraph">此解決方案為NetApp現場和客戶提供了使用基於NetApp SnapCenter GUI 的工具和公有雲中的NetApp儲存服務 CVO 配置、操作和遷移資料庫到混合雲環境的說明和指導，適用於以下用例：</block>
  <block id="e88a2467c8ad8bf481854b1a745a875b" category="list-text">混合雲中的資料庫開發/測試操作</block>
  <block id="3c9552536897a076f75b078a5e2a3703" category="list-text">混合雲端中的資料庫災難復原</block>
  <block id="a1ac690c228caf22f3228d3a4d8b5cab" category="paragraph">如今，出於效能、安全性和/或其他原因，許多企業資料庫仍駐留在私人企業資料中心。這種混合雲資料庫解決方案使企業能夠在現場操作其主資料庫，同時使用公有雲進行開發/測試資料庫操作以及災難恢復，以降低許可和營運成本。</block>
  <block id="d900d125b3be40bcb79452d624c38561" category="paragraph">許多企業資料庫（例如 Oracle、SQL Server、SAP HANA 等）的授權和營運成本都很高。許多客戶根據其資料庫環境中的計算核心數量支付一次性許可費以及年度支援費用，無論這些核心用於開發、測試、生產還是災難復原。許多這樣的環境可能並未在整個應用程式生命週期內充分利用。</block>
  <block id="1f49cc83c5c3735827e3353f320f5f7f" category="paragraph">該解決方案為客戶提供了一種選擇，透過將用於開發、測試或災難復原的資料庫環境遷移到雲端，可以潛在地減少可授權核心的數量。透過使用公有雲規模、冗餘、高可用性和基於消費的計費模型，可以節省大量許可和營運成本，同時不會犧牲任何應用程式的可用性或可用性。</block>
  <block id="1a197dd926608052c7d43edfd09556fa" category="paragraph">除了潛在的資料庫許可證成本節省之外，基於NetApp容量的 CVO 許可證模型還允許客戶節省每 GB 的儲存成本，同時為他們提供競爭儲存服務所不具備的高水準資料庫可管理性。下圖顯示了公有雲中流行的儲存服務的儲存成本比較。</block>
  <block id="67fdaeebde7240c6e8407fc841b36c97" category="paragraph"><block ref="67fdaeebde7240c6e8407fc841b36c97" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e222eb27a0002f2960d1cf1e14bbf7d" category="paragraph">該解決方案表明，透過使用基於SnapCenter GUI 的軟體工具和NetApp SnapMirror技術，可以輕鬆設定、實施和操作混合雲資料庫操作。</block>
  <block id="26cc8c416b5c9fd6bec3dc68e6f2f0c8" category="paragraph">以下影片示範了SnapCenter的實際操作：</block>
  <block id="edc6673fe24c4867029921bbe72f25cb" category="inline-link">使用SnapCenter跨混合雲備份 Oracle 資料庫</block>
  <block id="07f8a38c412c09341d1deed9b406043b" category="list-text"><block ref="7b45d70be3a7543eb942cb9a903fbe9c" category="inline-link-rx"></block></block>
  <block id="68d9033a95c0ed286c9b7e0e7454cd86" category="inline-link">SnapCenter- 將 DEV/TEST 複製到 AWS 雲端以用於 Oracle 資料庫</block>
  <block id="74334272f82b4ca436609109dc29dd1f" category="list-text"><block ref="74334272f82b4ca436609109dc29dd1f" category="inline-link-rx"></block></block>
  <block id="3b04263461ad5a7b57aa872e093ec9fa" category="paragraph">值得注意的是，儘管本文檔中的插圖將 CVO 顯示為公有雲中的目標儲存實例，但該解決方案也針對 AWS 的 FSx ONTAP儲存引擎的新版本進行了全面驗證。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律聲明</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="paragraph">法律聲明提供對版權聲明、商標、專利等的存取。</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版權</block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商標</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NETAPP、NETAPP 標誌和NetApp商標頁面上列出的標誌是NetApp, Inc. 的商標。其他公司和產品名稱可能是其各自所有者的商標。</block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">專利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">NetApp擁有的專利的最新清單可在以下位置找到：</block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隱私權政策</block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="9ebab86841aaf8d1142cbc9de846ef74" category="summary">這個真實的客戶使用案例範例說明了將 SQL 伺服器工作負載從本地遷移到Amazon FSx ONTAP以降低成本所面臨的挑戰、解決方案和結果。</block>
  <block id="2bb6aceca76309fe8dc1a391905a7797" category="doc">醫療產品公司將本地 SQL 工作負載遷移到Amazon FSx ONTAP以降低成本</block>
  <block id="2899245ece0617ff86d6db5902b5cab9" category="section-title">挑戰</block>
  <block id="ddeb1059d99575170dd0449c38543c71" category="list-text">客戶一直在第三方託管的私人資料中心運行 SQL 伺服器工作負載。不斷增加的託管成本已成為一個問題。</block>
  <block id="8af70440008c2e1ffe209a0fdf859d92" category="list-text">由於外包和員工流失，它缺乏對應用程式架構和現有基礎設施的部落知識。</block>
  <block id="67c4c601210dd1946cf613171fc89e20" category="list-text">它在管理NetApp ONTAP方面幾乎沒有經驗。</block>
  <block id="e95bdcab85ffd6873d2f0650e693f95e" category="list-text">在對現有基礎設施進行更新決策之前，該專案的時間表非常緊湊。</block>
  <block id="a53f8ff0145160d09034dc91d7044cd4" category="list-text">SQL Server 環境很大（100TB）且複雜，透過 SQL Always On 在兩個資料中心之間實現 HA。三個臨時環境使用 AppSync 建立了二級資料副本，並每日/每週刷新資料。每次從生產資料刷新後，都需要透過 SQL 腳本更改專用資料標誌。</block>
  <block id="215ffdc2154202bc8e4ac019a43864a7" category="inline-image-macro">此圖提供了遷移之前客戶環境配置的詳細圖片。</block>
  <block id="83cc4b36f66d6b47819e8171dd075a36" category="paragraph"><block ref="83cc4b36f66d6b47819e8171dd075a36" category="inline-image-macro-rx" type="image"></block></block>
  <block id="34e74b1c7f4aad91715567cf698912f6" category="section-title">解決方案</block>
  <block id="4215ca268463517d967ef74b6bede3eb" category="list-text">從本地端託管的 Dell Unity SAN 和 AppSync 環境遷移到具有NetApp SnapCenter的 AWS Amazon FSx ONTAP 。</block>
  <block id="e9c661df21b993c0b7b63dce6feec2e3" category="list-text">Amazon FSx ONTAP精簡複製功能有助於降低儲存成本，而全自動SnapCenter克隆生命週期管理可滿足所有其他瞬態環境要求。</block>
  <block id="d5410f927ed71956aafce5a6dc3305ac" category="list-text">主 SQL Server DB 部署在 AWS EBS 上，並在單一可用區Amazon FSx ONTAP上複製輔助副本。</block>
  <block id="c2aa7a0b885e6095c021fd891708f12b" category="list-text">PoC 證明SnapCenter是 AppSync 的合適替代品。</block>
  <block id="36ee31347df2745629bdc9ab076623bd" category="list-text">值得信賴且經驗豐富的合作夥伴，提供設定、遷移和持續支援。詳細的解決方案實施指南為首次使用和缺乏經驗的Amazon FSx ONTAP和SnapCenter用戶提供了協助。</block>
  <block id="e6167a9415ddc0e437b76be36ead0fd9" category="inline-image-macro">此圖提供了遷移後客戶環境配置的詳細圖片。</block>
  <block id="144ee0753661798d189f7b8edfba5d5d" category="paragraph"><block ref="144ee0753661798d189f7b8edfba5d5d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="037a407f2bcb6f735326c14ce45a0e3c" category="section-title">結果</block>
  <block id="4894e924def080453ae046c515553627" category="list-text">與繼續在私人資料中心託管相比，成本降低了 40%。</block>
  <block id="afb5ca9be54e0c53d05b5291ae88d538" category="list-text">透過SnapCenter提供完全託管的Amazon FSx ONTAP服務，以支援 300 位客戶。</block>
  <block id="411edfad09596c7d8c36ef9644cd895e" category="list-text">保持為 PreProd、UAT 和 QA 環境自動化近乎即時、精簡配置複製的能力。</block>
  <block id="77ddcbafb32e39924dc0ae5d8e6d9283" category="list-text">按時遷移、避免續訂成本、從不愉快的供應商關係轉變為公有雲中的有益體驗。</block>
  <block id="9c65aa139183fc57fbe68058471ba5f8" category="list-text">Amazon FSx上的 SQL Server 在保持效能的同時實作了額外的資料冗餘層。</block>
  <block id="4715903fd66fd676a1eadc1e2fc3c4c9" category="list-text">將來能夠輕鬆實現跨區域 DR。</block>
  <block id="e890f04973d00c3664a44f4cc586bb5d" category="inline-link-macro">NetApp企業資料庫解決方案</block>
  <block id="23680652f2c974bcceb7b9aa43410d20" category="paragraph">要了解有關NetApp企業資料庫解決方案的更多信息，請訪問以下網站<block ref="8402f2c56712389a2706366603f539c4" category="inline-link-macro-rx"></block></block>
  <block id="3282bd4b5c29b5e9be65469e592bba18" category="doc">現代化您的 Microsoft SQL Server 環境</block>
  <block id="69015d285622bbd074d7bccf4ea12670" category="paragraph">優化營運並釋放資料的力量—無論是在本地還是在雲端。</block>
  <block id="b5b095487ccabae138c7872353cadbe6" category="paragraph"><block ref="b5b095487ccabae138c7872353cadbe6" category="inline-link-macro-rx"></block></block>
  <block id="9ff5e34d13d41849b6450e8addb8d6b9" category="doc">TR-4923：使用Amazon FSx ONTAP在 AWS EC2 上執行 SQL Server</block>
  <block id="5ce204e25db367dee2cd85f469afe6fe" category="paragraph">此解決方案涵蓋使用Amazon FSx ONTAP在 AWS EC2 上部署 SQL Server。</block>
  <block id="0b79795d3efc95b9976c7c5b933afce2" category="section-title">介紹</block>
  <block id="402f75f2702f054c16c5ca8fdd8e3d55" category="paragraph">許多希望將應用程式從本地遷移到雲端的公司發現，本地儲存系統和雲端儲存服務所提供的功能差異阻礙了這項努力。這種差距使得遷移 Microsoft SQL Server 等企業應用程式變得更加困難。特別是，運行企業應用程式所需的服務（例如強大的快照、儲存效率功能、高可用性、可靠性和一致性能）的差距迫使客戶做出設計權衡或放棄應用程式遷移。有了 FSx ONTAP，客戶不再需要妥協。 FSx ONTAP是一項原生（第一方）AWS 服務，由 AWS 銷售、支援、計費和完全管理。它利用NetApp ONTAP的強大功能來提供與NetApp三十年來在 AWS 中作為託管服務提供的相同的企業級儲存和資料管理功能。</block>
  <block id="f3eec26de1c09022af7c97255f0dfee6" category="inline-link">AWS FSx ONTAP</block>
  <block id="a2f7f68476a76b6aa359589e4d201707" category="paragraph">使用 EC2 執行個體上的 SQL Server，資料庫管理員可以存取和自訂其資料庫環境和底層作業系統。 EC2 執行個體上的 SQL Server 與<block ref="3f737fd84a60fb425fdcdb5cf9a593da" category="inline-link-rx"></block>儲存資料庫文件，實現高效能、資料管理以及使用區塊級複製的簡單易行的遷移路徑。因此，您可以透過簡單的提升和轉移方法、更少的點擊次數以及無需模式轉換在 AWS VPC 上執行複雜的資料庫。</block>
  <block id="7650c209896ebc8342f9cb76784be613" category="section-title">將Amazon FSx ONTAP與 SQL Server 結合使用的優勢</block>
  <block id="1543833f78776c49001619f3d53821e7" category="paragraph">Amazon FSx ONTAP是 AWS 中 SQL Server 部署的理想檔案儲存。其優點包括：</block>
  <block id="7b699f0e1a60e419ed7d9173339aa3f5" category="list-text">持續的高效能和吞吐量以及低延遲</block>
  <block id="8a34b0f2109dd0aad0c0c9976717cdd3" category="list-text">利用 NVMe 快取進行智慧緩存，提高效能</block>
  <block id="b10e27f9d68e001b8aa9369c8d308a8c" category="list-text">靈活的大小調整，以便您可以隨時增加或縮減容量、吞吐量和 IOP</block>
  <block id="169fee7c17564fc51aa8d2e77bcc1ce0" category="list-text">高效率的本地到 AWS 區塊複製</block>
  <block id="fd140f04c5bc5f51aff3ea5e1619abaf" category="list-text">使用 iSCSI（一種著名的資料庫環境協定）</block>
  <block id="e2c00a563e0219fd93fa6f24606dee33" category="list-text">儲存效率功能，例如精簡配置和零佔用空間克隆</block>
  <block id="4ac0316f1ba409d5cd9684222f9f8ada" category="list-text">備份時間從幾小時縮短至幾分鐘，從而降低 RTO</block>
  <block id="e3168d8a4383357a37460afad2f8878d" category="list-text">使用直覺的NetApp SnapCenter UI 對 SQL 資料庫進行精細備份和恢復</block>
  <block id="935da11069e36e124602b7e23a73ee06" category="list-text">在實際遷移之前執行多次測試遷移的能力</block>
  <block id="15173984ed0ff615a3f0d55c8cd12291" category="list-text">透過檔案級或 I/O 級複製縮短遷移期間的停機時間並克服遷移挑戰</block>
  <block id="0de5f8d5cf18757efac074c02f16a0bb" category="list-text">透過在主要版本或補丁更新後找到根本原因來減少 MTTR</block>
  <block id="b2f6cb9b486b8f5aad81044ec7e08d84" category="paragraph">使用 iSCSI 協定在 FSx ONTAP上部署 SQL Server 資料庫（如在本機常用）可提供具有卓越效能、儲存效率和資料管理功能的理想資料庫儲存環境。使用多個 iSCSI 會話，假設工作集大小為 5%，安裝快閃記憶體快取可透過 FSx ONTAP服務提供超過 100K IOP。此配置為最嚴苛的應用程式提供了對效能的完全控制。連接到 FSx ONTAP的較小 EC2 執行個體上執行的 SQL Server 的效能可以與在較大的 EC2 執行個體上執行的 SQL Server 相同，因為僅對 FSx ONTAP套用網路頻寬限制。減少實例的大小也會降低計算成本，從而提供 TCO 最佳化的部署。使用 iSCSI、SMB3.0 的 SQL 與 FSx ONTAP上的多通道、持續可用性共用相結合，為 SQL 工作負載提供了巨大優勢。</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="section-title">開始之前</block>
  <block id="cefa59f4c31e5a6c2632d4b8f0c20311" category="paragraph">EC2 執行個體上的Amazon FSx ONTAP和 SQL Server 的結合使得建立企業級資料庫儲存設計能夠滿足當今最嚴苛的應用程式要求。為了優化這兩種技術，了解 SQL Server I/O 模式和特性至關重要。精心設計的 SQL Server 資料庫儲存佈局支援 SQL Server 的效能和 SQL Server 基礎架構的管理。良好的儲存佈局還可以使初始部署成功，並且隨著業務的成長，環境可以順利成長。</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="section-title">先決條件</block>
  <block id="800d285a5a8ca10451f7ace50ac40de5" category="paragraph">在完成本文檔中的步驟之前，您應該滿足以下先決條件：</block>
  <block id="69a7abd5a400936f0e1a89910dfa0ba1" category="list-text">一個 AWS 帳戶</block>
  <block id="0ccec72ee076a52a2a36cc16443822a6" category="list-text">適當的 IAM 角色來設定 EC2 和 FSx ONTAP</block>
  <block id="a76b04166db341ceee35b584673698e9" category="list-text">EC2 上的 Windows Active Directory 網域</block>
  <block id="3084927119ae63d45676d527dfb4a882" category="list-text">所有 SQL Server 節點必須能夠相互通訊</block>
  <block id="b1ada0ca0559fff335d482de393b4c70" category="list-text">確保 DNS 解析有效且主機名稱可以解析。如果沒有，請使用主機檔案條目。</block>
  <block id="8413178222467ef68eb68a0644f11c42" category="list-text">SQL Server 安裝的一般知識</block>
  <block id="9c69c1668eca3541f0576cdc7fc730f0" category="paragraph">此外，請參閱NetApp SQL Server 環境最佳實踐，以確保最佳儲存配置。</block>
  <block id="49c805233b94175c188c58ebf681a2b9" category="example-title">EC2 上 SQL Server 環境的最佳實務配置</block>
  <block id="d1d9da06ca1cde6106fef737b522df6e" category="paragraph">使用 FSx ONTAP，取得儲存是最簡單的任務，可以透過更新檔案系統來執行。這個簡單的過程可以根據需要實現動態成本和效能最佳化，有助於平衡 SQL 工作負載，也是精簡配置的重要推動因素。 FSx ONTAP精簡配置旨在為執行 SQL Server 的 EC2 執行個體提供比檔案系統中配置的更多的邏輯儲存。儲存空間不是預先分配空間，而是在寫入資料時動態分配給每個磁碟區或 LUN。在大多數配置中，當磁碟區或 LUN 中的資料被刪除（並且不被任何 Snapshot 副本持有）時，可用空間也會被釋放回來。下表提供了動態分配儲存的配置設定。</block>
  <block id="51ac4bf63a0c6a9cefa7ba69b4154ef1" category="cell">環境</block>
  <block id="254f642527b45bc260048e30704edb39" category="cell">配置</block>
  <block id="f65fd63b63c9e9f25bf6bc141e83de34" category="cell">數量保證</block>
  <block id="db1bfba30dab4f1ed4a13cc586837f1b" category="cell">無（預設）</block>
  <block id="f6445fd89b0b2c67f0304765c4c9a760" category="cell">LUN 預留</block>
  <block id="00d23a76e43b46dae9ec7aa9dcbebb32" category="cell">已啟用</block>
  <block id="f1e0735081bab920eff76b08a4600c76" category="cell">部分儲備</block>
  <block id="856ee920f3261cadbc1c3fc52171d071" category="cell">0%（預設值）</block>
  <block id="99c0f62171e34b4ab6a79265f038e3af" category="cell">snap_reserve</block>
  <block id="9f1ef07877f9d85a82bd500f408b4814" category="cell">0%</block>
  <block id="a85c04491cb5bbcb534dc50b65b97530" category="cell">自動刪除</block>
  <block id="4ec86a7059e3d1002a06c51cbec9ad47" category="cell">卷/oldest_first</block>
  <block id="7c68df7d17c446f99304ee1dc1498bfc" category="cell">自動調整大小</block>
  <block id="521c36a31c2762741cf0f8890cbe05e3" category="cell">在</block>
  <block id="902c737cbaa1a86889c41fec210c805f" category="cell">嘗試先行</block>
  <block id="f4c25546f220bb5d07f94244c9303967" category="cell">自動成長</block>
  <block id="43c4c1dbc452be91829f25ee32c2a956" category="cell">卷分層策略</block>
  <block id="6d576caa9862f6db0177dfaff7abb095" category="cell">僅快照</block>
  <block id="4c0abf2d4c54820b8d33061abaf30759" category="cell">快照策略</block>
  <block id="6adf97f83acf6453d4a6a4b1070f3754" category="cell">沒有任何</block>
  <block id="e08a486f204620eff1a08fc926316c68" category="paragraph">透過這種配置，磁碟區的總大小可以大於檔案系統中可用的實際儲存空間。如果 LUN 或 Snapshot 副本需要的空間超過磁碟區中的可用空間，則磁碟區會自動增大，從而佔用包含的檔案系統的更多空間。自動增長允許 FSx ONTAP自動將磁碟區的大小增加到您預先決定的最大大小。包含檔案系統中必須有可用空間來支援磁碟區的自動增長。因此，啟用自動增長後，您應該監視包含檔案系統中的可用空間並在需要時更新檔案系統。</block>
  <block id="82373a2016779f9c20fdc0d8b48101a7" category="inline-link">空間分配</block>
  <block id="0c1ee68ee35860bdd8687bc1c127f836" category="paragraph">同時，設置<block ref="9d6ca3a9a42127525354c85d54adc465" category="inline-link-rx"></block>啟用 LUN 上的選項，以便當磁碟區空間不足且磁碟區中的 LUN 無法接受寫入時，FSx ONTAP會通知 EC2 主機。此外，當 EC2 主機上的 SQL Server 刪除資料時，此選項可使 FSx ONTAP自動回收空間。空間分配選項預設為停用。</block>
  <block id="afa7be61df3527a5c4b5b7369729dfbc" category="admonition">如果在無保證的磁碟區中建立了空間預留的 LUN，則該 LUN 的行為與非空間預留的 LUN 相同。這是因為無保證的捲沒有空間分配給 LUN；由於無保證，磁碟區本身只能在寫入時分配空間。</block>
  <block id="cf18df2432b44bda18f67ef6fc93e36f" category="paragraph">透過此配置，FSx ONTAP管理員通常可以調整磁碟區的大小，以便他們必須管理和監控主機端和檔案系統中的 LUN 中使用的空間。</block>
  <block id="3e5fc395bc0727ee4a5d50bf7852e11e" category="admonition">NetApp建議對 SQL 伺服器工作負載使用單獨的檔案系統。如果檔案系統用於多個應用程序，請監視檔案系統和檔案系統內磁碟區的空間使用情況，以確保磁碟區不會爭奪可用空間。</block>
  <block id="9bc03cfd47c7deb1375b7e700fba9c1a" category="admonition">自動刪除選項不會刪除用於建立FlexClone磁碟區的 Snapshot 副本。</block>
  <block id="20292bb9591bce95b16e6ee1415023d3" category="admonition">對於關鍵任務應用程式（例如 SQL 伺服器）來說，必須仔細考慮和管理儲存的過度承諾，因為即使是最小的中斷也是不能容忍的。在這種情況下，最好監控儲存消耗趨勢，以確定可以接受的過度承諾程度（如果有的話）。</block>
  <block id="304d5a3dcf64bf05141ead00f7ec768a" category="paragraph">最佳實踐</block>
  <block id="fbaad71632f1f86a6aec0eb25bf981d7" category="list-text">為了獲得最佳儲存效能，請將檔案系統容量配置為資料庫總使用量的 1.35 倍。</block>
  <block id="e2ec94309dce197f199c6e60cd3070eb" category="list-text">使用精簡配置時需要適當的監控和有效的行動計劃來避免應用程式停機。</block>
  <block id="d7fbab8fe0fe681c9e815507bcdf85c8" category="list-text">確保設定 Cloudwatch 和其他監控工具警報，以便在儲存空間填滿時有足夠的時間聯繫人們做出反應。</block>
  <block id="626a89ea253e84625436538e7249e94d" category="section-title">為 SQL Server 設定儲存空間並部署 Snapcenter 以進行備份、還原和複製作業</block>
  <block id="0a1c2236044192334a3fb3bbc0ab0dcd" category="paragraph">為了使用SnapCenter執行 SQL 伺服器操作，您必須先為 SQL 伺服器建立磁碟區和 LUN。</block>
  <block id="0cf06bf086c162ff9027bab7f6f36c93" category="example-title">為 SQL Server 建立磁碟區和 LUN</block>
  <block id="ff6ef44023084895f5f22aaf568ee0e3" category="paragraph">若要為 SQL Server 建立磁碟區和 LUN，請完成下列步驟：</block>
  <block id="0165fcfd32879eacf541aadf086338d2" category="list-text">開啟Amazon FSx控制台<block ref="977f5adc4374191d0e48b9c0a8830158" category="inline-link-rx"></block></block>
  <block id="1e33ad7579c798ce6033c144ac99b840" category="list-text">使用建立方法下的標準建立選項為NetApp ONTAP檔案系統建立Amazon FSx 。這允許您定義 FSxadmin 和 vsadmin 憑證。</block>
  <block id="51f380869c70c40eff15cdbd4d4a6e9b" category="paragraph"><block ref="51f380869c70c40eff15cdbd4d4a6e9b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="269452df07db5e5d5fb10125ef2dfc42" category="list-text">指定 fsxadmin 的密碼。</block>
  <block id="3cebde7747bac9b46baf88a6b962cfc9" category="paragraph"><block ref="3cebde7747bac9b46baf88a6b962cfc9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dea5db34596930d023317e03284777e1" category="list-text">指定 SVM 的密碼。</block>
  <block id="7b7fc47e17cbec35480a32f2da2a9642" category="paragraph"><block ref="7b7fc47e17cbec35480a32f2da2a9642" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2bc6640e4dfc5de2fb0076fe009c8d72" category="inline-link">在 FSx ONTAP上建立卷</block>
  <block id="bcfe525f1945594d4e3a18903ce33cc2" category="list-text">依照列出的步驟建立磁碟區<block ref="a30412ed9707add26aa026ab621cb532" category="inline-link-rx"></block>。</block>
  <block id="1c472a7f2f4380895c82bc2ed43d727b" category="paragraph">最佳實踐</block>
  <block id="17288ccd1a2a55fccc24e084bec74a89" category="list-text">停用儲存快照副本計畫和保留策略。相反，使用NetApp SnapCenter來協調 SQL Server 資料和日誌磁碟區的 Snapshot 副本。</block>
  <block id="c5023b4b04bc0ddc3d77e81fee7d99bb" category="list-text">在不同磁碟區上的各個 LUN 上設定資料庫，以利用快速且精細的還原功能。</block>
  <block id="6cb174042332f6d15cedab79c1f88bac" category="list-text">將使用者資料檔案（.mdf）放在單獨的磁碟區上，因為它們是隨機讀取/寫入工作負載。建立交易日誌備份的頻率通常高於建立資料庫備份的頻率。因此，將交易日誌檔案 (.ldf) 放在與資料檔案不同的磁碟區上，以便可以為每個檔案建立獨立的備份計畫。這種分離也將日誌檔案的順序寫入 I/O 與資料檔案的隨機讀取/寫入 I/O 隔離開來，並顯著提高 SQL Server 的效能。</block>
  <block id="0588cef8958d83f61aed452f853f5852" category="list-text">Tempdb 是 Microsoft SQL Server 用作臨時工作區的系統資料庫，特別適用於 I/O 密集型 DBCC CHECKDB 作業。因此，將此資料庫放在專用卷上。在卷數是一項挑戰的大型環境中，您可以在仔細規劃後將 tempdb 合併到較少的捲中，並將其儲存在與其他系統資料庫相同的捲中。  tempdb 的資料保護並不是一個高優先級，因為每次重新啟動 Microsoft SQL Server 時都會重新建立此資料庫。</block>
  <block id="0f33b537ada1b2dcb95880741120d7b6" category="list-text">使用以下 SSH 命令建立磁碟區：</block>
  <block id="4272c7e0323a62da36a59d8db2457c11" category="list-text">在 Windows 伺服器中使用提升的權限透過 PowerShell 啟動 iSCSI 服務。</block>
  <block id="91d0d079f1c5a2183c1012cd2c2e59ab" category="list-text">在 Windows 伺服器中使用提升的權限透過 PowerShell 安裝 Multipath-IO。</block>
  <block id="4dee8d84e86540a5c4c302b3d75c32bc" category="list-text">在 Windows 伺服器中使用提升的權限透過 PowerShell 尋找 Windows 啟動器名稱。</block>
  <block id="31135a9096c7ec17c4591166bc97e819" category="paragraph"><block ref="31135a9096c7ec17c4591166bc97e819" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1fcce0650c7bce1532fc57b6af299dba" category="list-text">使用 Putty 連接到儲存虛擬機器 (SVM) 並建立 iGroup。</block>
  <block id="a260444f9f7265e7da0cffa861246e93" category="list-text">使用以下 SSH 命令建立 LUN：</block>
  <block id="3d05062c53d156d602296b7fd5690b44" category="paragraph"><block ref="3d05062c53d156d602296b7fd5690b44" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52f5ef787d84b4ec1b5183cffdef5b56" category="list-text">為了實現與作業系統分區方案的 I/O 對齊，請使用 windows_2008 作為建議的 LUN 類型。參考<block ref="ff5fd3b71f5cd8b1a4e2fe23ad6d92ae" category="inline-link-rx"></block>了解更多。</block>
  <block id="4f10474fd5677d7f5caee5944cfd1a79" category="list-text">使用以下 SSH 命令將 igroup 對應到您剛剛建立的 LUN。</block>
  <block id="48c4925b376ee796138447edf8c6c10b" category="paragraph"><block ref="48c4925b376ee796138447edf8c6c10b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0108f548c7bfba3ca19e227db2ad81d9" category="list-text">對於使用 Windows 故障轉移叢集的共用磁碟，執行 SSH 指令將相同的 LUN 對應到屬於參與 Windows 故障轉移叢集的所有伺服器的 igroup。</block>
  <block id="88c4f29ad54bd37fb1b7a1491b7af990" category="list-text">透過 iSCSI 目標將 Windows Server 連線到 SVM。從 AWS 入口網站尋找目標 IP 位址。</block>
  <block id="40848a1a6d2b9ff082a8631d6e227af9" category="paragraph"><block ref="40848a1a6d2b9ff082a8631d6e227af9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="df9eaa73034109b21c143e8c209823c2" category="list-text">從伺服器管理員和工具選單中，選擇 iSCSI 啟動器。選擇“發現”選項卡，然後選擇“發現門戶”。提供上一個步驟中的 iSCSI IP 位址並選擇「進階」。從本機適配器中，選擇 Microsoft iSCSI Initiator。從啟動器 IP 中，選擇伺服器的 IP。然後選擇“確定”關閉所有視窗。</block>
  <block id="9c801f3ce3d3624ee2295fdb5f8b4e01" category="paragraph"><block ref="9c801f3ce3d3624ee2295fdb5f8b4e01" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8bd432f2fc3bb1fab0023bf42f7b4108" category="list-text">對 SVM 中的第二個 iSCSI IP 重複步驟 12。</block>
  <block id="5648333e8838336553b385e488639863" category="list-text">選擇“*目標*”選項卡，選擇“*連線*”，然後選擇“*啟用多路徑*”。</block>
  <block id="ed19e435fddf6da1d807ce924c621811" category="paragraph"><block ref="ed19e435fddf6da1d807ce924c621811" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f94de8933712f5d52ca62caf7fef6eb5" category="list-text">為了獲得最佳效能，請新增更多會話； NetApp建議建立五個 iSCSI 會話。選擇*屬性*&gt; *新增會話*&gt; *進階*並重複步驟 12。</block>
  <block id="32ad539c2431f91a35344daadfa34149" category="paragraph"><block ref="32ad539c2431f91a35344daadfa34149" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c762aaec425b12667f2a575012e48905" category="list-text">每個目標介面配置五個 iSCSI 會話以獲得最佳效能。</block>
  <block id="72a53f90bcbaa031cad1c79575c53094" category="list-text">配置循環策略以獲得最佳的整體 iSCSI 效能。</block>
  <block id="168b03d713c83578e3c90be8e0a76a8e" category="list-text">格式化 LUN 時，請確保將分割區的分配單元大小設定為 64K</block>
  <block id="a196b0bfd5261a81ff3d40a2043f792c" category="list-text">執行下列 PowerShell 命令以確保 iSCSI 會話持久化。</block>
  <block id="b4f9dfe5978f567a9f00e7a1ccc10f88" category="paragraph"><block ref="b4f9dfe5978f567a9f00e7a1ccc10f88" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22ae84abced8e9e1236160d982616772" category="list-text">使用以下 PowerShell 命令初始化磁碟。</block>
  <block id="24f0357ad0ccea6c22a1fe2518f4d211" category="paragraph"><block ref="24f0357ad0ccea6c22a1fe2518f4d211" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b1e9edc2d6e907049df14a10a6fcc404" category="list-text">使用 PowerShell 執行建立分割區和格式化磁碟指令。</block>
  <block id="79484e9f2e5f0589c78f273edd80759f" category="paragraph">您可以使用附錄 B 中的 PowerShell 腳本自動建立磁碟區和 LUN。也可以使用SnapCenter建立 LUN。</block>
  <block id="d05ae24753b4098046ae8369c5618b97" category="paragraph">一旦定義了磁碟區和 LUN，您就需要設定SnapCenter才能執行資料庫操作。</block>
  <block id="6309043436d4e7e5bad9a81c89ff15e4" category="example-title">SnapCenter概述</block>
  <block id="419a08c6fdce80a29b8f8aeb7524f0e2" category="paragraph">NetApp SnapCenter是針對一級企業應用程式的下一代資料保護軟體。  SnapCenter具有單一玻璃管理介面，可自動化和簡化與多個資料庫和其他應用程式工作負載的備份、復原和複製相關的手動、複雜且耗時的流程。 SnapCenter利用NetApp技術，包括NetApp Snapshots、 NetApp SnapMirror、 SnapRestore和NetApp FlexClone。這種整合使 IT 組織能夠擴展其儲存基礎架構、滿足日益嚴格的 SLA 承諾並提高整個企業管理員的工作效率。</block>
  <block id="aa7c84b8a1ac7c27cbd3e14740e96214" category="example-title">SnapCenter伺服器要求</block>
  <block id="4ee08603c9fd8ece4f670310954cdde6" category="paragraph">下表列出了在 Microsoft Windows Server 上安裝SnapCenter伺服器和外掛程式的最低要求。</block>
  <block id="05bbb43b3d923283e0b6ffafd088f41f" category="cell">成分</block>
  <block id="9b97b7bd5e0a87be7bf218224ada83cf" category="cell">要求</block>
  <block id="44e5a606cb3fbfaed79ce8eb853ed886" category="paragraph">最小 CPU 數量</block>
  <block id="ea54f01387bc5362f6e287ba66d656a8" category="paragraph">四個核心/vCPU</block>
  <block id="4789f23283b3a61f858b641a1bef19a3" category="paragraph">記憶</block>
  <block id="99880291d6a6b72b928a1847a6135c88" category="paragraph">最低：8GB 建議：32GB</block>
  <block id="96e1506a8b72a455b990ffe403eea2cf" category="paragraph">儲存空間</block>
  <block id="39b4c2fc16a74430850f1b767f816bdd" category="paragraph">安裝所需的最小空間：10GB 儲存庫所需的最小空間：10GB</block>
  <block id="2e71b3fb71d89f18906d4807a6011e20" category="cell">支援的作業系統</block>
  <block id="00aae0645113cb861020a7a42ded48c2" category="list-text">Windows 伺服器 2012</block>
  <block id="96bc7f42979153694e05a6a2b867772e" category="list-text">Windows Server 2012 R2</block>
  <block id="ed590cb2453f0683b64cb528f78610a2" category="list-text">Windows 伺服器 2016</block>
  <block id="31f8757839909e87266f2b53482c86ef" category="list-text">Windows 伺服器 2019</block>
  <block id="7c01fa88a74580e7e4f62ca6bfe7ee83" category="cell">軟體套件</block>
  <block id="aab81d3c2e898a19cf0f270cdb285a21" category="list-text">.NET 4.5.2 或更高版本</block>
  <block id="43de0ba571a51d1adc60e6d05ecf8d70" category="list-text">Windows 管理框架 (WMF) 4.0 或更高版本</block>
  <block id="fd6133b32592ca288e63c1b1257f656d" category="list-text">PowerShell 4.0 或更高版本</block>
  <block id="627b3c41fe5df988246e05db6908af86" category="inline-link-macro">空間和尺寸要求</block>
  <block id="182f4f46a2b148fe3842ce5e12def358" category="paragraph">有關詳細信息，請參閱<block ref="bab1d0c00645b2d02bb11c94e55012b0" category="inline-link-macro-rx"></block>。</block>
  <block id="9ed4a475dd3705157a9fed8811f63ce2" category="inline-link">NetApp互通性表工具</block>
  <block id="a19fb58a9ea7e8409b13e971960fdbf8" category="paragraph">有關版本相容性，請參閱<block ref="b7322bec4509d45107de6de43ca1f517" category="inline-link-rx"></block>。</block>
  <block id="00324c8ea6b2abc68414748e587e15ec" category="example-title">資料庫儲存佈局</block>
  <block id="a02dce187534c84aa16d8849406a60eb" category="paragraph">下圖描述了使用SnapCenter備份時建立 Microsoft SQL Server 資料庫儲存佈局的一些注意事項。</block>
  <block id="fdc770458695fd7759d6b148f5ebca57" category="paragraph"><block ref="fdc770458695fd7759d6b148f5ebca57" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ebfae4b9e090c4988616a73ffc71415e" category="list-text">將具有 I/O 密集型查詢或大型資料庫（例如 500GB 或更多）的資料庫放在單獨的磁碟區上，以便更快地恢復。該磁碟區也應由單獨的作業進行備份。</block>
  <block id="4916b57b0128fd5a0a4300f0a8763292" category="list-text">將不太重要或 I/O 要求較少的中小型資料庫整合到單一磁碟區。備份位於同一磁碟區中的大量資料庫可以減少需要維護的 Snapshot 副本數量。最佳做法是整合 Microsoft SQL Server 執行個體以使用相同的磁碟區來控制所建立的備份 Snapshot 副本的數量。</block>
  <block id="8db6b23eddd61aa572ca93a39703d4a8" category="list-text">建立單獨的 LUN 來儲存全文相關文件和文件流相關文件。</block>
  <block id="cb11fd215e0c541cb65535e582b9b273" category="list-text">為每個主機指派單獨的 LUN 來儲存 Microsoft SQL Server 日誌備份。</block>
  <block id="48b8325fd70d83c2d4e99987e23b07ef" category="list-text">儲存資料庫伺服器元資料配置和作業詳細資料的系統資料庫不會頻繁更新。將系統資料庫/tempdb 放置在單獨的磁碟機或 LUN 中。不要將系統資料庫與使用者資料庫放在同一卷中。使用者資料庫有不同的備份策略，且使用者資料庫備份的頻率與系統資料庫不一樣。</block>
  <block id="1be01a12dc77b3099b16d258c12db3f9" category="list-text">對於 Microsoft SQL Server 可用性群組設置，將副本的資料和日誌檔案放在所有節點上的相同資料夾結構中。</block>
  <block id="a586cfc38b79b6539a9723b4d2f5af66" category="paragraph">除了將使用者資料庫佈局分成不同的磁碟區所帶來的效能優勢之外，資料庫還會顯著影響備份和復原所需的時間。與託管多個使用者資料檔案的磁碟區相比，擁有單獨的資料和日誌檔案磁碟區可以顯著縮短復原時間。同樣，具有高 I/O 密集型應用程式的使用者資料庫也容易增加備份時間。本文檔後面將提供有關備份和復原實務的更詳細說明。</block>
  <block id="ded063089a7be685811c0ae13b02874f" category="admonition">從 SQL Server 2012 (11.x) 開始，系統資料庫（Master、Model、MSDB 和 TempDB）和資料庫引擎使用者資料庫可以使用 SMB 檔案伺服器作為儲存選項進行安裝。這適用於獨立 SQL Server 和 SQL Server 故障轉移叢集安裝。這使您能夠使用 FSx ONTAP的所有效能和資料管理功能，包括磁碟區容量、效能可擴充性和資料保護功能，SQL Server 可以利用這些功能。應用程式伺服器使用的共用必須配置連續可用的屬性集，並且應使用 NTFS 安全性樣式建立磁碟區。  NetApp Snapcenter 無法與 FSx ONTAP上放置在 SMB 共用上的資料庫一起使用。</block>
  <block id="9e45010900186b3cbbe04f954a6f3562" category="admonition">對於不使用SnapCenter執行備份的 SQL Server 資料庫，Microsoft 建議將資料和日誌檔案放在單獨的磁碟機上。對於同時更新和請求資料的應用程序，日誌檔案是寫密集型的，而資料檔案（取決於您的應用程式）是讀取/寫入密集型的。對於資料檢索，不需要日誌檔案。因此，資料請求可以透過放置在其自身磁碟機上的資料檔案來滿足。</block>
  <block id="41a264a984b034248073a80093913e60" category="admonition">當您建立新資料庫時，Microsoft 建議為資料和日誌指定單獨的磁碟機。要在建立資料庫後移動文件，必須使資料庫離線。如需更多 Microsoft 建議，請參閱將資料和日誌檔案放在單獨的磁碟機上。</block>
  <block id="f4ea2029dd0e694cde33838315883930" category="example-title">SnapCenter的安裝與設定</block>
  <block id="1155d165aa176b6275b67036497cd8e6" category="inline-link">安裝適用於 Microsoft SQL Server 的SnapCenter插件</block>
  <block id="067f687182a68fccec4a3840e67fc889" category="paragraph">關注<block ref="4144149cc24a91f915be2d3b14f23c22" category="inline-link-rx"></block>和<block ref="7e24f6ba39e2c63512c07f20cb1a71c0" category="inline-link-rx"></block>安裝並設定SnapCenter。</block>
  <block id="3ab2ad2898088a813669db2948590562" category="paragraph">安裝SnapCenter後，完成以下步驟進行設定。</block>
  <block id="dd0c654d5a8ede80984b9526335bddc9" category="list-text">若要設定憑證，請選擇*設定* &gt; *新建*，然後輸入憑證資訊。</block>
  <block id="72fbc6e5252af995615620a70fc2f714" category="paragraph"><block ref="72fbc6e5252af995615620a70fc2f714" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f68e2f9e3be05e4ced40099aec5493d4" category="list-text">透過選擇儲存系統&gt;新建來新增儲存系統，並提供適當的 FSx ONTAP儲存資訊。</block>
  <block id="8c20ebf197669dd9077f7b860fca81da" category="paragraph"><block ref="8c20ebf197669dd9077f7b860fca81da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c0e0b904d3c7826b806c48118543142c" category="list-text">透過選擇「*主機*」&gt;「*新增*」來新增主機，然後提供主機資訊。  SnapCenter會自動安裝 Windows 和 SQL Server 外掛程式。此過程可能需要一些時間。</block>
  <block id="d3094f6fccd0bceb835738c86127b158" category="paragraph"><block ref="d3094f6fccd0bceb835738c86127b158" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23dd2805cf2d7b26334d0678ab4e99b4" category="paragraph">所有插件安裝完成後，必須配置日誌目錄。這是交易日誌備份所在的位置。您可以透過選擇主機，然後選擇設定日誌目錄來設定日誌目錄。</block>
  <block id="5c5fb88ff793d01c8b1a283f1ee88749" category="admonition">SnapCenter使用主機日誌目錄來儲存交易日誌備份資料。這是在主機和實例層級。  SnapCenter使用的每個 SQL Server 主機都必須配置一個主機日誌目錄來執行日誌備份。  SnapCenter有一個資料庫儲存庫，因此與備份、復原或複製作業相關的元資料儲存在中央資料庫儲存庫中。</block>
  <block id="0fc057cb39ba1a444dbc365c0161d31f" category="paragraph">主機日誌目錄的大小計算如下：</block>
  <block id="e067558831f8381f0970051292e0a02a" category="paragraph">主機日誌目錄大小 = ((系統資料庫大小 + (最大 DB LDF 大小 × 每日日誌變更率 %)) × (Snapshot 副本保留) ÷ (1 - LUN 開銷空間 %)</block>
  <block id="1b5bc043867e6da78577571c1070e56a" category="paragraph">主機日誌目錄大小計算公式假設如下：</block>
  <block id="fa7afec3a90f55ad9aea3b76f336302f" category="list-text">不包含 tempdb 資料庫的系統資料庫備份</block>
  <block id="f550013c290c4a21af7974f7440d758a" category="list-text">10% 的 LUN 開銷空間將主機日誌目錄放在專用磁碟區或 LUN 上。主機日誌目錄中的資料量取決於備份的大小和保留備份的天數。</block>
  <block id="4a49b3d7ae0cb7741886ac9a4bb593cc" category="paragraph"><block ref="4a49b3d7ae0cb7741886ac9a4bb593cc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd9dfb7fc6f502e70f86a8c1f2d66aa1" category="paragraph">如果 LUN 已經配置，您可以選擇掛載點來代表主機日誌目錄。</block>
  <block id="9ce41ca9b58cd2f37beee344ca0d8d3d" category="paragraph"><block ref="9ce41ca9b58cd2f37beee344ca0d8d3d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9a708f2af7ec6f7c7ae489cca832c811" category="paragraph">現在您已準備好對 SQL Server 執行備份、還原和複製作業。</block>
  <block id="7bfeafaf85908b711b618c069c66e99c" category="example-title">使用SnapCenter備份資料庫</block>
  <block id="fc197cb26aec21d091eb6791c0d7cbff" category="paragraph">將資料庫和日誌檔案放置在 FSx ONTAP LUN 上後，可以使用SnapCenter備份資料庫。以下過程用於建立完整備份。</block>
  <block id="f52f437d3282493fd1855bba366c482a" category="list-text">在SnapCenter術語中，RPO 可以定義為備份頻率，例如，您希望安排備份的頻率，以便將資料遺失減少到幾分鐘內。 SnapCenter允許您每五分鐘安排一次備份。然而，在交易高峰期或給定時間內資料變化率較大時，備份可能無法在五分鐘內完成。最佳做法是安排頻繁的交易日誌備份，而不是完整備份。</block>
  <block id="7b99ea666dfc26516833c088400741e6" category="list-text">有許多方法可以處理 RPO 和 RTO。這種備份方法的替代方法是針對不同的間隔針對資料和日誌制定單獨的備份策略。例如，從SnapCenter中，以 15 分鐘的間隔安排日誌備份，以 6 小時的間隔安排資料備份。</block>
  <block id="14b0febccc904523871b9498c72ab705" category="list-text">使用資源組進行快照最佳化的備份配置和要管理的作業數量。</block>
  <block id="45be64dc5372d4c03684e301633c794c" category="list-text">選擇*資源*，然後在左上角的下拉式選單中選擇*Microsoft SQL Server*。選擇*刷新資源*。</block>
  <block id="3759f5820f94130af2af9c26b6206ccd" category="paragraph"><block ref="3759f5820f94130af2af9c26b6206ccd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="92a02c3e922aecfbb22227bc7a4f73e8" category="list-text">選擇要備份的資料庫，然後選擇*下一步*和（**）新增策略（如果尚未建立）。依照*新的 SQL Server 備份原則*建立新原則。</block>
  <block id="e83a19b8756179126d10e0db8cccf50f" category="paragraph"><block ref="e83a19b8756179126d10e0db8cccf50f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="89f2e11b6c9317605c01622834d4853d" category="list-text">如果需要，請選擇驗證伺服器。此伺服器是SnapCenter在建立完整備份後執行 DBCC CHECKDB 的伺服器。按一下「*下一步*」以取得通知，然後選擇「*摘要*」進行檢視。檢查完畢後，按一下「完成」。</block>
  <block id="8a6ec4fc9aaca6d859fcc918fbf4666c" category="paragraph"><block ref="8a6ec4fc9aaca6d859fcc918fbf4666c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="919295932fd1084fb39c4a1be23b37ed" category="list-text">點擊*立即備份*以測試備份。在彈出的視窗中，選擇*備份*。</block>
  <block id="4fdbd7cb3dda43c8f112fe494ea07e02" category="paragraph"><block ref="4fdbd7cb3dda43c8f112fe494ea07e02" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9c738a74e68034a98f4a38a1b41ef2d4" category="list-text">選擇*監控*來驗證備份是否已完成。</block>
  <block id="b6ed04e6bbbfb4b7b238fe5b3761150d" category="paragraph"><block ref="b6ed04e6bbbfb4b7b238fe5b3761150d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="67459542a38abe56e00d4512bb475f05" category="list-text">從SnapCenter備份交易日誌備份，以便在復原過程中， SnapCenter可以讀取所有備份檔案並自動依序還原。</block>
  <block id="54d8d459dfb725a307f3bb54495de3e3" category="list-text">如果使用第三方產品進行備份，請選擇SnapCenter中的複製備份以避免日誌序列問題，並在投入生產之前測試復原功能。</block>
  <block id="83b7215bcd7cc73d11f34b95b4026718" category="example-title">使用SnapCenter還原資料庫</block>
  <block id="7172cc34c1510c3891870c7c009c94e1" category="paragraph">在 EC2 上將 FSx ONTAP與 SQL Server 結合使用的主要優勢之一是它能夠在每個資料庫層級執行快速且細粒度的復原。</block>
  <block id="5afcacb3783eeead2b5317d1c455b3bc" category="paragraph">完成以下步驟，使用SnapCenter將單一資料庫還原到特定時間點或最新時間點。</block>
  <block id="a028f8b44f91b1338df98ed3237d093a" category="list-text">選擇資源，然後選擇您想要復原的資料庫。</block>
  <block id="2aaf91b17a6f6726032133885004282f" category="paragraph"><block ref="2aaf91b17a6f6726032133885004282f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eb395b310e199ca7ef6b36360302bc50" category="list-text">選擇需要還原資料庫的備份名稱，然後選擇還原。</block>
  <block id="e99d25ac3998e8701f51a1990c8d8785" category="list-text">依照*恢復*彈出視窗恢復資料庫。</block>
  <block id="8bdb6d6fe719d2506b9b5f86bda88b43" category="list-text">選擇*監控*來驗證復原過程是否成功。</block>
  <block id="ab1acae42a89132d0dc0e18db99db938" category="paragraph"><block ref="ab1acae42a89132d0dc0e18db99db938" category="inline-image-macro-rx" type="image"></block></block>
  <block id="459c0a4ca065bbbedc6304d4c6903cc5" category="example-title">具有大量小型到大型資料庫的執行個體的注意事項</block>
  <block id="0be8a2d7e2996a1641824fa4250d2fd3" category="paragraph">SnapCenter可以備份資源組內一個執行個體或一組執行個體中的大量大型資料庫。資料庫的大小不是備份時間的主要因素。備份持續時間可能會因每個磁碟區的 LUN 數量、Microsoft SQL Server 上的負載、每個執行個體的資料庫總數以及具體而言的 I/O 頻寬和使用情況而異。在設定從執行個體或資源群組備份資料庫的政策時， NetApp建議將每個 Snapshot 副本備份的最大資料庫數量限制為每個主機 100 個。確保 Snapshot 副本總數不超過 1,023 個副本的限制。</block>
  <block id="33f3c567c61942e461392756abce64dc" category="paragraph">NetApp還建議您透過對資料庫數量進行分組來限制並行運行的備份作業，而不是為每個資料庫或實例建立多個作業。為了獲得最佳的備份持續時間效能，請將備份作業的數量減少到一次可以備份約 100 個或更少的資料庫的數量。</block>
  <block id="ea2e6af969539b040884e9a2ec1fcb49" category="paragraph">如前所述，I/O 使用率是備份過程中的重要因素。備份過程必須等待資料庫上的所有 I/O 作業完成才能靜止。對於I/O作業高度密集的資料庫，應該延後到其他備份時間，或與其他備份作業隔離，以避免影響同一資源組內要備份的其他資源。</block>
  <block id="e5ad8f936997e1328b1b169bf5c6cc8b" category="paragraph">對於具有六台 Microsoft SQL Server 主機且每個執行個體託管 200 個資料庫的環境，假設每台主機有四個 LUN，每個磁碟區建立一個 LUN，則將完整備份原則設定為每個 Snapshot 副本備份的最大資料庫數為 100。每個實例上的 200 個資料庫被佈局為平均分佈在兩個 LUN 上的 200 個資料文件，並且 200 個日誌文件也平均分佈在兩個 LUN 上，即每個卷每個 LUN 100 個文件。</block>
  <block id="7804dbf4b7a37ec699db9a31f21bbea7" category="paragraph">透過建立三個資源組來排程三個備份作業，每個資源組包含兩個實例，總共包含 400 個資料庫。</block>
  <block id="e2ba702320599667af2b18f0fad307e0" category="paragraph">並行運行所有三個備份作業可同時備份 1,200 個資料庫。根據伺服器的負載和 I/O 使用情況，每個執行個體的開始和結束時間可能會有所不同。在此實例中，總共建立了 24 個 Snapshot 副本。</block>
  <block id="2d0d5c636161f9ca31c8ffbfa5ee5d7c" category="paragraph">除了完整備份之外， NetApp還建議您為關鍵資料庫設定交易日誌備份。確保資料庫屬性設定為完整復原模型。</block>
  <block id="aac1148375449745ddbbe1709a2375f5" category="list-text">不要在備份中包含 tempdb 資料庫，因為它包含的資料是暫時的。將 tempdb 放置在不會建立 Snapshot 副本的儲存系統磁碟區中的 LUN 或 SMB 共用上。</block>
  <block id="16c5de1581b82a1f8657a3a98ac8fd34" category="list-text">具有高 I/O 密集型應用程式的 Microsoft SQL Server 執行個體應在不同的備份作業中隔離，以減少其他資源的整體備份時間。</block>
  <block id="a9a558ac49f24a2b078812205f07179c" category="list-text">將需要同時備份的資料庫數量限制為約 100 個，並錯開剩餘的資料庫備份，以避免同時進行。</block>
  <block id="68086c26b8c1644dfe6ea7d6fb859641" category="list-text">在資源組中使用 Microsoft SQL Server 執行個體名稱而不是多個資料庫，因為每當在 Microsoft SQL Server 執行個體中建立新資料庫時， SnapCenter都會自動考慮備份新資料庫。</block>
  <block id="5e5d80c17369e70061349fffb43b0aa8" category="list-text">如果變更資料庫配置，例如將資料庫復原模式變更為完整復原模式，請立即執行備份以允許最新的還原作業。</block>
  <block id="3dce7613a0d76dcf6fcb8e1daf396bbb" category="list-text">SnapCenter無法還原在SnapCenter之外建立的交易日誌備份。</block>
  <block id="0007de7aba408b88984eb8eb18044303" category="list-text">克隆FlexVol磁碟區時，請確保有足夠的空間用於克隆元資料。</block>
  <block id="9416a94214ef699335d78087cd9f12c6" category="list-text">恢復資料庫時，請確保磁碟區上有足夠的可用空間。</block>
  <block id="86e3f69ee9647210c14858984e2649ef" category="list-text">建立單獨的策略來每周至少管理和備份一次系統資料庫。</block>
  <block id="330337562cd623f5deb5908d4e8af736" category="example-title">使用SnapCenter克隆資料庫</block>
  <block id="0a6bfc2082e52dc96430a6b7c0dfc7e7" category="paragraph">若要將資料庫還原到開發或測試環境中的另一個位置，或為了業務分析目的建立副本， NetApp 的最佳實務是利用複製方法在相同執行個體或備用執行個體上建立資料庫的副本。</block>
  <block id="1784d101568269c7068d4bd6769d7c47" category="paragraph">在 FSx ONTAP環境中託管的 iSCSI 磁碟上複製 500GB 的資料庫通常需要不到五分鐘。克隆完成後，使用者就可以對克隆的資料庫執行所有需要的讀取/寫入操作。大部分時間都消耗在磁碟掃描（diskpart）上。無論資料庫的大小為何， NetApp克隆過程通常只需不到 2 分鐘。</block>
  <block id="886ef20e3049a00bc0d9a1c734bb90da" category="paragraph">資料庫的複製可以透過雙重方法執行：您可以從最新的備份建立克隆，也可以使用複製生命週期管理，透過該管理可以在輔助執行個體上提供最新的副本。</block>
  <block id="870999fc556eadefd7740857b96209c3" category="paragraph">SnapCenter可讓您將複製副本掛載到所需的磁碟上，以維護輔助實例上的資料夾結構的格式並繼續排程備份作業。</block>
  <block id="b2face8e1d4561b0ed5b594bfc4c0063" category="example-title">將資料庫複製到同一實例中的新資料庫名稱</block>
  <block id="4a3135e25926365f40a59fd88af69a44" category="paragraph">以下步驟可用於在 EC2 上執行的相同 SQL 伺服器執行個體中將資料庫複製到新的資料庫名稱：</block>
  <block id="4655b3c9fecfc4d22a59068929be2bec" category="list-text">選擇資源，然後選擇需要克隆的資料庫。</block>
  <block id="944b75c61851b0ebc427a8aedc83d6f3" category="list-text">選擇您想要複製的備份名稱，然後選擇複製。</block>
  <block id="83d2194c2b06657769054af057f16b0a" category="list-text">按照備份視窗中的克隆說明完成克隆過程。</block>
  <block id="8fb624c33e03c9d016909a11c669125d" category="list-text">選擇監視器以確保克隆已完成。</block>
  <block id="0b075fd84c4c4a47346b99d43f9260be" category="example-title">將資料庫複製到在 EC2 上執行的新 SQL Server 執行個體中</block>
  <block id="9451e65c3b1fc3fc6cf89a3fc9cf3cfd" category="paragraph">以下步驟用於將資料庫複製到在 EC2 上執行的新 SQL 伺服器執行個體：</block>
  <block id="479cb4cd4ee76801e360aa03ddc20a3a" category="list-text">在同一 VPC 中的 EC2 上建立一個新的 SQL Server。</block>
  <block id="e656412cc3adcbff91ebfaefcd504de2" category="list-text">啟用 iSCSI 協定和 MPIO，然後依照「為 SQL Server 建立磁碟區和 LUN」部分中的步驟 3 和 4 設定與 FSx ONTAP的 iSCSI 連線。</block>
  <block id="bebd076915c723b002ac43d0bb52ea26" category="list-text">依照「安裝和設定SnapCenter 」部分中的步驟 3，將 EC2 上的新 SQL Server 新增至SnapCenter 。</block>
  <block id="e7130318e065eddd45ec86565b727731" category="list-text">選擇資源 &gt; 查看實例，然後選擇刷新資源。</block>
  <block id="8be42b1e845c00bcb04c11269072f895" category="list-text">選擇資源，然後選擇您想要克隆的資料庫。</block>
  <block id="459801927d3c0bd5ddec9c1513f213ec" category="list-text">選擇您想要複製的備份名稱，然後選擇複製。</block>
  <block id="367de8f899b43a5b1ef7107f71a5737a" category="paragraph"><block ref="367de8f899b43a5b1ef7107f71a5737a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45d50db35e68c1259b414779e24fdbf5" category="list-text">依照從備份複製的說明，提供 EC2 上的新 SQL Server 執行個體和執行個體名稱來完成複製過程。</block>
  <block id="2474ed795f10bd4a218b466a66f830c8" category="paragraph"><block ref="2474ed795f10bd4a218b466a66f830c8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="785e5e204bcb101e73976a8c3ad22887" category="paragraph">要了解有關此過程的更多信息，請觀看以下視頻：</block>
  <block id="20606e28a0d567be1dabd5cf50a2dc3b" category="section-title">附錄</block>
  <block id="16dfbb688028526582ec31ab802b9589" category="example-title">附錄 A：用於雲形成模板的 YAML 文件</block>
  <block id="4c76ae47de51751cc57a4033d14f2f2a" category="paragraph">以下 .yaml 檔案可與 AWS 控制台中的雲形成範本一起使用。</block>
  <block id="af5a37a09e4cee2968d7fd03f421a0a2" category="inline-link"><block ref="af5a37a09e4cee2968d7fd03f421a0a2" category="inline-link-rx"></block></block>
  <block id="681814eb62cc26ee1c660bd58a9ce6eb" category="list-text"><block ref="681814eb62cc26ee1c660bd58a9ce6eb" category="inline-link-rx"></block></block>
  <block id="f6d8279768d195862ae69a3df8dd51ab" category="inline-link">此 GitHub 鏈接</block>
  <block id="275e63e9a49f296c063604ee4db5723e" category="paragraph">若要使用 PowerShell 自動建立 ISCSI LUN 並安裝NetApp SnapCenter ，請從<block ref="a4dae7a3e0d905f7a66835dd216b7b06" category="inline-link-rx"></block>。</block>
  <block id="00867e5f5ae22280c11a2626b65e657b" category="example-title">附錄 B：用於設定磁碟區和 LUN 的 Powershell 腳本</block>
  <block id="0826ee2b94a579e02e80bfcdf26c5648" category="paragraph">以下腳本用於配置磁碟區和 LUN，並根據上面提供的說明設定 iSCSI。有兩個 PowerShell 腳本：</block>
  <block id="81e24f41fbaff249c9819985065173e3" category="list-text"><block ref="2a9a99327bbfb47d37ee76307e959506" prefix="" category="inline-code"></block></block>
  <block id="2ca8201f2a50e4aec0e5ba21f6afed4d" category="list-text"><block ref="d78c8f4fe63dbe3ffd666bbbaf054cd7" prefix="" category="inline-code"></block></block>
  <block id="6385631c0b330c166b540183cec5af78" category="paragraph">運行檔案<block ref="d2dd03515102971189549a37cb42eb14" prefix=" " category="inline-code"></block>第一個和第二個腳本在伺服器重新啟動後自動執行。由於對 SVM 具有憑證存取權，這些 PowerShell 腳本可以在執行後被刪除。</block>
  <block id="d82c21a48349085e4fd93fb6712e3789" category="inline-link"><block ref="d82c21a48349085e4fd93fb6712e3789" category="inline-link-rx"></block></block>
  <block id="c745303ee8000be162517c239783af70" category="paragraph"><block ref="c745303ee8000be162517c239783af70" category="inline-link-rx"></block></block>
  <block id="b264bfe9bfd0fedb20c7a271df2d9bfc" category="list-text">FSx ONTAP入門</block>
  <block id="90572737558e59a2ecdd4618af07d6f3" category="inline-link"><block ref="90572737558e59a2ecdd4618af07d6f3" category="inline-link-rx"></block></block>
  <block id="7545caf3d97477d3c569d56c512074fa" category="paragraph"><block ref="7545caf3d97477d3c569d56c512074fa" category="inline-link-rx"></block></block>
  <block id="ad65cae8cf2bbd15ac77769974a440ce" category="list-text">SnapCenter介面概述</block>
  <block id="e91a1947a841fb6512ed2745315694b6" category="inline-link"><block ref="b69fb4215650a2dac7f11a4db50be2c2" category="inline-link-rx"></block></block>
  <block id="037a7b92d0da86c6bb48d74248e1660b" category="paragraph"><block ref="8ec527ff297932423d30e5ba4a0355fe" category="inline-link-rx"></block></block>
  <block id="1bdf7559e69b81c007496a063e71bca0" category="list-text">瀏覽SnapCenter導覽窗格選項</block>
  <block id="6d5097a2c320359a8d212d07ea067dac" category="inline-link"><block ref="6d5097a2c320359a8d212d07ea067dac" category="inline-link-rx"></block></block>
  <block id="e0ae39eeb7c7d78d56a1292229d1277a" category="paragraph"><block ref="e0ae39eeb7c7d78d56a1292229d1277a" category="inline-link-rx"></block></block>
  <block id="d29a9430434c2654cce06036a4a478b2" category="list-text">為 SQL Server 外掛程式設定SnapCenter 4.0</block>
  <block id="76831c1dfcb22a34eed484834f815799" category="inline-link"><block ref="76831c1dfcb22a34eed484834f815799" category="inline-link-rx"></block></block>
  <block id="1ee41cbe7eae46381d37cbc6c3e00c53" category="paragraph"><block ref="1ee41cbe7eae46381d37cbc6c3e00c53" category="inline-link-rx"></block></block>
  <block id="f781a682aea107fb2cdda3a0c1fd3ac5" category="list-text">如何使用具有 SQL Server 插件的SnapCenter備份和還原資料庫</block>
  <block id="35e821b0f036927360188d6b482813cd" category="inline-link"><block ref="35e821b0f036927360188d6b482813cd" category="inline-link-rx"></block></block>
  <block id="1555fac9dc4b20a7c4e81b2c2600f9e9" category="paragraph"><block ref="1555fac9dc4b20a7c4e81b2c2600f9e9" category="inline-link-rx"></block></block>
  <block id="c8e300ff66d94fe7668ff8d5d5e7f1c3" category="list-text">如何使用具有 SQL Server 插件的SnapCenter克隆資料庫</block>
  <block id="13ef7741337f79e69a4de98c210bf657" category="inline-link"><block ref="13ef7741337f79e69a4de98c210bf657" category="inline-link-rx"></block></block>
  <block id="6b91e7df9b7d266ccbf54c97ce1a1a47" category="paragraph"><block ref="6b91e7df9b7d266ccbf54c97ce1a1a47" category="inline-link-rx"></block></block>
  <block id="4db58285a0e634acd6843c40f7a6f4e0" category="paragraph">要了解有關本文檔中描述的信息的更多信息，請參閱以下網站連結：</block>
  <block id="d53a72004974ee8431ee292856c0bba3" category="list-text">使用Azure NetApp Files的解決方案體系結構</block>
  <block id="653ba0610595f0695c3ceb2c59afed59" category="inline-link"><block ref="653ba0610595f0695c3ceb2c59afed59" category="inline-link-rx"></block></block>
  <block id="d5ec9321fb49816034de6b296ef6baa2" category="paragraph"><block ref="d5ec9321fb49816034de6b296ef6baa2" category="inline-link-rx"></block></block>
  <block id="ba110408cece764b57b56f1129b3ba2e" category="list-text">使用Azure NetApp Files進行 SQL Server 部署的優勢</block>
  <block id="62b5dbc436fc2540c46476bd8e484c11" category="inline-link"><block ref="62b5dbc436fc2540c46476bd8e484c11" category="inline-link-rx"></block></block>
  <block id="44594562b4f528fe8d864bd3f48ddff6" category="paragraph"><block ref="44594562b4f528fe8d864bd3f48ddff6" category="inline-link-rx"></block></block>
  <block id="75b7d47e2aa19968e092ab7ddb108a3f" category="summary">無論您的目標是全雲還是具有延伸資料庫的混合雲， Azure NetApp Files都能提供出色的選項來部署和管理資料庫工作負載，同時透過讓資料需求無縫連接到應用程式層來降低您的 TCO。</block>
  <block id="6f8b794f3246b0c1e1780bb4d4d5dc53" category="doc">結論</block>
  <block id="d8d2e6021f496c4e4a31a3d5d51c0a97" category="paragraph">本文檔涵蓋了使用Azure NetApp Files規劃、設計、最佳化和擴展 Microsoft SQL Server 部署的建議，這些建議在不同的實施過程中可能會有很大差異。正確的解決方案取決於實施的技術細節和推動專案的業務需求。</block>
  <block id="56925354251a536c23de1174d3001595" category="section-title">總結</block>
  <block id="033e6e43f2148e187e072dc7e6585802" category="paragraph">該文件的要點包括：</block>
  <block id="b2b363e230905b04f6e9c7263aa93f42" category="list-text">現在您可以使用Azure NetApp Files來託管 SQL Server 叢集的資料庫和檔案共用見證。</block>
  <block id="4d6ec76303888bc681d543d1f4593c55" category="list-text">您可以提高應用程式回應時間並提供 99.9999% 的可用性，以便在需要時隨時隨地存取 SQL Server 資料。</block>
  <block id="408e4b7fbec4ba85e097b9393d2b27a7" category="list-text">您可以透過簡單、即時的調整大小來簡化 SQL Server 部署和持續管理（例如 RAID 條帶化）的整體複雜性。</block>
  <block id="41642b38214243168d907d92759dde36" category="list-text">您可以依靠智慧操作功能來幫助您在幾分鐘內部署 SQL Server 資料庫並加快開發週期。</block>
  <block id="61a32d891a5f7bca599a014bc56eec61" category="list-text">如果 Azure Cloud 是目標，Azure NetApp Files就是最佳化部署的正確儲存解決方案。</block>
  <block id="64899c745691f41e5b1dc01d3a4487d2" category="summary">本節介紹在雲端使用Azure NetApp Files和 SQL Server 時應考慮的不同問題。</block>
  <block id="bb4695a70b92668f0a7927d04580db60" category="doc">需要考慮的因素</block>
  <block id="4dd91c7652639dacea041fe6033e2627" category="section-title">虛擬機器效能</block>
  <block id="e6ac657ee6eac68b739c5cc437863922" category="inline-link">記憶體優化</block>
  <block id="68e5d4a238cdfe033afa141123484499" category="paragraph">選擇正確的虛擬機器大小對於公有雲中關聯式資料庫的最佳效能非常重要。 Microsoft 建議您繼續使用適用於本機伺服器環境中的 SQL Server 的相同資料庫效能調整選項。使用<block ref="187f54af8632f4f6696d6052e8b74aec" category="inline-link-rx"></block>適合 SQL Server 工作負載最佳效能的 VM 大小。收集現有部署的效能數據，以便在選擇正確的執行個體時識別 RAM 和 CPU 使用率。大多數部署在 D、E 或 M 系列之間進行選擇。</block>
  <block id="fcbd19b726fdd6160dfe2ab43f285a55" category="paragraph">*筆記：*</block>
  <block id="8b2db846b8ed65b2919d93a68b819a43" category="list-text">為了獲得 SQL Server 工作負載的最佳效能，請使用記憶體最佳化的 VM 大小。</block>
  <block id="32a3b4d7b7e6cf1ecde48636119e0288" category="list-text">NetApp和 Microsoft 建議您在選擇具有適當記憶體與 vCore 比率的執行個體類型之前確定儲存效能需求。這也有助於選擇具有適當網路頻寬的較低實例類型，以克服虛擬機器的儲存吞吐量限制。</block>
  <block id="0abdff1d9e33eca61c14ccafe8012cd5" category="section-title">虛擬機器冗餘</block>
  <block id="9fecd525b2d9ad39ac38bbfc4d05ee17" category="inline-link">可用性集</block>
  <block id="26075dbb6cfad683e0d9bd0d29c570b8" category="inline-link">可用區域</block>
  <block id="e936e004eab3eccfc1e7f46a3187dfd1" category="paragraph">為了提高冗餘度和高可用性，SQL Server VM 應該位於同一<block ref="47fe032b9b8e985355e53596ae7973ec" category="inline-link-rx"></block>或不同<block ref="ef39442dc7c0eb954c4472567a9ca1e3" category="inline-link-rx"></block>。建立 Azure VM 時，您必須在設定可用性集和可用性區域之間進行選擇；Azure VM 不能同時參與兩者。</block>
  <block id="05807e454c19f244770adae059b3c330" category="section-title">高可用性</block>
  <block id="94eeeae1e60f97a446e8c4f69d6d6f43" category="paragraph">為了實現高可用性，配置 SQL Server AOAG 或 Always On 故障轉移群集實例 (FCI) 是最佳選擇。對於 AOAG，這涉及虛擬網路中 Azure 虛擬機器上的多個 SQL Server 執行個體。如果資料庫層級需要高可用性，請考慮設定 SQL Server 可用性群組。</block>
  <block id="6e8775bd755a8835ce86806d669677ea" category="section-title">儲存配置</block>
  <block id="fa32aac4116ce1980c311f004157a133" category="paragraph">可以使用 SMB 檔案共用作為儲存選項進行部署。從 SQL Server 2012 開始，系統資料庫（master、model、msdb 或 tempdb）和使用者資料庫可以與伺服器訊息區塊 (SMB) 檔案伺服器一起安裝作為儲存選項。這適用於 SQL Server 獨立版和 SQL Server FCI。</block>
  <block id="250548ef00796e6a203215b1d550bb0d" category="admonition">SQL Server 資料庫的檔案共用儲存應支援持續可用屬性。這提供了對文件共享資料的不間斷存取。</block>
  <block id="45a6af9c92529e3da9ccdbeae9d692ac" category="paragraph">Azure NetApp Files提供高效能檔案儲存以滿足任何嚴苛的工作負載，並且與區塊儲存解決方案相比，它降低了 SQL Server TCO。使用區塊存儲，虛擬機器對磁碟操作的 I/O 和頻寬施加了限制；僅對Azure NetApp Files應用網路頻寬限制。換句話說， Azure NetApp Files不適用任何 VM 級 I/O 限制。沒有這些 I/O 限制，在連接到Azure NetApp Files的較小 VM 上執行的 SQL Server 的效能可以與在更大的 VM 上執行的 SQL Server 一樣好。 Azure NetApp Files透過降低運算和軟體授權成本來降低 SQL Server 部署成本。有關使用Azure NetApp Files進行 SQL Server 部署的詳細成本分析和效能優勢，請參閱<block ref="458fda910151e8d66385b2aabb6cd60e" category="inline-link-rx"></block>。</block>
  <block id="e654f7a86a4458b9cd662267e0f29b52" category="section-title">好處</block>
  <block id="9d2b7eb8bc76e60b0d9cd237d67a34fb" category="paragraph">使用Azure NetApp Files for SQL Server 的優點包括：</block>
  <block id="8ee22743237d82e9adc18a596977a138" category="list-text">使用Azure NetApp Files允許您使用更小的實例，從而降低計算成本。</block>
  <block id="3de639403ea86ae87a5883d359deb4ab" category="list-text">Azure NetApp Files也降低了軟體授權成本，從而降低了整體 TCO。</block>
  <block id="46790c8fe72176f6262b4b5531482ee5" category="list-text">磁碟區重塑和動態服務等級功能透過調整穩定狀態工作負載的大小並避免過度配置來優化成本。</block>
  <block id="860d93b2ef30525111fa6440bf4d5bd7" category="list-text">為了提高冗餘度和高可用性，SQL Server VM 應該位於同一<block ref="47fe032b9b8e985355e53596ae7973ec" category="inline-link-rx"></block>或以不同的方式<block ref="ef39442dc7c0eb954c4472567a9ca1e3" category="inline-link-rx"></block>。如果需要使用者定義的資料文件，請考慮文件路徑需求；在這種情況下，選擇 SQL FCI 而不是 SQL AOAG。</block>
  <block id="c6fbfcd868e29e37e88eaeff82a7f430" category="inline-link">\\ANFSMB-b4ca.anf.test\SQLDB 和 \\ANFSMB-b4ca.anf.test\SQLDB\</block>
  <block id="e2bed4e218692d056237b3ae3d24293c" category="list-text">支援以下 UNC 路徑：<block ref="cb8cdd6ee3ebeed12086142f1a66cc3e" category="inline-link-rx"></block> 。</block>
  <block id="0b4d3828f5dae91cd27e48bffa786d91" category="list-text">不支援環回 UNC 路徑。</block>
  <block id="db3d2f4f54b992af225801eb51ea7387" category="list-text">對於大小調整，請使用來自本地環境的歷史資料。對於 OLTP 工作負載，使用平均時間和峰值時間的工作負載以及磁碟讀取/秒和磁碟寫入/秒效能計數器將目標 IOPS 與效能要求進行匹配。對於資料倉儲和報告工作負載，使用平均時間和峰值時間的工作負載以及磁碟讀取位元組數/秒和磁碟寫入位元組數/秒來匹配目標吞吐量。平均值可以與體積重塑功能結合使用。</block>
  <block id="da3259c6aa3dafdc8ca15c687022a5cd" category="section-title">建立持續可用的共享</block>
  <block id="f7ee3eee4fa679986e37911272d13a29" category="inline-link">建立持續可用的共享</block>
  <block id="de7d92d6f4ac1f140ac05886ec017f09" category="paragraph">使用 Azure 入口網站或 Azure CLI 建立持續可用的共用。在入口網站中，選擇「啟用連續可用性」屬性選項。對於 Azure CLI，使用<block ref="0be8c8a92e4fe4621be30aa11942bc4d" prefix=" " category="inline-code"></block>選項設定為<block ref="91da4c74e2fced40755d4d3997af3488" prefix=" " category="inline-code"></block>。要了解有關創建新的、支援持續可用性的捲的更多信息，請參閱<block ref="86e4b436e8054cc83fccec640f98e218" category="inline-link-rx"></block>。</block>
  <block id="9a3932b7bdfdbb892087fd595ec7acb9" category="list-text">為 SMB 磁碟區啟用持續可用性，如下圖所示。</block>
  <block id="c012fe8c05a3d9875a4f87cee09d1ca9" category="list-text">如果使用非管理員網域帳戶，請確保帳戶已指派所需的安全權限。</block>
  <block id="762783478495f0889d01a59db256f92c" category="list-text">在共用層級設定適當的權限並設定適當的檔案等級權限。</block>
  <block id="bfb74db6a55528f52e8ecb83a507a043" category="inline-link-macro">將現有 SMB 磁碟區轉換為使用連續可用性</block>
  <block id="029622eacde8310c84abca3cb32d076a" category="list-text">無法在現有的 SMB 磁碟區上啟用持續可用屬性。若要將現有磁碟區轉換為使用持續可用的共用，請使用NetApp Snapshot 技術。有關更多信息，請參閱<block ref="a5010901471af228b32b1b902b9cf4f4" category="inline-link-macro-rx"></block> 。</block>
  <block id="56470e1c0b9a7128c62ccefc9b2414e8" category="paragraph"><block ref="56470e1c0b9a7128c62ccefc9b2414e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9446a98ad14416153cc4d45ab8b531bf" category="section-title">表現</block>
  <block id="ee38206503545cf54ad072dee7f8ab1a" category="paragraph">Azure NetApp Files支援三種服務等級：標準等級（每 TB 16MBps）、進階（每 TB 64MBps）和超級等級（每 TB 128MBps）。配置正確的磁碟區大小對於資料庫工作負載的最佳效能非常重要。使用Azure NetApp Files，磁碟區效能和吞吐量限制基於以下因素的組合：</block>
  <block id="b87f5218989e854f2889f939a4e2ec06" category="list-text">卷所屬容量池的服務級別</block>
  <block id="9320cce40e9ab4d677bfcc78eddc64d5" category="list-text">分配給卷的配額</block>
  <block id="2d98af90367bed299b95066a85be0a17" category="list-text">容量池的服務品質 (QoS) 類型（自動或手動）</block>
  <block id="a6f08c2897faaf4d449d71d87f473ff1" category="inline-link">Azure NetApp Files的服務級別</block>
  <block id="ac56170d8576092b90989d467f2d383e" category="paragraph">有關更多信息，請參閱<block ref="1e8ed0f384e427209ce2e9dfbaed249d" category="inline-link-rx"></block> 。</block>
  <block id="2e9717782618d5c2fea11b2f29028556" category="paragraph"><block ref="2e9717782618d5c2fea11b2f29028556" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1eb24bd760e508043a3cfdfe91ba9489" category="section-title">性能驗證</block>
  <block id="78fe494293decb4e2c7ba5ac2883bb83" category="paragraph">與任何部署一樣，測試虛擬機器和儲存至關重要。對於儲存驗證，應該使用諸如 HammerDB、Apploader 或任何具有適當讀取/寫入組合的自訂腳本或 FIO 等工具。但請記住，大多數 SQL Server 工作負載（即使是繁忙的 OLTP 工作負載）也接近 80%–90% 的讀取和 10%–20% 的寫入。</block>
  <block id="10fde396dd4a669ec17689dd7cf8b599" category="paragraph">為了展示效能，對使用高級服務等級的捲進行了快速測試。在此測試中，磁碟區大小從 100GB 動態增加到 2TB，而應用程式存取沒有任何中斷，且沒有資料遷移。</block>
  <block id="cdb1bfc9dffd846c49ed67e724856699" category="paragraph"><block ref="cdb1bfc9dffd846c49ed67e724856699" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eedfe317eed7692e9d95ba36177a80e9" category="paragraph">這是使用 HammerDB 對本文所述部署進行即時效能測試的另一個範例。在本次測試中，我們使用了一個具有 8 個 vCPU、500GB Premium SSD 和 500GB SMB Azure NetApp Files區的小型執行個體。  HammerDB 設定了 80 個倉庫和 8 個使用者。</block>
  <block id="c365893719ad3de45f14fa9c19408eca" category="paragraph">下圖顯示，當使用同等大小的磁碟區（500GB）時， Azure NetApp Files每分鐘能夠提供 2.6 倍的交易數量，同時延遲降低 4 倍。</block>
  <block id="d50d666921da97fdc14e35f752474e41" category="paragraph">透過調整為具有 32x vCPU 和 16TB Azure NetApp Files磁碟區的更大實例，執行了額外的測試。每分鐘交易量顯著增加，且延遲始終保持在 1ms。  HammerDB 本次測試配置了 80 個倉庫和 64 個使用者。</block>
  <block id="70cfc78bfe7683e1feb2c3339a190028" category="paragraph"><block ref="70cfc78bfe7683e1feb2c3339a190028" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a39ae09f8be4327fc176cfeb76a0e366" category="section-title">成本最佳化</block>
  <block id="892725223bbd64ebec595545eeaf8c28" category="paragraph">Azure NetApp Files允許無中斷、透明地調整磁碟區大小，並且能夠在零停機時間和不影響應用程式的情況下變更服務等級。這是一項獨特的功能，允許動態成本管理，避免使用峰值指標執行資料庫大小調整。相反，您可以使用穩定狀態工作負載，從而避免前期成本。透過磁碟區重塑和動態服務級別更改，您可以幾乎即時地按需調整Azure NetApp Files磁碟區的頻寬和服務級別，而無需暫停 I/O，同時保留資料存取。</block>
  <block id="44aaafbc17f2a4fcbd6d52e1c8ee0cae" category="paragraph">可以使用 LogicApp 或 Functions 等 Azure PaaS 產品根據特定的 webhook 或警報規則觸發器輕鬆調整磁碟區大小，以滿足工作負載需求，同時動態處理成本。</block>
  <block id="d613d5e1ef7a7f52eed191ef1066a08a" category="paragraph">例如，假設一個資料庫需要 250MBps 才能實現穩定狀態運作；但是，它還需要 400MBps 的峰值吞吐量。在這種情況下，應使用 Premium 服務等級內的 4TB 磁碟區進行部署，以滿足穩定狀態的效能要求。為了處理峰值工作負載，請在特定時間段內使用 Azure 函數將磁碟區大小增加到 7TB，然後縮小磁碟區大小以使部署更具成本效益。此配置避免了儲存的過度配置。</block>
  <block id="a2810b66f557bf43f1c602ecfe7f52b1" category="summary">本文檔介紹利用 Azure 虛擬機器在Azure NetApp Files上即時部署 SQL Server Always On 可用性群組 (AOAG)。</block>
  <block id="0ecccb1d48727b6da357728efe7b6375" category="doc">TR-4897： Azure NetApp Files上的 SQL Server - 真實部署視圖</block>
  <block id="4eae423bbc6520b4a8fa4d0d4de28b8a" category="paragraph">NetApp的 Niyaz Mohamed</block>
  <block id="8ae2b9aab28b6c00df7581f99f9211ef" category="paragraph">IT 組織面臨著不斷的改變。 Gartner 報告稱，到 2022 年，近 75% 的資料庫將需要基於雲端的儲存。作為領先的關聯式資料庫管理系統 (RDBMS)，Microsoft SQL Server 是 Windows 平台設計的應用程式和組織的首選，這些應用程式和組織依賴 SQL Server 進行從企業資源規劃 (ERP) 到分析到內容管理的所有工作。  SQL Server 協助徹底改變了企業管理大量資料集和為其應用程式提供動力以滿足模式和查詢效能需求的方式。</block>
  <block id="eae371fd2d593d80849fab02c4e8b90b" category="paragraph">大多數 IT 組織都遵循雲端優先方法。處於轉型階段的客戶會評估目前的 IT 環境，然後根據評估和發現練習將其資料庫工作負載遷移到雲端。推動客戶進行雲端遷移的一些因素包括彈性/爆發、資料中心退出、資料中心整合、生命週期終止場景、合併、收購等。遷移的原因可能因每個組織及其各自的業務優先順序而異。當遷移到雲端時，選擇正確的雲端儲存對於釋放 SQL Server 資料庫雲端部署的強大功能非常重要。</block>
  <block id="f9468c81b3d59ac0030570c4f58e95f1" category="section-title">用例</block>
  <block id="9f56e1bc4128b7f39fae7796e07859f9" category="paragraph">將 SQL Server 資產遷移到 Azure，並將 SQL Server 與 Azure 的大量平台即服務 (PaaS) 功能（例如 Azure 資料工廠、Azure IoT 中心和 Azure 機器學習）相集成，可以創造巨大的商業價值來支援數位轉型。採用雲端也使相應的業務部門能夠專注於生產力並比依賴 CAPEX 模型或傳統私有雲模型更快地提供新功能和增強功能（DevTest 用例）。本文檔介紹利用 Azure 虛擬機器在Azure NetApp Files上即時部署 SQL Server Always On 可用性群組 (AOAG)。</block>
  <block id="239a02aaaf9289a3093f682835f65f88" category="paragraph">Azure NetApp Files提供具有持續可用檔案共用的企業級儲存。 SMB 檔案共用上的 SQL Server 生產資料庫需要持續可用的共享，以確保節點始終可以存取資料庫存儲，包括在控制器升級或故障等中斷情況下。持續可用的檔案共用消除了在儲存節點之間複製資料的需求。  Azure NetApp Files使用 SMB 3.0 橫向擴展、持久句柄和透明故障轉移來支援計劃內和計劃外停機事件（包括許多管理任務）的無中斷操作 (NDO)。</block>
  <block id="f47a858d79de9725a0d6881541748e9b" category="paragraph">在規劃雲端遷移時，您應該始終評估最佳使用方法。應用程式遷移最常見、最簡單的方法是重新託管（也稱為提升和轉移）。本文檔提供的範例場景採用的是重新託管方法。使用Azure NetApp Files在 Azure 虛擬機器上使用 SQL Server，您可以在雲端中使用完整版本的 SQL Server，而無需管理本機硬體。  SQL Server 虛擬機器 (VM) 還可以簡化您按使用量付費時的授權成本，並為開發、測試和資產刷新場景提供彈性和爆發能力。</block>
  <block id="9b64a6dfae1f3fa326b750c2790c79fe" category="summary">本節介紹使用Azure NetApp Files SMB 磁碟區在 AOAG 配置中即時部署 SQL 資料庫資產。</block>
  <block id="5ca1071c67ab704b04ed27747f213551" category="doc">即時、進階參考設計</block>
  <block id="bb0357d1c0b3b8ebd31a43c9b30f3745" category="list-text">節點數：4</block>
  <block id="7f4f30d96e1d0a820a6962ad6ac994ee" category="list-text">資料庫數量：21</block>
  <block id="f28735e3e5e57049aa575b3f0ec83c61" category="list-text">可用性組數：4</block>
  <block id="96fb94ba9fad0b4452c212b21df61eab" category="list-text">備份保留：7天</block>
  <block id="a8d1485807d36562316fb8b2254bca57" category="list-text">備份存檔：365天</block>
  <block id="4afa49afd4ebc3638f3e000d65825370" category="admonition">使用Azure NetApp Files共用在 Azure 虛擬機器上部署具有 SQL Server 的 FCI 可提供具有單一資料副本的經濟高效的模型。如果檔案路徑與輔助副本不同，此解決方案可防止新增檔案操作問題。</block>
  <block id="57ae06a25f863456d800e1732607d89e" category="paragraph"><block ref="57ae06a25f863456d800e1732607d89e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4822d9597460a9166778308da312709c" category="paragraph">下圖顯示了 AOAG 內分佈在各個節點的資料庫。</block>
  <block id="21b7a4e91464da32af3d983fb61fd5a3" category="paragraph"><block ref="21b7a4e91464da32af3d983fb61fd5a3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d22a890163762fcf7a4cb7605c29b7e6" category="section-title">數據佈局</block>
  <block id="35c33dd0c5565dbdba04dc2b313d7a2e" category="paragraph">使用者資料庫檔案 (.mdf) 和使用者資料庫事務日誌檔案 (.ldf) 以及 tempDB 儲存在同一磁碟區上。服務等級為超級。</block>
  <block id="9b7d6479a15395afefc6d7f9e38a4f17" category="paragraph">此配置由四個節點和四個 AG 組成。所有 21 個資料庫（Dynamic AX、SharePoint、RDS 連接代理程式和索引服務的一部分）都儲存在Azure NetApp Files磁碟區上。  AOAG 節點之間的資料庫是平衡的，以有效地利用節點上的資源。 WSFC中新增了四個D32 v3實例，參與AOAG配置。這四個節點是在 Azure 虛擬網路中配置的，不會從本機遷移。</block>
  <block id="09a10f0ab048cde1d7b704392ba05d9a" category="list-text">如果日誌根據應用程式的性質和執行的查詢需要更多的效能和吞吐量，則可以將資料庫檔案放在 Premium 服務級別，並將日誌儲存在 Ultra 服務級別。</block>
  <block id="51368a236b969e288242f0b0b615cf74" category="list-text">如果 tempdb 檔案已放置在Azure NetApp Files上，則應將Azure NetApp Files磁碟區與使用者資料庫檔案分開。這是 AOAG 中資料庫檔案分佈的範例。</block>
  <block id="2e66f3d288799e6f4235b883bb2f693c" category="list-text">為了保留基於 Snapshot 副本的資料保護的優勢， NetApp建議不要將資料和日誌資料合併到同一個磁碟區。</block>
  <block id="1452bcdb4aeb229a2c2e503f9bbba753" category="list-text">如果輔助資料庫的檔案路徑與對應主資料庫的路徑不同，則在主副本上執行的新增檔案操作可能會在輔助資料庫上失敗。如果主節點和輔助節點上的共用路徑不同（由於電腦帳戶不同），則可能會發生這種情況。此故障可能會導致輔助資料庫暫停。如果無法預測成長或效能模式，並且計劃稍後新增文件，則使用Azure NetApp Files 的SQL Server 故障轉移叢集是一種可接受的解決方案。對於大多數部署， Azure NetApp Files滿足效能要求。</block>
  <block id="19f59b74448f6a27519db281a44e4b12" category="section-title">遷移</block>
  <block id="cd6b4503e07d15cebc0842bb8da7b765" category="paragraph">有多種方法可以將本機 SQL Server 使用者資料庫遷移到 Azure 虛擬機器中的 SQL Server。遷移可以是線上的，也可以是離線的。所選的選項取決於 SQL Server 版本、業務需求以及組織內定義的 SLA。為了最大限度地減少資料庫遷移過程中的停機時間， NetApp建議使用 AlwaysOn 選項或交易複製選項。如果無法使用這些方法，您可以手動遷移資料庫。</block>
  <block id="2d4221f1ee93c102ca047daac1fba4a7" category="paragraph">跨機器移動資料庫的最簡單且經過最徹底測試的方法是備份和還原。通常，您可以從資料庫備份開始，然後將資料庫備份複製到 Azure。然後您可以還原資料庫。為了獲得最佳資料傳輸效能，請使用壓縮備份檔案將資料庫檔案移轉到 Azure VM。本文檔中引用的高級設計使用 Azure 檔案同步備份方法將檔案儲存備份到 Azure 文件存儲，然後還原到 Azure NetApp檔案。</block>
  <block id="623f8382f97ee8df2d7af54439833812" category="admonition">Azure Migrate 可用於發現、評估和遷移 SQL Server 工作負載。</block>
  <block id="fbc25f1c70f1a9c133715cac6d66b21b" category="paragraph">若要執行遷移，請完成以下進階步驟：</block>
  <block id="d807caa187d2fea33bab50ed1e1c79bb" category="list-text">根據您的要求，設定連接。</block>
  <block id="59f59f1aebe4fc18ab054480b3a1098a" category="list-text">將完整資料庫備份到本機檔案共用位置。</block>
  <block id="4891d727582d5df766ee6737fe7fb761" category="list-text">使用 Azure 檔案同步將備份檔案複製到 Azure 檔案共用。</block>
  <block id="135899cc34886eb6ce9baf7211d4adb5" category="list-text">使用所需版本的 SQL Server 設定 VM。</block>
  <block id="fbef0b11b7ee9e0d709d3d1c6efbd4d4" category="list-text">使用<block ref="12cba3ee81cf4a793796a51b6327c678" prefix=" " category="inline-code"></block>從命令提示字元輸入命令。</block>
  <block id="b9786aca69df61c5165147929b4ced89" category="list-text">將完整資料庫還原到 Azure 虛擬機器上的 SQL Server。</block>
  <block id="e937691d64dcb1188cbbcbcd83d87d2f" category="admonition">恢復 21 個資料庫大約需要九個小時。這種方法是針對這種情況的。但是，您可以根據您的情況和要求使用下面列出的其他遷移技術。</block>
  <block id="2b9d85faa379ef985ae3851810db1403" category="paragraph">將資料從本機 SQL Server 移至Azure NetApp Files 的其他移轉選項包括：</block>
  <block id="90248308f9c24bd3bf817ee129838603" category="list-text">分離資料和日誌文件，將它們複製到 Azure Blob 存儲，然後透過從 URL 掛載的 ANF 檔案共用將它們附加到 Azure VM 中的 SQL Server。</block>
  <block id="82ce70205698ed956d1fce48af1360c0" category="inline-link">新增 Azure 副本精靈</block>
  <block id="e5e07f1ff84f0082089e4fec71ed43a4" category="list-text">如果您在本機上使用 Always On 可用性群組部署，請使用<block ref="aea558e3371e9956f5e03828309464a0" category="inline-link-rx"></block>在 Azure 中建立副本，然後執行故障轉移。</block>
  <block id="eedc53c13a9992999dba36bda1b62255" category="inline-link">事務複製</block>
  <block id="47a43d904457c52da2918f290a0ae5cb" category="list-text">使用 SQL Server<block ref="21bf5f41b40b598aae9dd55aa9dcb960" category="inline-link-rx"></block>將 Azure SQL Server 執行個體配置為訂閱者，停用複製，並將使用者指向 Azure 資料庫執行個體。</block>
  <block id="bf4614882fd1000329cfcb76f98f6c17" category="list-text">使用 Windows 匯入/匯出服務運送硬碟。</block>
  <block id="be062cdcabbb3055334e8f19b4bdf378" category="section-title">備份和復原</block>
  <block id="b855582b6472c4fbe2a5f606191e66d6" category="paragraph">備份和還原是任何 SQL Server 部署的重要方面。必須擁有適當的安全網，以便與 AOAG 等高可用性解決方案結合，從各種資料故障和遺失情況中快速恢復。  SQL Server 資料庫靜默工具、Azure Backup（串流備份）或任何第三方備份工具（例如 Commvault）均可用於執行資料庫的應用程式一致性備份，</block>
  <block id="3896e1102f68b0bc974f324bb134f6e6" category="inline-link">SCSQLAPI 工具</block>
  <block id="e372173044ccba12657b2e3dbff1879b" category="paragraph">Azure NetApp Files Snapshot 技術可讓您輕鬆建立使用者資料庫的時間點 (PiT) 副本，而不會影響效能或網路使用率。該技術還允許您將 Snapshot 副本還原到新卷，或使用恢復卷功能將受影響的捲快速恢復到創建該 Snapshot 副本時的狀態。 Azure NetApp Files快照流程非常快速且有效率，允許進行多次每日備份，這與 Azure 備份提供的串流備份不同。由於一天內可以有多個 Snapshot 副本，因此可以顯著減少 RPO 和 RTO 時間。若要新增應用程式一致性，以便在建立 Snapshot 副本之前資料完整且正確刷新到磁碟，請使用 SQL Server 資料庫靜默工具<block ref="b800e9e09a17fc5b41967404ec8e47ac" category="inline-link-rx"></block>;訪問此連結需要NetApp SSO 登入憑證）。該工具可以從 PowerShell 執行，它會使 SQL Server 資料庫靜止，進而可以取得應用程式一致的儲存快照副本進行備份。</block>
  <block id="04666a337d02195d17089298f5773f4c" category="paragraph">*備註：*</block>
  <block id="a4d5ac6087b7ce119cfe6b7ad4d77ee5" category="list-text">SCSQLAPI 工具僅支援 SQL Server 2016 和 2017 版本。</block>
  <block id="fdcb10d4c2db07cf930247a4f9898ec5" category="list-text">SCSQLAPI 工具一次只能與一個資料庫一起使用。</block>
  <block id="2f65ae42dc3aa8b735406a2d56ceb6fb" category="list-text">將檔案放置在單獨的Azure NetApp Files磁碟區上，以隔離每個資料庫中的檔案。</block>
  <block id="879351e17b2cd6d740ac0974e9ff8a5a" category="inline-link">Azure 備份</block>
  <block id="42624b4153bfacce50a468208ab49349" category="paragraph">由於 SCSQL API 的巨大限制，<block ref="10a72c6743c3c6714e03b5537ec15603" category="inline-link-rx"></block>用於資料保護以滿足 SLA 要求。它提供了在 Azure 虛擬機器和Azure NetApp Files中執行的 SQL Server 的基於流的備份。  Azure Backup 允許 15 分鐘的 RPO，並進行頻繁的日誌備份和最多一秒鐘的 PiT 復原。</block>
  <block id="423e555c5ec3885f2bb5d9d2d6627f63" category="section-title">監控</block>
  <block id="fe58430a0bb00057a08eed382c5d82b2" category="paragraph">Azure NetApp Files與 Azure Monitor 整合以取得時間序列數據，並提供有關分配儲存、實際儲存使用情況、磁碟區 IOPS、吞吐量、磁碟讀取位元組數/秒、磁碟寫入位元組數/秒、磁碟讀取數/秒和磁碟寫入數/秒以及相關延遲的指標。這些資料可用於識別警報瓶頸並執行健康檢查以驗證您的 SQL Server 部署是否在最佳配置中執行。</block>
  <block id="48419e90c914ae5fa935283404de8a2a" category="paragraph">在此 HLD 中，ScienceLogic 用於透過使用適當的服務主體公開指標來監視Azure NetApp Files。下圖是Azure NetApp Files指標選項的範例。</block>
  <block id="6d7cc59a6cbd8c3a31c58dcc9e31e2f6" category="paragraph"><block ref="6d7cc59a6cbd8c3a31c58dcc9e31e2f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6fe292df6373534e554d5a7938bc3c3b" category="section-title">使用厚克隆的開發測試</block>
  <block id="652f67778e6d02c7b5bfe46a3e579f7f" category="paragraph">使用Azure NetApp Files，您可以建立資料庫的即時副本，以便在應用程式開發週期中測試應使用目前資料庫結構和內容實現的功能，在填充資料倉儲時使用資料提取和操作工具，甚至恢復被錯誤刪除或更改的資料。此過程不涉及從 Azure Blob 容器複製數據，因此非常有效率。卷恢復後，可用於讀取/寫入操作，從而大幅減少驗證和上市時間。這需要與 SCSQLAPI 結合使用以確保應用程式的一致性。這種方法提供了另一種持續成本最佳化技術，同時Azure NetApp Files利用了「還原到新磁碟區」選項。</block>
  <block id="e4665dd99280634e4b44ff82666fbb9f" category="list-text">使用「還原新磁碟區」選項從 Snapshot 副本建立的磁碟區將消耗容量池中的容量。</block>
  <block id="0031911d8ba66a79d06b9819afd4f082" category="list-text">您可以使用 REST 或 Azure CLI 刪除複製的捲，以避免額外的費用（以防必須增加容量池）。</block>
  <block id="cb4d46fdcb0881652013c495d90ae732" category="section-title">混合式儲存選項</block>
  <block id="e6a1767911a937e11cc1750fcc4256c3" category="paragraph">儘管NetApp建議對 SQL Server 可用性群組中的所有節點使用相同的存儲，但在某些情況下可以使用多個儲存選項。對於Azure NetApp Files來說，這種情況是可能的，其中 AOAG 中的一個節點與Azure NetApp Files SMB 檔案共享相連，而第二個節點與 Azure Premium 磁碟相連。在這些情況下，請確保Azure NetApp Files SMB 共用儲存使用者資料庫的主副本，並且進階磁碟用作輔助副本。</block>
  <block id="009d3d51226fdccd09052934b65100db" category="list-text">在這樣的部署中，為避免任何故障轉移問題，請確保在 SMB 磁碟區上啟用持續可用性。由於沒有持續可用的屬性，如果儲存層有任何後台維護，資料庫可能會發生故障。</block>
  <block id="918e9d895272e6a326c6585e05ae4c08" category="list-text">將資料庫的主副本保留在Azure NetApp Files SMB 檔案共用上。</block>
  <block id="1a5c3601eda1cd38072323e418968743" category="section-title">永續經營</block>
  <block id="064ea84d2e6072b28bfd7a8b36aed3db" category="paragraph">在任何部署中，災難復原通常都是事後才考慮的事情。但是，必須在初始設計和部署階段解決災難復原問題，以避免對您的業務產生任何影響。透過Azure NetApp Files，可以使用跨區域複製 (CRR) 功能將區塊層級的磁碟區資料複製到配對區域，以處理任何意外的區域中斷。啟用 CRR 的目標磁碟區可用於讀取操作，這使其成為災難復原模擬的理想候選者。此外，可以為 CRR 目的地分配最低服務等級（例如標準），以降低整體 TCO。如果發生故障轉移，複製可能會中斷，導致對應的磁碟區無法進行讀取/寫入。此外，可以使用動態服務級別功能來變更磁碟區的服務級別，以顯著降低災難復原成本。這是Azure NetApp Files的另一個獨特功能，具有 Azure 內的區塊複製功能。</block>
  <block id="86258094262f66b30d10068d1d9c29d4" category="section-title">長期 Snapshot 副本存檔</block>
  <block id="65bd92a3b5fcfea7efeb973a0a2483d8" category="inline-link">AzCopy</block>
  <block id="e6bf440e9e7e787ce92e6f8661daf9e9" category="paragraph">許多組織必須執行資料庫文件中快照資料的長期保留，這是強制性合規要求。雖然此 HLD 中未使用此過程，但可以使用簡單的批次腳本輕鬆完成此過程<block ref="f326c7b047cd071718d141dba06c550f" category="inline-link-rx"></block>將快照目錄複製到 Azure Blob 容器。可以使用計劃任務根據特定的計劃觸發批次腳本。過程很簡單 - 它包括以下步驟：</block>
  <block id="dfdc6514d824f948d82ee2ac6515603f" category="list-text">下載 AzCopy V10 執行檔。無需安裝，因為它是<block ref="98e83379d45538379c2ac4e47c3be81d" prefix=" " category="inline-code"></block>文件。</block>
  <block id="5434519f37049a19d388fb3edabd08f7" category="list-text">使用具有適當權限的容器等級 SAS 令牌授權 AzCopy。</block>
  <block id="73facdc1e77927e1c0d4c2f66c6fedf9" category="list-text">在 AzCopy 獲得授權後，資料傳輸就開始了。</block>
  <block id="a2c31034ac77c6ad0ce6dae2a7882d73" category="list-text">在批次檔中，確保轉義 SAS 令牌中出現的 % 字元。這可以透過在 SAS 令牌字串中現有的 % 字元旁邊添加額外的 % 字元來實現。</block>
  <block id="0eed577952fd376af1fa48aa241e3df7" category="inline-link">需要安全傳輸</block>
  <block id="b2f731ca364e7df30cd69650bdc19d46" category="list-text">這<block ref="7e9be5c7f255e20f7f3a81046108dcad" category="inline-link-rx"></block>儲存帳戶的設定決定了與儲存帳戶的連線是否透過傳輸層安全性 (TLS) 進行保護。預設情況下啟用此設定。以下批次腳本範例以遞歸方式將資料從 Snapshot 複製目錄複製到指定的 Blob 容器：</block>
  <block id="f2c225fb316953652d9040f71e76717c" category="paragraph">在 PowerShell 中執行下列範例 cmd：</block>
  <block id="e7cc24e4ddff469c6304653aea869597" category="list-text">Azure NetApp Files中即將推出類似的長期保留備份功能。</block>
  <block id="03930ecbc2c505278298d571631e23bb" category="list-text">批次腳本可用於任何需要將資料複製到任何區域的 Blob 容器的場景。</block>
  <block id="07ecdeff0f5a70968e882eb4ace6f576" category="paragraph">透過對資料庫完全透明的磁碟區重塑和動態服務等級變化， Azure NetApp Files可以在 Azure 中持續優化成本。此功能在本 HLD 中廣泛使用，以避免過度配置額外的儲存空間來處理工作負載高峰。</block>
  <block id="bf511e8b678dd2ecee162930e6c8c9e6" category="paragraph">透過建立 Azure 函數並結合 Azure 警報日誌，可以輕鬆調整磁碟區大小。</block>
  <block id="10c7c6ec856268da9f1d2ab6ec5b0984" category="doc">TR-4951：AWS FSx ONTAP上的 Microsoft SQL Server 備份與還原</block>
  <block id="9475e5d5cafea2648e51c312bfc7f923" category="paragraph">本文檔介紹使用SnapCenter在 AWS FSx ONTAP上執行 Microsoft SQL Server 備份和復原所需的步驟。其中包括以下資訊：</block>
  <block id="5bf8a1308ebd487796bd4db12222cf4a" category="list-text">NetApp SnapCenter配置</block>
  <block id="ecc57313124902e4c42227ae61bb9bf1" category="list-text">SnapCenter備份作業</block>
  <block id="d939d79ed61dbf23169c4f7badcc1788" category="list-text">FCI 資料庫的備份作業</block>
  <block id="cb9f91cd2f1ab77ae604d05be34c3d59" category="list-text">多個資料庫的備份操作</block>
  <block id="6be8f3086a30e59e908d53eb620b51dd" category="list-text">還原和復原</block>
  <block id="9fa83b367c23a5d2579b5aebdddebe77" category="section-title">SnapCenter配置</block>
  <block id="f979bf3f98ebe58fd55555efea856e3f" category="paragraph">必須執行下列步驟來設定SnapCenter並保護 Microsoft SQL Server 資源。以下各節詳細介紹了以下每個步驟。</block>
  <block id="7c1e7491c7e3588e56a0b05940cc2840" category="list-text">為 SQL Server 備份和還原使用者設定 sysadmin 憑證。</block>
  <block id="d1347363827a6b0b3093b67bbcdb32a9" category="list-text">配置儲存設定。提供 Amazon Web Services (AWS) 管理憑證以從SnapCenter存取Amazon FSx ONTAP儲存虛擬機器 (SVM)。</block>
  <block id="bf1e7185f6bb09e0f2b1527acbbb47df" category="list-text">為SnapCenter新增 SQL Server 主機。部署並安裝所需的SnapCenter插件。</block>
  <block id="1e5b163165e28d2c04a5c2cc25406fa0" category="list-text">配置策略。定義備份作業類型、保留和可選的快照備份複製。</block>
  <block id="7839511c8247bb78354925ce2771284a" category="list-text">設定和保護 Microsoft SQL Server 資料庫。</block>
  <block id="1719e3b1afdebd05d1f71b0881a7083c" category="section-title">SnapCenter新安裝的使用者介面</block>
  <block id="97504cb249856d98431bd413caeb43ce" category="paragraph">設定 SQL Server 備份的憑證並使用 sysadmin 權限還原使用者。</block>
  <block id="263157e38dd7adcf4beb5c0dee14e013" category="paragraph"><block ref="263157e38dd7adcf4beb5c0dee14e013" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a8b4eaab7153d620e4be3372cee492d" category="paragraph">NetApp建議使用基於角色的存取控制 (RBAC) 將資料保護和管理功能委託給SnapCenter和視窗主機上的各個使用者。使用者必須具有存取託管資料庫的 SQL Server 的權限。對於多個主機，使用者名稱和密碼在各個主機之間必須相同。此外，為了讓SnapCenter能夠在 SQL Server 主機上部署所需的插件，您必須註冊SnapCenter的網域資訊以驗證您的憑證和主機。</block>
  <block id="2f5eb1bcad8467d8b1a3a761e7a52e7c" category="paragraph">展開以下部分以查看有關如何完成每個步驟的詳細說明。</block>
  <block id="36bc52aaebad43ec3e49ed9a0efacd43" category="example-title">新增憑證</block>
  <block id="994e670ad871a1a1a8968ef47fce1bd2" category="paragraph">前往*設定*，選擇*憑證*，然後按一下(*+*)。</block>
  <block id="bb598d076da46530ceab0455eb9e5aeb" category="paragraph"><block ref="bb598d076da46530ceab0455eb9e5aeb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ef34a5260859bfffb6bf580955ffb1e" category="paragraph">新使用者必須擁有 SQL Server 主機的管理員權限。</block>
  <block id="42f53fba169caa3a3b234900730492d9" category="paragraph"><block ref="42f53fba169caa3a3b234900730492d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d25223f4065ca21361aff2e7cdc61203" category="example-title">配置儲存</block>
  <block id="8d4520cc707d4607fe5abe132aecdbf2" category="paragraph">若要在SnapCenter中配置存儲，請完成以下步驟：</block>
  <block id="17b1ba0b70ebf5f6fcfd2f39e760ac1c" category="list-text">在SnapCenter UI 中，選擇「儲存系統」。有兩種儲存類型，* ONTAP SVM* 和 * ONTAP Cluster*。預設情況下，儲存類型為* ONTAP SVM*。</block>
  <block id="84bf89b0b19fc811dad7c11f9b65802e" category="list-text">按一下(*+*)新增儲存系統資訊。</block>
  <block id="01c53e6bfe960953b32c98f2112f4303" category="paragraph"><block ref="01c53e6bfe960953b32c98f2112f4303" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39de8a13e32575a801c8634fd2877ed4" category="list-text">提供*FSx ONTAP管理*端點。</block>
  <block id="204b3ab666a5f3f968f405e95b493f8d" category="paragraph"><block ref="204b3ab666a5f3f968f405e95b493f8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c99ac5cbe66f4968da17288cff14037" category="list-text">SVM 現已在SnapCenter中配置。</block>
  <block id="8d09c4e9d4c1ccd04e9cec2a690d3659" category="paragraph"><block ref="8d09c4e9d4c1ccd04e9cec2a690d3659" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f4cf5450244ae3361ec7b130b139860" category="example-title">為SnapCenter新增 SQL Server 主機</block>
  <block id="865ea603dd93a3a23cc7e80825b29624" category="paragraph">若要新增 SQL Server 主機，請完成下列步驟：</block>
  <block id="e14bea01dc3a10ca47f216a08f68fa85" category="list-text">在「主機」標籤中，按一下 (*+*) 新增 Microsoft SQL Server 主機。</block>
  <block id="eb34c39c9e120bad581790275c4322c7" category="paragraph"><block ref="eb34c39c9e120bad581790275c4322c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0c802780a0f54f5e4f22e25de9fa33be" category="list-text">提供遠端主機的完全限定網域名稱 (FQDN) 或 IP 位址。</block>
  <block id="fb62a23910339f3168b6b89b4e0f77b7" category="admonition">憑證是預設填入的。</block>
  <block id="65d9345f77faaa3bf7bb8031bb92f814" category="list-text">選擇 Microsoft Windows 和 Microsoft SQL Server 選項，然後提交。</block>
  <block id="52f7eb9a848ae3c77eafc593b9260933" category="paragraph"><block ref="52f7eb9a848ae3c77eafc593b9260933" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53b2d796e625fe393f84e48a5c6c6e91" category="paragraph">SQL Server 套件已安裝。</block>
  <block id="a106f82ac7656050cac2b5d549ddd343" category="paragraph"><block ref="a106f82ac7656050cac2b5d549ddd343" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fa703bd342022eaf92b76d3d4db62f6a" category="list-text">安裝完成後，請前往*資源*標籤以驗證所有 FSx ONTAP iSCSI 磁碟區是否存在。</block>
  <block id="b08c837e26a420a6727340a737a4380f" category="paragraph"><block ref="b08c837e26a420a6727340a737a4380f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b83af25a71030e8f59b11202c70c1a4" category="example-title">配置日誌目錄</block>
  <block id="144931b7282f9d86fce2e97aa69aa046" category="paragraph">若要設定主機日誌目錄，請完成下列步驟：</block>
  <block id="089f0c00b86bab7c6ce3e455e39b4111" category="list-text">按一下複選框。將開啟一個新分頁。</block>
  <block id="fc6a6d00b6b99448daebdb2df18a2b14" category="paragraph"><block ref="fc6a6d00b6b99448daebdb2df18a2b14" category="inline-image-macro-rx" type="image"></block></block>
  <block id="57fab4c72318fea3bba8b3c321098ab3" category="list-text">按一下*配置日誌目錄*連結。</block>
  <block id="eb1e0c7702c213472e776e0cc7f8fe6c" category="paragraph"><block ref="eb1e0c7702c213472e776e0cc7f8fe6c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1b06cca5c441f86e0c4ad342dc4949c5" category="list-text">選擇主機日誌目錄和 FCI 實例日誌目錄的磁碟機。點選“儲存”。對叢集中的第二個節點重複相同的過程。關閉視窗。</block>
  <block id="e90ddc4c1a3fa19f8dcadf397bb82c11" category="paragraph"><block ref="e90ddc4c1a3fa19f8dcadf397bb82c11" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c36dc3499eaa7955922477da928c37d" category="paragraph">主機現在處於運作狀態。</block>
  <block id="27374f4db81a1bef38942d3105168251" category="paragraph"><block ref="27374f4db81a1bef38942d3105168251" category="inline-image-macro-rx" type="image"></block></block>
  <block id="21ff17f2a463836d33f1c25b922e2aad" category="list-text">從「*資源*」標籤中，我們可以看到所有的伺服器和資料庫。</block>
  <block id="5d9cc78a1b0cedb3a2e519e4787e2a06" category="paragraph"><block ref="5d9cc78a1b0cedb3a2e519e4787e2a06" category="inline-image-macro-rx" type="image"></block></block>
  <block id="43e2457547c492c6001e30b828b6540e" category="section-title">配置備份策略</block>
  <block id="94cf5b65d5289e46a9a0d12fe6877c2e" category="paragraph">備份策略是一組控制如何管理、排程和保留備份的規則。它有助於根據您公司的 SLA 確定備份類型和頻率。</block>
  <block id="e28ebacaa4299d5022a9ce52d607c076" category="example-title">配置 FCI 資料庫的備份操作</block>
  <block id="41cc72961a6c592ec36223498c3bd705" category="paragraph">若要為 FCI 資料庫設定備份策略，請完成下列步驟：</block>
  <block id="55e9263abc7e93fbc1274424af911693" category="list-text">前往*設定*並選擇左上角的*策略*。然後點選“*新建*”。</block>
  <block id="5ac78e084848f8cc247d598e005c6aa3" category="paragraph"><block ref="5ac78e084848f8cc247d598e005c6aa3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="00f0ce22eac68a6bd05a1b0f221c4870" category="list-text">輸入策略名稱和描述。按一下“下一步”。</block>
  <block id="84bdfd949bee67cde6dc8e250fb3020b" category="paragraph"><block ref="84bdfd949bee67cde6dc8e250fb3020b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="55efa7fad4afc963d783654da41300bf" category="list-text">選擇*完整備份*作為備份類型。</block>
  <block id="3dd8f9fd3739a14391fbf8713681641c" category="paragraph"><block ref="3dd8f9fd3739a14391fbf8713681641c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8270c99b48ebbc3928233b0365c4aeef" category="list-text">選擇計劃頻率（基於公司 SLA）。按一下“下一步”。</block>
  <block id="e28272da203be603a1dd273b52ce1c5e" category="paragraph"><block ref="e28272da203be603a1dd273b52ce1c5e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="de3ec07218c2ba18d85a3130b6583520" category="list-text">配置備份的保留設定。</block>
  <block id="5fd5e3f756e16e4180b5af92cbf86888" category="paragraph"><block ref="5fd5e3f756e16e4180b5af92cbf86888" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e0b22898b3d80ad22f4aec2ecdb63d6" category="list-text">配置複製選項。</block>
  <block id="6a573546d6190e33fbdfe33ab4f7f0b4" category="paragraph"><block ref="6a573546d6190e33fbdfe33ab4f7f0b4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="44ea4d24c42b8fec22a7b9816f31e892" category="list-text">指定在備份作業運行之前和之後運行的運行腳本（如果有）。</block>
  <block id="73ace21d48efbf10f11c02963b1a74ff" category="paragraph"><block ref="73ace21d48efbf10f11c02963b1a74ff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b94cb3e0f4abcd010f6711fe214e35a" category="list-text">根據備份計劃運行驗證。</block>
  <block id="0f2ec527580ab66098ac0b9adb617223" category="paragraph"><block ref="0f2ec527580ab66098ac0b9adb617223" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cbfa414efc5d445675fd9077ba0c56b3" category="list-text">*摘要*頁面提供了備份策略的詳細資訊。任何錯誤都可以在這裡糾正。</block>
  <block id="b5c2e63df47024e1834717c54e4ac3de" category="paragraph"><block ref="b5c2e63df47024e1834717c54e4ac3de" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8e93df919756b105bc83306d032d098" category="section-title">配置和保護 MSSQL Server 資料庫</block>
  <block id="27db30e5a59f8be2fcb99cf63599a91c" category="list-text">設定備份策略的開始日期和到期日期。</block>
  <block id="442ee14e356889b8eaf0873dc785e1c2" category="paragraph"><block ref="442ee14e356889b8eaf0873dc785e1c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3d9d87e495dd4aa1d5bb3efb45285b5" category="list-text">定義備份計畫。為此，請按一下 (*+*) 來配置時間表。輸入*開始日期*和*到期日*。根據公司的 SLA 設定時間。</block>
  <block id="8b05c4f43dde3e690e016b6f5239120e" category="paragraph"><block ref="8b05c4f43dde3e690e016b6f5239120e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cae5bd999deab910421c886467a77f95" category="list-text">配置驗證伺服器。從下拉式選單中選擇伺服器。</block>
  <block id="12689d035facad15cdb7e7df19bd89bf" category="paragraph"><block ref="12689d035facad15cdb7e7df19bd89bf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eafe5ed3ae193bf0df0699f63047967c" category="list-text">點選加號並確認，確認配置的計畫。</block>
  <block id="acbb9c633debb26a3e087f175b289654" category="list-text">提供電子郵件通知的資訊。按一下“下一步”。</block>
  <block id="8ad07a45acf6df5688f612da010273b1" category="paragraph"><block ref="8ad07a45acf6df5688f612da010273b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12c3e31e09364bc821b8b38bfe3fa90b" category="paragraph">現已配置 SQL Server 資料庫的備份策略摘要。</block>
  <block id="108006178f32b6a576ff38219992ee68" category="paragraph"><block ref="108006178f32b6a576ff38219992ee68" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f93a0490c2398c42ac8bc4c8027da25b" category="paragraph">若要建立按需 SQL Server 備份，請完成下列步驟：</block>
  <block id="a27b159fa260ee860202b1a37efb3a24" category="list-text">從*資源*視圖中，選擇資源並選擇*立即備份*。</block>
  <block id="d2a9c6f627387a3566dcb315138dde3a" category="paragraph"><block ref="d2a9c6f627387a3566dcb315138dde3a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8ebbd547f5d127b496961a116deba1b" category="list-text">在「*備份*」對話方塊中，按一下「*備份*」。</block>
  <block id="23a7cca160f90b2f02daf16ec91e7237" category="paragraph"><block ref="23a7cca160f90b2f02daf16ec91e7237" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28a70f29b174bb67f6ba18c34afe8917" category="list-text">顯示確認畫面。按一下“是”確認。</block>
  <block id="3d920ea8dfaeed2ed58312c989260f7d" category="paragraph"><block ref="3d920ea8dfaeed2ed58312c989260f7d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f8452076484ec284c5858e0a7826acc" category="section-title">監視備份作業</block>
  <block id="3c171063c0a7e42fe17578dc53e1a362" category="list-text">從「*監控*」標籤中，按一下該作業並選擇右側的「*詳細資料*」以查看該作業。</block>
  <block id="099a696fea151fff4c695aa6b071d682" category="paragraph"><block ref="099a696fea151fff4c695aa6b071d682" category="inline-image-macro-rx" type="image"></block></block>
  <block id="511527506a41d2cc7e67f90f10a3495a" category="paragraph"><block ref="511527506a41d2cc7e67f90f10a3495a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="187d97d7f4855a2e10ce27f378db96dd" category="paragraph">備份完成後，拓樸視圖中會顯示一個新條目。</block>
  <block id="134678acd20d853075ff197c7c9c3fcb" category="paragraph">若要為多個 SQL Server 資料庫設定備份策略，請透過完成下列步驟建立資源群組原則：</block>
  <block id="95fea20057274bffe889a463c6617053" category="list-text">在「檢視」功能表的「資源」標籤中，使用下拉式選單變更為資源組。</block>
  <block id="f15062590bac57cd4dded3874b730987" category="paragraph"><block ref="f15062590bac57cd4dded3874b730987" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d30ce7f1b8370331622f388e31ba9fd" category="list-text">按一下 (*+*) 可取得新的資源群組。</block>
  <block id="83b181472f97e7d6567d03936a4d2ced" category="paragraph"><block ref="83b181472f97e7d6567d03936a4d2ced" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2267ba30d8bc4b2cb24be81ba224b9a0" category="list-text">提供名稱和標籤。按一下“下一步”。</block>
  <block id="4bbe72b07989da20083f75b872a28c45" category="paragraph"><block ref="4bbe72b07989da20083f75b872a28c45" category="inline-image-macro-rx" type="image"></block></block>
  <block id="71128d86107d5d3be141764b52ec6e0a" category="list-text">將資源新增至資源組：</block>
  <block id="6938eb21ffd3468679899baee35fc02c" category="list-text">*主持人。 *從下拉式選單中選擇託管資料庫的伺服器。</block>
  <block id="d9cab3ec910c4d091f194a6fbe1ce649" category="list-text">資源類型。從下拉式選單中選擇*資料庫*。</block>
  <block id="9d00adb9ff02c740bad1655a08befbc8" category="list-text">SQL Server 執行個體。選擇伺服器。</block>
  <block id="730521facc86f5fabeda23f81b0ab36e" category="paragraph"><block ref="730521facc86f5fabeda23f81b0ab36e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52cbd1487d8eb5aca62ae227f26154cd" category="paragraph">預設情況下，選擇“自動從相同儲存磁碟區中選擇所有資源”*選項。清除該選項並僅選擇需要新增至資源組的資料庫，按一下箭頭新增並按一下*下一步*。</block>
  <block id="84c0abbddafd973fe73dd69e371ab4a3" category="paragraph"><block ref="84c0abbddafd973fe73dd69e371ab4a3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4bc914d30c298d5a1be5b17d60f91d32" category="list-text">在策略上，按一下 (*+*)。</block>
  <block id="243d78b6ea4fe741a4fa412198d80066" category="paragraph"><block ref="243d78b6ea4fe741a4fa412198d80066" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0503c62843919fd6d77d98333ddc0d46" category="list-text">輸入資源組策略名稱。</block>
  <block id="05b0fe9e56c5bea5ac8ce431cced917e" category="paragraph"><block ref="05b0fe9e56c5bea5ac8ce431cced917e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9260e8aa74e4c11f287ba40caa35f0b0" category="list-text">根據您公司的 SLA 選擇*完整備份*和計劃頻率。</block>
  <block id="f6c2be1530adb5a66375b1dc7d598e9c" category="paragraph"><block ref="f6c2be1530adb5a66375b1dc7d598e9c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c3d3f39805e6cab1e0c8e41e3a8045d4" category="list-text">配置保留設定。</block>
  <block id="de6d5dc1aecdbb902a87862a50b9266b" category="paragraph"><block ref="de6d5dc1aecdbb902a87862a50b9266b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="78cef2d99db22d070900dbed35c15a2c" category="paragraph"><block ref="78cef2d99db22d070900dbed35c15a2c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b438cf4e498dc0e4f65b8cf167949153" category="list-text">配置在執行備份之前執行的腳本。按一下“下一步”。</block>
  <block id="ff1cf37034cd8ef253625b45e35051ca" category="paragraph"><block ref="ff1cf37034cd8ef253625b45e35051ca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6504e635a92d1b0a8c52749c309ce7f6" category="list-text">確認以下備份計畫的驗證。</block>
  <block id="f2eb367ca50e721b000dca52f3b250df" category="paragraph"><block ref="f2eb367ca50e721b000dca52f3b250df" category="inline-image-macro-rx" type="image"></block></block>
  <block id="06919ef230a779cfc26a7b40e58c155f" category="list-text">在「*摘要*」頁面上，驗證訊息，然後按一下「*完成*」。</block>
  <block id="c56dfb24cbd84ab2aa638beedfc903df" category="paragraph"><block ref="c56dfb24cbd84ab2aa638beedfc903df" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03db038251d30409b163cac10e15fb64" category="section-title">設定並保護多個 SQL Server 資料庫</block>
  <block id="60d1f006544fc2635c785f35a2bb75fa" category="list-text">按一下 (*+*) 符號以配置開始日期和到期日期。</block>
  <block id="8670dcc752ab05514268acf8a4031067" category="paragraph"><block ref="8670dcc752ab05514268acf8a4031067" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1709dfd12096305753ee7705ead06515" category="list-text">設定時間。</block>
  <block id="098a44366312b953a5d068f9c9829977" category="paragraph"><block ref="098a44366312b953a5d068f9c9829977" category="inline-image-macro-rx" type="image"></block></block>
  <block id="37809c83f3a7be241f15b815b21c4d98" category="paragraph"><block ref="37809c83f3a7be241f15b815b21c4d98" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d1dc4c7af7fe0f51e864695931afcc5d" category="list-text">從「*驗證*」標籤中，選擇伺服器，配置計劃，然後按一下「*下一步*」。</block>
  <block id="28107504bea3914bf67b28e84c3755c5" category="paragraph"><block ref="28107504bea3914bf67b28e84c3755c5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b91c4ea39a59e7c5891197a3b275c62c" category="list-text">配置通知以傳送電子郵件。</block>
  <block id="b805dff566d3335d804bb465bcc8b48a" category="paragraph"><block ref="b805dff566d3335d804bb465bcc8b48a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="017b37b38c310ea0d90dccec6f86d049" category="paragraph">該策略現已配置為備份多個 SQL Server 資料庫。</block>
  <block id="65edb050e309b32337d026f505eb050b" category="paragraph"><block ref="65edb050e309b32337d026f505eb050b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="86b13e5f17a2bd60ebf403962a656abb" category="section-title">觸發多個 SQL Server 資料庫的按需備份</block>
  <block id="f7dde35cb7209b4eae92eb8ec9dbe3ea" category="list-text">從“*資源*”標籤中，選擇視圖。從下拉式選單中選擇“*資源組*”。</block>
  <block id="2c19763796ab45144962d697bf000ff5" category="paragraph"><block ref="2c19763796ab45144962d697bf000ff5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fdbf213e9f1bcad7fef14029eb9b537b" category="list-text">選擇資源組名稱。</block>
  <block id="1ac4dec59e8f8197fb29b8bfa0237d91" category="list-text">點選右上角的*立即備份*。</block>
  <block id="1cdf32c91297cf992cc0fd241e17148b" category="paragraph"><block ref="1cdf32c91297cf992cc0fd241e17148b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d29aeb4de3166648265a417a3ebdfa8d" category="list-text">將會開啟一個新視窗。按一下*備份後驗證*複選框，然後按一下備份。</block>
  <block id="f9f8bdefaa510ecb00dcacadaeebfa4c" category="paragraph"><block ref="f9f8bdefaa510ecb00dcacadaeebfa4c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1b01a18ba54b03ab361195cda9e11a04" category="list-text">顯示確認訊息。按一下“是”。</block>
  <block id="cf1faae3398a2472542796e6e1a716ee" category="paragraph"><block ref="cf1faae3398a2472542796e6e1a716ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c39edf183648c1d5db4f2c93fb4eb28" category="section-title">監控多資料庫備份作業</block>
  <block id="1010c73c274c132c818aa34d45372dd5" category="paragraph">從左側導覽列中，按一下*監控*，選擇備份作業，然後按一下*詳細資料*查看作業進度。</block>
  <block id="a192a442137877f8a2c0cc9e7fb10138" category="paragraph"><block ref="a192a442137877f8a2c0cc9e7fb10138" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cf2af39d79fe9b75d3b016a40a1cb886" category="paragraph">按一下「*資源*」標籤查看完成備份所需的時間。</block>
  <block id="a598f2d8c25ebb000d9ea8101d48c872" category="paragraph"><block ref="a598f2d8c25ebb000d9ea8101d48c872" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b702b14abe98f98e647cd791bcb90f8d" category="section-title">多個資料庫備份的交易日誌備份</block>
  <block id="26d8c1709e6a02cee73b16f5c2acf6dc" category="paragraph">SnapCenter支援完整、批次日誌和簡單復原模型。簡單復原模式不支援交易日誌備份。</block>
  <block id="a60ccf2e4a30da040f5a49732187a6b7" category="paragraph">若要執行交易日誌備份，請完成下列步驟：</block>
  <block id="be7235e7e6dc252e8daebedf54c3b6c7" category="list-text">從「*資源*」標籤中，將檢視功能表從「*資料庫*」變更為「*資源組*」。</block>
  <block id="2d2769239fb96da78529f7fe58541a20" category="paragraph"><block ref="2d2769239fb96da78529f7fe58541a20" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c48d8cc9d4f748c135f5b4812c1d7412" category="list-text">選擇已建立的資源組備份策略。</block>
  <block id="f38bbe0d9131c48ea9ee602675754140" category="list-text">選擇右上角的*修改資源組*。</block>
  <block id="43947bdb92a7373ee3b41cd8b6200b6a" category="paragraph"><block ref="43947bdb92a7373ee3b41cd8b6200b6a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6d4b5ab9594400df9f8e77cbab0abea7" category="list-text">*名稱*部分預設為備份策略名稱和標籤。按一下“下一步”。</block>
  <block id="9a35ea0c782dad0d67865885d193f274" category="paragraph">*資源*標籤突顯了要設定交易備份策略的基礎。</block>
  <block id="458defe062e7ea5d2bcf33c4c9ec6c13" category="paragraph"><block ref="458defe062e7ea5d2bcf33c4c9ec6c13" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6daf111fad11fdef17162a8f8bf18b9c" category="list-text">輸入策略名稱。</block>
  <block id="6b3f52aec1766c70a8f4a47e0b14c3ce" category="paragraph"><block ref="6b3f52aec1766c70a8f4a47e0b14c3ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7f993771df9dbe7cf6b38a0f84b409d7" category="list-text">選擇 SQL Server 備份選項。</block>
  <block id="ac47af84d5357e6141e59c1659b4ffb1" category="list-text">選擇日誌備份。</block>
  <block id="e7e910bafda9e74cf082f59a9db69bdd" category="list-text">根據您公司的 RTO 設定計劃頻率。按一下“下一步”。</block>
  <block id="ae3884ff49644b7e616c4015f235dee1" category="paragraph"><block ref="ae3884ff49644b7e616c4015f235dee1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a6a1a00356a0947050a129ae89c585c9" category="list-text">配置日誌備份保留設定。按一下“下一步”。</block>
  <block id="ea044ffadb2c0a7f2d8a76ca1855a5c6" category="paragraph"><block ref="ea044ffadb2c0a7f2d8a76ca1855a5c6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="46caf3d6b884d110f60cf7f4937e7519" category="list-text">（可選）配置複製選項。</block>
  <block id="48d01452f102ee972f87e53e03583b85" category="paragraph"><block ref="48d01452f102ee972f87e53e03583b85" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a1a4bc0234ce8dfcbb64e7eeee67fad6" category="list-text">（可選）配置在執行備份作業之前執行的任何腳本。</block>
  <block id="7085433ef1c064681b05d5b77244ce17" category="paragraph"><block ref="7085433ef1c064681b05d5b77244ce17" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ec35f0f916d59604b82ba19007187115" category="list-text">（可選）配置備份驗證。</block>
  <block id="5b1bb67e27c24b68f63f19b213aeeae7" category="paragraph"><block ref="5b1bb67e27c24b68f63f19b213aeeae7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4a7ecfa93fa04065caa7a2ead6d3d113" category="list-text">在「*摘要*」頁面上，按一下「*完成*」。</block>
  <block id="49e388563235bc90a78e78dd3ac03e0f" category="paragraph"><block ref="49e388563235bc90a78e78dd3ac03e0f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="21c62f698c67203ca218e38cedd9fd4a" category="section-title">配置和保護多個 MSSQL Server 資料庫</block>
  <block id="851434acbe50444b77cc093290088e54" category="list-text">按一下新建立的交易日誌備份策略。</block>
  <block id="b1289050b5db1595140e16164088e7d0" category="paragraph"><block ref="b1289050b5db1595140e16164088e7d0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8dc5a42c40277ce2884bea86757d8dda" category="list-text">設定*開始日期*和*到期日*。</block>
  <block id="2137cef28d44fe16621167c38bd398e5" category="list-text">根據 SLA、RTP 和 RPO 輸入日誌備份策略的頻率。按一下“確定”。</block>
  <block id="c7fcd07f35aaee60860fce43d2577b32" category="paragraph"><block ref="c7fcd07f35aaee60860fce43d2577b32" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eef345e42eb1ff7b7177a232bb1d1247" category="list-text">您可以看到這兩項政策。按一下“下一步”。</block>
  <block id="9860ad0e974d4cf04e0372784a0ae60f" category="paragraph"><block ref="9860ad0e974d4cf04e0372784a0ae60f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0d3d450b94383f42a06333f58c0ffb5a" category="list-text">配置驗證伺服器。</block>
  <block id="87da78d8a5c05fc81ea91000728ba3e4" category="paragraph"><block ref="87da78d8a5c05fc81ea91000728ba3e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9b705cea4d9eb8b1497ffce97bfe3609" category="list-text">配置電子郵件通知。</block>
  <block id="4cb060d4d1683049149f189ab41d1721" category="paragraph"><block ref="4cb060d4d1683049149f189ab41d1721" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cc7bc6e892891ffd8e8372d60c79de89" category="paragraph"><block ref="cc7bc6e892891ffd8e8372d60c79de89" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1ea4baaafde2e79cfcd31d97b84b1a12" category="section-title">觸發多個 SQL Server 資料庫的按需交易日誌備份</block>
  <block id="a75cd7342eb195ccea0a0f5ef399cb13" category="paragraph">若要觸發多個 SQL 伺服器資料庫的交易日誌的按需備份，請完成以下步驟：</block>
  <block id="f790ac7cb18962dff9c720679845e234" category="list-text">在新策略頁面，選擇頁面右上角的*立即備份*。</block>
  <block id="406cef8d9aef096206de115c8cd4ed4c" category="paragraph"><block ref="406cef8d9aef096206de115c8cd4ed4c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1552095f0c2d2521f14458e1899ee71b" category="list-text">從*策略*標籤的彈出視窗中，選擇下拉式選單，選擇備份策略，配置交易日誌備份。</block>
  <block id="100b9701f6883e83bf6bda43a1ee9f64" category="paragraph"><block ref="100b9701f6883e83bf6bda43a1ee9f64" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0df35ef9b242c9f422a4cc2e1784903" category="list-text">按一下“*備份*”。將顯示一個新視窗。</block>
  <block id="b16f685ee226b95caaad151608f96a19" category="list-text">按一下「*是*」確認備份策略。</block>
  <block id="c09c9245d3b407537c8fa8713f23fb75" category="paragraph"><block ref="c09c9245d3b407537c8fa8713f23fb75" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d0ccd5722bd3156105a495a57a9fcc19" category="paragraph">移至「*監控*」標籤並監控備份作業的進度。</block>
  <block id="49d22ab1e258e738c63d0b66999cdf5b" category="paragraph"><block ref="49d22ab1e258e738c63d0b66999cdf5b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a4a58eef11580db01b6b09289a7975b6" category="paragraph">請參閱在SnapCenter中還原 SQL Server 資料庫所需的下列先決條件。</block>
  <block id="7ddc4eb994d251e5502d17ee020d88ad" category="list-text">還原作業完成之前，目標實例必須處於線上狀態並且正在執行。</block>
  <block id="4c5a871f473eb2bc6ade24dc7c9abda4" category="list-text">必須停用計劃針對 SQL Server 資料庫執行的SnapCenter操作，包括在遠端管理或遠端驗證伺服器上規劃的任何作業。</block>
  <block id="542e99a23c6a8ebaa0cc7df2db932223" category="list-text">如果要將自訂日誌目錄備份還原到備用主機，則SnapCenter伺服器和插件主機必須安裝相同的SnapCenter版本。</block>
  <block id="81ec57bf05a69240771c922d647a651c" category="list-text">您可以將系統資料庫還原到備用主機。</block>
  <block id="ec5b173df4b3313050ca64425e06f516" category="list-text">SnapCenter可以在不使 SQL Server 叢集群組離線的情況下還原 Windows 叢集中的資料庫。</block>
  <block id="042d132354b0d48ad24ee674bebdb6af" category="section-title">將 SQL Server 資料庫上已刪除的表還原到某個時間點</block>
  <block id="4b4968094e7a3d8c79f9bc8caa8b22e4" category="paragraph">若要將 SQL Server 資料庫還原到某個時間點，請完成下列步驟：</block>
  <block id="6df13174e00d0f623a406e9148d1548c" category="list-text">以下螢幕截圖顯示了刪除表之前 SQL Server 資料庫的初始狀態。</block>
  <block id="6b7fa02a488d07abda93c214afd631c5" category="paragraph"><block ref="6b7fa02a488d07abda93c214afd631c5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d61cd88cd62206db3a9f9cab1565d3ad" category="paragraph">螢幕截圖顯示表中刪除了 20 行。</block>
  <block id="a8e81bc445fb776723fcc2f4aba88df9" category="paragraph"><block ref="a8e81bc445fb776723fcc2f4aba88df9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d3c565402042673af1d4898a8ff52a9" category="list-text">登入SnapCenter伺服器。從“*資源*”標籤中，選擇資料庫。</block>
  <block id="ef2417d50948fd4128465df5a0044eed" category="paragraph"><block ref="ef2417d50948fd4128465df5a0044eed" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a69269402d35f0cccddfd918911a97d9" category="list-text">選擇最近的備份。</block>
  <block id="583e868d2c26244722b015fea16af076" category="list-text">在右側選擇*恢復*。</block>
  <block id="2059575a57677d48bc76e7a27b433de7" category="paragraph"><block ref="2059575a57677d48bc76e7a27b433de7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39435af0deb93996df3394c1b2036fd8" category="list-text">將顯示一個新視窗。選擇*恢復*選項。</block>
  <block id="d7020dd530a8bef5050168b840079b00" category="list-text">將資料庫還原到建立備份的相同主機。按一下“下一步”。</block>
  <block id="9090e2638adbfd492803ec840c508d8c" category="paragraph"><block ref="9090e2638adbfd492803ec840c508d8c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="503e2d366ad9c17a4f549670670ad33e" category="list-text">對於*復原類型*，選擇*所有日誌備份*。按一下“下一步”。</block>
  <block id="96a8afe63f129a191367451f72405a9b" category="paragraph"><block ref="96a8afe63f129a191367451f72405a9b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f62d3af2ed775633744765e13ceea92b" category="paragraph"><block ref="f62d3af2ed775633744765e13ceea92b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e63cae13f4b41b3fe8c7e3fec3319f06" category="paragraph">*預恢復選項：*</block>
  <block id="de181095a646159b289fbcdbcf419e7b" category="list-text">選擇選項*復原期間用同名覆寫資料庫*。按一下“下一步”。</block>
  <block id="2fe5e5a15d38cc3a3de56b09639004ca" category="paragraph"><block ref="2fe5e5a15d38cc3a3de56b09639004ca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ed71c6a01179057b2d9bf0077204c6b" category="paragraph">恢復後選項：*</block>
  <block id="9cfc344a514e0de0c6b807382b26c075" category="list-text">選擇選項*可操作，但無法還原其他交易日誌*。按一下“下一步”。</block>
  <block id="b1fa76d6d5e0efb7d7e2524b46e8110a" category="paragraph"><block ref="b1fa76d6d5e0efb7d7e2524b46e8110a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8420a5fc7b326a91c636b314aa454ec6" category="list-text">提供電子郵件設定。按一下“下一步”。</block>
  <block id="d218f4b7f9c9719a9243c0b0d76eb083" category="paragraph"><block ref="d218f4b7f9c9719a9243c0b0d76eb083" category="inline-image-macro-rx" type="image"></block></block>
  <block id="189945d7eb38e10b81a89111a89dc07e" category="paragraph"><block ref="189945d7eb38e10b81a89111a89dc07e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4506debb4b8eeba79855725078a52afb" category="section-title">監控恢復進度</block>
  <block id="9aff1c679025b15fa483f8f730686633" category="list-text">在「監控」標籤中，按一下還原作業詳細資料以查看還原作業的進度。</block>
  <block id="ca90adad798b8064f457e3e227f16626" category="paragraph"><block ref="ca90adad798b8064f457e3e227f16626" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d2f265e204d2aa866e88f009e207aa68" category="list-text">恢復作業詳細資料。</block>
  <block id="ea058dfa3976575a8bba81e32fca356a" category="paragraph"><block ref="ea058dfa3976575a8bba81e32fca356a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c5d988b8258420ba376fd703ae323bd" category="list-text">傳回 SQL Server 主機 &gt; 資料庫 &gt; 表存在。</block>
  <block id="990f2c472997ae0e656e936d74d82472" category="paragraph"><block ref="990f2c472997ae0e656e936d74d82472" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d5b957cd473f6eaf5ad335a9c63c4ff" category="paragraph">要了解有關本文檔中描述的信息的更多信息，請查看以下文檔和/或網站：</block>
  <block id="425103b894468ffe6015f984f2683d74" category="inline-link">TR-4714：使用NetApp SnapCenter 的Microsoft SQL Server 最佳實務指南</block>
  <block id="9c42feba6d2410200720e2ceda752e13" category="list-text"><block ref="9c42feba6d2410200720e2ceda752e13" category="inline-link-rx"></block></block>
  <block id="ee50ef71e7fa5dbc3292cb856c5f8ee5" category="inline-link"><block ref="ee50ef71e7fa5dbc3292cb856c5f8ee5" category="inline-link-rx"></block></block>
  <block id="822d30d1b5bfcb219aa830739d5b89a0" category="paragraph"><block ref="822d30d1b5bfcb219aa830739d5b89a0" category="inline-link-rx"></block></block>
  <block id="818095849ac39056a1077a0f3a155684" category="inline-link">恢復資料庫的要求</block>
  <block id="0305a2a48c225d49081b5bccd776b23d" category="list-text"><block ref="0305a2a48c225d49081b5bccd776b23d" category="inline-link-rx"></block></block>
  <block id="9f413d2e154ecad28af03b6125df6837" category="inline-link"><block ref="9f413d2e154ecad28af03b6125df6837" category="inline-link-rx"></block></block>
  <block id="98c7a90e9f834e61987ed9dd4072a0f3" category="paragraph"><block ref="98c7a90e9f834e61987ed9dd4072a0f3" category="inline-link-rx"></block></block>
  <block id="9b256b378583dbf8a4aea7e4d96460ff" category="list-text">了解克隆資料庫的生命週期</block>
  <block id="a35c63f82a8b880dd7d77b8868394548" category="inline-link"><block ref="a35c63f82a8b880dd7d77b8868394548" category="inline-link-rx"></block></block>
  <block id="622d6fd30919e1009adf5b3b6a9b61c4" category="paragraph"><block ref="622d6fd30919e1009adf5b3b6a9b61c4" category="inline-link-rx"></block></block>
  <block id="ebcadd0d5b1096e72d18133b1e0e3098" category="doc">TR-4467：Windows 上搭載 Microsoft SQL Server 的 SAP - 使用NetApp Clustered Data ONTAP和SnapCenter 的最佳實踐</block>
  <block id="611a4a6b98272a717f8e1f6bf5ba787b" category="paragraph">NetApp的 Marco Schoen</block>
  <block id="dbd408dfbba42c9529974244acc200aa" category="paragraph">TR-4467 為客戶和合作夥伴提供了部署叢集NetApp Data ONTAP的最佳實踐，以支援在 Windows 環境中的 Microsoft SQL Server 中執行的 SAP Business Suite 解決方案。</block>
  <block id="d90b6dfa1c90883fc207f3309f98b1bf" category="paragraph"><block ref="d90b6dfa1c90883fc207f3309f98b1bf" category="inline-link-macro-rx"></block></block>
  <block id="0502e6755528910223db364699e71622" category="doc">TR-4590：採用ONTAP的 Microsoft SQL Server 最佳實務指南</block>
  <block id="7788b16f8e56867380c0e39b9e9a9b73" category="paragraph">Manohar Kulkarni 和 Pat Sinthusan， NetApp</block>
  <block id="cf2906d4a365d3dbf40f1f495ff7a0eb" category="paragraph">本文檔介紹了最佳實踐，並深入探討了在運行NetApp ONTAP軟體的NetApp儲存系統上部署 SQL Server 的設計注意事項，目的是實現有效、高效的儲存部署以及端到端資料保護和保留規劃。</block>
  <block id="ddfcd18933c13e026412b8c36996dbaf" category="inline-link-macro">TR-4590：Microsoft SQL Server 與ONTAP 的最佳實務指南</block>
  <block id="49814a6b08319963f5bef4f7ea99cfb5" category="paragraph"><block ref="49814a6b08319963f5bef4f7ea99cfb5" category="inline-link-macro-rx"></block></block>
  <block id="046c9e52934c311f81497ca664d86a24" category="doc">TR-4764：Microsoft SQL Server 與NetApp EF 系列的最佳實踐</block>
  <block id="d9cd8ac988f5ea26e28a2da5f3485ff9" category="paragraph">米奇布萊克本、派特辛圖桑、 NetApp</block>
  <block id="9db08b91ae68a77b71af230b40b31325" category="paragraph">本最佳實務指南旨在協助儲存管理員和資料庫管理員在NetApp EF 系列儲存上成功部署 Microsoft SQL Server。</block>
  <block id="730874cec0e792d7ebad5a796a90b3be" category="paragraph"><block ref="730874cec0e792d7ebad5a796a90b3be" category="inline-link-macro-rx"></block></block>
  <block id="d79b12332bd4254f1e9cd6c23201a104" category="doc">TR-4722： NetApp ONTAP上的 MySQL 資料庫最佳實踐</block>
  <block id="ecb384a7266ef6f8f011aa654a810c39" category="paragraph">Anup Bharti、Manohar Kulkarni、Jeffrey Steiner NetApp</block>
  <block id="ccf4f5e223b1332c8f679f6a75664cae" category="paragraph">MySQL 及其變體（包括 MariaDB 和 Percona）廣泛用於許多企業應用程式。這些應用程式包括全球社交網站、大型電子商務系統以及包含數千個資料庫執行個體的 SMB 託管系統。本文檔介紹了配置要求，並提供了在NetApp ONTAP資料管理軟體上部署 MySQL 的調整和儲存配置指導。若要確定本報告中指定的環境、配置和版本是否支援您的環境，請查閱互通性矩陣工具 (IMT)。</block>
  <block id="74836ad3df3c237074f67acbd8f54d15" category="paragraph"><block ref="74836ad3df3c237074f67acbd8f54d15" category="inline-link-macro-rx"></block></block>
  <block id="1706135f6c2fde8c4247ce7ca185ca31" category="summary">該解決方案提供了一個基於 Ansible 的自動化工具包，用於從駐留在NetApp雲端磁碟區中的 Oracle 資料庫映像備份副本設定、複製和刷新 Oracle 克隆的超大型資料庫 (VLDB)，這些副本可從公有雲平台取得。該工具包最初支援Google Cloud NetApp Volumes (GCNV)，但可以擴展以支援其他雲卷，例如Azure NetApp Files (ANF) 或Amazon FSx for ONTAP (FSxN)。</block>
  <block id="2d67940d27634da3418e76cfa66225cb" category="doc">透過伺服器內映像備份實現 Oracle VLDB 克隆生命週期自動化</block>
  <block id="dbc72de5a3b33e77559867d3a7e8e524" category="paragraph">利用公有雲中的伺服器內資料庫映像備份副本為 Oracle VLDB 提供NetApp ONTAP磁碟區的快速複製（幾分鐘）功能可實現多種目的。它為報告、開發或 UAT 用例提供了近乎即時的全尺寸生產資料庫。它可以節省儲存成本，特別是當可以選擇對主資料庫備份磁碟區進行精簡複製時。這個基於 Ansible 的自動化工具包使用戶能夠按照使用者想要的時間表設定、複製和刷新克隆的 Oracle 資料庫，以簡化生命週期管理。此工具包適用於部署至 Google 公有雲的 Oracle VLDB 用例，並使用 GCNV 作為伺服器內資料庫備份儲存。</block>
  <block id="868fdcb1d29bcb2b687235f9fbc622c7" category="list-text">設定資料庫克隆設定檔以實作 Oracle 資料庫的自動克隆。</block>
  <block id="f4e5348def558e4db47cf81abde78bb6" category="list-text">使用排程器上的 Ansible 劇本從主資料庫映像備份副本建立或刷新克隆 Oracle 資料庫。</block>
  <block id="944c1a2be8795d0d68670959fdd7d6ae" category="list-text">應用程式擁有者喜歡從資料庫映像備份副本複製 Oracle 資料庫以用於其他用例。</block>
  <block id="527a240fc9b803bb21adf3d090d97286" category="admonition">為了簡化，複製目標 Oracle 伺服器的配置應與主 Oracle 伺服器相同，例如 Oracle 軟體堆疊以及 Oracle Home 的目錄佈局等。</block>
  <block id="015dba467992caeec1ef3f7bc7ea6797" category="paragraph">該工具包包含一個 hosts 文件，定義了 Ansible playbook 運行的來源 Oracle 主機和目標 Oracle 主機。通常包括主資料庫伺服器主機和目標克隆資料庫伺服器主機。以下是範例文件。主機條目包括目標主機 IP 位址以及 ssh 金鑰，以便使用者存取主機執行複製或刷新命令。透過 gcloud cli 存取和管理Google Cloud NetApp Volumes儲存。</block>
  <block id="342ef9e1a0508a0765f380a419f76f50" category="paragraph">主機變數在 host_vars 目錄中定義，名稱為 {{ host_name }}.yml，僅適用於特定主機。對於此解決方案，僅配置目標克隆DB主機參數檔。 Oracle 主資料庫參數在全域 vars 檔案中配置。以下是目標 Oracle 克隆 DB 主機變數檔案 orac.yml 的範例，顯示了典型配置。</block>
  <block id="08f18ffb22434781a2894c117fbb8f87" category="paragraph">克隆目標 Oracle 伺服器應安裝並修補與來源 Oracle 伺服器相同的 Oracle 軟體堆疊。 $ORACLE_HOME 變數理想情況下應該與來源 Oracle 伺服器設定相符。如果目標 ORACLE_HOME 設定與主 Oracle 伺服器配置不同，請建立一個符號連結來解決這些差異。</block>
  <block id="e093a58397af4521c44cb6c9e3e287ce" category="paragraph">如果主資料庫配置了 ASM，則資料檔案主群組可能屬於 asm 群組，應將具有相同群組 ID 的相同 asm 群組新增至複製主機，以避免權限問題。</block>
  <block id="99247d1f4aef664b16648f2ddcf4e6cf" category="paragraph">若要複製任何其他資料庫，請建立單獨的 oracle_bkup_clone_n_gcnv.yml 和 oracle_bkup_clone_n_gcnv.sh。相應地設定 Ansible 目標主機、全域 vars.yml 和 host_vars 目錄中的 hostname.yml 檔案。</block>
  <block id="ce7362bea27188fd92bae39021738660" category="section-title">Playbook 執行細節</block>
  <block id="f40a38fbc1ac57e276f37a9b5baabb1d" category="paragraph">以下日誌檔案擷取了劇本完整執行的輸出詳細資訊以供參考。</block>
  <block id="87561d435f6cd79a59659b543d2991ca" category="summary">本節描述了具有客製化 Oracle RDS 和 FSx ONTAP儲存的 RDS Oracle 自訂部署解決方案架構。</block>
  <block id="a40893fa754ed62d5268702b023fea91" category="doc">解決方案架構</block>
  <block id="ca449b8ca808c6d325abf6b1a047318c" category="paragraph">下圖架構圖展示了使用 FSx 儲存服務在 AWS EC2 執行個體上部署的高可用性 Oracle 資料庫。可以設定類似的部署方案，但在不同的區域設定備用伺服器，以實現災難復原。</block>
  <block id="312f941d9e8f224f54ae372016e8f35a" category="paragraph">在這個環境中，Oracle 運算執行個體透過 AWS EC2 執行個體控制台進行部署。控制台中有多種 EC2 執行個體類型可用。  NetApp建議部署資料導向的 EC2 執行個體類型，例如具有 RedHat Enterprise Linux 8 和高達 10Gps 網路頻寬的 m5 Ami 映像。</block>
  <block id="228488653f80c4dfe7bd79d5f9634ea4" category="paragraph">另一方面，FSx 磁碟區上的 Oracle 資料庫儲存是使用 AWS FSx 控制台或 CLI 部署的。隨後，Oracle 二進位檔案、資料或日誌磁碟區將顯示並安裝在 EC2 執行個體 Linux 主機上。根據所採用的底層儲存協議，每個資料或日誌卷可以分配多個 LUN。</block>
  <block id="830579b4d0c33e9e4fa1f11c61cb73a7" category="inline-image-macro">該圖描繪了一個範例架構圖，其中包括主 HA 叢集 - 備用 HA 叢集 - 管理節點 - 以及相關連接節點。</block>
  <block id="b87701d1e5946de8467bd302a04772ae" category="paragraph"><block ref="b87701d1e5946de8467bd302a04772ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e3d0f7ae75ed6e0e3b522ecc7cac710b" category="paragraph">FSx 儲存叢集採用雙冗餘設計，主儲存叢集和備用儲存叢集均部署在兩個不同的可用區。資料庫磁碟區以使用者可設定的間隔從主 FSx 叢集複製到備用 FSx 集群，適用於所有 Oracle 二進位、資料和日誌磁碟區。</block>
  <block id="0008c12bed67fcf1f82ece8ff10b5c81" category="paragraph">此高可用性 Oracle 環境由 Ansible 控制器節點和SnapCenter備份伺服器和 UI 工具進行管理。使用基於 Ansible playbook 的工具包自動執行 Oracle 安裝、設定和複製。任何對 Oracle EC2 執行個體核心作業系統的更新或 Oracle 修補都可以並行執行，以保持主執行個體和備用執行個體同步。事實上，如果需要的話，初始自動化設定可以輕鬆擴展以執行一些重複的日常 Oracle 任務。</block>
  <block id="be571c48040d6c3bf764ba40188888d2" category="paragraph">如果需要， SnapCenter可以為 Oracle 資料庫時間點復原或主區域或備用區域的資料庫複製提供工作流程。透過SnapCenter UI，您可以根據 RTO 或 RPO 目標將 Oracle 資料庫備份和複製配置到備用 FSx 存儲，以實現高可用性或災難復原。</block>
  <block id="be22c0b35f58a932be14c9e55b163ac4" category="paragraph">此解決方案提供了一種替代流程，可提供與 Oracle RAC 和 Data Guard 部署類似的功能。</block>
  <block id="84f09994e75c5ede8e07c6ab4070faae" category="summary">本節提供有關 Swingbench 模擬 OLTP 工作負載的效能驗證和基準測試結果的詳細資訊。</block>
  <block id="d9a4da5bae7f5f09fa9c3850a052c626" category="doc">性能驗證和基準測試結果</block>
  <block id="4e71b9ce7d16c817e38c3c0b45825062" category="paragraph">此次性能驗證的目的不是為了樹立任何標記。相反，如果您遵循本文檔中概述的部署流程和最佳實踐，您可以期望在公有雲中部署 Oracle 資料庫獲得類似的效能指標。</block>
  <block id="0215fc4537f81bbc2d6ff19ba75efeb5" category="paragraph">我們使用 Swingbench 銷售訂單輸入 (SOE) 模組來模擬 OLTP 類型的工作負載，並將工作負載應用於部署到具有 NFS 協定上的 FSx 儲存磁碟區的 M5 EC2 執行個體的 Oracle 資料庫。預設的 Swingbench SOE I/O 設定檔接近 80/20 讀/寫分割，這接近真實的 OLTP Oracle 工作負載設定檔。</block>
  <block id="611831b4b814ffa8e208ff6b01e797d9" category="paragraph">隨著客戶端執行銷售訂單輸入、瀏覽、庫存查詢等操作的並髮使用者數量的增加，工作負載也會隨之增加。測試的數量分別為 8、16、32、64 和 128 個同時使用者。 Swingbench 使用的演算法在伺服器端很繁重，以推動合理的交易量並測試 Oracle 伺服器的極限。我們觀察到，當同時使用者數為 128 時，EC2 執行個體的 CPU 使用率達到容量的約 80-90%。</block>
  <block id="a5cbb12f8f9f28c970230ab16d36e184" category="paragraph">以下部分提供了設定和測試結果的詳細資訊。</block>
  <block id="e018eaf806fedc0fa46d2acde6f60425" category="section-title">測試環境設定</block>
  <block id="a623a8d0366bf079411aa30be45b2d10" category="section-title">運算</block>
  <block id="ff4adf700c0c4ba7e493af033a81ac29" category="paragraph">我們部署了一個 EC2 M5 實例，它有 8vCPU、32G RAM 和 10Gps 的網路頻寬。</block>
  <block id="db98c654e17128cf4bb2dccf030f91d5" category="paragraph"><block ref="db98c654e17128cf4bb2dccf030f91d5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5e18ca4731d9d72ae0bd4438c7e84b5" category="section-title">FSx 存儲</block>
  <block id="dc29ebaf5cc1f622aabb0ae70efeced6" category="paragraph">我們建立了三個資料庫卷，並使用 NFS 將捲掛載到 EC2 執行個體上，如下所示：</block>
  <block id="829e4dfdaee315e0cfdba47e5047adf7" category="list-text">/u01——Oracle 二進位文件</block>
  <block id="5853f5304485ce536b44cd0dfb18bdbc" category="list-text">/u02——Oracle資料檔、控製文件</block>
  <block id="ee6ac3c6792e507ea8c5717f79c8ab46" category="list-text">/u03——Oracle日誌檔、控製文件</block>
  <block id="363dd83f018d937efa507464961997c5" category="paragraph">我們保留了關鍵控製文件的兩個副本以實現冗餘。</block>
  <block id="27809f611e3f3ea83f75a34521d09141" category="paragraph"><block ref="27809f611e3f3ea83f75a34521d09141" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f9c8184a7a7a9ecb63af93d93759b393" category="paragraph">FSx 檔案系統配置了 80,000 IOPS 容量和 2GiBps I/O 吞吐量。</block>
  <block id="3570146db42993029d30dbd022107030" category="section-title">Oracle 配置</block>
  <block id="9daecb8faf1751109e100894205a6aef" category="paragraph">我們安裝了帶有 RU 補丁 19.8 的 Oracle 版本 19c。伺服器上啟用了 dNFS。</block>
  <block id="9041eebdfc5395440a43baff789c663b" category="paragraph">該資料庫被部署為具有三個 PDB 的容器化資料庫。我們使用一個 PDB 實例進行效能測試。下圖顯示了 NFS 掛載點上的 Oracle 儲存大小。</block>
  <block id="a8db43ee55b8a44b31749786182e24fb" category="paragraph"><block ref="a8db43ee55b8a44b31749786182e24fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8da929e8cdb57e8ea66260e3f7090d35" category="section-title">Swingbench 配置</block>
  <block id="6af00d716d36ee74995307e004b66d3f" category="paragraph">我們在具有 8vCPU 和 32G RAM 的 Windows 主機上部署了 Swingbench 2.6（最新版本）。我們使用 SOE plsql 測試模組版本 2 作為基準。預設負載設定檔提供 80/20 的讀取/寫入比率來模擬現實世界的 OLTP 事務工作負載。</block>
  <block id="5850fdbd1ed0c58b02c8d3797381e7c6" category="paragraph">我們使用的模式比例因子為 50，它提供了 160G 的初始資料載入大小和 30G 的臨時空間分配。在這個規模因素下，SOE 模式提供了 1000 個倉庫和 5000 萬個客戶來模擬線上訂單處理。</block>
  <block id="9bc139569eaa30f1804b313d21ab69fa" category="paragraph">以下螢幕截圖示範了 Swingbench Windows UI 中的工作負載設定檔和典型的交易運作指標。</block>
  <block id="4f2534fa1d3a6bb439e5f443bdd5d3ff" category="paragraph"><block ref="4f2534fa1d3a6bb439e5f443bdd5d3ff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5531d1590836e811c3ace97db7e230eb" category="paragraph">如該圖所示，在整個測試運行過程中，交易水準一直保持在同一水準。</block>
  <block id="6c805c8ead51e13766957cbda36fd2c0" category="section-title">測試結果分析</block>
  <block id="54f9f904b574caddc93a83f3057be251" category="paragraph">我們捕獲了每次測試運行的 Swingbench 結果並獲得了相應的 Oracle AWR 報告以進行效能分析。</block>
  <block id="9126019861ad7339333760b7b3bd5174" category="paragraph">從最終用戶的角度，我們專注於交易量和用戶回應時間等關鍵指標。這兩個指標都顯示了在給定並發登入系統的使用者數量的情況下，使用者可以從銷售訂單輸入系統執行的交易數量，以及使用者輸入訂單後完成交易和收到回應的速度。</block>
  <block id="809217313025f03af0a774770ed7688d" category="paragraph">從 Oracle 伺服器端，我們解析了 Oracle AWR 報告，以確定可能減慢使用者事務速度的頂級等待事件。前 10 個 Oracle 等待事件表明，在 Swingbench 模擬事務測試運行期間，Oracle 伺服器主要受 I/O 限制，資料庫時間的 50%-60% 都花在<block ref="235591872ecf336383513d22098a1fa0" prefix=" " category="inline-code"></block>。<block ref="a249b22faad82bdea2a0930347b9e5ac" prefix=" " category="inline-code"></block>也是一個促成因素，因為事務提交會導致 Oracle 日誌記錄過程將日誌 I/O 從緩衝區快取刷新到磁碟上的日誌文件，儘管它在資料庫時間百分比層級上是一個較小的因素。</block>
  <block id="4da3501ef8d9ebc196009ef0bf4e4360" category="paragraph">我們繪製了使用者交易量、使用者回應時間和 Oracle 頂部等待事件與事務運行期間的同時使用者數的圖表。結果如下圖所示：</block>
  <block id="6dc1a88cef659b42f291de3a71a3998b" category="paragraph"><block ref="6dc1a88cef659b42f291de3a71a3998b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b225219fb0a32b17f3f7f3964edfa599" category="paragraph">這些結果表明，我們可以隨著並髮用戶數量的增加而穩定增加用戶交易量，同時保持一致的低 I/O 延遲和用戶回應時間，這對於 Oracle 應用程式來說是合適的效能。</block>
  <block id="ccc7b98ab0c81e5b7e4033e88910e92e" category="paragraph">當並髮用戶數達到 128 時，I/O 延遲和用戶回應時間開始增加。這是預料之中的，因為 EC2 執行個體正在接近伺服器的全部容量，如下圖所示：</block>
  <block id="21dc163b185109e6c86fd010bc034278" category="paragraph"><block ref="21dc163b185109e6c86fd010bc034278" category="inline-image-macro-rx" type="image"></block></block>
  <block id="faf8392c1e8a1c488f303b45f48fd31d" category="paragraph">同樣，下圖顯示了當時滿足使用者交易量時對應的 FSx IOPS 和吞吐量。</block>
  <block id="8fdc20fb85a81aa653551faca1e072a9" category="paragraph"><block ref="252446164ef83db058909bdb949247b3" category="inline-image-macro-rx" type="image"></block> <block ref="e0eb37bfb49cfad46839600bb61d38d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0d8430502705720b257f565ec9140e72" category="inline-link-macro">Oracle 資料庫部署需要考慮的因素。</block>
  <block id="f65992de3860fff89cfd63788c5aa0cb" category="paragraph">當 Oracle 伺服器 EC2 執行個體成為限制因素時，我們在 IOPS 或吞吐量方面都無法達到預先配置的 FSx 儲存容量。因此，您必須根據用戶應用程式級交易量適當調整計算和儲存的大小，正如我們在本節中演示的那樣<block ref="006ce1a5ca923fbeccbfa7766e7ad617" category="inline-link-macro-rx"></block></block>
  <block id="784f4d9bc2efa477eafb911859744478" category="summary">此解決方案提供了使用 AWS FSx ONTAP作為備用站點 Oracle 資料庫儲存配置 Oracle Data Guard 的概述和詳細信息，以降低 AWS 中 Oracle Data Guard HA/DR 解決方案的授權和營運成本。</block>
  <block id="d41392db0c7e69ca86a4c8f0c8bc2a8f" category="doc">TR-4981：使用Amazon FSx ONTAP降低 Oracle Active Data Guard 成本</block>
  <block id="1e2ef808c756fe2fc18593d9fa502fea" category="paragraph">此解決方案提供了使用 AWS FSx ONTAP作為備用站點 Oracle 資料庫儲存配置 Oracle Data Guard 的概述和詳細信息，以降低 AWS 中 Oracle Data Guard HA/DR 解決方案的授權和營運成本。</block>
  <block id="f9ca3bf31876c6185710d49eac400cfe" category="paragraph">Oracle Data Guard 可確保主資料庫和備用資料庫複製配置中企業資料的高可用性、資料保護和災難復原。  Oracle Active Data Guard 使用戶能夠在從主資料庫到備用資料庫的資料複製處於作用中狀態時存取備用資料庫。 Data Guard 是 Oracle Database Enterprise Edition 的特性。它不需要單獨的許可。另一方面，Active Data Guard 是 Oracle Database Enterprise Edition Option，因此需要單獨的授權。在 Active Data Guard 設定中，多個備用資料庫可以從主資料庫接收資料複製。但是，每個額外的備用資料庫都需要 Active Data Guard 許可證和與主資料庫大小相同的額外儲存空間。營運成本迅速增加。</block>
  <block id="5afa567381b78444937fdc789ad61e1a" category="paragraph">如果您熱衷於削減 Oracle 資料庫操作成本並計劃在 AWS 中設定 Active Data Guard，那麼您應該考慮另一種選擇。不要使用 Active Data Guard，而是使用 Data Guard 從主資料庫複製到Amazon FSx ONTAP儲存上的單一實體備用資料庫。隨後，可以複製此備用資料庫的多個副本並打開以進行讀取/寫入訪問，以服務許多其他用例，例如報告、開發、測試等。最終結果有效地提供了 Active Data Guard 的功能，同時消除了 Active Data Guard 授權和每個額外備用資料庫的額外儲存成本。在本文檔中，我們示範如何使用 AWS 中現有的主資料庫設定 Oracle Data Guard，並將實體備用資料庫放置在Amazon FSx ONTAP儲存上。備用資料庫透過快照進行備份，並根據需要複製以供用例進行讀取/寫入存取。</block>
  <block id="309cd12bd99b7c9e7ad680fcef778228" category="list-text">AWS 中任何儲存上的主資料庫與Amazon FSx ONTAP儲存上的備用資料庫之間的 Oracle Data Guard。</block>
  <block id="1373f5f0167ef176e393747ff34f4b37" category="list-text">在關閉資料複製的同時複製備用資料庫，以滿足報告、開發、測試等用例的需求。</block>
  <block id="b7224dd0f37ea7dba810e399e48f1e1f" category="list-text">一位 DBA 在 AWS 中設定了 Oracle Active Data Guard，以實現高可用性、資料保護和災難復原。</block>
  <block id="550c8c85ffce2de3188f9704c188de3c" category="list-text">對 AWS 雲端中的 Oracle Active Data Guard 配置有興趣的資料庫解決方案架構師。</block>
  <block id="e4efb5457095eb4b55bfc3c725c45bc6" category="list-text">管理支援 Oracle Data Guard 的 AWS FSx ONTAP儲存的儲存管理員。</block>
  <block id="3b6ea806d7ca3ec3483737a2c6b96a47" category="list-text">喜歡在 AWS FSx/EC2 環境中啟動 Oracle Data Guard 的應用程式擁有者。</block>
  <block id="63bec441d029d5ce44b5fda7d69153c0" category="paragraph">此解決方案的測試和驗證是在 AWS FSx ONTAP和 EC2 實驗室環境中進行的，該環境可能與最終部署環境不符。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="c40f260dcfd75e015bf40c37284fce8d" category="inline-image-macro">此圖提供了使用 FSx ONTAP在 AWS 中實作 Oracle Data Guard 的詳細圖片。</block>
  <block id="9d594ede9da506de87af7f3f92ecfa24" category="paragraph"><block ref="9d594ede9da506de87af7f3f92ecfa24" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a09dc18a1bff4fa8388afca4627d0911" category="cell">FSx ONTAP存儲</block>
  <block id="2121dc715f8fee4210e0374eb562c84d" category="cell">三個 EC2 T2 xlarge EC2 實例，一個作為主資料庫伺服器，一個作為備用資料庫伺服器，第三個作為克隆資料庫伺服器</block>
  <block id="52359c9653f33c68cd1b454f7d05a27b" category="cell">RHEL-8.6.0_HVM-20220503-x86_64-2-Hourly2-GP2</block>
  <block id="ca8a675d4efb691e78dedc948041f3b6" category="section-title">假設紐約到洛杉磯災難復原設定的 Oracle Data Guard 配置</block>
  <block id="6e63145f93e8264084d51b8487d8bb5a" category="cell">*資料庫唯一名稱*</block>
  <block id="08ede96534ff1efd5b0193eda6efd01c" category="cell">*Oracle 網路服務名稱*</block>
  <block id="074de7e7c226d5c60f8af14c20725352" category="cell">基本的</block>
  <block id="668f361c1cd1909a84f76c9e89450691" category="cell">db1_NY</block>
  <block id="31cedb742316bfb63604cb838e2fbd67" category="cell">db1_NY.demo.netapp.com</block>
  <block id="0bb7066f912b36d8b2abd23b39aea8bf" category="cell">物理備用</block>
  <block id="3b1ac5a2383d6bae39c010102ab76ec8" category="cell">db1_LA</block>
  <block id="12eea44985687889a715748b159aacb5" category="cell">db1_LA.demo.netapp.com</block>
  <block id="96686b873db5b24893df16faa4703808" category="list-text">*Oracle 備用資料庫FlexClone 的工作原理。 * AWS FSx ONTAP FlexClone提供可寫入的相同備用資料庫磁碟區的共用副本。卷的副本實際上是連結回原始資料塊的指針，直到在克隆上啟動新的寫入。然後， ONTAP為新的寫入指派新的儲存區塊。任何讀取 IO 均由主動複製下的原始資料區塊提供服務。因此，克隆的儲存效率非常高，可以用於許多其他用例，為新的寫入 IO 分配最少且增量的新儲存。透過大幅減少 Active Data Guard 儲存空間，可以節省大量的儲存成本。  NetApp建議在資料庫從主儲存切換到備用 FSx 儲存時盡量減少FlexClone活動，以保持 Oracle 效能處於高水準。</block>
  <block id="714b6519d8509d6b6dd2df24196f06e4" category="inline-link-macro">support.oracle.com</block>
  <block id="dde8156b287d10e91a53b11990c2d067" category="list-text">*Oracle 軟體需求。 *一般而言，實體備用資料庫必須具有與主資料庫相同的資料庫主版本，包括補丁集異常 (PSE)、關鍵修補程式更新 (CPU) 和修補程式集更新 (PSU)，除非正在進行 Oracle Data Guard 備用優先補丁應用程式（如 My Oracle Support 說明 1265700.1 所述，網址為<block ref="65806ca1a4e44d7565055b2160a952fb" category="inline-link-macro-rx"></block></block>
  <block id="9a74dfee83f901bbb995e7d4d9f21057" category="list-text">*備用資料庫目錄結構注意事項。 *如果可能，主系統和備用系統上的資料檔案、日誌檔案和控制檔案應該具有相同的名稱和路徑名，並使用最佳靈活架構 (OFA) 命名約定。備用資料庫上的存檔目錄在網站之間也應該相同，包括大小和結構。此策略允許其他操作（例如備份、切換和故障轉移）執行同一組步驟，從而降低維護複雜性。</block>
  <block id="76d62bcf48e1a8f37c916496440df6b5" category="list-text">*強制記錄模式。 *為了防止主資料庫中未記錄的直接寫入無法傳播到備用資料庫，請在執行資料檔案備份以建立備用資料庫之前在主資料庫上開啟 FORCE LOGGING。</block>
  <block id="6aab76a9832cdc4aedf822409a67b715" category="list-text">資料庫儲存管理。為了簡化操作，Oracle 建議在 Oracle Data Guard 配置中設定 Oracle 自動儲存管理 (Oracle ASM) 和 Oracle 管理檔案 (OMF) 時在主資料庫和備用資料庫上對稱設定它。</block>
  <block id="89a78e9473b16ecb4c8c28739f77fbbf" category="list-text">EC2 運算執行個體。在這些測試和驗證中，我們使用 AWS EC2 t2.xlarge 執行個體作為 Oracle 資料庫運算執行個體。 NetApp建議在生產部署中使用 M5 類型的 EC2 執行個體作為 Oracle 的運算實例，因為它針對資料庫工作負載進行了最佳化。您需要根據實際工作負載需求，適當調整 EC2 執行個體的 vCPU 數量和 RAM 容量。</block>
  <block id="891a36218aaef7e59d635d4a02fcd917" category="list-text">*FSx 儲存 HA 叢集單區域或多區域部署。 *在這些測試和驗證中，我們在單一 AWS 可用區中部署了一個 FSx HA 叢集。對於生產部署， NetApp建議在兩個不同的可用區部署 FSx HA 對。 FSx 叢集始終在 HA 對中配置，該 HA 對在主動-被動檔案系統中同步鏡像，以提供儲存級冗餘。多區域部署進一步增強了單一 AWS 區域發生故障時的高可用性。</block>
  <block id="38bf8daaeda3c096093351f7666bfaa4" category="list-text">FSx 儲存叢集大小。 Amazon FSx ONTAP儲存檔案系統提供高達 160,000 個原始 SSD IOPS、高達 4GBps 的吞吐量以及最大 192TiB 的容量。但是，您可以根據部署時的實際需求，根據預先配置的 IOPS、吞吐量和儲存限制（最小 1,024 GiB）來確定叢集大小。容量可以動態調整，而不會影響應用程式的可用性。</block>
  <block id="7714e62713b517325d1dbcb277ffec72" category="paragraph">假設您已經在 VPC 內的 AWS EC2 環境中部署了主 Oracle 資料庫，作為設定 Data Guard 的起點。主資料庫使用 Oracle ASM 進行儲存管理部署。建立兩個 ASM 磁碟組 - +DATA 和 +LOGS，用於儲存 Oracle 資料檔案、日誌檔案、控制檔案等。有關在 AWS 中使用 ASM 部署 Oracle 的詳細信息，請參閱以下技術報告以取得協助。</block>
  <block id="31a24635ce69dd426c0b029c4fcdc98d" category="inline-link-macro">EC2 和 FSx 上的 Oracle 資料庫部署最佳實踐</block>
  <block id="e448c29edca53d71511282e59019cb95" category="list-text"><block ref="e448c29edca53d71511282e59019cb95" category="inline-link-macro-rx"></block></block>
  <block id="ab12a73272bb7f9d19f02c65ce057f61" category="inline-link-macro">使用 iSCSI/ASM 在 AWS FSx/EC2 中部署和保護 Oracle 資料庫</block>
  <block id="9fe0964775d4e89b8fa0000697106e28" category="list-text"><block ref="9fe0964775d4e89b8fa0000697106e28" category="inline-link-macro-rx"></block></block>
  <block id="885f346093197ca6295f5ac1ded93d82" category="inline-link-macro">使用 NFS/ASM 在 AWS FSx/EC2 上獨立重新啟動 Oracle 19c</block>
  <block id="1e5210e8896bad27959d8255d1b3eec2" category="list-text"><block ref="1e5210e8896bad27959d8255d1b3eec2" category="inline-link-macro-rx"></block></block>
  <block id="88b61a3452017ca36f5aa8c16a481cdc" category="paragraph">您的主要 Oracle 資料庫可以在 FSx ONTAP或 AWS EC2 生態系統中的任何其他儲存體上運作。以下部分提供了在具有 ASM 儲存的主 EC2 DB 執行個體和具有 ASM 儲存的備用 EC2 DB 執行個體之間設定 Oracle Data Guard 的分步部署程序。</block>
  <block id="48c88f2a91b527275016272b31c75e1b" category="list-text">從 AWS EC2 控制台，您需要部署至少三個 EC2 Linux 實例，一個作為主 Oracle DB 實例，一個作為備用 Oracle DB 實例，以及一個用於報表、開發和測試等的克隆目標 DB 執行個體。有關環境設定的更多詳細信息，請參閱上一節中的架構圖。也請查看 AWS<block ref="b75ecbbec453f67f58d497ccd97a8075" category="inline-link-macro-rx"></block>了解更多。</block>
  <block id="fddb125abb4efb532fae8872b20113f7" category="list-text">從 AWS EC2 控制台部署Amazon FSx ONTAP儲存 HA 叢集來託管儲存 Oracle 備用資料庫的 Oracle 磁碟區。如果您不熟悉 FSx 儲存的部署，請參閱文檔<block ref="818df05ad3ddda222f02b6b0e29bbd61" category="inline-link-macro-rx"></block>以獲得逐步說明。</block>
  <block id="0f7a8130eb652cd33a4fa9cdefc41cc6" category="admonition">確保您已在 EC2 執行個體根磁碟區中指派至少 50G，以便有足夠的空間來暫存 Oracle 安裝檔案。</block>
  <block id="de6e6d5e21c4f7d0dd4ef74edf3eb0c8" category="section-title">為 Data Guard 準備主資料庫</block>
  <block id="4c47bc26cdbea7cfef6220602d142b03" category="paragraph">在此示範中，我們在主 EC2 DB 實例上設定了一個名為 db1 的主 Oracle 資料庫，該資料庫具有兩個獨立重新啟動配置中的 ASM 磁碟組，其中資料檔案位於 ASM 磁碟組 +DATA 中，閃回復原區位於 ASM 磁碟組 +LOGS 中。下面說明了為 Data Guard 設定主資料庫的詳細步驟。所有步驟都應以資料庫擁有者 - oracle 使用者的身分執行。</block>
  <block id="546bfa96e0a0fe70a11d127711d7cf98" category="list-text">主 EC2 DB 執行個體 ip-172-30-15-45 上的主資料庫 db1 配置。  ASM 磁碟組可以位於 EC2 生態系統內的任何類型的儲存空間上。</block>
  <block id="f3efbb87660ec6fc6923520ba7c0e4b6" category="list-text">從 sqlplus 中，在主伺服器上啟用強制日誌記錄。</block>
  <block id="851a2cc6266fe01721754a67b63d272b" category="list-text">從 sqlplus，在主伺服器上啟用閃回。閃回功能允許在故障轉移後輕鬆地將主資料庫還原為備用資料庫。</block>
  <block id="1456924ad439596396b0366750feb882" category="list-text">使用 Oracle 密碼文件設定重做傳輸驗證 - 如果未設置，則使用 orapwd 公用程式在主伺服器上建立 pwd 文件，並將其複製到備用資料庫 $ORACLE_HOME/dbs 目錄。</block>
  <block id="b84ef5068c2f6a0e7ab5c634421500e4" category="list-text">在主資料庫上建立與目前線上日誌檔案大小相同的備用重做日誌。日誌組比線上日誌檔案組多一個。然後，如果需要，主資料庫可以快速轉換到備用角色並開始接收重做資料。</block>
  <block id="b8dcabc8241b7fa9922b791123f161c6" category="list-text">從 sqlplus，從 spfile 建立一個 pfile 以供編輯。</block>
  <block id="a58bc66502bff24a62e9167f326de414" category="list-text">修改pfile並新增以下參數。</block>
  <block id="16df6366013fa1b51fdf63103f5de61c" category="list-text">從 sqlplus 中，根據 /home/oracle 目錄中修改後的 pfile 在 ASM +DATA 目錄中建立 spfile。</block>
  <block id="be5835a569bacd58dbd2984013ec9da7" category="list-text">在 +DATA 磁碟組下找到新建立的 spfile（如有必要，請使用 asmcmd 公用程式）。使用 srvctl 修改網格以從新的 spfile 啟動資料庫，如下所示。</block>
  <block id="721f734d4d55c537a4bcd8247cb42f38" category="list-text">修改 tnsnames.ora 以新增 db_unique_name 進行名稱解析。</block>
  <block id="ff9562404eb9d339e5f7ac0fd7a0a111" category="list-text">將主資料庫的資料保護服務名稱 db1_NY_DGMGRL.demo.netapp 新增至 listener.ora 檔案。</block>
  <block id="f0dcdb53dfe79df7c33ad468e718cf3c" category="list-text">使用 srvctl 關閉並重新啟動資料庫，並驗證資料保護參數現在是否處於活動狀態。</block>
  <block id="0a3ecc4b9c7f192a3a8eff9f43d62a49" category="paragraph">這完成了 Data Guard 的主資料庫設定。</block>
  <block id="8ed94134ccc7df045497fffb338e491e" category="section-title">準備備用資料庫並啟動 Data Guard</block>
  <block id="25df9ef065954340ff37157530509f47" category="paragraph">Oracle Data Guard 需要 OS 核心配置和 Oracle 軟體堆疊（包括備用 EC2 DB 執行個體上的修補程式集）才能與主 EC2 DB 執行個體相符。為了方便管理和簡單起見，備用 EC2 DB 執行個體資料庫儲存配置理想情況下也應該與主 EC2 DB 執行個體匹配，例如 ASM 磁碟組的名稱、數量和大小。以下是為 Data Guard 設定備用 EC2 DB 執行個體的詳細步驟。所有命令都應以 oracle 所有者使用者 ID 的身份執行。</block>
  <block id="100d87382d4e9f0b77c8fbd50ae70cf2" category="list-text">首先，檢查主 EC2 執行個體上主資料庫的配置。在此示範中，我們在主 EC2 DB 執行個體上設定了一個名為 db1 的主 Oracle 資料庫，並在獨立重新啟動配置中使用兩個 ASM 磁碟組 +DATA 和 +LOGS。主 ASM 磁碟組可以位於 EC2 生態系統內的任何類型的儲存空間上。</block>
  <block id="4f3c9d31ccf189b3cb7f494f26684484" category="inline-link-macro">TR-4965：使用 iSCSI/ASM 在 AWS FSx/EC2 中部署和保護 Oracle 資料庫</block>
  <block id="561b95165c7fc0747c2dd6683b69b794" category="list-text">按照文件中的程序進行<block ref="09e68060dbcea83513d683b108df6fcb" category="inline-link-macro-rx"></block>在備用 EC2 DB 執行個體上安裝和設定網格和 Oracle，以與主資料庫相符。應配置資料庫儲存並將其指派給 FSx ONTAP中的備用 EC2 DB 實例，其儲存容量與主 EC2 DB 執行個體相同。</block>
  <block id="18b8757dc8f63de46858f8a4f433e251" category="admonition">在第 10 步停止<block ref="b7e3e332087b6a041c83ce22cce9043c" prefix=" " category="inline-code"></block>部分。備用資料庫將使用 dbca 資料庫複製功能從主資料庫實例化。</block>
  <block id="3b2b93ec0c82f6e3a38fad684bfd6663" category="list-text">安裝並設定 Oracle 軟體後，從備用 $ORACLE_HOME dbs 目錄複製主資料庫中的 oracle 密碼。</block>
  <block id="3aa916a972ab6509dee982918f3d899e" category="list-text">使用以下條目建立 tnsnames.ora 檔案。</block>
  <block id="493f867c0c59207e4189028d16dd6d26" category="list-text">將 DB 資料保護服務名稱新增至 listener.ora 檔案。</block>
  <block id="bcd6424f66bc448fbe685fc80ff70e1a" category="list-text">設定 oracle 主頁和路徑。</block>
  <block id="143a60719ec63d00d99a825714665a55" category="list-text">使用 dbca 從主資料庫 db1 實例化備用資料庫。</block>
  <block id="57fbd0472b92ebaf5a1a0a8528a2f0a8" category="list-text">驗證重複的備用資料庫。新複製的備用資料庫最初以唯讀模式開啟。</block>
  <block id="3e003fdb2211d99cead68668fab65036" category="list-text">重新啟動備用資料庫<block ref="19822b1b15d9eefc54c07ab49f87b100" prefix=" " category="inline-code"></block>階段並執行以下命令來啟動備用資料庫管理復原。</block>
  <block id="e87af5ff6c25c9c1c0fdf389aea9426b" category="list-text">驗證備用資料庫復原狀態。注意<block ref="9bda3daa17eb022a72164386ee4bf249" prefix=" " category="inline-code"></block>在<block ref="1f38735e57e053804f3980f01073a19b" prefix=" " category="inline-code"></block>行動。</block>
  <block id="d418efa4afda10fc6b0130047c165f48" category="paragraph">這樣就完成了 db1 從主資料庫到備用資料庫的 Data Guard 保護設置，並且啟用了託管備用恢復。</block>
  <block id="9c88c2ff7d57ccdc26ed6cc8c6a551d8" category="section-title">設定 Data Guard Broker</block>
  <block id="e716a36152601014d22404c34a545dfb" category="paragraph">Oracle Data Guard 代理程式是一個分散式管理框架，可自動並集中執行 Oracle Data Guard 配置的建立、維護和監控。以下部分示範如何設定 Data Guard Broker 來管理 Data Guard 環境。</block>
  <block id="ae65cf354bdba5f399cecafe69181bb2" category="list-text">透過 sqlplus 使用以下命令在主資料庫和備用資料庫上啟動資料保護代理程式。</block>
  <block id="7085ea049485ef36270b678214c896bc" category="list-text">從主資料庫，以 SYSDBA 身分連接到 Data Guard Borker。</block>
  <block id="e3e1655d27b7ec5fede117507abebc04" category="list-text">建立並啟用 Data Guard Broker 配置。</block>
  <block id="bf87cf945b0165017223255d29eb5838" category="list-text">在 Data Guard Broker 管理框架內驗證資料庫狀態。</block>
  <block id="d3ee713ceb1d01a3c56111f66bf8cef8" category="paragraph">如果發生故障，可以使用 Data Guard Broker 立即將主資料庫故障轉移到備用資料庫。</block>
  <block id="3fda563a3f23856c843f7368c6f1dd26" category="section-title">克隆備用資料庫以供其他用例使用</block>
  <block id="2f2d5e4f7687bc11754fc0051b64a5a8" category="paragraph">在 Data Guard 中的 AWS FSx ONTAP上暫存備用資料庫的主要好處是，它可以透過 FlexCloned 來服務許多其他用例，而只需最少的額外儲存投資。在下一部分中，我們將示範如何使用NetApp SnapCenter工具對 FSx ONTAP上已安裝和還原的備用資料庫磁碟區進行快照和克隆，以用於其他目的，例如 DEV、TEST、REPORT 等。</block>
  <block id="30b22b544972f5adb280ca2975099846" category="inline-link-macro">採用SnapCenter的混合雲資料庫解決方案</block>
  <block id="bb524c44f568f444531405ba1ad85305" category="paragraph">以下是使用SnapCenter從 Data Guard 中的託管實體備用資料庫複製 READ/WRITE 資料庫的進階流程。有關如何設定和配置SnapCenter 的詳細說明，請參閱<block ref="8f81a54fece1094b09a6e495584caacf" category="inline-link-macro-rx"></block>相關 Oracle 部分。</block>
  <block id="a225c0845c18b63c94952d45800129eb" category="list-text">我們先建立一個測試表，然後在主資料庫的測試表中插入一行。然後我們將驗證事務是否向下移動到待機狀態並最終移動到克隆狀態。</block>
  <block id="815578506a24796bc380c0deef04702e" category="list-text">將 FSx 儲存集群新增至<block ref="5c6ab1284b6b7a5a7102854a969c99be" prefix=" " category="inline-code"></block>在SnapCenter中使用 FSx 叢集管理 IP 和 fsxadmin 憑證。</block>
  <block id="ead8f2b206d64f3dc022b5aff7ebf5ef" category="inline-image-macro">螢幕截圖顯示了 GUI 中的此步驟。</block>
  <block id="0ee6f6cb7abf09a921abc17a6bfbae8f" category="paragraph"><block ref="0ee6f6cb7abf09a921abc17a6bfbae8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d4fbfa1c7c19b55ec3f48a0d412d8eb" category="list-text">將 AWS ec2-user 新增至<block ref="03bc142e6422dbb9b288ad2cabee08c7" prefix=" " category="inline-code"></block>在<block ref="f4f70727dc34561dfde1a3c529b6205c" prefix=" " category="inline-code"></block>。</block>
  <block id="302635f402adc3076cbcc42191e06600" category="paragraph"><block ref="302635f402adc3076cbcc42191e06600" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6aa54e14f0875581094dc6b2192d66b3" category="list-text">新增備用 EC2 DB 執行個體並將 EC2 DB 執行個體複製到<block ref="8124579383e90243e4b06323d2b37f8d" prefix=" " category="inline-code"></block>。</block>
  <block id="8913b862455ae1ce54a54a2168995426" category="paragraph"><block ref="8913b862455ae1ce54a54a2168995426" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b1e0e523773d1a64309d849962b020d" category="admonition">克隆的 EC2 DB 執行個體應該安裝和配置類似的 Oracle 軟體堆疊。在我們的測試案例中，網格基礎架構和 Oracle 19C 已安裝並配置，但沒有建立資料庫。</block>
  <block id="0d3c38b30657980a0b2c8d695bdc04d9" category="list-text">建立針對離線/掛載完整資料庫備份自訂的備份策略。</block>
  <block id="1743393e3121c30f2e5b9635b1551cbb" category="paragraph"><block ref="1743393e3121c30f2e5b9635b1551cbb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03749905cda41a9a5af37311da788dc7" category="list-text">應用備份策略來保護備用資料庫<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡。</block>
  <block id="3eda905dcd694af160819cf35d2dc566" category="paragraph"><block ref="3eda905dcd694af160819cf35d2dc566" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b541cfd01eab70b7124c0a9281d9abf" category="list-text">按一下資料庫名稱以開啟資料庫備份頁面。選擇用於資料庫克隆的備份並點擊<block ref="ff24590464659ee8cdec688128c35f89" prefix=" " category="inline-code"></block>按鈕啟動克隆工作流程。</block>
  <block id="f71add80e312a9104b772faaa4f051e6" category="paragraph"><block ref="f71add80e312a9104b772faaa4f051e6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2fdf9c5dfda12930fd177f22620253c6" category="list-text">選擇<block ref="6d966589c645cae872f42060de0bbe70" prefix=" " category="inline-code"></block>並將克隆實例命名為 SID。</block>
  <block id="6205d2ddeb3cb8e5083d83693b9d1d91" category="paragraph"><block ref="6205d2ddeb3cb8e5083d83693b9d1d91" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2bdb6fd7703480f999a0decdea3783dc" category="list-text">選擇克隆主機，該主機託管從備用資料庫克隆的資料庫。接受資料檔、控製檔和重做日誌的預設值。克隆主機上將建立兩個 ASM 磁碟組，與備用資料庫上的磁碟組相對應。</block>
  <block id="16190d8fb6087cea1478af4b03b3f427" category="paragraph"><block ref="16190d8fb6087cea1478af4b03b3f427" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7b2116fe35be064eb0458bc516aa4d13" category="list-text">基於作業系統的身份驗證不需要資料庫憑證。將 Oracle 主目錄設定與克隆 EC2 資料庫執行個體上的配置進行比對。</block>
  <block id="879fdf55fba377046c2902c939f2601d" category="paragraph"><block ref="879fdf55fba377046c2902c939f2601d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ff5976c8af9ff4b0957fafc90bc2fdab" category="list-text">如果需要，請更改克隆資料庫參數，並指定在克隆之前運行的腳本（如果有）。</block>
  <block id="564ee64dc28a1455d7479df7ea2838ce" category="paragraph"><block ref="564ee64dc28a1455d7479df7ea2838ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="34685717b91981d7859ecf81678b5b09" category="list-text">輸入克隆後運行的SQL。在示範中，我們執行指令來關閉 dev/test/report 資料庫的資料庫存檔模式。</block>
  <block id="839c38264fbc833ac9f79e24febe9b9d" category="paragraph"><block ref="839c38264fbc833ac9f79e24febe9b9d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d197c170bbaec3c7352356cf0cbb8ac1" category="list-text">如果需要，請配置電子郵件通知。</block>
  <block id="841f3bb45aba6db13016c257c6061b35" category="paragraph"><block ref="841f3bb45aba6db13016c257c6061b35" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f8f71975bdd986583495fef78017b0f" category="list-text">查看摘要，點擊<block ref="a20ddccbb6f808ec42cd66323e6c6061" prefix=" " category="inline-code"></block>開始克隆。</block>
  <block id="82ea0cad75dea61a21c554d95a1dfa30" category="paragraph"><block ref="82ea0cad75dea61a21c554d95a1dfa30" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22d02716c7a3c135a2c329f25e9bd9ae" category="list-text">監視複製作業<block ref="d2986ac8cb6bd55892099c1ffd6b1f6f" prefix=" " category="inline-code"></block>選項卡。我們觀察到克隆一個資料庫磁碟區大小約 300GB 的資料庫大約需要 8 分鐘。</block>
  <block id="fb38173bf80529c78aee65db7a018714" category="paragraph"><block ref="fb38173bf80529c78aee65db7a018714" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39f89201f1ea425071614bb5bd7079a3" category="list-text">從SnapCenter驗證克隆資料庫，該資料庫會立即在<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>克隆操作後立即標籤。</block>
  <block id="afe1a90d817f0a3ae5e6c873fd296e14" category="paragraph"><block ref="afe1a90d817f0a3ae5e6c873fd296e14" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8bf431d7e50f6303bf40547e5d4895df" category="list-text">從克隆 EC2 執行個體查詢克隆資料庫。我們驗證了主資料庫中發生的測試事務已經遍歷到克隆資料庫。</block>
  <block id="956670247c2a1898065893fdcbce36e6" category="paragraph">這完成了從 FSx 儲存上的 Data Guard 中的備用資料庫複製和驗證新的 Oracle 資料庫，用於 DEV、TEST、REPORT 或任何其他用例。可以從 Data Guard 中的同一個備用資料庫克隆多個 Oracle 資料庫。</block>
  <block id="33b688f7c946852447f97b29aa780fe5" category="list-text">資料衛士概念與管理</block>
  <block id="8de2fc4ad1f7fa0dce48702c017a0131" category="inline-link-macro"><block ref="8de2fc4ad1f7fa0dce48702c017a0131" category="inline-link-rx"></block></block>
  <block id="f4b13dd9902b833ab09c8b2e85ee348f" category="paragraph"><block ref="f4b13dd9902b833ab09c8b2e85ee348f" category="inline-link-macro-rx"></block></block>
  <block id="ba976162adc7c0619bf3a1f2c24454f2" category="list-text">WP-7357：EC2 上的 Oracle 資料庫部署與 FSx 最佳實踐</block>
  <block id="3cdae8d978ccc9caf9657b6881250354" category="paragraph"><block ref="3cdae8d978ccc9caf9657b6881250354" category="inline-link-macro-rx"></block></block>
  <block id="8a1d7e9120e3db2795bd53b504018b4e" category="summary">本白皮書概述並驗證了 AWS 客製化 Oracle RDS 資料庫 HA 和 DR 解決方案，在多可用區部署中利用 AWS FSx 儲存服務。</block>
  <block id="0c55b956af322a2409f5dd75af116fee" category="doc">WP-7357：EC2 上的 Oracle 資料庫部署與 FSx 最佳實務介紹</block>
  <block id="b4c8c277e19db14e178b1060214b896e" category="paragraph">Allen Cao、Niyaz Mohamed、Jeffrey Steiner、 NetApp</block>
  <block id="6848412b0f30d614f7e0bcd903cac052" category="paragraph">許多關鍵任務企業 Oracle 資料庫仍託管在本地，許多企業正在尋求將這些 Oracle 資料庫遷移到公有雲。通常，這些 Oracle 資料庫以應用程式為中心，因此需要特定於使用者的配置，而許多資料庫即服務公有雲產品都缺少此功能。因此，目前的資料庫環境需要基於公有雲的 Oracle 資料庫解決方案，該解決方案由能夠滿足獨特需求的高效能、可擴展的運算和儲存服務所建構。  AWS EC2 運算執行個體和 AWS FSx 儲存服務可能是這個難題的缺失部分，您可以利用它們來建置關鍵任務 Oracle 資料庫工作負載並將其遷移到公有雲。</block>
  <block id="5645a6001c14c3cf405f621123d8a891" category="paragraph">Amazon Elastic Compute Cloud (Amazon EC2) 是一種在雲端中提供安全、可調整大小的運算容量的 Web 服務。它旨在讓企業更輕鬆地進行網路規模的雲端運算。簡單的 Amazon EC2 網路服務介面可讓您以最小的摩擦獲取和配置容量。它為您提供對運算資源的完全控制，並讓您在亞馬遜成熟的運算環境中運行。</block>
  <block id="dfffb7bb311a551928f051593da9b3c5" category="paragraph">Amazon FSx ONTAP是一種 AWS 儲存服務，它使用業界領先的NetApp ONTAP區塊和檔案存儲，可公開 NFS、SMB 和 iSCSI。借助如此強大的儲存引擎，將關鍵任務 Oracle 資料庫應用程式遷移到 AWS 變得前所未有的簡單，並且具有亞毫秒級的回應時間、數 GBps 的吞吐量以及每個資料庫實例 100,000+ IOPS。更好的是，FSx 儲存服務具有本機複製功能，可讓您輕鬆地將本機 Oracle 資料庫遷移到 AWS，或將關鍵任務 Oracle 資料庫複製到輔助 AWS 可用區以實作 HA 或 DR。</block>
  <block id="b3f95d0186b2e4989ad81f07a21d72c5" category="paragraph">本文檔的目標是提供逐步流程、程式和最佳實務指導，指導如何使用 FSx 儲存和 EC2 執行個體部署和配置 Oracle 資料庫，以提供與本機系統類似的效能。  NetApp還提供了一個自動化工具包，可以自動執行在 AWS 公有雲中部署、配置和管理 Oracle 資料庫工作負載所需的大部分任務。</block>
  <block id="eef7539c8eab25bfe5c089aab85ec418" category="paragraph">要了解有關解決方案和用例的更多信息，請觀看以下概述影片：</block>
  <block id="0df1fe5dfbca17caa87c91ffea49223a" category="inline-link-macro">使用 AWS 和 FSx ONTAP中的混合雲實現 Oracle 資料庫現代化，第 1 部分 - 使用案例和解決方案架構</block>
  <block id="adf8d1fc36b4704904a6251fde19535e" category="paragraph"><block ref="bab032e290776958656c886d774a2bf6" category="inline-link-macro-rx"></block></block>
  <block id="32800a2387c1d841d80eab97ff7205c2" category="summary">本節詳細介紹在 AWS EC2 執行個體和 FSx 儲存體上部署 Oracle 資料庫時需要考慮的因素。</block>
  <block id="c53749244d982efb6aa5653328227c2a" category="doc">Oracle 資料庫部署需要考慮的因素</block>
  <block id="96f819dcc02d1203a3923ddad366ff4b" category="paragraph">公有雲為運算和儲存提供了許多選擇，使用正確類型的運算實例和儲存引擎是資料庫部署的良好起點。您還應該選擇針對 Oracle 資料庫最佳化的運算和儲存配置。</block>
  <block id="e958329ac331abb8419551328745ce28" category="paragraph">以下部分介紹了在具有 FSx 儲存在 AWS 公有雲的 EC2 執行個體上部署 Oracle 資料庫時的主要注意事項。</block>
  <block id="af9adf45d47438d70bedeea4353827c3" category="paragraph">選擇正確的虛擬機器大小對於公有雲中關聯式資料庫的最佳效能非常重要。為了獲得更好的效能， NetApp建議使用 EC2 M5 系列執行個體進行 Oracle 部署，該執行個體針對資料庫工作負載進行了最佳化。相同的執行個體類型也用於為 AWS 的 Oracle RDS 執行個體提供支援。</block>
  <block id="1dbc89cff7796dd99cbe9338453d04d7" category="list-text">根據工作負載特性選擇正確的 vCPU 和 RAM 組合。</block>
  <block id="ff1a938ecebc5237c31b8f5d9a9b87ce" category="list-text">在虛擬機器中新增交換空間。預設的 EC2 執行個體部署不會建立交換空間，這對資料庫來說不是最佳的。</block>
  <block id="d4d5d0e2fb33dadfad4435489bd718a4" category="section-title">儲存佈局和設定</block>
  <block id="0fe994abd6c200feb672e77242fe9fcb" category="paragraph">NetApp建議採用以下儲存佈局：</block>
  <block id="c1b542506bceb69c76148851e217c49f" category="list-text">對於 NFS 存儲，建議的磁碟區佈局為三個磁碟區：一個用於 Oracle 二進位檔案；一個用於 Oracle 資料和重複控製文件；一個用於 Oracle 活動日誌、存檔日誌和控製文件。</block>
  <block id="6743466e43aeaf8b7b20152c9fe68fc6" category="paragraph"><block ref="6743466e43aeaf8b7b20152c9fe68fc6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9fc828f321000aae204feb1f0f945893" category="list-text">對於 iSCSI 存儲，建議的磁碟區佈局為三個磁碟區：一個用於 Oracle 二進位檔案；一個用於 Oracle 資料和重複控製檔案；一個用於 Oracle 活動日誌、存檔日誌和控製檔案。但是，每個資料和日誌卷理想情況下應該包含四個 LUN。  LUN 在 HA 叢集節點上達到理想平衡。</block>
  <block id="1c88d1767b50dfad069c4438e524f906" category="paragraph"><block ref="1c88d1767b50dfad069c4438e524f906" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b7810ed5b0bbb3acf153d353ac803a51" category="list-text">對於儲存 IOPS 和吞吐量，您可以選擇 FSx 儲存叢集的預先配置 IOPS 和吞吐量的閾值，並且可以在工作負載變更時隨時調整這些參數。</block>
  <block id="c5493cd0fe001da987655ad852808dc7" category="list-text">自動 IOPS 設定是每 GiB 分配的儲存容量或使用者定義的儲存 3 個 IOPS，最多 80,000 個。</block>
  <block id="6524d7ff1096fc6a10590b6d1f7163b6" category="list-text">吞吐量等級依下列方式遞增：128、256、512、1024、2045 MBps。</block>
  <block id="148ec0ba94a4cd5c2b2e0258348ffbd0" category="inline-link-macro">Amazon FSx ONTAP效能</block>
  <block id="9477b12c53864787c23fd1c4df0515bd" category="paragraph">回顧<block ref="465b6ee60bbdf3cce6d5a970a7e09c84" category="inline-link-macro-rx"></block>確定吞吐量和 IOPS 大小時的文件。</block>
  <block id="10edbbba4e4c39fc161aeac9fbb88aef" category="section-title">NFS 配置</block>
  <block id="712ca0716e43c9f3b64f0f21f9e9782b" category="paragraph">Linux 是最常見的作業系統，包含原生 NFS 功能。  Oracle 提供與 Oracle 原生整合的直接 NFS (dNFS) 用戶端。 Oracle 已支援 NFSv3 超過 20 年。所有版本的 Oracle 均支援 dNFS 和 NFSv3。所有遵循 NFSv4 標準的作業系統都支援 NFSv4。 dNFS 對 NFSv4 的支援需要 Oracle 12.1.0.2 或更高版本。 NFSv4.1 需要特定的作業系統支援。有關支援的作業系統，請查閱NetApp互通性矩陣工具 (IMT)。 dNFS 對 NFSv4.1 的支援需要 Oracle 版本 19.3.0.0 或更高版本。</block>
  <block id="a3f8d7c738bb455d9c0506663213b244" category="paragraph">使用NetApp自動化工具包的自動化 Oracle 部署會自動在 NFSv3 上設定 dNFS。</block>
  <block id="2b7570eaa12a3e472e9d0cbac6631d57" category="paragraph">其他需要考慮的因素：</block>
  <block id="6841f6ce9d9a2af93222223df564ca34" category="list-text">TCP 插槽表相當於 NFS 中的主機匯流排適配器 (HBA) 佇列深度。這些表控制著任何時候可以完成的 NFS 操作的數量。預設值通常為 16，這對於最佳效能來說太低了。相反的問題出現在較新的 Linux 核心上，它可以自動將 TCP 槽表限制增加到使 NFS 伺服器充滿請求的水平。</block>
  <block id="5a749fcdd97cee211c5fea00babe8691" category="paragraph">為了獲得最佳效能並防止效能問題，請將控制 TCP 槽表的核心參數調整為 128。</block>
  <block id="dcd7ebfa96f217f8d20c58a185a48531" category="list-text">下表提供了針對 Linux NFSv3（單一實例）建議的 NFS 掛載選項。</block>
  <block id="5cf56cd2517ddd9e0ed46c42e2fe4ee7" category="paragraph"><block ref="5cf56cd2517ddd9e0ed46c42e2fe4ee7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5088352a7b028bc873f55b1b666d7cd8" category="admonition">在使用 dNFS 之前，請先驗證是否安裝了 Oracle Doc 1495104.1 中所述的補丁。 NetApp針對 NFSv3 和 NFSv4 的支援矩陣不包含特定的作業系統。所有遵循 RFC 的作業系統均受支援。在線上IMT中搜尋 NFSv3 或 NFSv4 支援時，請不要選擇特定的作業系統，因為不會顯示任何符合項目。所有作業系統均受到通用策略的隱含支援。</block>
  <block id="2fe1fc26875d6d38f4b15a3a03d498fb" category="paragraph">如解決方案架構所示，HA 建立在儲存層級複製之上。因此，Oracle 的啟動和可用性取決於運算和儲存的啟動和復原速度。請參考以下關鍵因素：</block>
  <block id="137bc4c57a9561d086601728a3db1a90" category="list-text">準備好備用運算實例，並透過對兩個主機進行 Ansible 並行更新使其與主運算實例同步。</block>
  <block id="d653e9032c9904901af96f496db98a3e" category="list-text">從主伺服器複製二進位磁碟區以備用，這樣您就不需要在最後一刻安裝 Oracle 並弄清楚需要安裝和修補什麼。</block>
  <block id="77991416cd2e0bfc66a77d32e3fbb45a" category="list-text">複製頻率決定了 Oracle 資料庫復原服務的速度。複製頻率和儲存消耗之間存在權衡。</block>
  <block id="0797ee9bca14d1064492a93ac7cc7fa1" category="list-text">利用自動化技術實現快速恢復和切換到待機狀態，並且不會出現人為錯誤。  NetApp為此提供了自動化工具包。</block>
  <block id="37e3bd7a04a12d6d16389a7dc22d774d" category="summary">該解決方案提供了快速恢復和克隆部署到 AWS EC2 計算實例的 Oracle VLDB 的概述和詳細信息，該實例在 FSx ONTAP上透過 NFS 掛載，以暫存備用資料檔案副本，並透過 RMAN 不斷進行增量合併。</block>
  <block id="64f97bbd42c9b6469781d976c191546b" category="doc">TR-4973：在 AWS FSx ONTAP上使用增量合併快速恢復和克隆 Oracle VLDB</block>
  <block id="90b61454dbd3963570fab7ac262d84e2" category="paragraph">該解決方案提供了快速恢復和克隆部署到 AWS EC2 計算實例的 Oracle VLDB 的概述和詳細信息，該實例在 FSx ONTAP上透過 NFS 掛載，以暫存備用資料檔案副本，並透過 RMAN 不斷進行增量合併。</block>
  <block id="a84ee4fe6800b14e1fd53326196750bc" category="paragraph">使用 Oracle 復原管理器 (RMAN) 備份工具還原 Oracle 中的超大型資料庫 (VLDB) 可能是一項極具挑戰性的任務。發生故障時從備份媒體還原資料庫的過程可能非常耗時，從而延遲資料庫復原並可能嚴重影響您的服務等級協定 (SLA)。但是，從 10g 版本開始，Oracle 引入了 RMAN 功能，允許使用者在位於 DB 伺服器主機上的附加磁碟儲存上建立 Oracle 資料庫資料檔案的分階段映像副本。這些影像副本可以使用 RMAN 每天進行增量更新。如果發生故障，資料庫管理員 (DBA) 可以迅速將 Oracle 資料庫從故障媒體切換到映像副本，從而無需進行完整的資料庫媒體還原。儘管所需的資料庫儲存量增加了一倍，但其結果是 SLA 得到了極大改善。</block>
  <block id="177658bcb07f8fd6c738b1a97efaf173" category="paragraph">如果您熱衷於 VLDB 的 SLA 並考慮將 Oracle 資料庫遷移到 AWS 等公有雲，則可以使用 AWS FSx ONTAP等資源設定類似的資料庫保護結構來暫存備用資料庫映像副本。在本文檔中，我們示範如何從 AWS FSx ONTAP配置和匯出 NFS 檔案系統，並將其安裝在 Oracle 資料庫伺服器上，以便在主儲存發生故障時暫存備用資料庫副本以便快速復原。</block>
  <block id="05b4b318195ab79f80fbe6580b2e69e1" category="paragraph">更好的是，我們還展示瞭如何利用NetApp FlexClone為其他用例建立相同暫存 NFS 檔案系統的副本，例如使用相同的備用資料庫映像副本建立開發/測試 Oracle 環境，而無需額外的儲存投資。</block>
  <block id="84ab5c2cbea62bfae267ddfcc8e16749" category="list-text">透過 RMAN 在 AWS FSx ONTAP儲存的 NFS 掛載點上進行 Oracle VLDB 映像複製增量合併。</block>
  <block id="805ef53e3765a75fb2ee210066e9298e" category="list-text">發生故障時，透過切換到 FSx ONTAP儲存上的資料庫映像副本來快速還原 Oracle VLDB。</block>
  <block id="3b5601d0dfed112b4d701ea7222195d0" category="list-text">克隆 FSx ONTAP NFS 檔案系統卷，儲存 Oracle VLDB 映像副本，用於為其他用例建立另一個資料庫實例。</block>
  <block id="2513056d37fad5d51b1b7e5067126d74" category="list-text">一位 DBA 透過 AWS 中的 RMAN 設定 Oracle VLDB 映像複製增量合併，以便更快地復原資料庫。</block>
  <block id="ce3231fc55ffa9da7d06a7bf71808aaf" category="list-text">在 AWS 公有雲中測試 Oracle 工作負載的資料庫解決方案架構師。</block>
  <block id="1fd08bfacb23a868822b5aa42dc89a45" category="list-text">管理部署到 AWS FSx ONTAP儲存的 Oracle 資料庫的儲存管理員。</block>
  <block id="0ba3984693a0095424864d883f786d47" category="list-text">希望在 AWS FSx/EC2 環境中建立 Oracle 資料庫的應用程式擁有者。</block>
  <block id="cdd33b3dc82dd5a7057c39b49fafec92" category="paragraph">此解決方案的測試和驗證是在可能與最終部署環境不符的 AWS FSx ONTAP和 EC2 環境中進行的。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="71c2080d0a74e10a7ba8804b62593571" category="inline-image-macro">此圖提供了使用 FSx ONTAP在 AWS 公有雲中實作 Oracle VLDB 增量合併的詳細圖片。</block>
  <block id="ccab4354ca50092ac62d0c30ac522e50" category="paragraph"><block ref="ccab4354ca50092ac62d0c30ac522e50" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0fcdacbce30d770260160f025dfa97ef" category="cell">兩個 EC2 T2 xlarge EC2 實例，一個作為主資料庫伺服器，另一個作為克隆資料庫伺服器</block>
  <block id="b9d28943555d6006f17f4fe05f964039" category="list-text">*用於 RMAN 增量合併的 Oracle VLDB 儲存佈局。 *在我們的測試和驗證中，用於 Oracle 增量備份和合併的 NFS 磁碟區是從單一 FSx 檔案系統分配的，該系統具有 4GBps 吞吐量、160,000 原始 SSD IOPS 和 192TiB 容量限制。對於超過閾值的部署，可以將多個 FSx 檔案系統與多個 NFS 掛載點並行連接以提供更高的容量。</block>
  <block id="9d662dbb0e0bb83274ad069971f2189b" category="list-text">*使用 RMAN 增量合併實作 Oracle 可恢復性。 * RMAN 增量備份和合併通常會根據您的 RTO 和 RPO 目標以使用者定義的頻率執行。如果主資料儲存和/或歸檔日誌完全遺失，則可能會發生資料遺失。 Oracle 資料庫可以還原到 FSx 資料庫備份映像副本提供的最後一個增量備份。為了盡量減少資料遺失，可以在 FSx NFS 掛載點上設定 Oracle 閃回復原區，並將存檔日誌與資料庫映像副本一起備份到 FSx NFS 掛載點。</block>
  <block id="6848d8d3126dc1284b4005ec1fce94d8" category="list-text">*在 FSx NFS 檔案系統上執行 Oracle VLDB。 *與用於資料庫備份的其他大容量存儲不同，AWS FSx ONTAP是一種支援雲端的生產級存儲，可提供高水準的效能和儲存效率。一旦 Oracle VLDB 從主儲存切換到 FSx ONTAP NFS 檔案系統上的映像副本，資料庫效能就可以保持在高水平，同時解決主儲存故障。您可以放心，用戶應用程式體驗不會因主儲存故障而受到影響。</block>
  <block id="ec7cebb9325ac3cb6f40aefad20e03bd" category="list-text">* 用於其他用例的 NFS 磁碟區的FlexClone Oracle VLDB 映像副本。 * AWS FSx ONTAP FlexClone提供可寫入的相同 NFS 資料磁碟區的共用副本。因此，它們可以用於許多其他用例，同時即使在 Oracle 資料庫切換時仍能保持暫存 Oracle VLDB 映像副本的完整性。透過大幅減少 VLDB 儲存空間，這可以節省大量的儲存成本。  NetApp建議在資料庫從主儲存切換到資料庫映像副本時盡量減少FlexClone活動，以將 Oracle 效能保持在高水準。</block>
  <block id="e02cfd91d47eca501c65adf66254d387" category="list-text">EC2 運算執行個體。在這些測試和驗證中，我們使用 AWS EC2 t2.xlarge 執行個體作為 Oracle 資料庫運算執行個體。 NetApp建議在生產部署中使用 M5 類型的 EC2 執行個體作為 Oracle 的運算實例，因為它針對資料庫工作負載進行了最佳化。您需要根據實際工作負載需求，適當調整 EC2 執行個體的 vCPU 數量和 RAM 容量。</block>
  <block id="11a64b78983fb952ba99933c98fc56df" category="list-text">*FSx 儲存 HA 叢集單區域或多區域部署。 *在這些測試和驗證中，我們在單一 AWS 可用區中部署了一個 FSx HA 叢集。對於生產部署， NetApp建議在兩個不同的可用區部署 FSx HA 對。 FSx HA 叢集始終在 HA 對中配置，該 HA 對在主動-被動檔案系統中同步鏡像，以提供儲存級冗餘。多區域部署進一步增強了單一 AWS 區域發生故障時的高可用性。</block>
  <block id="dbb60fc24045befe2579b82399376e53" category="list-text">*dNFS 配置。 * dNFS 內建於 Oracle 核心中，並且已知當 Oracle 部署到 NFS 儲存時可顯著提高 Oracle 資料庫效能。 dNFS 打包到 Oracle 二進位檔案中，但預設未開啟。對於 NFS 上的任何 Oracle 資料庫部署，都應該啟用它。對於 VLDB 的多個 FSx 檔案系統部署，應正確配置到不同 FSx NFS 檔案系統的 dNFS 多路徑。</block>
  <block id="674b2923f5f187bec3e7e8410e0b215b" category="paragraph">假設您已經在 VPC 內的 AWS EC2 環境中部署了 Oracle VLDB。如果您需要在 AWS 上部署 Oracle 的協助，請參考以下技術報告尋求協助。</block>
  <block id="dac14712639b383d9fbc2ddd7e8fa676" category="paragraph">您的 Oracle VLDB 可以在 FSx ONTAP或 AWS EC2 生態系統中的任何其他儲存體上運作。以下部分提供了設定 RMAN 增量合併到 Oracle VLDB 映像副本的逐步部署過程，該副本暫存在 AWS FSx ONTAP儲存的 NFS 掛載中。</block>
  <block id="2cb106b524fea2beb3ee19372f04427b" category="list-text">從 AWS EC2 控制台，您必須部署兩個 EC2 Linux 實例，一個作為主 Oracle DB 伺服器，另一個作為可選的備用克隆目標 DB 伺服器。有關環境設定的更多詳細信息，請參閱上一節中的架構圖。還請查看<block ref="b75ecbbec453f67f58d497ccd97a8075" category="inline-link-macro-rx"></block>了解更多。</block>
  <block id="4eba588de49e83bc4190ad26a66f351a" category="list-text">從 AWS EC2 控制台部署Amazon FSx ONTAP儲存 HA 叢集來託管儲存 Oracle 資料庫備用映像副本的 NFS 磁碟區。如果您不熟悉 FSx 儲存的部署，請參閱文檔<block ref="818df05ad3ddda222f02b6b0e29bbd61" category="inline-link-macro-rx"></block>以獲得逐步說明。</block>
  <block id="669ff3f2ba7dca6171b6cc4738349f3f" category="section-title">預置並匯出要掛載到 EC2 DB 執行個體主機的 NFS 卷</block>
  <block id="beef8e24f1fb09f50fd25f29a0576680" category="paragraph">在此示範中，我們將展示如何透過 FSx 集群管理 IP 以 fsxadmin 使用者身分透過 ssh 登入 FSx 集群，從命令列配置 NFS 磁碟區。或者，也可以使用 AWS FSx 控制台指派磁碟區。如果設定了多個 FSx 檔案系統來適應資料庫的大小，請在其他 FSx 檔案系統上重複這些過程。</block>
  <block id="2a1085209859c9d5c2d99b39ef5f9808" category="list-text">首先，以 fsxadmin 使用者身分透過 SSH 登入 FSx 集群，透過 CLI 設定 NFS 磁碟區。變更為您的 FSx 叢集管理 IP 位址，可從 AWS FSx ONTAP UI 控制台擷取。</block>
  <block id="09d6e7935025f34dae85044f7e4870bf" category="list-text">建立與主儲存大小相同的 NFS 卷，用於儲存主 Oracle VLDB 資料庫資料檔案映像副本。</block>
  <block id="7df4f92cb03e6715a6c7d330de46b589" category="list-text">或者，也可以從 AWS FSx 控制台 UI 設定卷，選項如下：儲存效率<block ref="00d23a76e43b46dae9ec7aa9dcbebb32" prefix=" " category="inline-code"></block>，安全風格<block ref="6ec1bd1ea6a5d67a63b20c8f6172bddd" prefix=" " category="inline-code"></block>、快照策略<block ref="6adf97f83acf6453d4a6a4b1070f3754" prefix=" " category="inline-code"></block>和儲存分層<block ref="e564cced6db6df25023e6429cf11a291" prefix=" " category="inline-code"></block>如下圖所示。</block>
  <block id="80c3a955e402f101ca8fac5c1d20ad52" category="paragraph"><block ref="80c3a955e402f101ca8fac5c1d20ad52" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a33ce44212488cbdb886d0cb26238cd8" category="list-text">為 Oracle 資料庫建立自訂快照策略，具有每日排程和 30 天保留期。您應該調整策略以滿足您在快照頻率和保留視窗方面的特定需求。</block>
  <block id="f50e19cf713434ce45c0e967a937c4b1" category="paragraph">將政策套用至已設定的 NFS 磁碟區以進行 RMAN 增量備份和合併。</block>
  <block id="4c4801c905895fc73c76eb48803356bd" category="list-text">以 ec2-user 身分登入 EC2 執行個體並建立目錄 /nfsfsxn。為其他 FSx 檔案系統建立其他掛載點目錄。</block>
  <block id="96da60d19f53d464b46b18235e488b0c" category="list-text">將 FSx ONTAP NFS 磁碟區掛載到 EC2 DB 執行個體主機。變更為您的 FSx 虛擬伺服器 NFS lif 位址。可以從 FSx ONTAP UI 控制台檢索 NFS lif 位址。</block>
  <block id="41fbd60dc26462d8127dea9ccd97bc7c" category="list-text">將掛載點所有權更改為 oracle:oisntall，根據需要更改為您的 oracle 使用者名稱和主要群組。</block>
  <block id="e672188e115cfc49668faf09236fa9a3" category="section-title">在 FSx 上設定 Oracle RMAN 增量合併到映像副本</block>
  <block id="ab8554776d6b4fb55fd0e03cf7f1cbd5" category="paragraph">RMAN 增量合併在每個增量備份/合併間隔持續更新暫存資料庫資料檔案映像副本。資料庫備份的映像副本將與您執行增量備份/合併的頻率一樣最新。因此，在決定 RMAN 增量備份和合併的頻率時，請考慮資料庫效能、RTO 和 RPO 目標。</block>
  <block id="e5ac82720d85625fdd4172bd3616e3c3" category="list-text">以 oracle 使用者身分登入主資料庫伺服器 EC2 執行個體</block>
  <block id="8d0e6d4de61925d1916712bf22df2fb6" category="list-text">在掛載點 /nfsfsxn 下建立一個 oracopy 目錄，用於儲存 Oracle 資料檔案映像副本和用於 Oracle 閃回復原區的 archlog 目錄。</block>
  <block id="c7cc2b068b84bc607885aa3b7959dfc5" category="list-text">透過 sqlplus 登入 Oracle 資料庫，啟用區塊變更追蹤以加快增量備份速度，並將 Oracle 快閃記憶體復原區變更為 FSx ONTAP掛載（如果它目前位於主儲存體上）。這允許將 RMAN 預設控製檔/spfile 自動備份和存檔日誌備份到 FSx ONTAP NFS 掛載以進行還原。</block>
  <block id="92a7748d0f82560bbce2ab900cd1955b" category="paragraph">在 sqlplus 提示字元下，執行以下命令。</block>
  <block id="4dd8e34c47ee1899b1fd445ff9555012" category="list-text">建立 RMAN 備份和增量合併腳本。該腳本為並行 RMAN 備份和合併分配多個通道。第一次執行將產生初始的完整基線影像副本。在完整運行過程中，它首先清除保留視窗之外的過時備份，以保持暫存區清潔。然後它在合併和備份之前切換當前日誌檔案。增量備份在合併之後進行，因此資料庫映像副本落後於目前資料庫狀態備份/合併週期。可以根據使用者的喜好逆轉合併和備份的順序，以便更快地恢復。 RMAN 腳本可以整合到一個簡單的 shell 腳本中，從主 DB 伺服器上的 crontab 執行。確保 RMAN 設定中的控製檔自動備份處於開啟狀態。</block>
  <block id="ae93d326cc9f712fe006ea475309937c" category="list-text">在 EC2 DB 伺服器上，以 oracle 使用者身分本地登入 RMAN，可以使用或不使用 RMAN 目錄。在此示範中，我們沒有連接到 RMAN 目錄。</block>
  <block id="ac32c637aa72dbf6f583c6230b41da8e" category="list-text">從 RMAN 提示字元執行腳本。第一次執行會建立基準資料庫映像副本，後續執行則會逐步合併和更新基準映像副本。以下是如何執行腳本以及典型的輸出。設定通道數以符合主機上的 CPU 核心。</block>
  <block id="e4c4b8650bec8cf96029a44dde1880ef" category="list-text">列出備份後的資料庫映像副本，以觀察在 FSx ONTAP NFS 掛載點中是否建立了資料庫映像副本。</block>
  <block id="c924bb54c35d27877a31088ac19cfa72" category="list-text">從 Oracle RMAN 命令提示字元報告模式，觀察目前活動資料庫資料檔案位於主儲存 ASM +DATA 磁碟組中。</block>
  <block id="3ce3b6eb52bdc641409f7139da0754cb" category="list-text">驗證來自 OS NFS 掛載點的資料庫映像副本。</block>
  <block id="7d929a2c11ebdbe1a109452e9ed6387a" category="paragraph">這樣就完成了Oracle資料庫備用映像副本備份合併的設定。</block>
  <block id="4a2b45de7eb73f732fa6bff62fc81d22" category="section-title">將 Oracle DB 切換到映像副本以實現快速恢復</block>
  <block id="e4524be5d2f6b10f07de14a0c1ab6d71" category="paragraph">如果因主儲存問題（例如資料遺失或損壞）而發生故障，則可以將資料庫快速切換到 FSx ONTAP NFS 掛載上的映像副本，並還原到目前狀態，而無需還原資料庫。消除媒體復原可大幅加快 VLDB 的資料庫復原速度。此用例假設資料庫主機執行個體完好無損，且資料庫控製檔案、存檔和目前日誌均可用於復原。</block>
  <block id="537cc866e4f73e1c941f5c4d2ddab8b2" category="list-text">以 oracle 使用者登入 EC2 DB 伺服器主機並在切換之前建立測試表。</block>
  <block id="61bbc132a3f6fe227d32c6a35bc77915" category="list-text">透過關閉中止資料庫來模擬故障，然後在掛載階段啟動 oracle。</block>
  <block id="c4ab260ce247b7761c38125aef5a7e31" category="list-text">以 oracle 使用者身份，透過 RMAN 連接到 Oracle 資料庫切換要複製的資料庫。</block>
  <block id="3ea66d969bd94f4cf208dd0bf63840e1" category="list-text">還原並開啟資料庫，使其從上次增量備份更新到目前狀態。</block>
  <block id="271cb3a5612f55b3fb8130a4467d73ec" category="list-text">復原後從 sqlplus 檢查資料庫結構，觀察除控制、臨時和目前日誌檔案之外的所有資料庫資料檔案現在都已切換到 FSx ONTAP NFS 檔案系統上的副本。</block>
  <block id="5466bef4632a6a1715d3679bc62c300d" category="list-text">從 SQL Plus 中，檢查在切換到複製之前插入的測試表的內容</block>
  <block id="dd4adbd87c36bf460c0ab4343599cf3c" category="list-text">您可以在 FSx NFS 掛載中長時間執行 Oracle 資料庫而不會影響效能，因為 FSx ONTAP是可提供高效能的冗餘生產級儲存。當主儲存問題解決後，您可以透過逆轉增量備份合併過程，以最少的停機時間恢復原狀。</block>
  <block id="f433e16f47f57d938354f88fa762d7a7" category="section-title">Oracle 資料庫從映像副本還原到不同的 EC2 DB 執行個體主機</block>
  <block id="5010c026248fa8bd74f134341eba6c23" category="paragraph">當主儲存和 EC2 DB 執行個體主機都遺失時，無法從原始伺服器進行復原。幸運的是，您在冗餘 FSx ONTAP NFS 檔案系統上仍然有一個 Oracle 資料庫備份映像副本。您可以快速配置另一個相同的 EC2 DB 實例，並透過 NFS 輕鬆地將 VLDB 的映像副本安裝到新的 EC2 DB 主機以執行復原。在本節中，我們將示範執行此操作的逐步過程。</block>
  <block id="4ffffb6fe23c2e148c9e989b623bc6b2" category="list-text">在我們先前建立的測試表中插入一行，用於 Oracle 資料庫還原到備用主機驗證。</block>
  <block id="3f9903e7d4a9861da549de0dae1ea364" category="list-text">以 oracle 使用者身分執行 RMAN 增量備份並合併以將交易刷新到 FSx ONTAP NFS 掛載上的備份集。</block>
  <block id="ca8b6e06f9a38563ab902a368af242c6" category="list-text">關閉主 EC2 DB 執行個體主機以模擬儲存和 DB 伺服器主機的完全故障。</block>
  <block id="6a82ba490c8bb40b71afe1f76748f174" category="list-text">透過 AWS EC2 控制台為具有相同作業系統和版本的新 EC2 DB 執行個體主機 ora_02 提供權限。使用與主 EC2 DB 伺服器主機相同的補丁配置 OS 內核，Oracle 預先安裝 RPM，並為主機新增交換空間。使用僅軟體選項安裝與主 EC2 DB 伺服器主機中相同版本和修補程式的 Oracle。這些任務可以透過NetApp自動化工具包自動執行，可從以下連結取得。</block>
  <block id="484b6792dca4a6754db8dc27e6c6ba0d" category="inline-link-macro">na_oracle19c_deploy</block>
  <block id="c14496f2e8544d68bddfd689e9f4e75e" category="paragraph">工具包：<block ref="f2b9e8cd57c74518bbd4e9f055c1e730" category="inline-link-macro-rx"></block>文件:<block ref="d250d995b4823fc5fd70363256bffcd1" category="inline-link-macro-rx"></block></block>
  <block id="9ffde89a6ba50c3dce0259571ffcf8c8" category="list-text">配置與主 EC2 DB 執行個體主機 ora_01 類似的 oracle 環境，例如 oratab、oraInst.loc 和 oracle 使用者 .bash_profile。將這些檔案備份到 FSx ONTAP NFS 掛載點是一種很好的做法。</block>
  <block id="cf6e69c6bddf85bc301fcc9cb6962838" category="list-text">FSx ONTAP NFS 掛載上的 Oracle 資料庫備份映像副本儲存在跨 AWS 可用區的 FSx 叢集上，以實現冗餘、高可用性和高效能。只要網路可達，NFS 檔案系統就可以輕鬆安裝到新伺服器上。以下步驟將 Oracle VLDB 備份的映像副本掛載到新配置的 EC2 DB 執行個體主機以進行還原。</block>
  <block id="22e76ff31f397dc2b31e0c2a97aafc91" category="paragraph">以 ec2-user 身分建立掛載點。</block>
  <block id="aa0a89a579500af6cf1c8d39a6150685" category="paragraph">以 ec2-user 身分掛載儲存 Oracle VLDB 備份映像副本的 NFS 磁碟區。</block>
  <block id="e8d8e243e8bde4cf29fbd7f798a6baf1" category="list-text">驗證 FSx ONTAP NFS 掛載點上的 Oracle 資料庫備份映像副本。</block>
  <block id="d847bc1c604cd81ae6806101788d72ad" category="list-text">驗證 FSx ONTAP NFS 掛載上可用的 Oracle 存檔日誌以進行恢復，並記下最後一個日誌檔案日誌序號。在這種情況下，它是 175。我們的復原點最多為日誌序號 176。</block>
  <block id="15766642bf6adac1b2dcc3fe7efe97db" category="list-text">以 oracle 使用者身份，將 ORACLE_HOME 變數設定為新 EC2 實例 DB 主機 ora_02 上的目前 Oracle 安裝，將 ORACLE_SID 設定為主 Oracle 實例 SID。在本例中，它是 db1。</block>
  <block id="d89d6da26b586b89b6b9a1aa47721936" category="list-text">以 oracle 使用者身份，在 $ORACLE_HOME/dbs 目錄中建立一個通用 Oracle 初始化文件，並配置適當的管理目錄。最重要的是，擁有 Oracle<block ref="54205e08f5455705eb7a595f7e4f620f" prefix=" " category="inline-code"></block>指向主 Oracle VLDB 實例中定義的 FSx ONTAP NFS 掛載路徑。<block ref="54205e08f5455705eb7a595f7e4f620f" prefix=" " category="inline-code"></block>配置在章節中進行了演示<block ref="e672188e115cfc49668faf09236fa9a3" prefix=" " category="inline-code"></block>。將 Oracle 控制檔設定為 FSx ONTAP NFS 檔案系統。</block>
  <block id="6951e3b7844ae5d3e60eb5dcb338c299" category="paragraph">使用以下範例條目：</block>
  <block id="a3d440ae8cc0248159d37338aaf28ec4" category="paragraph">如果存在差異，則應使用從主 Oracle DB 伺服器還原的備份初始化檔案取代上述初始化檔案。</block>
  <block id="6cdcdb33b7ec2edec91d323d0fe81c36" category="list-text">以 oracle 使用者身分啟動 RMAN 以在新的 EC2 DB 執行個體主機上執行 Oracle 復原。</block>
  <block id="69c8d3164b4eabc17a7068af76e859ab" category="list-text">設定資料庫ID。可以從 FSx NFS 掛載點上的映像副本的 Oracle 檔案名稱中檢索資料庫 ID。</block>
  <block id="4929814f4c8b867309967d003f3472fb" category="list-text">從自動備份還原控製檔。如果啟用了 Oracle 控製檔案和 spfile 自動備份，則它們會在每個增量備份和合併週期中備份。如果有多個副本可用，將還原最新的備份。</block>
  <block id="cb4aafdbf8cfce9ea979b084999b9458" category="list-text">將初始化檔案從 spfile 還原到 /tmp 資料夾，以便稍後更新參數檔案以與主資料庫執行個體相符。</block>
  <block id="39f6eca6a7de81a70cddffc68c8e17e0" category="list-text">掛載控制檔並驗證資料庫備份映像副本。</block>
  <block id="b036aee1d02945292a171a824ce2cc7f" category="list-text">將資料庫切換到複製以運行恢復，而無需資料庫還原。</block>
  <block id="74f753e2cf1db0c619e10ea98cdba3a4" category="list-text">執行 Oracle 復原直到閃回復原區中最後一個可用的存檔日誌。</block>
  <block id="b32650e2f9aad58631cbaa769519a580" category="admonition">為了更快地恢復，請使用 recovery_parallelism 參數啟用並行會話或在資料庫恢復的恢復命令中指定並行度：<block ref="72ba82e38f6375ed705cba8b43d4cf0f" prefix=" " category="inline-code"></block> 。一般來說，並行度應該等於主機上的 CPU 核心數。</block>
  <block id="977b95efac611dc3eeaed06aba204c87" category="list-text">退出 RMAN，透過 sqlplus 以 oracle 使用者登入 Oracle，以在不完全恢復後開啟資料庫並重設日誌。</block>
  <block id="6ceae78bd89e5df86bc8e81f7407b7de" category="list-text">驗證資料庫是否已還原到新主機，該主機具有我們在主資料庫故障之前插入的行。</block>
  <block id="e2f16f903230132f70121566f6a55067" category="list-text">其他恢復後任務</block>
  <block id="086536bbb7f1532894da57cebfcac7b8" category="paragraph">這完成了從 FSx ONTAP NFS 檔案系統上的備份映像副本到新的 EC2 DB 執行個體主機的 Oracle VLDB 資料庫復原。</block>
  <block id="4737b996f5816f2a4f5834d13933c08f" category="section-title">複製 Oracle 備用映像副本以供其他用例使用</block>
  <block id="b316f3e1185d0474dbb0d60722fed440" category="paragraph">使用 AWS FSx ONTAP暫存 Oracle VLDB 映像副本的另一個好處是，它可以透過 FlexCloned 實現許多其他用途，而只需最少的額外儲存投資。在以下用例中，我們示範如何為其他 Oracle 用例（例如 DEV、UAT 等）在 FSx ONTAP上快照和複製暫存 NFS 磁碟區。</block>
  <block id="53e8ce069d201591aa4267856420d737" category="list-text">我們首先將一行插入到我們之前建立的同一個測試表中。</block>
  <block id="9a10cae3a2084b172991773f39bcaa66" category="list-text">進行 RMAN 備份並合併至 FSx ONTAP資料庫映像副本，以便在 FSx NFS 安裝上的備份集中擷取事務，但在複製資料庫復原之前不會合併到副本中。</block>
  <block id="3f29a9686f355189b274a638b5f7b4e2" category="list-text">以 fsxadmin 使用者身分透過 ssh 登入 FSx 集群，觀察由排程備份策略 - oracle 建立的快照，並拍攝一次性快照，以便它包含我們在步驟 1 中提交的交易。</block>
  <block id="f47ed0566abed1014329d477596692e1" category="list-text">從一次性快照克隆，用於在備用 EC2 Oracle 主機上建立新的 DB1 克隆執行個體。您可以選擇從磁碟區 ora_01_copy 的任何可用每日快照中進行複製。</block>
  <block id="d674010d79c4ca8b1548eb14dc15db19" category="list-text">關閉克隆卷的快照策略，因為它繼承了父卷快照策略，除非您想保護克隆卷，否則不要管它。</block>
  <block id="2d5a0399afe0ebbc20ccc537e1691ac1" category="list-text">登入新的 EC2 Linux 執行個體，預先安裝了與主 Oracle EC2 執行個體相同版本和修補程式層級的 Oracle 軟體，並掛載複製的磁碟區。</block>
  <block id="1955f680df8fadf63d4bd9e5ce9ddf0d" category="list-text">驗證 FSx NFS 掛載上的資料庫增量備份集、映像副本和可用的存檔日誌。</block>
  <block id="b4f1ff50bc44cf0fa23d91e3daaecc7a" category="list-text">現在的恢復過程類似於故障後恢復到新的 EC2 DB 實例的先前用例 - 設定 oracle 環境（oratab、$ORACLE_HOME、$ORACLE_SID）以匹配主生產實例，建立一個包含 db_recovery_file_dest_size 和 db_recovery_file_dest 的初始化檔，指向 FS NxFS 上的綜合目錄上的掛號。然後，啟動 RMAN 來運行恢復。以下是命令步驟和輸出。</block>
  <block id="31ef8f0e18e31ab3c319011fa3085595" category="list-text">使用 Oracle nid 公用程式重新命名複製的資料庫執行個體並變更資料庫 ID。資料庫執行個體狀態需要處於<block ref="19822b1b15d9eefc54c07ab49f87b100" prefix=" " category="inline-code"></block>執行命令。</block>
  <block id="deae90bf8a8075e066b36ab46839b972" category="list-text">在 oratab、init 檔案中將 Oracle 資料庫環境配置變更為新的資料庫名稱或實例 ID，並建立與新執行個體 ID 相符的必要管理目錄。然後，使用 resetlogs 選項啟動實例。</block>
  <block id="539484c3a56c32c91eebd8b6c6dd0c01" category="paragraph">這將完成從 FSx NFS 安裝上的暫存資料庫副本複製新的 Oracle 實例，以用於 DEV、UAT 或任何其他用例。可以從同一個暫存映像副本複製多個 Oracle 實例。</block>
  <block id="b122ab6bc46093e4e498238b2da87899" category="admonition">如果遇到錯誤<block ref="db9915ff14e5c2a62fbc300de8219575" prefix=" " category="inline-code"></block>當切換資料庫進行複製時，檢查與主生產資料庫相符的資料庫化身。如果需要，請使用 RMAN 命令重置化身以與主化身匹配<block ref="762ac7c31f911d73b6a11960c393c6ad" prefix=" " category="inline-code"></block>。</block>
  <block id="420087855d0829aebf7985f8b037c0f5" category="list-text">RMAN：合併增量備份策略（文件 ID 745798.1）</block>
  <block id="cebc42ddf70311bb702156ffc928e04f" category="inline-link-macro"><block ref="cebc42ddf70311bb702156ffc928e04f" category="inline-link-rx"></block></block>
  <block id="fb535d4ffc04924a6c6853e4c44cdf5e" category="paragraph"><block ref="fb535d4ffc04924a6c6853e4c44cdf5e" category="inline-link-macro-rx"></block></block>
  <block id="0c10dedf45d356e3143692b00bf17a78" category="list-text">RMAN 備份與還原使用者指南</block>
  <block id="067d09ddb20edd1de533097e38987388" category="inline-link-macro"><block ref="067d09ddb20edd1de533097e38987388" category="inline-link-rx"></block></block>
  <block id="475010ac362493ac8aa5ebd15ee454e5" category="paragraph"><block ref="475010ac362493ac8aa5ebd15ee454e5" category="inline-link-macro-rx"></block></block>
  <block id="86d943d0743178f4b51317bf89a99ff7" category="summary">此解決方案提供了在 AWS FSx ONTAP儲存和 EC2 運算執行個體中使用 iSCSI 協定進行 Oracle 資料庫部署和保護的概述和詳細信息，以及在獨立 ReStart 中使用 asm 作為磁碟區管理器配置的 Oracle 資料庫。</block>
  <block id="7571a50993544bc3577cd4ec421ff507" category="paragraph">此解決方案提供了在 AWS FSx ONTAP儲存和 EC2 運算執行個體中使用 iSCSI 協定進行 Oracle 資料庫部署和保護的概述和詳細信息，以及在獨立 ReStart 中使用 asm 作為磁碟區管理器配置的 Oracle 資料庫。</block>
  <block id="7a84a73fe9b54c9478dfc0e58c918688" category="paragraph">ASM（自動儲存管理）是一種受歡迎的 Oracle 儲存磁碟區管理器，在許多 Oracle 安裝中都有使用。它也是Oracle推薦的儲存管理解決方案。它為傳統的捲管理器和檔案系統提供了替代方案。自 Oracle 11g 版本以來，ASM 與網格基礎架構打包在一起，而不是與資料庫打包在一起。因此，為了在沒有 RAC 的情況下利用 Oracle ASM 進行儲存管理，必須在獨立伺服器中安裝 Oracle 網格基礎架構（也稱為 Oracle Restart）。這樣做無疑會增加 Oracle 資料庫部署的複雜度。但是，顧名思義，當 Oracle 以重新啟動模式部署時，失敗的 Oracle 服務會由網格基礎架構自動重新啟動或在主機重新啟動後無需使用者乾預，從而提供一定程度的高可用性或 HA 功能。</block>
  <block id="d88a6b63e8fd515026fecb9fdd301a21" category="paragraph">在本文檔中，我們示範如何在具有 EC2 運算執行個體的Amazon FSx ONTAP儲存環境中使用 iSCSI 協定和 Oracle ASM 部署 Oracle 資料庫。我們也示範如何透過NetApp BlueXP控制台使用NetApp SnapCenter服務來備份、還原和複製 Oracle 資料庫，以用於開發/測試或 AWS 公有雲中儲存高效的資料庫操作的其他用例。</block>
  <block id="d288078bc44aec57a43f0062fb7ece6c" category="list-text">使用 iSCSI/ASM 在Amazon FSx ONTAP儲存和 EC2 運算執行個體中部署 Oracle 資料庫</block>
  <block id="a47b73991317ed980de57441ff2ec0b0" category="list-text">使用 iSCSI/ASM 在公用 AWS 雲端中測試和驗證 Oracle 工作負載</block>
  <block id="7776a288eb4d92068f227343e40955be" category="list-text">測試和驗證在 AWS 中部署的 Oracle 資料庫重新啟動功能</block>
  <block id="c7940228c5d339083ac147fb2a5041de" category="list-text">一位 DBA 想要使用 iSCSI/ASM 在 AWS 公有雲中部署 Oracle。</block>
  <block id="53a21d50adb7cce93e4304c816d40c51" category="list-text">一位資料庫解決方案架構師想要在 AWS 公有雲中測試 Oracle 工作負載。</block>
  <block id="b316baf0d21d8e459e4220a2cf5102a5" category="list-text">想要部署和管理部署到 AWS FSx 儲存的 Oracle 資料庫的儲存管理員。</block>
  <block id="6b41622d6a121d89a6342fe9ff47665c" category="list-text">希望在 AWS FSx/EC2 中建立 Oracle 資料庫的應用程式擁有者。</block>
  <block id="b1e308947dfb7ac3f2701611b0393713" category="paragraph">此解決方案的測試和驗證是在可能與最終部署環境不符的 AWS FSx 和 EC2 環境中進行的。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="8885f24345e0413623d17b7770be0df9" category="paragraph"><block ref="8885f24345e0413623d17b7770be0df9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fed6fa1f1b675c268f8b78258e2545a7" category="cell">SnapCenter服務</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">版本</block>
  <block id="313d712dbc391a0b9d6dca3efe0d2608" category="cell">v2.3.1.2324</block>
  <block id="b1a9b82f5c1b9e62aff87e622f684e76" category="list-text">EC2 運算執行個體。在這些測試和驗證中，我們使用 AWS EC2 t2.xlarge 執行個體類型作為 Oracle 資料庫運算執行個體。 NetApp建議在生產部署中使用 M5 類型的 EC2 執行個體作為 Oracle 的運算實例，因為它針對資料庫工作負載進行了最佳化。您需要根據實際工作負載需求，適當調整 EC2 執行個體的 vCPU 數量和 RAM 容量。</block>
  <block id="6b40058c097249f6255fcf9c967d47ee" category="list-text">Oracle 資料和日誌佈局。在我們的測試和驗證中，我們分別部署了兩個 ASM 磁碟組用於資料和日誌。在 +DATA asm 磁碟組中，我們在資料磁碟區中配置了四個 LUN。在 +LOGS asm 磁碟組中，我們在日誌磁碟區中設定了兩個 LUN。通常， Amazon FSx ONTAP磁碟區內佈局的多個 LUN 可提供更好的效能。</block>
  <block id="38c723472785b6d114cf9e85b7ffd3d1" category="list-text">iSCSI 配置。  EC2 執行個體資料庫伺服器透過 iSCSI 協定連接到 FSx 儲存。 EC2 執行個體通常部署單一網路介面或 ENI。單一 NIC 介面同時承載 iSCSI 和應用程式流量。透過仔細分析 Oracle AWR 報表來衡量 Oracle 資料庫峰值 I/O 吞吐量需求非常重要，這樣才能選擇出能夠同時滿足應用程式和 iSCSI 流量吞吐量要求的正確 EC2 運算執行個體。  NetApp也建議為兩個 FSx iSCSI 端點指派四個 iSCSI 連接，並正確配置多路徑。</block>
  <block id="db1de135a2e3ba870a8f80ce78d2d05e" category="list-text">*您建立的每個 Oracle ASM 磁碟組所使用的 Oracle ASM 冗餘等級。 *由於 FSx 已經在 FSx 叢集層級鏡像了存儲，因此您應該使用外部冗餘，這表示該選項不允許 Oracle ASM 鏡像磁碟組的內容。</block>
  <block id="e35fd1c687443b2da6a609bba53616b4" category="list-text">*資料庫備份。 *  NetApp提供了 SaaS 版本的SnapCenter software服務，用於在雲端進行資料庫備份、復原和克隆，可透過NetApp BlueXP控制台 UI 使用。  NetApp建議實施這樣的服務，以實現快速（一分鐘內）的 SnapShot 備份、快速（幾分鐘）的資料庫復原和資料庫複製。</block>
  <block id="2398118900b3388f97d9931571f1bbda" category="paragraph">以下部分提供了逐步部署流程。</block>
  <block id="317caa50e7f894c5aad8bb78d329632b" category="list-text">從 AWS EC2 控制台部署Amazon FSx ONTAP儲存 HA 叢集來託管 Oracle 資料庫磁碟區。如果您不熟悉 FSx 儲存的部署，請參閱文檔<block ref="818df05ad3ddda222f02b6b0e29bbd61" category="inline-link-macro-rx"></block>以獲得逐步說明。</block>
  <block id="dd303169f721e79331b3683ddafddcc1" category="list-text">步驟 2 和 3 可以使用以下 Terraform 自動化工具包執行，該工具包會建立一個名為<block ref="460dc55b5ffb0266f2c889b06ee73344" prefix=" " category="inline-code"></block>以及一個名為<block ref="8cbb7b3050d3c3aa08a529f429bc4555" prefix=" " category="inline-code"></block>。在執行之前，請仔細檢查說明並更改變數以適合您的環境。</block>
  <block id="62ee860e3d0c08c6573d2e328543e8de" category="section-title">EC2 執行個體核心配置</block>
  <block id="f352a88dccea452ec98375dda0311257" category="paragraph">滿足先決條件後，以 ec2-user 身分登入 EC2 實例，並使用 sudo 以 root 使用者身分配置 Linux 核心以進行 Oracle 安裝。</block>
  <block id="5a8cdca62a149c76be848350ba5cbfd0" category="list-text">建立暫存目錄<block ref="d66a510d21988f96fd9c018f6843c729" prefix=" " category="inline-code"></block>資料夾並設置<block ref="f1c1592588411002af340cbaedd6fc33" prefix=" " category="inline-code"></block>允許。</block>
  <block id="e252f38e51fe6c121fdf68268f7365b7" category="list-text">下載 Oracle 二進位安裝檔案和其他所需的 rpm 檔案並將其暫存到<block ref="d66a510d21988f96fd9c018f6843c729" prefix=" " category="inline-code"></block>目錄。</block>
  <block id="2463a0e4e0f5e0cae480165d25c3d218" category="paragraph">請參閱以下安裝檔案清單以說明<block ref="d66a510d21988f96fd9c018f6843c729" prefix=" " category="inline-code"></block>在 EC2 執行個體上。</block>
  <block id="7b25ef659963c88fe23b78fc4712aabf" category="list-text">安裝 Oracle 19c 預先安裝 RPM，滿足大多數核心配置需求。</block>
  <block id="1527576f8dc9eea4d63eb05b809aaa52" category="list-text">下載並安裝缺少的<block ref="d2e5af6ee2b267de9dac1b472a03adf3" prefix=" " category="inline-code"></block>在 Linux 8 中。</block>
  <block id="b2371ec5566671ad5a4ad4a5ea6cba11" category="list-text">從NetApp下載並安裝NetApp主機實用程式。</block>
  <block id="b6e7702627b94eaa3030b577d6d705bc" category="list-text">安裝<block ref="c8dff58175a7ddfedf00d77953ef42dd" prefix=" " category="inline-code"></block>，這在 EC2 執行個體中不可用。</block>
  <block id="9a16a877dc258dab15fccea468433118" category="list-text">安裝開放的JDK版本1.8。</block>
  <block id="1684a037c41a5a896a961b99be3d79c7" category="list-text">安裝 iSCSI 啟動器實用程式。</block>
  <block id="c9d53c5d17f956afae2225c70107de12" category="list-text">安裝<block ref="4c17da57a03262c55ed7eaf9b11476b4" prefix=" " category="inline-code"></block>。</block>
  <block id="390748df672cba58066187eedd5aae0e" category="list-text">安裝<block ref="a3938eeca32dce6ca3908d2eae163c75" prefix=" " category="inline-code"></block>。</block>
  <block id="8d5128c24aba40267289419650d61baf" category="list-text">在目前系統中停用透明大頁面。</block>
  <block id="0410d25eb8075ef0d6eb88ced58d20d0" category="paragraph">新增以下行<block ref="08561da4afe8299be4016c92bfe83435" prefix=" " category="inline-code"></block>停用<block ref="d78ade61a64b6a278ed6278e7cfd91f3" prefix=" " category="inline-code"></block>重啟後：</block>
  <block id="ac762383bc7427decd2147abbadaccaa" category="list-text">透過更改禁用 selinux<block ref="cb42f4736bc8f64983eeffc1e0b4f44a" prefix=" " category="inline-code"></block>到<block ref="52647e37ec523adfcaa3fec9bcef128e" prefix=" " category="inline-code"></block>。您必須重新啟動主機才能使變更生效。</block>
  <block id="2d1601e142ebdb74931ee9a254b65262" category="list-text">新增以下行到<block ref="8b5eec1c5f63341b700263cc37cbae02" prefix=" " category="inline-code"></block>設定檔案描述符限制和堆疊大小（不含引號）<block ref="fcc3d7489d15ef49dbbf735234234cf7" prefix=" " category="inline-code"></block> 。</block>
  <block id="03c10a897f1e18c6adaea250b9f30f19" category="inline-link-macro">如何使用交換檔案分配記憶體作為 Amazon EC2 執行個體中的交換空間？</block>
  <block id="410eaf64cdfb52cb0921ea732490d0db" category="list-text">請依照下列說明為 EC2 執行個體新增交換空間：<block ref="53c9867a131506eab4afe1a1678bb974" category="inline-link-macro-rx"></block>要增加的特定空間量取決於 RAM 的大小，最高可達 16G。</block>
  <block id="c9f7be60d92cf42de8f14f5ab8547971" category="list-text">改變<block ref="b7e6d8bff01730e41b7d91437e6a25d0" prefix=" " category="inline-code"></block>在<block ref="c30b27a1b058924e30212c72bb553665" prefix=" " category="inline-code"></block>設定檔從120秒減少到5秒。</block>
  <block id="bca8f765f0293b09679dd10ece969e68" category="list-text">在 EC2 執行個體上啟用並啟動 iSCSI 服務。</block>
  <block id="3cb574654986fcf318668b4bf3313724" category="list-text">檢索用於資料庫 LUN 對應的 iSCSI 啟動器位址。</block>
  <block id="c5b771b8234c127dccd38858c77e24a0" category="list-text">新增要用於 asm sysasm 群組的 ASM 群組。</block>
  <block id="f7b4c2e912a168f005ed7cc2b4799c08" category="list-text">修改 oracle 使用者以新增 ASM 作為輔助群組（oracle 使用者應該在 Oracle 預先安裝 RPM 安裝後建立）。</block>
  <block id="35a8e6f6e0f2c89cd450cda8861ac889" category="list-text">如果 Linux 防火牆處於活動狀態，請停止並停用它。</block>
  <block id="8d3a75a7cdef66372dcf58e6278bba70" category="list-text">重啟 EC2 執行個體。</block>
  <block id="64014fc61a9016f43a5537d6da141cc1" category="section-title">配置資料庫磁碟區和 LUN 並將其對應到 EC2 執行個體主機</block>
  <block id="35e176617d52dd956b8015d8ca19c32d" category="paragraph">透過 ssh 以 fsxadmin 使用者身分使用 FSx 叢集管理 IP 登入 FSx 集群，從命令列配置三個磁碟區來託管 Oracle 資料庫二進位檔案、資料和日誌檔案。</block>
  <block id="c848cfd9c04d86e7b9919e11add79f6c" category="list-text">以 fsxadmin 使用者身分透過 SSH 登入 FSx 叢集。</block>
  <block id="eff24d82c422927b06fd0cacd430b653" category="list-text">執行下列命令為 Oracle 二進位檔案建立磁碟區。</block>
  <block id="569cffa50e6428a06bffa2e19d12e0e3" category="list-text">執行以下命令為 Oracle 資料建立磁碟區。</block>
  <block id="9985026df910c788cb47555f7d72a68e" category="list-text">執行下列命令為 Oracle 日誌建立磁碟區。</block>
  <block id="cc70e928fff63a76ca8cf30a05d95a80" category="list-text">在資料庫二進位磁碟區內建立二進位 LUN。</block>
  <block id="dc4301dd6be2058cb9d1a1e3408388eb" category="list-text">在資料庫資料卷內建立資料 LUN。</block>
  <block id="49cf66e4521ade9e7ffc2aae313ee978" category="list-text">在資料庫日誌卷內建立日誌 LUN。</block>
  <block id="3e408df5c51ac33acd5978f1f48cab19" category="list-text">使用從上面的 EC2 核心配置的步驟 14 中檢索到的啟動器為 EC2 執行個體建立一個 igroup。</block>
  <block id="ceed9a3dd22f247b70bb6774943f9284" category="list-text">將 LUN 對應到上面建立的 igroup。為磁碟區內的每個附加 LUN 連續增加 LUN ID。</block>
  <block id="18519dc23f47343cf516e789bf2e818b" category="list-text">驗證 LUN 對應。</block>
  <block id="3208f25d37711dd9ffc43d93ada2a3cc" category="paragraph">預計回傳結果如下：</block>
  <block id="35c1914e41e83f92dd8779f5708f3224" category="section-title">資料庫儲存配置</block>
  <block id="47d78479fc855bd2f99f02fb94118789" category="paragraph">現在，在 EC2 執行個體主機上匯入並設定 Oracle 網格基礎架構和資料庫安裝的 FSx 儲存。</block>
  <block id="aa218771b85a8ecc41cc249ba90ea5f8" category="list-text">使用您的 SSH 金鑰和 EC2 執行個體 IP 位址，以 ec2-user 身分透過 SSH 登入 EC2 執行個體。</block>
  <block id="a7939166c08e8ac6da1530309825a401" category="list-text">使用 SVM iSCSI IP 位址發現 FSx iSCSI 端點。然後變更為特定於您的環境的入口網站地址。</block>
  <block id="1bc103d13645d8a07f4a05f2eee064f8" category="list-text">透過登入每個目標建立 iSCSI 會話。</block>
  <block id="fc5113f60b8b0390133d7abda7290515" category="paragraph">此命令的預期輸出為：</block>
  <block id="c541a8df6ddefee9ae370e31bf1109cc" category="list-text">查看並驗證活動 iSCSI 會話清單。</block>
  <block id="efe44c0a293be7b9e3d17291e1bd0fce" category="paragraph">傳回 iSCSI 會話。</block>
  <block id="e4a8008161f8d488131b8bf10831bf6c" category="list-text">驗證 LUN 是否已匯入主機。</block>
  <block id="f467f5c5010c383146b412ebc7d2a967" category="paragraph">這將傳回來自 FSx 的 Oracle LUN 清單。</block>
  <block id="08b7a2f63e8caee3c8d0f32a3d9dd5ea" category="list-text">配置<block ref="9ac80d53ede05256c28cf9e043eb423c" prefix=" " category="inline-code"></block>包含以下預設和黑名單條目的檔案。</block>
  <block id="794a654f60052714db9eba2a7ff4b608" category="list-text">啟動多路徑服務。</block>
  <block id="65b4cea56e6d27de22dc85622fe6a7fb" category="paragraph">現在多路徑設備出現在<block ref="9c9f766701f811ef6f170c7a3453c53f" prefix=" " category="inline-code"></block>目錄。</block>
  <block id="d282577e5b16ee7f17ce7cd0f718be4c" category="list-text">透過 SSH 以 fsxadmin 使用者身分登入 FSx 集群，檢索以 6c574xxx... 開頭的每個 LUN 的序列十六進制數，十六進制數以 3600a0980 開頭，這是 AWS 供應商 ID。</block>
  <block id="2720e08c2a6367757e2dc57afee1620c" category="paragraph">並傳回如下結果：</block>
  <block id="ecf2aff9ad02b9026ff22f4fc6a68e73" category="list-text">更新<block ref="bacd7d75ae434c4a777b1baef0e31f36" prefix=" " category="inline-code"></block>檔案來為多路徑設備添加一個用戶友好的名稱。</block>
  <block id="75104fff60881baaf37dcb441594f8a1" category="paragraph">包含以下條目：</block>
  <block id="e73e686392436f1038dd926c4a775f24" category="list-text">重新啟動多路徑服務以驗證<block ref="9c9f766701f811ef6f170c7a3453c53f" prefix=" " category="inline-code"></block>已變更為 LUN 名稱而非序列十六進位 ID。</block>
  <block id="5f9e8fcf665ea0cca4e1c6eea45645e4" category="paragraph">查看<block ref="9c9f766701f811ef6f170c7a3453c53f" prefix=" " category="inline-code"></block>返回如下：</block>
  <block id="6f6e08574875efd99672521b7c49bd5f" category="list-text">使用單一主分割區對二進位 LUN 進行分割。</block>
  <block id="d90e8b8ea181e08e8bf690f2c3143681" category="list-text">使用 XFS 檔案系統格式化分割區的二進位 LUN。</block>
  <block id="999ccfc779bcbed2a3561bff37f884d1" category="list-text">掛載二進位 LUN 到<block ref="a8946fa5f211c5345e3610710e471cb4" prefix=" " category="inline-code"></block>。</block>
  <block id="22e45c04a42f3d5d2b9ca76b19445949" category="list-text">改變<block ref="a8946fa5f211c5345e3610710e471cb4" prefix=" " category="inline-code"></block>掛載點所有權歸 Oracle 使用者及其關聯的主要群組。</block>
  <block id="a7d5cd359d07f4d25f07c14cac7c892f" category="list-text">尋找二進位 LUN 的 UUI。</block>
  <block id="419b15da0e06224d0919aaf7cf7c0394" category="list-text">新增掛載點<block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block>。</block>
  <block id="4f86d8e0be25b09fa4c4f087139fcd0d" category="paragraph">新增以下行。</block>
  <block id="b79f3809b435063f1d43819c9baaf816" category="admonition">重要的是僅使用 UUID 和 nofail 選項掛載二進位文件，以避免 EC2 執行個體重新啟動期間可能出現的根鎖定問題。</block>
  <block id="ad7b51bb9b820412dddd78b34ccf36ea" category="list-text">以 root 使用者身分新增 Oracle 裝置的 udev 規則。</block>
  <block id="8e7c7ff83f0da1eceabb8c7fbb255de4" category="paragraph">包括以下條目：</block>
  <block id="d347f5dbb8625ab56eb3b8ad0f1ed6ca" category="list-text">以 root 使用者身分重新載入 udev 規則。</block>
  <block id="967abd537fdc45fbfc59ee4d5fbd70d2" category="list-text">以root使用者身分觸發udev規則。</block>
  <block id="aeead6d2d9990fef69ffefd2efd88b90" category="list-text">以 root 使用者身分重新載入 multipathd。</block>
  <block id="71d434c6aec8c195bc1cd610cf2aadf7" category="list-text">重新啟動 EC2 執行個體主機。</block>
  <block id="3cadabe14e57cb049891c97e754906d7" category="section-title">Oracle 網格基礎架構安裝</block>
  <block id="2ba967266d1ac37f6ee2c138c7a219f1" category="list-text">透過 SSH 以 ec2-user 身分登入 EC2 實例，並透過取消註解來啟用密碼驗證<block ref="cd94e87e5216cd088acdc4de0e9c30f1" prefix=" " category="inline-code"></block>然後註解掉<block ref="f18918133cfc22e041baab71b051c41f" prefix=" " category="inline-code"></block>。</block>
  <block id="f919e378a236907726426311e1222ca5" category="list-text">重新啟動 sshd 服務。</block>
  <block id="886890ea240491bd5c7fbf2ad26038e0" category="list-text">重設 Oracle 用戶密碼。</block>
  <block id="312dbdb4917346c5535b58edeb72d5d8" category="list-text">以 Oracle Restart 軟體擁有者使用者 (oracle) 身分登入。建立 Oracle 目錄如下：</block>
  <block id="2fce107e9da63a27050a1b7738518797" category="list-text">更改目錄權限設定。</block>
  <block id="de76f7d30e13c7b0fac443a1b582500b" category="list-text">建立網格主目錄並變更至該目錄。</block>
  <block id="ca3eab9cf7a8f03f19d82f95a9ccebc0" category="list-text">解壓縮網格安裝檔。</block>
  <block id="4cb0c768cefd4361adc66dd3dfac2ad8" category="list-text">從網格主頁中刪除<block ref="29b6fb214b3224ca10c7261aa01e44b5" prefix=" " category="inline-code"></block>目錄。</block>
  <block id="839a5e9d346e3ac874bc8e301897bdc6" category="list-text">從網格主頁，解壓縮<block ref="63628571f2dfaeb6f0a0a676290e6e82" prefix=" " category="inline-code"></block>。</block>
  <block id="5d940bd40ee32694345bce5774d5c678" category="list-text">從網格主頁，修改<block ref="ef8657f0a0a00af93ba7f1c8885339ca" prefix=" " category="inline-code"></block>，取消註釋並替換<block ref="bb7738211dd8eb3dbadf4cc63ae8eb8a" prefix=" " category="inline-code"></block>和<block ref="b2affc1a941fe7e5e65933911250249c" prefix=" " category="inline-code"></block>。</block>
  <block id="ade261e787d22aca7a93418fe8127036" category="list-text">更新<block ref="77d9f4d56c58834c8dacf6d0cb94e085" prefix=" " category="inline-code"></block>文件進行靜默安裝，並將 rsp 檔案放在<block ref="d66a510d21988f96fd9c018f6843c729" prefix=" " category="inline-code"></block>目錄。  rsp 檔案應涵蓋 A、B 和 G 部分，並包含以下資訊：</block>
  <block id="72eab9d7fc33889fd5bf6a85943c4e4a" category="list-text">以 root 使用者登入 EC2 執行個體並設定<block ref="e1f651debac4f720c13ae930ff3ca14a" prefix=" " category="inline-code"></block>和<block ref="456a3c82b7208b5c2a000597b1330564" prefix=" " category="inline-code"></block>。</block>
  <block id="d134d418859128801ec294cd10bcbd8e" category="list-text">提供磁碟設備以供 Oracle ASM 過濾器驅動程式使用。</block>
  <block id="3e6c5f0c8e9c1310879c66839bb0f8d5" category="list-text">安裝<block ref="a27b4e2b8f4a0b0419894dfeac36419e" prefix=" " category="inline-code"></block>。</block>
  <block id="cfdbf231484c64b98bc4f3569cd7b324" category="list-text">取消設定<block ref="c0c2c8394b04a929ffc60091aa1f72ca" prefix=" " category="inline-code"></block>。</block>
  <block id="9817d9ff96af960709b8094b73294545" category="list-text">以 Oracle 使用者身分登入 EC2 執行個體並擷取補丁<block ref="d66a510d21988f96fd9c018f6843c729" prefix=" " category="inline-code"></block>資料夾。</block>
  <block id="5fa683f35265bf7469d9de8c3afc1f42" category="list-text">從 grid home /u01/app/oracle/product/19.0.0/grid 並以 oracle 使用者身分啟動<block ref="30c950549715985c6b7c7cd6990d0f4b" prefix=" " category="inline-code"></block>用於電網基礎設施安裝。</block>
  <block id="5de6732dda1e7bccbd8e8b367ad248dd" category="paragraph">忽略電網基礎設施錯誤群組的警告。我們使用單一 Oracle 使用者來管理 Oracle Restart，因此這是預料之中的。</block>
  <block id="26f36488ec442bab2ba0cda087d435eb" category="list-text">以 root 使用者身分執行以下腳本：</block>
  <block id="ada113db66e2b1b6ed982918830cd12e" category="list-text">以 root 使用者身分重新載入 multipathd。</block>
  <block id="7dff0a250c79eafa071ee2d5713b7123" category="list-text">以Oracle用戶執行以下指令完成設定：</block>
  <block id="591ab7f85cb5618030a7a7562552188b" category="list-text">以 Oracle 使用者身份，從 $GRID_HOME 建立 LOGS 磁碟組。</block>
  <block id="f71fbb7ff86224d636aac5f9bb42f27d" category="list-text">以 Oracle 使用者身份，在安裝配置後驗證網格服務。</block>
  <block id="f9ba171dd47a8cef31bac8aa17eeb44d" category="list-text">驗證 ASM 過濾器驅動程式狀態。</block>
  <block id="b7e3e332087b6a041c83ce22cce9043c" category="section-title">Oracle資料庫安裝</block>
  <block id="9250c441cd32cef9ac89c4aaea3311e2" category="list-text">以 Oracle 使用者登入並取消設定<block ref="88ee3ad336791517a935931e1e50382a" prefix=" " category="inline-code"></block>和<block ref="1548c2f12948ef1485a923f5891a3489" prefix=" " category="inline-code"></block>如果已設定。</block>
  <block id="9c1b98a904b357f470c8d87cf837d8cf" category="list-text">建立 Oracle DB 主目錄並變更至該目錄。</block>
  <block id="74d5f0f080c7e7c4f0011e6b16a1072f" category="list-text">解壓縮 Oracle DB 安裝檔。</block>
  <block id="1fdd02c9779c06712368af7ed65c00dd" category="list-text">從資料庫主目錄刪除<block ref="29b6fb214b3224ca10c7261aa01e44b5" prefix=" " category="inline-code"></block>目錄。</block>
  <block id="f2be6b31ed6989aef561023d439a1cd3" category="list-text">從 DB home 解壓縮<block ref="63628571f2dfaeb6f0a0a676290e6e82" prefix=" " category="inline-code"></block>。</block>
  <block id="d86c0eec890e4216540c2b834f6339f5" category="list-text">從 DB 主頁修改<block ref="ef8657f0a0a00af93ba7f1c8885339ca" prefix=" " category="inline-code"></block>，並取消註釋並替換<block ref="bb7738211dd8eb3dbadf4cc63ae8eb8a" prefix=" " category="inline-code"></block>和<block ref="b2affc1a941fe7e5e65933911250249c" prefix=" " category="inline-code"></block>。</block>
  <block id="95233719931805924ded9cd671e036df" category="list-text">從<block ref="d66a510d21988f96fd9c018f6843c729" prefix=" " category="inline-code"></block>目錄中，解壓縮DB 19.18 RU補丁。</block>
  <block id="1df6bf791388469a048d36559ff5657f" category="list-text">更新 DB 靜默安裝標準 rsp 文件<block ref="2d9ffa0a3db25b02bcd0091245449764" prefix=" " category="inline-code"></block>目錄中的相關部分具有以下值：</block>
  <block id="bdae34f2df30f19488bd87890188b905" category="list-text">從 db1 home /u01/app/oracle/product/19.0.0/db1 執行靜默純軟體 DB 安裝。</block>
  <block id="f9db0d5335309d4958e09e8149d7de4d" category="list-text">以 root 使用者身分執行<block ref="08030ad08b2b991d61b424afd8828758" prefix=" " category="inline-code"></block>僅安裝軟體後的腳本。</block>
  <block id="8821c8f59553819485edcda3389eda45" category="list-text">以 Oracle 使用者身分更新標準<block ref="c170c347c737b82ad62c48db1f7bff3c" prefix=" " category="inline-code"></block>文件的相關部分包含以下條目：</block>
  <block id="da25f52d1901e3ad93cbe64aa2eb939e" category="list-text">以 Oracle 使用者身份，從 $ORACLE_HOME 目錄，使用 dbca 啟動 DB 建立。</block>
  <block id="2a00dbe4c39e81805212ab123d0995df" category="list-text">以 Oracle 使用者身份，在建立資料庫後驗證 Oracle Restart HA 服務。</block>
  <block id="05472424b7ce7bd118009f6cde3a0614" category="list-text">設定 Oracle 用戶<block ref="9e0037ad71166970bde5f910189cc94a" prefix=" " category="inline-code"></block>。</block>
  <block id="cadaa91ab9001028d3a153b4325f10a5" category="list-text">新增以下條目：</block>
  <block id="ab5f5bab123b3441fc9c838b46ff1150" category="list-text">驗證已建立的 CDB/PDB。</block>
  <block id="432e3219f8a15b5476e2e71941cc6e61" category="list-text">將 DB 復原目標大小設定為 +LOGS 磁碟組大小。</block>
  <block id="a0b58d032d36bf0801e5ca3a2aa515d9" category="list-text">使用sqlplus登入資料庫並啟用存檔日誌模式。</block>
  <block id="9ef846791296cb428b8d2c0b2e01e7d1" category="paragraph">這完成了 Oracle 19c 版本 19.18 在Amazon FSx ONTAP和 EC2 運算執行個體上的重新啟動部署。如果需要， NetApp建議將 Oracle 控製檔案和線上日誌檔案重新定位到 +LOGS 磁碟組。</block>
  <block id="4d3617697efd9a8201cb07f5e610e306" category="section-title">自動部署選項</block>
  <block id="df4723e08600f333de3a003e1cc3b83e" category="paragraph">參考<block ref="f849f18cdfe2827921d0c0c510ba74af" category="inline-link-macro-rx"></block>了解詳情。</block>
  <block id="6cf7e59477fa5c8722c79a0910c40cd8" category="section-title">使用SnapCenter服務備份、復原和克隆 Oracle 資料庫</block>
  <block id="a0c9cf73752e72933d08cadbcdf8c05a" category="inline-link-macro">適用於 Oracle 的SnapCenter服務</block>
  <block id="dc8e1ce149bf12e5c226b870af261614" category="paragraph">看<block ref="204b993af8240d69dcd89b6d08cc0633" category="inline-link-macro-rx"></block>有關使用NetApp BlueXP控制台備份、還原和克隆 Oracle 資料庫的詳細資訊。</block>
  <block id="f3b25b37995dab3a1b6c753dd74ca21e" category="summary">本節詳細介紹如何透過SnapCenter UI 管理 AWS RDS Custom for Oracle 資料庫，作為 AWS RDS 控制台 UI 的補充。</block>
  <block id="d0dfaca5f0573d672a0f4dc66997c002" category="doc">EC2 和 FSx Oracle 資料庫管理</block>
  <block id="cf8b301cbf8aa698c578ff1f8e64ccc2" category="paragraph">除了AWS EC2和FSx管理控制台之外，還部署了Ansible控制節點和SnapCenter UI工具，用於此Oracle環境中的資料庫管理。</block>
  <block id="ab1b9a020f08729c00ecee14e5a3be69" category="paragraph">Ansible 控制節點可用於管理 Oracle 環境配置，並透過並行更新使主執行個體和備用執行個體保持同步以進行核心或修補程式更新。可使用NetApp自動化工具包自動執行故障轉移、重新同步和故障回复，從而透過 Ansible 實現快速應用程式復原和可用性。可以使用劇本執行一些可重複的資料庫管理任務，以減少人為錯誤。</block>
  <block id="53bd53a68bce8fe697a7455feae3861b" category="inline-link-macro">適用於 Oracle 資料庫的SnapCenter插件概述</block>
  <block id="8dad283458f149f04a674f7c674818ed" category="paragraph">SnapCenter UI 工具可以使用 Oracle 資料庫的SnapCenter插件執行資料庫快照備份、時間點復原、資料庫複製等。有關 Oracle 插件功能的更多信息，請參閱<block ref="053f091ffb001fc31a47d30bc3d11350" category="inline-link-macro-rx"></block>。</block>
  <block id="c165a519b858dc997da23262308d6463" category="paragraph">以下部分詳細介紹如何使用SnapCenter UI 實作 Oracle 資料庫管理的關鍵功能：</block>
  <block id="95154aa7c50b812d3683b6995bed8771" category="list-text">資料庫快照備份</block>
  <block id="b055b8a9cd44d5f8e1fa330c20aa1dc3" category="list-text">資料庫時間點還原</block>
  <block id="20f913ca57379280e5f37dce9cd0de61" category="list-text">資料庫克隆創建</block>
  <block id="e724243c3ef9e2c58168b76f3f537412" category="paragraph">資料庫克隆會在單獨的 EC2 主機上建立主資料庫的副本，以便在發生邏輯資料錯誤或損壞時進行資料恢復，克隆還可用於應用程式測試、偵錯、修補程式驗證等。</block>
  <block id="418768c00fe9ab38a23d8417250d676b" category="section-title">拍攝快照</block>
  <block id="c018c634b9245f8522eaf32d3fffaa7a" category="paragraph">EC2/FSx Oracle 資料庫依照使用者配置的間隔定期備份。用戶還可以隨時進行一次性快照備份。這適用於完整資料庫快照備份以及僅存檔日誌快照備份。</block>
  <block id="0a1758b0d7a64bf446ccd6c9ea2a559d" category="section-title">拍攝完整的資料庫快照</block>
  <block id="6aa82df330acc0ad1c1859bf7d19d8c6" category="paragraph">完整的資料庫快照包括所有 Oracle 文件，包括資料檔案、控製文件和存檔日誌檔案。</block>
  <block id="71a81fc61b4bde806ab23dbb0dff87ab" category="list-text">登入SnapCenter UI 並點擊左側選單中的「資源」。從「視圖」下拉式功能表中，切換到「資源組」視圖。</block>
  <block id="f84bb7d1cc837f581fe5348da5a3b21f" category="paragraph"><block ref="f84bb7d1cc837f581fe5348da5a3b21f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3a16fe4e102f4f80c9a0ebe875e00921" category="list-text">按一下完整備份資源名稱，然後按一下立即備份圖示以啟動附加備份。</block>
  <block id="862666b02b037fc85b8a5792531a17b1" category="paragraph"><block ref="862666b02b037fc85b8a5792531a17b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c41836f211ec5f0aee4024039682c6d3" category="list-text">按一下“備份”，然後確認備份以開始完整的資料庫備份。</block>
  <block id="66b5233e7f5f1804cf17198ce3331102" category="paragraph"><block ref="66b5233e7f5f1804cf17198ce3331102" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5114009902f821226811cd39b519e8ae" category="paragraph">從資料庫的資源視圖中，開啟資料庫託管備份副本頁面以驗證一次性備份是否成功完成。完整資料庫備份會建立兩個快照：一個用於資料卷，一個用於日誌卷。</block>
  <block id="a379f7084ad4a6cc2caa13fff8125ffd" category="paragraph"><block ref="a379f7084ad4a6cc2caa13fff8125ffd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dc2bc8e691b80fc2b94cd487cd59a41e" category="section-title">取得存檔日誌快照</block>
  <block id="c2a2cc866aaa30cb6344e65c853429a7" category="paragraph">僅對 Oracle 存檔日誌磁碟區進行存檔日誌快照。</block>
  <block id="973f07a93ca1636baa391407a84cb38b" category="list-text">登入SnapCenter UI 並點擊左側選單欄中的「資源」標籤。從「視圖」下拉式功能表中，切換到「資源組」視圖。</block>
  <block id="47f0395291ce13022063147f4981f69f" category="list-text">按一下日誌備份資源名稱，然後按一下立即備份圖示以啟動存檔日誌的附加備份。</block>
  <block id="f7acdb350b25fc4be0538df87fe28027" category="paragraph"><block ref="f7acdb350b25fc4be0538df87fe28027" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b8ee5a2ad5f43fcd955b6b30854d2f98" category="list-text">按一下“備份”，然後確認備份以開始存檔日誌備份。</block>
  <block id="3c0ec587b0b117affbf8a8aeb3316878" category="paragraph"><block ref="3c0ec587b0b117affbf8a8aeb3316878" category="inline-image-macro-rx" type="image"></block></block>
  <block id="40cffcacb55d81916f38114aac845d4b" category="paragraph">從資料庫的資源視圖中，開啟資料庫託管備份副本頁面以驗證一次性存檔日誌備份是否成功完成。存檔日誌備份為日誌磁碟區建立一個快照。</block>
  <block id="ac7f9e8a10a62f93a2a9b1a5b195773e" category="paragraph"><block ref="ac7f9e8a10a62f93a2a9b1a5b195773e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e16045e122b02913b74ef1e8bd29d75c" category="section-title">恢復到某個時間點</block>
  <block id="7d2260465121189e3f5aef56d1734e86" category="paragraph">基於SnapCenter的某個時間點的還原在同一 EC2 執行個體主機上執行。完成以下步驟來執行復原：</block>
  <block id="52443d446e6aa795d8e3a08e581684cb" category="list-text">從SnapCenter資源標籤 &gt; 資料庫檢視中，按一下資料庫名稱以開啟資料庫備份。</block>
  <block id="6953d4f59579bc16fe5df66ed5925f12" category="paragraph"><block ref="6953d4f59579bc16fe5df66ed5925f12" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6bc3aa5bd0c870df97abdd69ef227826" category="list-text">選擇資料庫備份副本和要還原的時間點。並記下該時間點對應的SCN號。可以使用時間或 SCN 執行時間點還原。</block>
  <block id="2453a72b7c64a498109919bd3dde5c14" category="paragraph"><block ref="2453a72b7c64a498109919bd3dde5c14" category="inline-image-macro-rx" type="image"></block></block>
  <block id="acee7bbe553399023f78a7ac814d7a94" category="list-text">反白日誌卷快照並點擊“安裝”按鈕以安裝該磁碟區。</block>
  <block id="6794549233d08b27a364c0388e13adc8" category="paragraph"><block ref="6794549233d08b27a364c0388e13adc8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d06beb2a91e58c7e57367e901abc09fd" category="list-text">選擇主 EC2 執行個體來掛載日誌磁碟區。</block>
  <block id="4eee78a1caace393a5f644cdb1919c49" category="paragraph"><block ref="4eee78a1caace393a5f644cdb1919c49" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f83a9f884d94d22d3c52d510a051ac90" category="list-text">驗證裝載作業是否成功完成。也要檢查 EC2 執行個體主機，查看已安裝的日誌磁碟區以及安裝點路徑。</block>
  <block id="fd1065b0c2fbd8c666e7bf2fb62c03a3" category="paragraph"><block ref="b8af9c769ba63954cada01d7557f9013" category="inline-image-macro-rx" type="image"></block> <block ref="c160eaeb165c458219a282a4287689fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12a7a64116d859fb64b3f841a43e6fac" category="list-text">將存檔日誌從已掛載的日誌磁碟區複製到目前存檔日誌目錄。</block>
  <block id="f57c6961965ccab84762e9b4bbdd72f0" category="list-text">返回SnapCenter資源標籤 &gt; 資料庫備份頁面，反白顯示資料快照副本，然後按一下還原按鈕啟動資料庫還原工作流程。</block>
  <block id="88fa28f693b12aee698b0958a76198a7" category="paragraph"><block ref="88fa28f693b12aee698b0958a76198a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5a08ce545f0f81946ee65326ff4608df" category="list-text">選取“所有資料檔案”和“如果需要還原和恢復，則變更資料庫狀態”，然後按一下“下一步”。</block>
  <block id="63bb70b8a6d4456bcc55975ace07841e" category="paragraph"><block ref="63bb70b8a6d4456bcc55975ace07841e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e589c1295b0849053e2d8cc2bbf96a1e" category="list-text">使用 SCN 或時間選擇所需的恢復範圍。無需像步驟 6 所示將已掛載的存檔日誌複製到目前日誌目錄，而是可以在「指定外部存檔日誌檔案位置」中列出已掛載的存檔日誌路徑以供復原。</block>
  <block id="3911f7c218ba9b96234120f22df20190" category="paragraph"><block ref="3911f7c218ba9b96234120f22df20190" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2f3b533a6c9cd757a311b56318115bbe" category="list-text">如果需要，請指定要運行的可選處方。</block>
  <block id="4b9a038d2a5438ff831e2a31cd90738e" category="paragraph"><block ref="4b9a038d2a5438ff831e2a31cd90738e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="16a70e704c6e5104eff1adca9f951c36" category="list-text">如果需要的話，請指定一個可選的 afterscript 來運作。恢復後檢查開啟的資料庫。</block>
  <block id="95c5344535e651517848ba8c689b1618" category="paragraph"><block ref="95c5344535e651517848ba8c689b1618" category="inline-image-macro-rx" type="image"></block></block>
  <block id="975952869f93fd5cb45acf8a19b97834" category="list-text">如果需要工作通知，請提供 SMTP 伺服器和電子郵件地址。</block>
  <block id="955d438e4caad4c3dfb262915577f9c3" category="paragraph"><block ref="955d438e4caad4c3dfb262915577f9c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f92d4c842e7343ab2f69eac4e3561bc" category="list-text">恢復工作摘要。按一下「完成」以啟動還原作業。</block>
  <block id="ca468de4274430f1cbb46dc164672685" category="paragraph"><block ref="ca468de4274430f1cbb46dc164672685" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0e783d4afe611873ddc32a5a59ff2078" category="list-text">驗證從SnapCenter還原。</block>
  <block id="d34d1a6639fbbbd9f758e1149de7aeb2" category="paragraph"><block ref="d34d1a6639fbbbd9f758e1149de7aeb2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a6e8e06b3f3e03bdb3391888df78e46" category="list-text">驗證從 EC2 執行個體主機進行的還原。</block>
  <block id="0af06dc38a257cb730933e4c5dcb229d" category="paragraph"><block ref="0af06dc38a257cb730933e4c5dcb229d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="983d6ea8d6962c3e0f9abef0c4c948f4" category="list-text">若要卸載復原日誌卷，請依照步驟 4 中的相反步驟操作。</block>
  <block id="ca0c306ba98701576c42d241b48d4038" category="section-title">建立資料庫克隆</block>
  <block id="a8bd304fe0995bcddba8dd93a8d447a6" category="paragraph">以下部分示範如何使用SnapCenter克隆工作流程建立從主資料庫到備用 EC2 執行個體的資料庫複製。</block>
  <block id="91956afde8e3bc7ac47e37b9821ca6f9" category="list-text">使用完整備份資源群組從SnapCenter對主資料庫進行完整快照備份。</block>
  <block id="d5ae4fdf87f8aaf684c36ac50699c794" category="paragraph"><block ref="d5ae4fdf87f8aaf684c36ac50699c794" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b08a0a4966d6a40934f84e0367df5124" category="list-text">從SnapCenter資源標籤 &gt; 資料庫檢視中，開啟要從中建立副本的主資料庫的資料庫備份管理頁面。</block>
  <block id="ff02490e1cc80c4cc397c158ef7e35c8" category="paragraph"><block ref="ff02490e1cc80c4cc397c158ef7e35c8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b265d526ea8d86f13a3ee5b3df11ce5" category="list-text">將步驟 4 中拍攝的日誌磁碟區快照掛載到備用 EC2 執行個體主機。</block>
  <block id="e0933e237903488c5c6e3cc5ef953c5f" category="paragraph"><block ref="de03172a28665b689eb3e85ef7e156b8" category="inline-image-macro-rx" type="image"></block> <block ref="747b56b56fef24e9fa888e463e83fd9e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="15c2865196d70f81dd791b3329d2604e" category="list-text">反白顯示要為副本克隆的快照副本，然後按一下「克隆」按鈕開始複製過程。</block>
  <block id="9229dd01ffdec894b42f3f7ea277fe70" category="paragraph"><block ref="9229dd01ffdec894b42f3f7ea277fe70" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ebc0e83f8e5d02518da0756a18aaab4" category="list-text">變更副本名稱，使其與主資料庫名稱不同。按一下“下一步”。</block>
  <block id="4b2084607515bf6fefcdcc3c03d5b620" category="paragraph"><block ref="4b2084607515bf6fefcdcc3c03d5b620" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ba0975a31e144349d50f09393a5ca21" category="list-text">將複製主機變更為備用 EC2 主機，接受預設命名，然後按一下下一步。</block>
  <block id="e4d2bda2c8bd0169bab2ea8bc4f28d8a" category="paragraph"><block ref="e4d2bda2c8bd0169bab2ea8bc4f28d8a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eeda8df21c3391dcc7a327cfec8f8704" category="list-text">變更 Oracle 主目錄設定以符合目標 Oracle 伺服器主機的配置，然後按一下「下一步」。</block>
  <block id="eb1b4591252115df7f4b7ee69c70c2f6" category="paragraph"><block ref="eb1b4591252115df7f4b7ee69c70c2f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f10b26890bad0f92387ad2c8efb9b532" category="list-text">使用時間或 SCN 和已安裝的存檔日誌路徑指定復原點。</block>
  <block id="727fdf35b2a06ef1db814081af997df8" category="paragraph"><block ref="727fdf35b2a06ef1db814081af997df8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="684abeacd08eb59922d70d928ce47f45" category="list-text">如果需要，請發送 SMTP 電子郵件設定。</block>
  <block id="6ba442995abae43b87983bc7244b0e78" category="paragraph"><block ref="6ba442995abae43b87983bc7244b0e78" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e2cc0c6ba26bdf7b30e39313a0ad4098" category="list-text">複製作業摘要，然後按一下「完成」以啟動複製作業。</block>
  <block id="7d4f9ba073f1d2f68982be3af89ff5ea" category="paragraph"><block ref="7d4f9ba073f1d2f68982be3af89ff5ea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d5cd909b2ce2e22f0bb8734426ea9e9a" category="list-text">透過查看克隆作業日誌來驗證副本克隆。</block>
  <block id="5a2a7a2fda4f5f73147fca7888b84ead" category="paragraph"><block ref="5a2a7a2fda4f5f73147fca7888b84ead" category="inline-image-macro-rx" type="image"></block></block>
  <block id="66a858d0c53f7ecef6ff665372a428c5" category="paragraph">克隆的資料庫會立即在SnapCenter中註冊。</block>
  <block id="c1d62874defbd2f3d5b80a3ef64e0033" category="paragraph"><block ref="c1d62874defbd2f3d5b80a3ef64e0033" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9b70fde27d9d03d393dc2fd619546988" category="list-text">關閉 Oracle 存檔日誌模式。以 oracle 使用者登入 EC2 執行個體並執行下列命令：</block>
  <block id="ca1a9785bb111fcadc4527aae18f822d" category="admonition">除了主 Oracle 備份副本之外，還可以使用相同的程式從目標 FSx 叢集上複製的輔助備份副本建立複製。</block>
  <block id="2a75f5115dab8b39875560a4d7252d2f" category="section-title">HA 故障轉移至待機並重新同步</block>
  <block id="f5bc6d05191457096f9da00e0fa56d40" category="paragraph">當主站點（運算層或儲存層）發生故障時，備用 Oracle HA 叢集可提供高可用性。此解決方案的一個顯著優勢是，使用者可以隨時以任何頻率測試和驗證基礎架構。故障轉移可以由使用者模擬或由真實故障觸發。故障轉移過程相同，並且可以自動化以實現快速應用程式恢復。</block>
  <block id="6775249aa36196ee3d9c71774992f2c4" category="paragraph">請參閱以下故障轉移程序清單：</block>
  <block id="eb171dc2d1f739dfee2e358326abd0e9" category="list-text">對於模擬故障轉移，執行日誌快照備份以將最新交易刷新到備用站點，如本節所示<block ref="58f2fe5f16b910e6ad4f8b3f8679e256" category="inline-xref-macro-rx"></block>。對於由實際故障觸發的故障轉移，最後可復原的資料將與上次成功的排程日誌磁碟區備份一起複製到備用站點。</block>
  <block id="abdc57f5efdfeac30fe822d9eda2fc9f" category="list-text">打破主 FSx 叢集和備用 FSx 叢集之間的SnapMirror 。</block>
  <block id="bd54ae4d51454c6a89990f066be03d35" category="list-text">在備用 EC2 執行個體主機上掛載複製的備用資料庫磁碟區。</block>
  <block id="588698147b1d63f4f9f6d78dd8d83595" category="list-text">如果複製的 Oracle 二進位檔案用於 Oracle 恢復，則重新連結 Oracle 二進位。</block>
  <block id="0f1ac3f743fcb2d14875c7a731c3d251" category="list-text">將備用 Oracle 資料庫還原到最後一個可用的存檔日誌。</block>
  <block id="ab933bdc7c043f4a3c977049791f0640" category="list-text">開啟備用 Oracle 資料庫以供應用程式和使用者存取。</block>
  <block id="6928cb13e9136438c86e16b724b3b64f" category="list-text">對於實際的主站點故障，備用 Oracle 資料庫現在充當新的主站點的角色，並且可以使用資料庫磁碟區透過反向SnapMirror方法將故障的主站點重建為新的備用站點。</block>
  <block id="13e25eed8fa423975f854101e3be1e89" category="list-text">對於模擬主站點故障以進行測試或驗證，請在測試練習完成後關閉備用 Oracle 資料庫。然後從備用 EC2 執行個體主機卸載備用資料庫卷，並將複製從主站點重新同步到備用站點。</block>
  <block id="c3fd0f78855e219b0fd44077ce74e7b5" category="paragraph">可以使用NetApp Automation Toolkit 執行這些過程，該工具包可從公共NetApp GitHub 網站下載。</block>
  <block id="ba4d6e5d6eeea04cdc5a4f243b1e5dd8" category="paragraph">在嘗試設定和故障轉移測試之前，請仔細閱讀 README 說明。</block>
  <block id="90a0d380974aa73acb8330f1ff9a7930" category="summary">本節詳細介紹了將 Oracle 資料庫從本機遷移到 AWS EC2 執行個體和 FSx 儲存時需要考慮的因素。</block>
  <block id="895a8d39dd9ae7fe795349bdbc3f05dc" category="doc">資料庫從本地遷移到公有雲</block>
  <block id="373ae4e24c2daa280a4a5aca82dd3818" category="paragraph">無論如何，資料庫遷移都是一項具有挑戰性的任務。將 Oracle 資料庫從本機遷移到雲端也不例外。</block>
  <block id="d1e968e04e34c971d41e644820094cef" category="paragraph">以下部分提供了使用 AWS EC2 運算和 FSx 儲存平台將 Oracle 資料庫遷移到 AWS 公有雲時需要考慮的關鍵因素。</block>
  <block id="84639b5fb3b348e6a053dde95414e039" category="section-title">ONTAP儲存可在本地使用</block>
  <block id="3c2e1436532e8615aa8fdb7bb7432f80" category="paragraph">如果內部部署 Oracle 資料庫位於ONTAP儲存陣列上，則可以使用 AWS FSx ONTAP儲存內建的NetApp SnapMirror技術更輕鬆地設定資料庫遷移的複製。可以使用NetApp BlueXP控制台來協調遷移過程。</block>
  <block id="df2111c23e70fa013a85041e1415639e" category="list-text">建構與本機執行個體相符的目標計算 EC2 執行個體。</block>
  <block id="1931f75e563d3dc9ee112e9b4ebd66b7" category="list-text">從 FSx 控制台提供匹配的、大小相等的資料庫磁碟區。</block>
  <block id="98201e355445ae8a2eff3b7c33132cc6" category="list-text">將 FSx 資料庫磁碟區掛載到 EC2 執行個體。</block>
  <block id="53fad15133e494dc37bbd0494b8f3a6c" category="list-text">設定本機資料庫磁碟區與目標 FSx 資料庫磁碟區之間的SnapMirror複製。初始同步可能需要一些時間來移動主要來源數據，但任何後續增量更新都會快得多。</block>
  <block id="ed7c233990ddaa2e7103a9f5b77ee3de" category="list-text">切換時，關閉主應用程式以停止所有交易。從 Oracle sqlplus CLI 介面執行 Oracle 線上日誌切換並允許SnapMirror同步將最後的存檔日誌推送到目標磁碟區。</block>
  <block id="8da4f0ed2ee5c7e68c3fe9ec3dde280e" category="list-text">分解鏡像卷，在目標上執行 Oracle 恢復，並啟動資料庫進行服務。</block>
  <block id="6efd103fd0a488a3d023523ab6377e4e" category="list-text">將應用程式指向雲端中的 Oracle 資料庫。</block>
  <block id="094ef1326e70f1212e06a1b5d65d2922" category="paragraph">以下影片示範如何使用NetApp BlueXP控制台和SnapMirror複製將 Oracle 資料庫從本機遷移到 AWS FSx/EC2。</block>
  <block id="6cd47796208de7b1d81ffd66d5fa0744" category="video-title">將本機 Oracle 資料庫遷移到 AWS</block>
  <block id="86afa353cad293784396216eab80ee52" category="section-title">ONTAP儲存在本地不可用</block>
  <block id="c11080183211191097c120f87656c802" category="paragraph">如果內部部署 Oracle 資料庫託管在ONTAP以外的第三方儲存上，則資料庫遷移將基於 Oracle 資料庫備份副本的還原。您必須在切換之前播放存檔日誌以使其變為最新。</block>
  <block id="722283478873a13974c4b1b6ea967a40" category="paragraph">AWS S3 可作為資料庫移動和遷移的暫存儲存區域。請參閱此方法的以下進階步驟：</block>
  <block id="9312555163563ac6b35994e42f15d009" category="list-text">預置一個與本地執行個體相當的新的符合 EC2 執行個體。</block>
  <block id="8705a6dedde3ea188c113bda4fe97c14" category="list-text">從 FSx 儲存配置相等的資料庫磁碟區並將磁碟區掛載到 EC2 執行個體。</block>
  <block id="6aeff6e3d9f2f107fa5584191966f816" category="list-text">建立磁碟級 Oracle 備份副本。</block>
  <block id="0f90c0c06dae8f50c3f93d33a7547df2" category="list-text">將備份副本移至 AWS S3 儲存體。</block>
  <block id="d8fd670e7724b3db99919ea02cd762cc" category="list-text">重新建立 Oracle 控製檔案並透過從 S3 儲存中提取資料和存檔日誌來還原和還原資料庫。</block>
  <block id="c4a99d505e8ebe4d5f04ae86d2a724b7" category="list-text">將目標 Oracle 資料庫與本機來源資料庫同步。</block>
  <block id="3bac7326688b384ce82c7c9807cae4b7" category="list-text">切換時，關閉應用程式和來源 Oracle 資料庫。複製最後幾個存檔日誌並將其套用到目標 Oracle 資料庫以保持最新。</block>
  <block id="98cf6a7f87338026b5b95afee91d5676" category="list-text">啟動目標資料庫以供使用者存取。</block>
  <block id="021e473c3a779caff7d794ce36c8ef68" category="list-text">將應用程式重新導向到目標資料庫以完成切換。</block>
  <block id="e54801d4a4497c3566a98c0ef4ec6f18" category="section-title">使用 PDB 遷移將本機 Oracle 資料庫遷移到 AWS FSx/EC2，並實現最高可用性</block>
  <block id="16d584a60d17de3de7cd0dcc0828fee9" category="paragraph">這種遷移方法最適合已在 PDB/CDB 多租用戶模型中部署的 Oracle 資料庫，且ONTAP儲存在本機上不可用。  PDB 重定位方法利用 Oracle PDB 熱克隆技術在來源 CDB 和目標 CDB 之間移動 PDB，同時最大限度地減少服務中斷。</block>
  <block id="c5bd16be343bf2e5a3c081284c6c799b" category="paragraph">首先，在 AWS FSx/EC2 中建立具有足夠儲存空間的 CDB，以託管要從本地遷移的 PDB。可以一次重新定位多個本地 PDB。</block>
  <block id="d7acbe14b605ece64e94636c2ac85151" category="inline-link-macro">將單一實例非 CDB 轉換為多租戶 CDB 中的 PDB</block>
  <block id="461796854b0f6af0212402edd436650e" category="list-text">如果本機資料庫部署在單一實例中，而不是多租用戶 PDB/CDB 模型中，請依照<block ref="49f6bba6acf489c2e24ceec59c2ea0cc" category="inline-link-macro-rx"></block>將單一實例轉換為多租用戶 PDB/CDB。然後按照下一步將轉換後的 PDB 遷移到 AWS FSx/EC2 中的 CDB。</block>
  <block id="92c29ab4b5bfbc6de30e29363bc9aea7" category="inline-link-macro">使用 PDB 遷移將本機 Oracle 資料庫遷移到雲端</block>
  <block id="5f2a2d5542be4066ef8064444312f9f9" category="list-text">如果本機資料庫已部署在多租用戶 PDB/CDB 模型中，請依照<block ref="cd76591b1b4949ae37c52558aad4debf" category="inline-link-macro-rx"></block>執行遷移。</block>
  <block id="499d7c245aad786a568d21227b5b65d8" category="paragraph">以下影片示範如何使用 PDB 重定位將 Oracle 資料庫 (PDB) 遷移到 FSx/EC2 以實現最大可用性。</block>
  <block id="c0d2cea4b49d55201605052121b68ca7" category="inline-link-macro">將本機 Oracle PDB 遷移到具有最大可用性的 AWS CDB</block>
  <block id="e3d2de69302b3f20931015cece4526e4" category="paragraph"><block ref="5deefe7b3e78f7f08541c2e7b5b56e54" category="inline-link-macro-rx"></block></block>
  <block id="5eae2f4290a9e1f77061f80c6c015bc6" category="admonition">雖然步驟 1 和 2 中的說明是在 Azure 公有雲的背景下說明的，但這些流程無需任何變更即可適用於 AWS 雲端。</block>
  <block id="41099d15ad008ac11d04538ef8e57575" category="paragraph">NetApp解決方案自動化團隊提供了一個遷移工具包，可以促進 Oracle 資料庫從本地遷移到 AWS 雲端。使用下列指令下載用於 PDB 重定位的 Oracle 資料庫遷移工具包。</block>
  <block id="80d1c0ba73b8e2e8e0f305b42a776a1f" category="summary">此解決方案提供了在 AWS FSx ONTAP儲存和 EC2 運算執行個體中使用 NFS 協定進行 Oracle 資料庫部署和保護的概述和詳細信息，並使用 asm 作為磁碟區管理器在獨立 ReStart 中配置了 Oracle 資料庫。</block>
  <block id="ff1acb029b62c5c8f2a7b9fa9cd89004" category="doc">TR-4974：在 AWS FSx/EC2 上使用 NFS/ASM 進行獨立重新啟動時 Oracle 19c</block>
  <block id="25a771368cf645aad87c1626869055d5" category="paragraph">此解決方案提供了在 AWS FSx ONTAP儲存和 EC2 運算執行個體中使用 NFS 協定進行 Oracle 資料庫部署和保護的概述和詳細信息，以及在獨立 ReStart 中使用 asm 作為磁碟區管理器配置的 Oracle 資料庫。</block>
  <block id="418241bdca49e4aec92c0ff810e8e099" category="paragraph">ASM（自動儲存管理）是一種受歡迎的 Oracle 儲存磁碟區管理器，在許多 Oracle 安裝中都有使用。它也是Oracle推薦的儲存管理解決方案。它為傳統的捲管理器和檔案系統提供了替代方案。自 Oracle 11g 版本以來，ASM 已與網格基礎架構（而非資料庫）打包在一起。因此，為了在沒有 RAC 的情況下利用 Oracle ASM 進行儲存管理，必須在獨立伺服器中安裝 Oracle 網格基礎架構（也稱為 Oracle Restart）。這樣做無疑會為原本簡單的 Oracle 資料庫部署增加更多的複雜度。但是，顧名思義，當 Oracle 以重新啟動模式部署時，任何失敗的 Oracle 服務都會在主機重新啟動後重新啟動，而無需使用者乾預，從而提供一定程度的高可用性或 HA 功能。</block>
  <block id="97922f9fd788b577a80c7cf59d3de12e" category="paragraph">Oracle ASM 一般部署在 FC、iSCSI 儲存協定和 lun 作為原始儲存設備。不過，Oracle 也支援 NFS 協定和 NFS 檔案系統上的 ASM 設定。在本文檔中，我們示範如何在具有 EC2 運算執行個體的Amazon FSx ONTAP儲存環境中使用 NFS 協定和 Oracle ASM 部署 Oracle 19c 資料庫。我們也示範如何透過NetApp BlueXP控制台使用NetApp SnapCenter服務來備份、還原和複製 Oracle 資料庫，以用於開發/測試或 AWS 公有雲中儲存高效的資料庫操作的其他用例。</block>
  <block id="888381e0b388e88a008b28e9bde03499" category="list-text">使用 NFS/ASM 在Amazon FSx ONTAP儲存和 EC2 運算執行個體中部署 Oracle 資料庫</block>
  <block id="86e62b62bb73c1d45af1018c5f546fa2" category="list-text">使用 NFS/ASM 在公有 AWS 雲端中測試和驗證 Oracle 工作負載</block>
  <block id="b1868e5a46a34f2e4894103a18fa6e75" category="list-text">一位 DBA 想要使用 NFS/ASM 在 AWS 公有雲中部署 Oracle。</block>
  <block id="051c77f35308619650f171e87873bce3" category="paragraph"><block ref="051c77f35308619650f171e87873bce3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e5a8ef13e1f2826df29bb4025ed6544" category="list-text">Oracle 資料和日誌佈局。在我們的測試和驗證中，我們分別部署了兩個 ASM 磁碟組用於資料和日誌。在 +DATA asm 磁碟組中，我們在資料 NFS 檔案系統掛載點中配置了四個磁碟。在 +LOGS asm 磁碟組中，我們在日誌 NFS 檔案系統掛載點中配置了兩個磁碟。對於大型資料庫部署，可以建置 ASM 磁碟組以跨越多個 FSx 檔案系統，並透過 FSx 檔案系統上錨定的多個 NFS 掛載點分佈 ASM NFS 磁碟。此特定設定旨在滿足超過 4GBps 吞吐量的資料庫吞吐量和 160,000 原始 SSD IOPS 要求。</block>
  <block id="e2d21e7b1ae9a8e7d20087f0084bf01a" category="list-text">*dNFS 配置。 * dNFS 內建於 Oracle 核心中，並且已知當 Oracle 部署到 NFS 儲存時可顯著提高 Oracle 資料庫效能。 dNFS 打包到 Oracle 二進位檔案中，但預設未開啟。對於 NFS 上的任何 Oracle 資料庫部署，都應該啟用它。對於大型資料庫的多個 FSx 檔案系統部署，應正確配置 dNFS 多路徑。</block>
  <block id="bc229d9916fc3cb8de0f67f3e5d86528" category="list-text">*您建立的每個 Oracle ASM 磁碟組所使用的 Oracle ASM 冗餘等級。 *由於 FSx 已在 FSx 叢集層級鏡像存儲，因此您應該<block ref="7ea763007de155a1d5ac7192d220c274" prefix=" " category="inline-code"></block>使用外部冗餘，這表示該選項不允許 Oracle ASM 映像磁碟組的內容。這一點尤其重要，因為 Oracle 資料庫資料儲存的 NFS 需要 HARD NFS 掛載選項，而這對於在 Oracle 層級鏡像 ASM 內容來說是不可取的。</block>
  <block id="d953285f2eeac9b2766ac055d81bf48a" category="list-text">安裝 nfs-utils。</block>
  <block id="d5dbcd1ace089fec7f75fa03e884cb93" category="list-text">新增要用於 asm sysasm 群組的 ASM 群組</block>
  <block id="04c0abfa4d590dbcf8140c900090b7d4" category="section-title">配置並匯出要掛載到 EC2 執行個體主機的 NFS 卷</block>
  <block id="a245b068ccb33c4feb57be67c4c4929e" category="list-text">驗證已建立的資料庫磁碟區。</block>
  <block id="f6a4694211343b15651db8fdd5f16222" category="list-text">建立 /u01 目錄來掛載 Oracle 二進位檔案系統</block>
  <block id="aabf104e3877a3141576892889ebcfd2" category="list-text">掛載二進位磁碟區到<block ref="a8946fa5f211c5345e3610710e471cb4" prefix=" " category="inline-code"></block>，變更為您的 FSx NFS lif IP 位址。如果您透過NetApp自動化工具包部署了 FSx 集群，則 FSx 虛擬儲存伺服器 NFS lif IP 位址將在資源配置執行結束時列在輸出中。否則，可以從 AWS FSx 控制台 UI 中檢索它。</block>
  <block id="6dc5f678e8b8446afe039edff2864ef0" category="list-text">改變<block ref="a8946fa5f211c5345e3610710e471cb4" prefix=" " category="inline-code"></block>掛載點所有權歸 Oracle 使用者及其關聯的主要群組。</block>
  <block id="6e5bf17d6cb7ff829494e09654c5fdc2" category="list-text">建立/oradata目錄來掛載Oracle資料檔案系統</block>
  <block id="41096b5d68af7d413deac705db2e3bab" category="list-text">掛載資料磁碟區到<block ref="f006bf17b06c884c47190c4225d3215a" prefix=" " category="inline-code"></block>，更改為您的 FSx NFS lif IP 位址</block>
  <block id="90231d3bb492c7fb529e3500cdcef778" category="list-text">改變<block ref="f006bf17b06c884c47190c4225d3215a" prefix=" " category="inline-code"></block>掛載點所有權歸 Oracle 使用者及其關聯的主要群組。</block>
  <block id="fbe05a889a0659f00644b0c25e984066" category="list-text">建立 /oralogs 目錄以掛載 Oracle 日誌檔案系統</block>
  <block id="0e94479bef4fdce94a31a913e4a90ea4" category="list-text">掛載日誌捲到<block ref="894db1fc1592356880976f1b92c3e6a2" prefix=" " category="inline-code"></block>，更改為您的 FSx NFS lif IP 位址</block>
  <block id="cd48bd706e8c70912f675dc9f17a75be" category="list-text">改變<block ref="894db1fc1592356880976f1b92c3e6a2" prefix=" " category="inline-code"></block>掛載點所有權歸 Oracle 使用者及其關聯的主要群組。</block>
  <block id="06b5412c6ada2efb7e05e7a7454e34df" category="list-text">sudo 到 oracle 用戶，建立 asm 資料夾，用於存放 asm 磁碟文件</block>
  <block id="f6ebe7eea328062998e8b597d1de48e4" category="list-text">以 oracle 使用者身分建立 asm 資料磁碟文件，更改計數以匹配具有區塊大小的磁碟大小。</block>
  <block id="71d4584b509281ece4fe148bde055f32" category="list-text">修改資料盤檔案權限為640</block>
  <block id="9b424f5bec397927a45cc70947221c7d" category="list-text">以 oracle 使用者身分建立 asm 日誌磁碟文件，並將計數變更為與區塊大小相符的磁碟大小。</block>
  <block id="f2e7337a3b32de4673f07d1c3d1ac0a5" category="list-text">將日誌檔案權限變更為 640</block>
  <block id="572656c141066b10c23d5205e70be53b" category="list-text">從網格主頁複製<block ref="63628571f2dfaeb6f0a0a676290e6e82" prefix=" " category="inline-code"></block>到grid_home，然後解壓縮。</block>
  <block id="e4dae708382daa7f76913b9e5b686a1c" category="list-text">準備一個<block ref="77d9f4d56c58834c8dacf6d0cb94e085" prefix=" " category="inline-code"></block>文件進行靜默安裝，並將 rsp 檔案放在<block ref="d66a510d21988f96fd9c018f6843c729" prefix=" " category="inline-code"></block>目錄。  rsp 檔案應涵蓋 A、B 和 G 部分，並包含以下資訊：</block>
  <block id="196c642f2925757377d21779d79ba748" category="list-text">以 root 使用者登入 EC2 執行個體。</block>
  <block id="3f2a67de0c5824d878c62c0bc347e09b" category="list-text">以 Oracle 使用者身分建立 LOGS 磁碟組。</block>
  <block id="948ac6ddaa5b19c62366a04abf60547d" category="list-text">從 DB 主頁複製<block ref="63628571f2dfaeb6f0a0a676290e6e82" prefix=" " category="inline-code"></block>到<block ref="22f5bd75d60d3065afc99a50bc98d9ae" prefix=" " category="inline-code"></block>，然後解壓縮。</block>
  <block id="0181cf4258f052eaf2d48f78cd4fed7b" category="list-text">準備 DB 靜默安裝 rsp 文件<block ref="2d9ffa0a3db25b02bcd0091245449764" prefix=" " category="inline-code"></block>具有以下值的目錄：</block>
  <block id="2bba715ff3b85da75ce86da55f5d9173" category="list-text">以 Oracle 使用者身分創建<block ref="c170c347c737b82ad62c48db1f7bff3c" prefix=" " category="inline-code"></block>包含以下條目的文件：</block>
  <block id="a6774a54a715f893108bd2d2bc05062e" category="admonition">根據 EC2 執行個體主機中的可用記憶體設定總記憶體。  Oracle 分配 75%<block ref="834709f36a11a38a80fe0dc57054ec20" prefix=" " category="inline-code"></block>到資料庫執行個體 SGA 或緩衝區快取。</block>
  <block id="c96739fe831515243fc940e9ee867ea3" category="list-text">以 Oracle 使用者身份，使用 dbca 啟動 DB 建立。</block>
  <block id="c8c683d0737e702e38c962f83ab25c3f" category="list-text">以 oracle 使用者身份，切換到 Oracle 資料庫主目錄 /u01/app/oracle/product/19.0.0/db1 並啟用 dNFS</block>
  <block id="f60c53adcb933554319040836143101b" category="list-text">在ORACLE_HOME中設定oranfstab文件</block>
  <block id="e3821eca2ea743978a8041832aa25596" category="list-text">以 oracle 使用者身份，從 sqlplus 登入資料庫並將 DB 還原大小和位置設為 +LOGS 磁碟組。</block>
  <block id="78f987fb432bce81eba18cab51620826" category="list-text">啟用存檔日誌模式並重新啟動 Oracle DB 實例</block>
  <block id="2311b19efeffe5f795b74cc4dddf6246" category="list-text">實例重新啟動後驗證 DB 日誌模式和 dNFS</block>
  <block id="db852220e8f70b72373f5e4a21bd9a45" category="list-text">驗證 Oracle ASM</block>
  <block id="3809b24192da05cb9bdf6fc7f86ce5d6" category="paragraph">NetApp將發布與 Ansible 配套的全自動解決方案部署工具包，以促進該解決方案的實施。請回來檢查工具包是否可用。發布後會在這裡發布連結。</block>
  <block id="b215c3ea984bf845efc69c734ec03369" category="paragraph">目前，具有 NFS 和 ASM 儲存選項的 Oracle 資料庫僅受傳統SnapCenter Server UI 工具支持，請參閱<block ref="8f81a54fece1094b09a6e495584caacf" category="inline-link-macro-rx"></block>有關使用NetApp SnapCenter UI 工具備份、還原和克隆 Oracle 資料庫的詳細資訊。</block>
  <block id="7d34df46082e5771e092eb8736597ee0" category="summary">本節介紹使用 FSx 儲存部署 Oracle RDS 自訂資料庫的部署流程。</block>
  <block id="4020b36b638694a9834cb01b53b25ffe" category="doc">AWS EC2 和 FSx 上的 Oracle 部署步驟</block>
  <block id="f70ec60e40ece5900605229a28081b13" category="section-title">透過 EC2 控制台為 Oracle 部署 EC2 Linux 執行個體</block>
  <block id="03d6d2463e27b63c2d7f7ad0e62697af" category="paragraph">如果您是 AWS 新手，則首先需要設定 AWS 環境。 AWS 網站登入頁面上的文件標籤提供了 EC2 說明鏈接，介紹如何部署可用於透過 AWS EC2 控制台託管 Oracle 資料庫的 Linux EC2 執行個體。以下部分是這些步驟的摘要。有關詳細信息，請參閱連結的 AWS EC2 特定文件。</block>
  <block id="e1fc23220db46fe659667702f62b75e4" category="section-title">設定您的 AWS EC2 環境</block>
  <block id="6d0669826a2bd6e9eb35ea7e89cbe3f4" category="paragraph">您必須建立一個 AWS 帳戶來配置在 EC2 和 FSx 服務上執行 Oracle 環境所需的資源。以下 AWS 文件提供了必要的詳細資訊：</block>
  <block id="2966cbe914210fb4f4a3e5fe6adf4762" category="inline-link-macro">設定以使用 Amazon EC2</block>
  <block id="1e4a01fe43fb3542c08649e20440f5f1" category="list-text"><block ref="1e4a01fe43fb3542c08649e20440f5f1" category="inline-link-macro-rx"></block></block>
  <block id="df6ca3590d3bec198846463f0ef1c6a8" category="paragraph">關鍵主題：</block>
  <block id="74122bb32fc969b565a8b132d4178581" category="list-text">註冊 AWS。</block>
  <block id="fe536eddec5cc1d661347011844ba132" category="list-text">建立密鑰對。</block>
  <block id="6582688edf89986f408a52095794f65b" category="list-text">建立安全群組。</block>
  <block id="c78747962ae12e635749aa6b08a4da09" category="section-title">在 AWS 帳戶屬性中啟用多個可用區域</block>
  <block id="2d5ade6857f59cf6d198344d5049da40" category="paragraph">對於架構圖中所示的 Oracle 高可用性配置，您必須在一個區域中啟用至少四個可用區域。多個可用區也可以位於不同的區域，以滿足災難復原所需的距離。</block>
  <block id="010f8446050c9f5cc916e861a6861e35" category="paragraph"><block ref="010f8446050c9f5cc916e861a6861e35" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8faa9e48d0380a023114890a62861d0f" category="section-title">建立並連接到用於託管 Oracle 資料庫的 EC2 執行個體</block>
  <block id="82499151e189f9313aa1450e912f4ffd" category="inline-link-macro">開始使用 Amazon EC2 Linux 執行個體</block>
  <block id="822fd31d54c32c4886e9010d12a8dce7" category="paragraph">查看教學<block ref="6d0a9d65d170226042c573685041d5e9" category="inline-link-macro-rx"></block>了解逐步部署程序和最佳實務。</block>
  <block id="a15c0d1773407cc677a49f4cc169a63c" category="list-text">概述。</block>
  <block id="4d99c712f714ff14ae3b251667dda4b2" category="list-text">先決條件。</block>
  <block id="67b035efef4b92412bb7a8a903121da6" category="list-text">步驟 1：啟動實例。</block>
  <block id="6640566c783363c8a66fe226c2a7227b" category="list-text">第 2 步：連接到您的實例。</block>
  <block id="c271b00c470f8a1fb17c05dc6092d9af" category="list-text">步驟 3：清理您的實例。</block>
  <block id="9e0cd4f11314aeaa31fce7e3f5960c4c" category="paragraph">以下螢幕截圖示範了使用 EC2 控制台部署 m5 類型 Linux 執行個體以執行 Oracle。</block>
  <block id="993b6250c7c69b01670a8165c0cf949d" category="list-text">在 EC2 儀表板上，按一下黃色的啟動執行個體按鈕以啟動 EC2 執行個體部署工作流程。</block>
  <block id="487600275aef32af357e889fdebd2971" category="paragraph"><block ref="487600275aef32af357e889fdebd2971" category="inline-image-macro-rx" type="image"></block></block>
  <block id="71a4046454ceb8a1793ee0cfa14dc581" category="list-text">在步驟 1 中，選擇「Red Hat Enterprise Linux 8 (HVM)，SSD 磁碟區類型 - ami-0b0af3577fe5e3532 (64 位元 x86) / ami-01fc429821bf1f4b4 (64 位元 Arm)」。</block>
  <block id="7c7af581ca65af89c7f24a9c1416accb" category="paragraph"><block ref="7c7af581ca65af89c7f24a9c1416accb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5956dcc5f6331fe980094b6ddba4650c" category="list-text">在步驟 2 中，根據您的 Oracle 資料庫工作負載選擇具有適當 CPU 和記憶體分配的 m5 執行個體類型。按一下「下一步：配置實例詳細資料」。</block>
  <block id="5bbc5ed1fad6afc74d5ac877b225c875" category="paragraph"><block ref="5bbc5ed1fad6afc74d5ac877b225c875" category="inline-image-macro-rx" type="image"></block></block>
  <block id="302a3b9b8b1d7dfc842dbfcaa5468b1a" category="list-text">在步驟3中，選擇實例所在的VPC和子網，並啟用公用IP分配。按一下“下一步：新增儲存”。</block>
  <block id="297569626080a05a220b1194519254ff" category="paragraph"><block ref="297569626080a05a220b1194519254ff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e421be5ecc966b1d156d7f0a6f81716a" category="list-text">在步驟4中，為根磁碟分配足夠的空間。您可能需要空間來添加交換。預設情況下，EC2 實例分配零交換空間，這對於執行 Oracle 來說並不是最佳的。</block>
  <block id="63199e56bc739d7bc8cecb87386668d5" category="paragraph"><block ref="63199e56bc739d7bc8cecb87386668d5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="843f8ce7ab50f800b312d3d109724de6" category="list-text">在步驟5中，如果需要，請新增用於實例識別的標籤。</block>
  <block id="c6aafc002439963833711985dfda9c00" category="paragraph"><block ref="c6aafc002439963833711985dfda9c00" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f3ab3dbfdf3bf87e86423bcf042be111" category="list-text">在步驟 6 中，選擇一個現有安全性群組或建立具有實例所需的入站和出站原則的新安全群組。</block>
  <block id="adcd1dcd9aecdedf49ea50097467c02a" category="paragraph"><block ref="adcd1dcd9aecdedf49ea50097467c02a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6232d41ab5791353e400740b1c677c4b" category="list-text">在步驟 7 中，檢視實例設定摘要，然後按一下啟動以開始實例部署。系統會提示您建立金鑰對或選擇金鑰對來存取執行個體。</block>
  <block id="639a1de4031e700b9aee175ebb83caf1" category="paragraph"><block ref="6774e9a88fd13c01709fe25a3c92814a" category="inline-image-macro-rx" type="image"></block> <block ref="589b74f6f175ab8a565dd91b992c7eb7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="640d800543e4acd4be5582f719fe45e6" category="list-text">使用 SSH 金鑰對登入 EC2 執行個體。根據需要變更您的金鑰名稱和執行個體 IP 位址。</block>
  <block id="69321a8301f0cb7557529f92163852a6" category="paragraph">您需要在指定的可用區域中建立兩個 EC2 執行個體作為主 Oracle 伺服器和備用 Oracle 伺服器，如架構圖所示。</block>
  <block id="dd75d046636296f5f9f77e174e142dbf" category="section-title">為 Oracle 資料庫儲存配置 FSx ONTAP檔案系統</block>
  <block id="0db17ea458fe522da32ff4ad7e5b2f8b" category="paragraph">EC2 執行個體部署為作業系統指派一個 EBS 根磁碟區。  FSx ONTAP檔案系統提供 Oracle 資料庫儲存卷，包括 Oracle 二進位、資料和日誌卷。  FSx 儲存 NFS 磁碟區可以從 AWS FSx 控制台或 Oracle 安裝中進行配置，並根據使用者在自動化參數檔案中的配置來指派磁碟區的配置自動化。</block>
  <block id="b188d29a8b066345b4c65142012429c9" category="inline-link">管理 FSx ONTAP檔案系統</block>
  <block id="6072bb9ae8feccf25912ddfb26f93d61" category="paragraph">參考此文檔<block ref="62270b9b7327b2bf1e37efc2c47824db" category="inline-link-rx"></block>用於建立 FSx ONTAP檔案系統。</block>
  <block id="f992b6bed702bc01496187fcaec0b8c6" category="paragraph">主要考慮因素：</block>
  <block id="c6d0abeaa6d014ec6632e6b8493487d2" category="list-text">SSD 儲存容量。最小 1024 GiB，最大 192 TiB。</block>
  <block id="2b410cef067f8cb6a53d05ad2271439b" category="list-text">預先配置的 SSD IOPS。根據工作負載要求，每個檔案系統最多 80,000 SSD IOPS。</block>
  <block id="3ab61d0f90da3f61b5741ceb5eb191cc" category="list-text">吞吐能力。</block>
  <block id="94412c99e275ca9b650dc655a6e69119" category="list-text">設定管理員 fsxadmin/vsadmin 密碼。  FSx 配置自動化所需。</block>
  <block id="c9de3d23d86cd04ff4ebf9b1458d70c4" category="list-text">備份和維護。停用每日自動備份；資料庫儲存備份透過SnapCenter調度執行。</block>
  <block id="b2ad37d85471ba4bcaf2c2141b1a576d" category="list-text">從 SVM 詳細資料頁面擷取 SVM 管理 IP 位址以及特定於協定的存取位址。  FSx 配置自動化所需。</block>
  <block id="55d51224def42d640a0be132106582ff" category="paragraph"><block ref="55d51224def42d640a0be132106582ff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="15d09dd6ced339d4022eb28264e99543" category="paragraph">請參閱下列逐步程序來設定主或備用 HA FSx 叢集。</block>
  <block id="b2232ae7fcc8b0c89d7c5f62a079a0f9" category="list-text">在 FSx 控制台中，按一下「建立檔案系統」以啟動 FSx 設定工作流程。</block>
  <block id="250a7f2c6f37c1b8742c2f9c80b1ecfa" category="paragraph"><block ref="250a7f2c6f37c1b8742c2f9c80b1ecfa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f9aede127a30ce55a2d9e4f2cb7042ae" category="list-text">選擇Amazon FSx ONTAP。然後按一下“下一步”。</block>
  <block id="6ba8ef4ba844b7ada7afd1a1553edce6" category="paragraph"><block ref="6ba8ef4ba844b7ada7afd1a1553edce6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6a4912f49d35e15fbe2d9881db397feb" category="list-text">選擇標準創建，然後在檔案系統詳細資訊中將您的檔案系統命名為 Multi-AZ HA。根據您的資料庫工作負載，選擇自動或使用者配置的 IOPS，最高可達 80,000 SSD IOPS。  FSx 儲存在後端配備高達 2TiB NVMe 緩存，可提供更高的測量 IOPS。</block>
  <block id="d62f0314bf0167fb43dd9ddcd752726e" category="paragraph"><block ref="d62f0314bf0167fb43dd9ddcd752726e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="463daf4dcf56c33aa1c738fb16d15a27" category="list-text">在網路和安全部分中，選擇 VPC、安全群組和子網路。這些應該在 FSx 部署之前建立。根據 FSx 叢集的角色（主叢集或備用叢集），將 FSx 儲存節點放置在適當的區域中。</block>
  <block id="1a1c5cdc2bde8e0520c4dc4b02b3e292" category="paragraph"><block ref="1a1c5cdc2bde8e0520c4dc4b02b3e292" category="inline-image-macro-rx" type="image"></block></block>
  <block id="461a86bccdfc4b32cbc62af43ea97bb3" category="list-text">在「安全性和加密」部分中，接受預設值，然後輸入 fsxadmin 密碼。</block>
  <block id="aafb38759376e28459041f49b15ebd8d" category="paragraph"><block ref="aafb38759376e28459041f49b15ebd8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5e500f789aeb2255be7988000eaff0e8" category="list-text">輸入 SVM 名稱和 vsadmin 密碼。</block>
  <block id="bc17f291805b3473ff6e4c6efaad8639" category="paragraph"><block ref="bc17f291805b3473ff6e4c6efaad8639" category="inline-image-macro-rx" type="image"></block></block>
  <block id="979fcc33806fd9594ae032fb4fe33c03" category="list-text">將磁碟區配置留空；此時您不需要建立磁碟區。</block>
  <block id="f67e874b530937585c7a2fbf20e8d047" category="paragraph"><block ref="f67e874b530937585c7a2fbf20e8d047" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18c8eecfeb7f2ef5acbe5fe3fc1eb398" category="list-text">查看「摘要」頁面，然後按一下「建立檔案系統」以完成 FSx 檔案系統設定。</block>
  <block id="d7c2040c9b4298bee8d62c101cd5a0ec" category="paragraph"><block ref="d7c2040c9b4298bee8d62c101cd5a0ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="edbcb61873336784ce88a841052fa45e" category="section-title">為 Oracle 資料庫配置資料庫卷</block>
  <block id="003fd66f6ee23f3e87e5a00abe37d156" category="inline-link-macro">管理 FSx ONTAP磁碟區 - 建立卷</block>
  <block id="c1740f1ff7568be214d03a87d85702ce" category="paragraph">看<block ref="3c4534b1959e09af227c8901c380f1ae" category="inline-link-macro-rx"></block>了解詳情。</block>
  <block id="ca3a40f13fd000ce8baf0adbf73ee561" category="list-text">適當調整資料庫磁碟區的大小。</block>
  <block id="383e4b0acf358da05802b9571408fa27" category="list-text">停用效能配置的容量池分層策略。</block>
  <block id="086994099a77453bffc426910b6c783b" category="list-text">為 NFS 儲存磁碟區啟用 Oracle dNFS。</block>
  <block id="814d7476ebeabfd3208ed0432cb5ea38" category="list-text">為 iSCSI 儲存卷設定多路徑。</block>
  <block id="398cf8d5f0d4c7da2b945809849b5105" category="section-title">從 FSx 控制台建立資料庫卷</block>
  <block id="6afbf36a53c717018bd3d99a6d735c98" category="paragraph">從 AWS FSx 控制台，您可以為 Oracle 資料庫文件儲存建立三個磁碟區：一個用於 Oracle 二進位文件，一個用於 Oracle 數據，一個用於 Oracle 日誌。確保磁碟區命名與 Oracle 主機名稱（在自動化工具包中的 hosts 檔案中定義）匹配，以便正確識別。在此範例中，我們使用 db1 作為 EC2 Oracle 主機名，而不是 EC2 執行個體的典型基於 IP 位址的主機名稱。</block>
  <block id="a89d3ef473fd5bb4c5d761f42139781d" category="paragraph"><block ref="6632a3121206f73f9b2aa945d969e320" category="inline-image-macro-rx" type="image"></block> <block ref="807dd675c0484b13e292cf2ca8bfab28" category="inline-image-macro-rx" type="image"></block> <block ref="fa24877b03b6bac4112b0e2674054547" category="inline-image-macro-rx" type="image"></block></block>
  <block id="05980643a3cf9b987fd426669d474257" category="admonition">FSx 控制台目前不支援建立 iSCSI LUN。對於 Oracle 的 iSCSI LUN 部署，可以使用NetApp自動化工具包透過ONTAP自動化來建立磁碟區和 LUN。</block>
  <block id="09ee5fa03999e48e0789df07dd602d40" category="section-title">使用 FSx 資料庫磁碟區在 EC2 執行個體上安裝和設定 Oracle</block>
  <block id="9f92271be71e4bc6eb96033a9ca6d798" category="paragraph">NetApp自動化團隊提供了自動化工具包，以根據最佳實務在 EC2 執行個體上執行 Oracle 安裝和設定。目前版本的自動化套件支援 NFS 上的 Oracle 19c，預設 RU 補丁為 19.8。如果需要，自動化套件可以輕鬆適應其他 RU 補丁。</block>
  <block id="61790d4e19b846282d97e8ceb58e84e0" category="section-title">準備 Ansible 控制器來運作自動化</block>
  <block id="20f3b4bca246eb128d1c7a63ca954276" category="paragraph">按照“<block ref="9331131dd8a4a5b5cf5956c248324151" category="inline-xref-macro-rx"></block> 「設定一個小型 EC2 Linux 執行個體來執行 Ansible 控制器。與其使用 RedHat，不如使用具有 2vCPU 和 8G RAM 的 Amazon Linux t2.large 就足夠了。</block>
  <block id="6d42906c67a4432124b27f032f56e4dc" category="section-title">檢索NetApp Oracle 部署自動化工具包</block>
  <block id="7beb3cf1c62df8d836bddc0d2b6a3e57" category="paragraph">以 ec2-user 登入步驟 1 中設定的 EC2 Ansible 控制器實例，並從 ec2-user 主目錄執行<block ref="aebfab4ae394171a00d2e86fff2ff38b" prefix=" " category="inline-code"></block>指令來克隆自動化程式碼的副本。</block>
  <block id="49130c144c12238cfeca4888e29fbef6" category="section-title">使用自動化工具包執行自動化 Oracle 19c 部署</block>
  <block id="2d643b6077dec7f26021f6390dc51dc1" category="paragraph">請參閱這些詳細說明<block ref="5e50dfea2ac36766ecf96728ad279b3a" category="inline-link-macro-rx"></block>使用 CLI 自動化部署 Oracle 19c。由於您使用 SSH 金鑰對而不是密碼進行主機存取身份驗證，因此劇本執行的命令語法有細微的變化。以下列表是高度概括的：</block>
  <block id="dc8e3956f25fc431225feacc016616b5" category="list-text">預設情況下，EC2實例使用SSH金鑰對進行存取認證。從 Ansible 控制器自動化根目錄<block ref="4a1bfa90833e8fe6c82ca6f61f31d147" prefix=" " category="inline-code"></block>， 和<block ref="a1d1fcb426260f0fdb7febffa690e21c" prefix=" " category="inline-code"></block>，複製 SSH 金鑰<block ref="956c187b3d0c7dcff5b113900e032874" prefix=" " category="inline-code"></block>對於在步驟“中部署的 Oracle 主機”<block ref="9331131dd8a4a5b5cf5956c248324151" category="inline-xref-macro-rx"></block> “</block>
  <block id="9391c5feaa671121befe114951f00442" category="list-text">以 ec2-user 登入 EC2 執行個體資料庫主機，並安裝 python3 函式庫。</block>
  <block id="85e9698f3736149506cd49ab88086364" category="list-text">從根磁碟機建立 16G 交換空間。預設情況下，EC2 實例會建立零交換空間。請遵循以下 AWS 文件：<block ref="53c9867a131506eab4afe1a1678bb974" category="inline-link-macro-rx"></block> 。</block>
  <block id="be82130abf6bfa8956a5648b39ad4aa8" category="list-text">返回 Ansible 控制器<block ref="e97a9e3bee0cbfb89ba75f3695725fba" prefix="(" category="inline-code"></block>），並根據適當的要求執行預克隆劇本，<block ref="7ee7ce51db32cbf806a0c21c648f4c2b" prefix=" " category="inline-code"></block>標籤。</block>
  <block id="83e233b8fca25fb162266daf344246e4" category="list-text">切換到<block ref="127b3ddd6eac38dd05a00b88b9348ff5" prefix=" " category="inline-code"></block>目錄，閱讀 README 文件，並填充全局<block ref="5257c59f933f1208afadab7dd8ef3fe6" prefix=" " category="inline-code"></block>包含相關全域參數的檔案。</block>
  <block id="aed4b8eabfef5056093412d8609b5b9a" category="list-text">填充<block ref="caa6779553864dba00727ae27752b182" prefix=" " category="inline-code"></block>文件中的相關參數<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block>目錄。</block>
  <block id="4b8d8efa08e1060a3db2c7693c4de645" category="list-text">執行 Linux 的劇本，當提示輸入 vsadmin 密碼時按 Enter。</block>
  <block id="4d552f393608513441eb151998098b4a" category="list-text">執行 Oracle 的劇本，並在提示輸入 vsadmin 密碼時按 Enter。</block>
  <block id="af392a54b9a2464fdd334372589f1a39" category="paragraph">如果需要，將 SSH 金鑰檔案上的權限位元變更為 400。更改 Oracle 主機<block ref="e15cba2a55d1c830968665125de5abf6" prefix="(" category="inline-code"></block>在<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block>檔案）IP 位址到您的 EC2 執行個體公用位址。</block>
  <block id="ac52b3f8d77eb6814ddf5c761b019c22" category="section-title">在主 FSx HA 叢集和備用 FSx HA 叢集之間設定SnapMirror</block>
  <block id="3798adb983c6ffabbcf459359d5ddd4c" category="paragraph">為了實現高可用性和災難復原，您可以在主 FSx 儲存叢集和備用 FSx 儲存叢集之間設定SnapMirror複製。與其他雲端儲存服務不同，FSx 允許使用者以所需的頻率和複製吞吐量控制和管理儲存複製。它還使用戶能夠測試 HA/DR，而不會對可用性產生任何影響。</block>
  <block id="5414f0571ab88c4269ee945ce4291f65" category="paragraph">以下步驟顯示如何在主 FSx 儲存叢集和備用 FSx 儲存叢集之間設定複製。</block>
  <block id="006c42f009ead3331b1f69ac1979609d" category="list-text">設定主集群和備用集群對等。以 fsxadmin 使用者身分登入主集群並執行以下命令。這個相互的創建過程在主集群和備用集群上都執行創建命令。代替<block ref="33c864f25bec561bad1458ab06ec3177" prefix=" " category="inline-code"></block>使用適合您的環境的名稱。</block>
  <block id="c725d46c724a573eb994f08a1f309eec" category="list-text">在主叢集和備用叢集之間設定 vServer 對等連線。以 vsadmin 使用者身分登入主集群並執行以下命令。代替<block ref="f826cd2f4a01fe594ea3f06fc8e9a764" prefix=" " category="inline-code"></block>，<block ref="73483be5a30a2604d22183209c74149e" prefix=" " category="inline-code"></block> ，<block ref="33c864f25bec561bad1458ab06ec3177" prefix=" " category="inline-code"></block>使用適合您的環境的名稱。</block>
  <block id="91ba2ff3a22b9830c626441ad69c84ce" category="list-text">驗證叢集和虛擬伺服器對等是否設定正確。</block>
  <block id="3e7d69bad8d7a20978d112dacf7e3d9a" category="paragraph"><block ref="3e7d69bad8d7a20978d112dacf7e3d9a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f4cb6743e20f6b87b419d9386d784acc" category="list-text">為主 FSx 叢集上的每個來源磁碟區在備用 FSx 叢集上建立目標 NFS 磁碟區。根據您的環境替換磁碟區名稱。</block>
  <block id="8f65518a43c3a1ba084510438fa2d7d3" category="list-text">如果使用 iSCSI 協定進行資料訪問，您還可以為 Oracle 二進位檔案、Oracle 資料和 Oracle 日誌建立 iSCSI 捲和 LUN。在磁碟區中留出大約 10% 的可用空間用於快照。</block>
  <block id="43aea99cd4b66a7a2f8efdc090e3a5ad" category="paragraph">磁碟區建立-磁碟區 dr_db1_log-聚合 aggr1-大小 250G-狀態在線-策略預設-unix 權限 ---rwxr-xr-x-類型 RW</block>
  <block id="18274474e00c13f064a0b4df0b516185" category="list-text">對於 iSCSI LUN，為每個 LUN 建立 Oracle 主機啟動器的映射，以二進位 LUN 為例。將 igroup 替換為適合您環境的名稱，並為每個附加 LUN 增加 lun-id。</block>
  <block id="0c2c0f6ddcbbbf39434893162abce545" category="list-text">在主資料庫磁碟區和備用資料庫磁碟區之間建立SnapMirror關係。替換適合您環境的 SVM 名稱。</block>
  <block id="a25539ee33148e6d4880b87e1378cafe" category="paragraph">可以使用適用於 NFS 資料庫磁碟區的NetApp自動化工具包自動執行此SnapMirror設定。該工具包可從NetApp公共 GitHub 網站下載。</block>
  <block id="f9f129d1122f9209f8f27fa07a5ee4b2" category="paragraph">在嘗試設定和故障轉移測試之前，請仔細閱讀 README 說明。</block>
  <block id="03b2167f2383aa796f361c5c1c689a49" category="admonition">將 Oracle 二進位檔案從主叢集複製到備用叢集可能會涉及 Oracle 授權。請聯絡您的 Oracle 授權代表以取得說明。另一種方法是在復原和故障轉移時安裝和配置 Oracle。</block>
  <block id="fa697481d9c5655bd57d6ee69f0e9f07" category="section-title">SnapCenter部署</block>
  <block id="3f4b23cd1391b97e8a33f3973471103b" category="section-title">SnapCenter安裝</block>
  <block id="4c88778182d61374292e3c4ad43ae50e" category="inline-link-macro">安裝SnapCenter伺服器</block>
  <block id="282e73196d7c89bb5ec3820592ecee7c" category="paragraph">跟隨<block ref="9cac1dd5d049b670d2cd847d9e42d30c" category="inline-link-macro-rx"></block>安裝SnapCenter伺服器。本文檔介紹如何安裝獨立的SnapCenter伺服器。 SnapCenter的 SaaS 版本目前處於 Beta 版審核階段，可能很快就會推出。如果需要，請與您的NetApp代表聯繫以了解可用性。</block>
  <block id="a4c2182f79a7834db47fccf9c264332d" category="section-title">為 EC2 Oracle 主機配置SnapCenter插件</block>
  <block id="8d0edf4e55e8bc1a96862466762dcdd6" category="list-text">自動安裝SnapCenter後，以安裝SnapCenter伺服器的 Windows 主機的管理使用者身分登入SnapCenter 。</block>
  <block id="8f668537cbf52258e84a7a6ce939a8ef" category="paragraph"><block ref="8f668537cbf52258e84a7a6ce939a8ef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4af2386526da94f1d101d825c0a623e0" category="list-text">從左側選單中，按一下“設定”，然後按一下“憑證”和“新建”以新增用於SnapCenter外掛程式安裝的 ec2-user 憑證。</block>
  <block id="d6076dcc82bc4f161579194baa45edfb" category="paragraph"><block ref="d6076dcc82bc4f161579194baa45edfb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="37fc637fcb7f9b2e4336350dd7d4775e" category="list-text">重設 ec2-user 密碼並透過編輯啟用密碼 SSH 身份驗證<block ref="07b421e5f5e0300b1a0fd6cc22745306" prefix=" " category="inline-code"></block>EC2 執行個體主機上的檔案。</block>
  <block id="c1e0ecc2d0f187a040af9ef1e783314d" category="list-text">驗證「使用 sudo 權限」複選框是否被選取。您剛剛在上一個步驟中重設了 ec2-user 密碼。</block>
  <block id="0ff3f2bdc438a09baa2923bff3f95132" category="paragraph"><block ref="0ff3f2bdc438a09baa2923bff3f95132" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c3326cea52418b74168243fb56340785" category="list-text">將SnapCenter伺服器名稱和 IP 位址新增至 EC2 執行個體主機檔案以進行名稱解析。</block>
  <block id="59c8e627359bc3d4ce92126cbb1356cc" category="list-text">在SnapCenter伺服器 Windows 主機上，將 EC2 執行個體主機 IP 位址新增至 Windows 主機檔案<block ref="803976de87f6862821bd3c4d94e0ff2b" prefix=" " category="inline-code"></block>。</block>
  <block id="4f91fe76ef9595ef98ee3b0c06a43160" category="list-text">在左側選單中，選擇“主機”&gt;“託管主機”，然後按一下“新增”將 EC2 執行個體主機新增至SnapCenter。</block>
  <block id="ff5d8f256e74373151ee7a2100cb0bf2" category="paragraph"><block ref="ff5d8f256e74373151ee7a2100cb0bf2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb20727c22e9cab381fd0cd7e817ab85" category="paragraph">檢查 Oracle 資料庫，然後在提交之前按一下更多選項。</block>
  <block id="4eb361a16d33899c0fc3b10c2943775d" category="paragraph"><block ref="4eb361a16d33899c0fc3b10c2943775d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="43e249b54031e8a30915659857356cab" category="paragraph">勾選「跳過預安裝檢查」。確認跳過預安裝檢查，然後按一下儲存後提交。</block>
  <block id="34adef73c610d7f47f7516fe148485bc" category="paragraph"><block ref="34adef73c610d7f47f7516fe148485bc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d66b31e61ce12ed5022484588882f5f" category="paragraph">系統會提示您確認指紋，然後按一下確認並提交。</block>
  <block id="3918d470baf0da4baa81d1e4a923c0b4" category="paragraph"><block ref="3918d470baf0da4baa81d1e4a923c0b4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="99177ab734274d9f5f703761e4b2deef" category="paragraph">插件配置成功後，被管理主機的整體狀態顯示為正在運作。</block>
  <block id="1237480cd3e6dbf50504959514d44334" category="paragraph"><block ref="1237480cd3e6dbf50504959514d44334" category="inline-image-macro-rx" type="image"></block></block>
  <block id="112fdeb0eaa93f627cf0effc06f49c76" category="section-title">配置 Oracle 資料庫的備份策略</block>
  <block id="2ee003954aaf76b1b587794f035a1c37" category="paragraph">參考本節<block ref="2865fb6e58969a69bf88ca19f541e1ed" category="inline-link-macro-rx"></block>有關配置 Oracle 資料庫備份策略的詳細資訊。</block>
  <block id="6bfb2a8edb5f9cfb06059a588dda9cc0" category="paragraph">通常，您需要為完整快照 Oracle 資料庫備份建立策略，並為 Oracle 僅存檔日誌快照備份建立策略。</block>
  <block id="708ae75a87a6997af6838bc2e5149a28" category="admonition">您可以在備份原則中啟用 Oracle 存檔日誌修剪來控制日誌存檔空間。在“選擇輔助複製選項”中選取“建立本機 Snapshot 副本後更新SnapMirror ”，因為您需要複製到 HA 或 DR 的備用位置。</block>
  <block id="acea2698961ae21a708203b9a9b86b94" category="section-title">配置Oracle資料庫備份和調度</block>
  <block id="56f3e355b3a4359c9a0808d978ca484c" category="paragraph">SnapCenter中的資料庫備份由使用者配置，可以單獨設置，也可以作為資源群組中的群組進行設定。備份間隔取決於 RTO 和 RPO 目標。  NetApp建議您每隔幾個小時執行一次完整的資料庫備份，並以更高的頻率（例如 10-15 分鐘）存檔日誌備份，以便快速復原。</block>
  <block id="806fc242f41a4e085a01998d89fe8307" category="paragraph">請參閱<block ref="aeb62962db52b5cda2e30513aa3f3cdb" category="inline-link-macro-rx"></block>有關實施本節中建立的備份策略的詳細逐步流程<block ref="f2afcb5a9b8ad2d8fe33e91cb4edb80f" category="inline-xref-macro-rx"></block>並用於備份作業調度。</block>
  <block id="b47b1d2e2c373fd6c07f22a130e90a41" category="paragraph">下圖提供了為備份 Oracle 資料庫而設定的資源組的範例。</block>
  <block id="b28d5da0b6799981e7a13e679afeaa8d" category="paragraph"><block ref="b28d5da0b6799981e7a13e679afeaa8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5a7ba809855186bf7ed82cff9d5e1cdf" category="summary">該解決方案提供了在 AWS 中的 VMware Cloud 中部署和保護 Oracle 的概述和詳細信息，其中使用 FSx ONTAP作為主資料庫存儲，並使用 asm 作為磁碟區管理器在獨立 ReStart 中配置 Oracle 資料庫。</block>
  <block id="8c21b1cb48bb75d39598b2efc8c1246d" category="doc">TR-4979：在 VMware Cloud on AWS 中使用用戶端安裝的 FSx ONTAP實作簡化的自主管理 Oracle</block>
  <block id="a04492f0064c628fae333a55f7d89e9a" category="paragraph">此解決方案概述並詳細介紹了在 AWS 中的 VMware Cloud 中部署和保護 Oracle，其中使用 FSx ONTAP作為主資料庫存儲，並使用 asm 作為磁碟區管理器在獨立 ReStart 中配置 Oracle 資料庫。</block>
  <block id="7264a2b4e10eabab45caef5d892ac1a8" category="paragraph">幾十年來，企業一直在私人資料中心的 VMware 上運行 Oracle。  AWS 上的 VMware Cloud (VMC) 提供一鍵式解決方案，將 VMware 的企業級軟體定義資料中心 (SDDC) 軟體引入 AWS 雲端的專用、彈性、裸機基礎架構。 AWS FSx ONTAP為 VMC SDDC 提供優質儲存和資料結構，使客戶能夠在基於 vSphere 的私有雲、公有雲和混合雲環境中運行 Oracle 等業務關鍵型應用程序，並優化對 AWS 服務的存取。無論是現有或新的 Oracle 工作負載，AWS 上的 VMC 均可在 VMware 上提供熟悉、簡化且自我管理的 Oracle 環境，並具備 AWS 雲端的所有優勢，同時將所有平台管理和最佳化工作交給 VMware。</block>
  <block id="e73bc10aceb8a9e7c4ac45f0d1d0da5b" category="paragraph">本文檔示範如何在 VMC 環境中使用Amazon FSx ONTAP作為主資料庫儲存來部署和保護 Oracle 資料庫。 Oracle 資料庫可以作為直接 VM 用戶端掛載的 LUN 或 NFS 掛載的 VMware VMDK 資料儲存磁碟部署到 FSx 儲存上的 VMC。本技術報告重點介紹如何將 Oracle 資料庫部署為使用 iSCSI 協定和 Oracle ASM 的 VMC 叢集中的 VM 的直接客戶端安裝的 FSx 儲存。我們也示範如何使用NetApp SnapCenter UI 工具備份、復原和複製 Oracle 資料庫，以用於開發/測試或其他用例，以便在 AWS 上的 VMC 中進行儲存高效的資料庫操作。</block>
  <block id="1bcbe40dab06a9681d7e0fcf5e561941" category="list-text">在 AWS 上的 VMC 中部署 Oracle 資料庫，並使用Amazon FSx ONTAP作為主資料庫存儲</block>
  <block id="8652360c0a7d6cf650f303d3611a363c" category="list-text">使用NetApp SnapCenter工具在 AWS 上的 VMC 中備份並還原 Oracle 資料庫</block>
  <block id="cf30ea590ca185afdd551e920e4fade2" category="list-text">使用NetApp SnapCenter工具在 AWS 上的 VMC 中克隆 Oracle 資料庫以用於開發/測試或其他用例</block>
  <block id="ef8cc3b3b7c4616678cc6819452f021a" category="list-text">一位 DBA 希望使用Amazon FSx ONTAP在 AWS 上的 VMC 中部署 Oracle</block>
  <block id="796c3d4a6179f628784371e4fb7fa9d9" category="list-text">一位資料庫解決方案架構師，希望在 AWS 雲端上的 VMC 中測試 Oracle 工作負載</block>
  <block id="cb94ba9e822edf8670a9aedebc0852c1" category="list-text">一位儲存管理員希望使用Amazon FSx ONTAP部署和管理部署到 AWS 上的 VMC 的 Oracle 資料庫</block>
  <block id="b2777eda52c529f2b03fa9eced1c9680" category="list-text">希望在 AWS 雲端上的 VMC 中建立 Oracle 資料庫的應用程式擁有者</block>
  <block id="43b43702bc731c576655a9cbe9d3cb20" category="paragraph">此解決方案的測試和驗證是在 AWS 上的 VMC 的實驗室環境中進行的，該環境可能與最終部署環境不符。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="f517d0b17cd7ff6e33d06962dfbfea41" category="paragraph"><block ref="f517d0b17cd7ff6e33d06962dfbfea41" category="inline-image-macro-rx" type="image"></block></block>
  <block id="968ee2170dde4e5744b413462ee41e35" category="cell">一個與 VMC 位於同一 VPC 和可用區域中的 FSx ONTAP HA 集群</block>
  <block id="a19ad08a54b29b409555bf1681f098ee" category="cell">VMC SDDC 集群</block>
  <block id="cad01e8ce0c8a902e41beab182a6fe81" category="cell">Amazon EC2 i3.metal 單節點/Intel Xeon E5-2686 CPU,36核心/512G RAM</block>
  <block id="392bcaf841ff67a89aefe2473cff840b" category="cell">10.37 TB vSAN存儲</block>
  <block id="7f65285e967e5d62effe7b87198351bc" category="cell">BlueXP backup and recovery</block>
  <block id="2d2a0d505d952b5fcde17cab075157a3" category="cell">版本 1.0</block>
  <block id="af6552ad45cff98ac3271a6c92ff6d19" category="cell">部署為 ova vSphere 插件虛擬機</block>
  <block id="8887a9a417a1629326acdb917d224337" category="cell">VMware vSphere</block>
  <block id="6644cd5d665b50522c19c606bd2b1bde" category="cell">版本 8.0.1.00300</block>
  <block id="f7c55f54e2022628f07d7e62a55eec78" category="section-title">AWS 上的 VMC 中的 Oracle 資料庫配置</block>
  <block id="84e8b41cc4a43202bd012704510bd6b6" category="cell">cdb1(cdb1_pdb1,cdb1_pdb2,cdb1_pdb3)</block>
  <block id="f1566e01e42cd3da5d95437ef837891d" category="cell">FSx ONTAP上的 VMDK 資料存儲</block>
  <block id="3e17b19d4466b08c46121ab170ec8b1d" category="cell">cdb2（cdb2_pdb）</block>
  <block id="be2e4558b7d000c11b6d37e9ed3f40c8" category="cell">cdb3（cdb3_pdb1，cdb3_pdb2，cdb3_pdb3）</block>
  <block id="127cba96fa239f4b6e7834fe0c898c23" category="cell">直接客戶機安裝的 FSx ONTAP</block>
  <block id="9b7c2c624034bf5c8ad48b5e15db2c29" category="cell">cdb4（cdb4_pdb）</block>
  <block id="b2a0d74c269419c5b4c81fb601201eb3" category="list-text">*FSx 到 VMC 的連接。 *當您在 VMware Cloud on AWS 上部署 SDDC 時，它會在 AWS 帳戶和專用於您的組織並由 VMware 管理的 VPC 中建立。您還必須將 SDDC 連接到屬於您的 AWS 帳戶（稱為客戶 AWS 帳戶）。此連線可讓您的 SDDC 存取屬於您的客戶帳戶的 AWS 服務。 FSx ONTAP是部署在您的客戶帳戶中的 AWS 服務。一旦 VMC SDDC 連接到您的客戶帳戶，FSx 儲存即可供 VMC SDDC 中的虛擬機器直接安裝。</block>
  <block id="8a5846077434bed7f75867e0bbea031d" category="list-text">*FSx 儲存 HA 叢集單區域或多區域部署。 *在這些測試和驗證中，我們在單一 AWS 可用區中部署了一個 FSx HA 叢集。  NetApp也建議在同一可用區內部署 FSx ONTAP和 VMware Cloud on AWS，以獲得更好的效能並避免可用區之間的資料傳輸費用。</block>
  <block id="8f7bae5e54635f314c4287e399c587b2" category="list-text">FSx 儲存叢集大小。 Amazon FSx ONTAP儲存檔案系統提供高達 160,000 個原始 SSD IOPS、高達 4GBps 的吞吐量以及最大 192TiB 的容量。但是，您可以根據部署時的實際需求，根據預先配置的 IOPS、吞吐量和儲存限制（最小 1,024 GiB）來確定叢集大小。容量可以動態調整，而不會影響應用程式的可用性。</block>
  <block id="be0ce32710988ccdcfd841a8218afb1a" category="list-text">Oracle 資料和日誌佈局。在我們的測試和驗證中，我們分別部署了兩個 ASM 磁碟組用於資料和日誌。在 +DATA asm 磁碟組中，我們在資料磁碟區中配置了四個 LUN。在 +LOGS asm 磁碟組中，我們在日誌磁碟區中設定了兩個 LUN。通常， Amazon FSx ONTAP磁碟區內佈局的多個 LUN 可提供更好的效能。</block>
  <block id="10fd1c6c748022c4eac81e0e7815e3c9" category="list-text">iSCSI 配置。 VMC SDDC 中的資料庫虛擬機器透過 iSCSI 協定連接到 FSx 儲存。透過仔細分析 Oracle AWR 報告來確定應用程式和 iSCSI 流量吞吐量要求，從而衡量 Oracle 資料庫峰值 I/O 吞吐量要求，這一點很重要。  NetApp也建議為兩個 FSx iSCSI 端點指派四個 iSCSI 連接，並正確配置多路徑。</block>
  <block id="5fa486195592a222708baf1d0d84b596" category="list-text">*您建立的每個 Oracle ASM 磁碟組所使用的 Oracle ASM 冗餘等級。 *由於 FSx ONTAP已經在 FSx 叢集層級鏡像存儲，因此您應該使用外部冗餘，這表示該選項不允許 Oracle ASM 鏡像磁碟組的內容。</block>
  <block id="f02a238998ba2723f4626a5994f00464" category="paragraph">以下部分提供了在 AWS 上的 VMC 中部署 Oracle 19c 的逐步過程，其中將 FSx ONTAP儲存直接安裝到單一節點中的 DB VM，使用 Oracle ASM 作為資料庫磁碟區管理器重新啟動配置。</block>
  <block id="4950c77542ffaf6f7c4295f413cd34bf" category="inline-link-macro">VMware Cloud on AWS 入門</block>
  <block id="3ebe73caee30b8d941aa7da02afb494d" category="list-text">已建立使用 VMware Cloud on AWS 的軟體定義資料中心 (SDDC)。有關如何在 VMC 中建立 SDDC 的詳細說明，請參閱 VMware 文檔<block ref="8f2441f58c4fdf4959e58cb9afc7d8c0" category="inline-link-macro-rx"></block></block>
  <block id="8be484f960dc0192a878263a8ac3c41d" category="list-text">已設定 AWS 帳戶，並在您的 AWS 帳戶內建立了必要的 VPC 和網路段。  AWS 帳戶已連結到您的 VMC SDDC。</block>
  <block id="de6ab74344a23dabdc076c1be8775ed2" category="list-text">從 AWS EC2 控制台部署Amazon FSx ONTAP儲存 HA 叢集來託管 Oracle 資料庫磁碟區。如果您不熟悉 FSx 儲存的部署，請參閱文檔<block ref="818df05ad3ddda222f02b6b0e29bbd61" category="inline-link-macro-rx"></block>以獲得逐步說明。</block>
  <block id="c7480d38cc7c53dd45b4135ac24c2e50" category="list-text">上述步驟可以使用以下 Terraform 自動化工具包執行，該工具包會建立一個 EC2 執行個體作為 VMC 中透過 SSH 和 FSx 檔案系統存取 SDDC 的跳轉主機。在執行之前，請仔細查看說明並更改變數以適合您的環境。</block>
  <block id="ab75bf4284ff33ce0dff4b433e5cc77f" category="list-text">在 AWS 上的 VMware SDDC 中建置虛擬機，以託管要在 VMC 中部署的 Oracle 環境。在我們的演示中，我們建立了兩個 Linux VM 作為 Oracle DB 伺服器，一個 Windows 伺服器作為SnapCenter伺服器，以及一個可選的 Linux 伺服器作為 Ansible 控制器，以便在需要時自動安裝或配置 Oracle。以下是解決方案驗證的實驗室環境快照。</block>
  <block id="0ca3188ea78762727379ffff3db432b9" category="inline-image-macro">顯示 VMC SDDC 測試環境的螢幕截圖。</block>
  <block id="a3cc6ff7f98780903b3eee75f4b050be" category="paragraph"><block ref="a3cc6ff7f98780903b3eee75f4b050be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c9fce41c09b59cd817f89c3d5828ccc" category="list-text">另外， NetApp還提供多個自動化工具包，以便在適用時執行 Oracle 部署和配置。</block>
  <block id="d50fb02d2ad265b4dc8ea5d6a329f52c" category="admonition">請確定您已在 Oracle VM 根磁碟區中指派至少 50G，以便有足夠的空間儲存 Oracle 安裝檔案。</block>
  <block id="7b73a23b90df52ef2a02ef00b5200773" category="section-title">DB VM 核心配置</block>
  <block id="9144d3423aec7a4a79da57105f06a978" category="paragraph">在滿足先決條件後，透過 SSH 以管理員使用者身分登入 Oracle VM，並以 root 使用者身分使用 sudo 配置 Linux 核心以進行 Oracle 安裝。  Oracle 安裝檔案可以暫存於 AWS S3 儲存桶中並傳輸到 VM 中。</block>
  <block id="5fa261bdb9bdacac6f1656fc0febc8c5" category="paragraph">請參閱以下安裝檔案清單以說明<block ref="d66a510d21988f96fd9c018f6843c729" prefix=" " category="inline-code"></block>在 DB VM 上。</block>
  <block id="3f09cc7324f8c1244747932eaf3dc3ce" category="list-text">安裝<block ref="c8dff58175a7ddfedf00d77953ef42dd" prefix=" " category="inline-code"></block>。</block>
  <block id="9b044ccb441d52e3c435f781b8c3488d" category="list-text">安裝 sg3_utils。</block>
  <block id="6e92674c0bf485348ed8c0cc3f038b5f" category="list-text">安裝設備映射器多路徑。</block>
  <block id="5d1e157d7edb057e0d33d878529ef182" category="list-text">新增以下行<block ref="08561da4afe8299be4016c92bfe83435" prefix=" " category="inline-code"></block>停用<block ref="d78ade61a64b6a278ed6278e7cfd91f3" prefix=" " category="inline-code"></block>重啟後。</block>
  <block id="b9104e6156e755e4d417f51a5619e651" category="list-text">新增以下行到<block ref="8b5eec1c5f63341b700263cc37cbae02" prefix=" " category="inline-code"></block>設定檔案描述符限制和堆疊大小。</block>
  <block id="258d4c0ff1dcaaa41c50d5706b27500e" category="list-text">如果沒有設定交換空間，請使用下列指令為 DB VM 新增交換空間：<block ref="53c9867a131506eab4afe1a1678bb974" category="inline-link-macro-rx"></block>要增加的特定空間量取決於 RAM 的大小，最高可達 16G。</block>
  <block id="554a8b968dbbeb452b0d18a4f8d31077" category="list-text">為 asm 管理用戶（oracle）新增 asm 群組。</block>
  <block id="d979e8c8a06dddf190cfc1c00bdbb48b" category="list-text">修改 oracle 使用者以新增 asm 群組作為輔助群組（oracle 使用者應該在 Oracle 預先安裝 RPM 安裝後建立）。</block>
  <block id="25cbc423fe11e7d196553da546d785d1" category="list-text">如果 Linux 防火牆處於活動狀態，請停止並停用它。</block>
  <block id="1ee999f15fe9c423eb377e0090aad2bf" category="list-text">透過取消註解為管理員用戶啟用無密碼 sudo<block ref="1cb32f4855eb0834d64969fe24edd26d" prefix=" " category="inline-code"></block> /etc/sudoers 文件中的行。更改檔案權限以進行編輯。</block>
  <block id="e05fc5da4fb01e91a42e8baab993c77f" category="section-title">配置 FSx ONTAP LUN 並將其對應到 DB VM</block>
  <block id="20767a279b850aa7f1bcaef1c31a5834" category="paragraph">透過 ssh 和 FSx 集群管理 IP 以 fsxadmin 使用者身分登入 FSx 集群，從命令列配置三個磁碟區。在磁碟區內建立 LUN 來託管 Oracle 資料庫二進位檔案、資料和日誌檔案。</block>
  <block id="a4d17921e42af0c865a419c2383fc24e" category="list-text">驗證已建立的磁碟區。</block>
  <block id="fe34db0a054599cd0a406e3502d0ef5c" category="paragraph">命令輸出：</block>
  <block id="907146434a35238d633ca6753dd9c615" category="list-text">將 LUN 對應到上面建立的 igroup。為每個附加 LUN 依序增加 LUN ID。</block>
  <block id="223bac04448ebaf5c7f63e60fcdb0498" category="section-title">資料庫虛擬機器儲存配置</block>
  <block id="a50ba1970162deb2e69ba6ac5cd43b03" category="paragraph">現在，匯入並設定 VMC 資料庫 VM 上 Oracle 網格基礎架構和資料庫安裝的 FSx ONTAP儲存。</block>
  <block id="25129372dcdad77bdf8f853444a467a1" category="list-text">從 Windows 跳轉伺服器使用 Putty 以管理員使用者身分透過 SSH 登入 DB VM。</block>
  <block id="159ce09d3368d57420a832ccbf7ef199" category="list-text">使用 SVM iSCSI IP 位址發現 FSx iSCSI 端點。變更為特定於您的環境的入口網站地址。</block>
  <block id="669ffba4950ab12059582a3c3fa10940" category="list-text">透過 SSH 以 fsxadmin 使用者身分登入 FSx ONTAP集群，檢索以 6c574xxx... 開頭的每個 LUN 的序列十六進制數，十六進制數以 3600a0980 開頭，這是 AWS 供應商 ID。</block>
  <block id="c44eb19dc7906a6753272e8a1de9b1cb" category="list-text">改變<block ref="a8946fa5f211c5345e3610710e471cb4" prefix=" " category="inline-code"></block>掛載點所有權歸 oracle 使用者及其關聯的主要群組。</block>
  <block id="ebf44954c543813531faf671e318bdc9" category="list-text">透過 SSH 以管理員使用者身分登入資料庫虛擬機，並透過取消註釋啟用密碼驗證<block ref="cd94e87e5216cd088acdc4de0e9c30f1" prefix=" " category="inline-code"></block>然後註解掉<block ref="f18918133cfc22e041baab71b051c41f" prefix=" " category="inline-code"></block>。</block>
  <block id="d36d86c204f6126a4742f3c17a52b50a" category="list-text">準備一個<block ref="77d9f4d56c58834c8dacf6d0cb94e085" prefix=" " category="inline-code"></block>文件進行靜默安裝，並將 rsp 檔案放在<block ref="d66a510d21988f96fd9c018f6843c729" prefix=" " category="inline-code"></block>目錄。  rsp 檔案應涵蓋 A、B 和 G 部分，其中包含以下資訊：</block>
  <block id="9bd3ed1deb734d02d4b9004adb88c1ed" category="list-text">初始化磁碟設備以供 Oracle ASM 過濾驅動程式使用。</block>
  <block id="f0c1c255ad4ee079686c5de8b56372a2" category="list-text">驗證 HA 服務狀態。</block>
  <block id="d4d4203c3b64386ed31cefd3e527f1fc" category="list-text">建立 Oracle DB 主目錄並將目錄變更為該目錄。</block>
  <block id="51fbc23284cfef48739fa117053b0496" category="list-text">從 DB 主頁修改<block ref="ef8657f0a0a00af93ba7f1c8885339ca" prefix=" " category="inline-code"></block>並取消註釋並替換<block ref="bb7738211dd8eb3dbadf4cc63ae8eb8a" prefix=" " category="inline-code"></block>和<block ref="b2affc1a941fe7e5e65933911250249c" prefix=" " category="inline-code"></block>。</block>
  <block id="900c7011e47a25c71c72d7baa3d4786b" category="list-text">從 cdb3 home /u01/app/oracle/product/19.0.0/cdb3 執行靜默純軟體 DB 安裝。</block>
  <block id="77ca17b9b0d011a8a9693dea585ec113" category="list-text">以 root 使用者身分執行<block ref="08030ad08b2b991d61b424afd8828758" prefix=" " category="inline-code"></block>僅軟體安裝後的腳本。</block>
  <block id="c4cf035e92613b739d2fdb8f3f864b6e" category="list-text">以 oracle 用戶身份創建<block ref="c170c347c737b82ad62c48db1f7bff3c" prefix=" " category="inline-code"></block>包含以下條目的文件：</block>
  <block id="29362c5952e8a273a25c1d86fc91d838" category="list-text">以 oracle 使用者身份，使用 dbca 啟動 DB 建立。</block>
  <block id="5483ea94e6740cb9506d49c7b420197b" category="paragraph">輸出：</block>
  <block id="519ad91eddb5ee99b4c197b4172c79cf" category="list-text">重複步驟 2 中的相同步驟，在單獨的 ORACLE_HOME /u01/app/oracle/product/19.0.0/cdb4 中使用單一 PDB 建立容器資料庫 cdb4。</block>
  <block id="3a3a87b9aff1fff5afe3fd3a13cf4bec" category="list-text">以 Oracle 使用者身份，在建立資料庫後驗證 Oracle Restart HA 服務，確保所有資料庫（cdb3、cdb4）都已在 HA 服務中註冊。</block>
  <block id="1d891a18ce35238aed4ee18804d6c368" category="list-text">驗證為 cdb3 建立的 CDB/PDB。</block>
  <block id="2fa6ba00439ae530528e2071b0cae3b6" category="list-text">驗證為 cdb4 建立的 CDB/PDB。</block>
  <block id="7f1463c4022e8bf5ef77ee7b4272d57e" category="list-text">使用 sqlplus 以 sysdba 身分登入每個 cdb，並將 DB 還原目標大小設為兩個 cdb 的 +LOGS 磁碟組大小。</block>
  <block id="d2dff87fed5b165c0917439bd2348ee6" category="list-text">使用 sqlplus 以 sysdba 身分登入每個 cdb，並依序使用下列命令集啟用存檔日誌模式。</block>
  <block id="059230c3af2be97f2f14287139b3cae4" category="paragraph">這完成了在Amazon FSx ONTAP儲存和 VMC DB VM 上重新啟動 Oracle 19c 版本 19.18 的部署。如果需要， NetApp建議將 Oracle 控製檔案和線上日誌檔案重新定位到 +LOGS 磁碟組。</block>
  <block id="d4c868638655b6a0f05ff19eb2dc90b3" category="section-title">SnapCenter設定</block>
  <block id="43b9d4da02f11505dff89d05efea04c6" category="inline-link-macro">您可以使用 Oracle 資料庫插件做什麼</block>
  <block id="c6dd5b1c74dacee8c5ea6ea24ec47c61" category="paragraph">SnapCenter依賴資料庫 VM 上的主機端插件來執行應用程式感知的資料保護管理活動。有關適用於 Oracle 的NetApp SnapCenter插件的詳細信息，請參閱此文檔<block ref="7a6b1ddf3a0731d31936d6522df7c6ca" category="inline-link-macro-rx"></block>。以下提供了設定SnapCenter以進行 Oracle 資料庫備份、復原和複製的進階步驟。</block>
  <block id="68f9ff06ec00760816a8852081d652a9" category="inline-link-macro">NetApp支援下載</block>
  <block id="9f3f125ee631455138d3f4f0e7e3eab6" category="list-text">從NetApp支援網站下載最新版本的SnapCenter software：<block ref="3cca19c7256555824970f142627f53d3" category="inline-link-macro-rx"></block> 。</block>
  <block id="4e26d4a1dcc35c4e1d2dfd9c3b78e535" category="inline-link-macro">取得用於桌面應用程式的 Java</block>
  <block id="a6e522693361323d4999a459b325b038" category="list-text">以管理員身份安裝最新的 Java JDK<block ref="1a0bb7a886be273015991771cf1b1190" category="inline-link-macro-rx"></block>在SnapCenter伺服器 Windows 主機上。</block>
  <block id="02e32891e3de53a22cecc990dca68e55" category="admonition">如果 Windows 伺服器部署在網域環境中，請將網域使用者新增至SnapCenter伺服器本機管理員群組，並使用網域使用者執行SnapCenter安裝。</block>
  <block id="d71146f6c986dedfe7a80892a16bf95a" category="list-text">以安裝使用者身分透過 HTTPS 連接埠 8846 登入SnapCenter UI 以設定SnapCenter for Oracle。</block>
  <block id="ce9b8e01e17b619f7f8a43211a1ffd57" category="list-text">更新<block ref="6b2d6702a0358e8df43b31cf0890a30f" prefix=" " category="inline-code"></block>在全域設定中。</block>
  <block id="10f89a6808c7ca8a60e377ea9537da91" category="inline-image-macro">顯示SnapCenter配置的螢幕截圖。</block>
  <block id="5b013854b310272734f6e4f9b63e2cba" category="paragraph"><block ref="5b013854b310272734f6e4f9b63e2cba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0c933eebaf80d285dfac08fec41a6a6b" category="list-text">建立 Oracle 資料庫備份策略。理想情況下，建立單獨的存檔日誌備份策略，以允許更頻繁的備份間隔，從而最大限度地減少故障時的資料遺失。</block>
  <block id="38e88a98d97ddbbc6fad69f518cd012e" category="paragraph"><block ref="38e88a98d97ddbbc6fad69f518cd012e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="638c0eb2b08e7f1a3e5f520754df2492" category="list-text">新增資料庫伺服器<block ref="03bc142e6422dbb9b288ad2cabee08c7" prefix=" " category="inline-code"></block>用於SnapCenter存取 DB VM。該憑證應在 Linux VM 上具有 sudo 權限或在 Windows VM 上具有管理員權限。</block>
  <block id="ef566c9965e38f71bfe1626a6394c61c" category="paragraph"><block ref="ef566c9965e38f71bfe1626a6394c61c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd00724bb50c560f784951b9675078a9" category="list-text">將 FSx ONTAP儲存叢集新增至<block ref="5c6ab1284b6b7a5a7102854a969c99be" prefix=" " category="inline-code"></block>具有叢集管理 IP 並透過 fsxadmin 使用者 ID 進行身份驗證。</block>
  <block id="ca11147de8c392ae9e43aab81e70f743" category="paragraph"><block ref="ca11147de8c392ae9e43aab81e70f743" category="inline-image-macro-rx" type="image"></block></block>
  <block id="026ec4d6f3dd2407e2e1278ccc1eb4de" category="list-text">在 VMC 中新增 Oracle 資料庫 VM<block ref="8124579383e90243e4b06323d2b37f8d" prefix=" " category="inline-code"></block>使用前面步驟 6 建立的伺服器憑證。</block>
  <block id="0b11f9f53a89cd9db21cc85ddd53ff52" category="paragraph"><block ref="0b11f9f53a89cd9db21cc85ddd53ff52" category="inline-image-macro-rx" type="image"></block></block>
  <block id="363544b94b5ce99f22af62c11cdfb685" category="admonition">確保SnapCenter伺服器名稱可以解析為 DB VM 的 IP 位址，並且 DB VM 名稱可以解析為SnapCenter伺服器的 IP 位址。</block>
  <block id="025cf2f18f2e268b39a9e3b95afe5c03" category="section-title">資料庫備份</block>
  <block id="569cda6ea25c5dbb40dbe351743ff809" category="paragraph">與傳統的基於 RMAN 的方法相比， SnapCenter利用 FSx ONTAP磁碟區快照實作更快的資料庫備份、復原或複製。由於資料庫在快照之前處於 Oracle 備份模式，因此快照與應用程式一致。</block>
  <block id="edf9da3decc598bb9b93dc595dfb701a" category="list-text">從<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡，將 VM 新增至SnapCenter後，會自動發現 VM 上的任何資料庫。最初，資料庫狀態顯示為<block ref="4aa6066b3ed6d1b995450c6c7ad4a3d8" prefix=" " category="inline-code"></block>。</block>
  <block id="b10e208514bf3d9b1d5b81372d142337" category="paragraph"><block ref="b10e208514bf3d9b1d5b81372d142337" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0a671953c31e073dfa8b0ed9da13f596" category="list-text">建立一個資源組，按照邏輯分組（例如按 DB VM 等）備份資料庫。在此範例中，我們建立了一個 ora_02_data 群組，對 VM ora_02 上的所有資料庫進行完整的線上資料庫備份。資源組 ora_02_log 僅在 VM 上執行歸檔日誌的備份。建立資源組也定義了執行備份的計畫。</block>
  <block id="cad29c3db25d24da4bbee5aea60736da" category="paragraph"><block ref="cad29c3db25d24da4bbee5aea60736da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7b0d69d2347240232ff1724962274d17" category="list-text">也可以透過點擊<block ref="9af892ad254c844922acba8e89078d6d" prefix=" " category="inline-code"></block>並依照資源組中定義的策略執行備份。</block>
  <block id="bd9aa9cb7e810fe9ca3fc51853357011" category="paragraph"><block ref="bd9aa9cb7e810fe9ca3fc51853357011" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ddf172cecda6c976fecf4c27819e241" category="list-text">備份作業可以在<block ref="d2986ac8cb6bd55892099c1ffd6b1f6f" prefix=" " category="inline-code"></block>按一下正在執行的作業來開啟選項卡。</block>
  <block id="3743613408568cbb8fffc38bd611ec56" category="paragraph"><block ref="3743613408568cbb8fffc38bd611ec56" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d972f47eb27d37493fd1b73f1c799699" category="list-text">備份成功後，資料庫狀態顯示作業狀態和最近一次備份時間。</block>
  <block id="029dc816f654fac31766bc14a31f524c" category="paragraph"><block ref="029dc816f654fac31766bc14a31f524c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1b29d7776717c0a002b1cfb23bba6ede" category="list-text">按一下資料庫以查看每個資料庫的備份集。</block>
  <block id="df8e6bed53d8cc6da01aedd9bad46e52" category="paragraph"><block ref="df8e6bed53d8cc6da01aedd9bad46e52" category="inline-image-macro-rx" type="image"></block></block>
  <block id="381a4da48b283cb83eaca25d4d82a5a0" category="section-title">資料庫復原</block>
  <block id="5586b3dfa8d7aaa4771cba0c795dcc1c" category="paragraph">SnapCenter為 Oracle 資料庫提供了多種從快照備份中復原的選項。在此範例中，我們演示了時間點恢復以恢復錯誤刪除的表。在VM ora_02上，兩個資料庫cdb3、cdb4共享相同的+DATA、+LOGS磁碟組。一個資料庫的資料庫復原不會影響另一個資料庫的可用性。</block>
  <block id="7cc816f478b8fdfd718bae0b9383c204" category="list-text">首先，建立測試表並在表中插入一行以驗證時間點恢復。</block>
  <block id="10196ada2a83568ea4b23ac007abb3e1" category="list-text">我們從SnapCenter運行手動快照備份。然後放下桌子。</block>
  <block id="5ab664c5c8573a6f098f67e573077ddb" category="list-text">從上一個步驟建立的備份集中，記下日誌備份的 SCN 號碼。點選<block ref="2bd339d85ee3b33e513359ce781b60cc" prefix=" " category="inline-code"></block>啟動復原工作流程。</block>
  <block id="03643ecb408a04d6369807964f4c0a00" category="paragraph"><block ref="03643ecb408a04d6369807964f4c0a00" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c4d348e917d1812ea79e94ee7799918a" category="list-text">選擇恢復範圍。</block>
  <block id="5d9ddfd10a0595c3b37570e907352e03" category="paragraph"><block ref="5d9ddfd10a0595c3b37570e907352e03" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d1ae3afc2dfbd2dfa9b6aa0b4557161" category="list-text">選擇復原範圍直至上次完整資料庫備份的日誌 SCN。</block>
  <block id="cc84b4e33c4183f620a20594ccb185e3" category="paragraph"><block ref="cc84b4e33c4183f620a20594ccb185e3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c70ff881ea5d29e3a88b724e098e9d66" category="list-text">指定要執行的任何可選預腳本。</block>
  <block id="910015a1b5f4e9328499121c55217a8a" category="paragraph"><block ref="910015a1b5f4e9328499121c55217a8a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="81bc29b1b95871e6d5d7d76b917a005a" category="list-text">指定要執行的任何可選的後續腳本。</block>
  <block id="e6e6b6d865c940446e8b169418e324b5" category="paragraph"><block ref="e6e6b6d865c940446e8b169418e324b5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="550a7e596b298565d43b08bbdc9e9502" category="list-text">如果需要的話，發送工作報告。</block>
  <block id="b67c26325aa28b8194fd13b45c842e2b" category="paragraph"><block ref="b67c26325aa28b8194fd13b45c842e2b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9c30b39b40cf957f005a8d97554cb792" category="list-text">查看摘要並點擊<block ref="a20ddccbb6f808ec42cd66323e6c6061" prefix=" " category="inline-code"></block>啟動恢復和復甦。</block>
  <block id="19d3b39cada554662e288d920070f33b" category="paragraph"><block ref="19d3b39cada554662e288d920070f33b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2b097285b35ac926b6e3a30da709b120" category="list-text">從 Oracle Restart 網格控制中，我們觀察到當 cdb3 處於復原和復原狀態時，cdb4 處於線上且可用狀態。</block>
  <block id="bbbd2ca379f212b84f7d2f83633ac2e2" category="paragraph"><block ref="bbbd2ca379f212b84f7d2f83633ac2e2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b011ed6e72e83b31014ed609b024d671" category="list-text">從<block ref="d2986ac8cb6bd55892099c1ffd6b1f6f" prefix=" " category="inline-code"></block>選項卡，開啟作業以查看詳細資料。</block>
  <block id="86579fa281ba9b8a24f9ff5532d39cb3" category="paragraph"><block ref="86579fa281ba9b8a24f9ff5532d39cb3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f8dc42fb122639d83a29d4d65e2b815e" category="list-text">從 DB VM ora_02，驗證刪除的表在成功恢復後是否恢復。</block>
  <block id="82459660e8d561fc463b49540987f53f" category="section-title">資料庫克隆</block>
  <block id="f6e7e97c5e19c813d868b9fef1ce8249" category="paragraph">在此範例中，相同的備份集用於在不同的 ORACLE_HOME 中的相同 VM 上複製資料庫。如果需要，這些程式同樣適用於將資料庫從備份複製到 VMC 中的單獨 VM。</block>
  <block id="166b0369d9dcd60c22b00908c9989b23" category="list-text">開啟資料庫cdb3備份清單。從所選的資料備份中，按一下<block ref="ff24590464659ee8cdec688128c35f89" prefix=" " category="inline-code"></block>按鈕啟動資料庫克隆工作流程。</block>
  <block id="e2a86ae93a090b1427ebaa2f9e665b9a" category="paragraph"><block ref="e2a86ae93a090b1427ebaa2f9e665b9a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26e18e582adb0a52168bd3417e7e507d" category="list-text">將克隆資料庫命名為 SID。</block>
  <block id="19fd68eefe67673d5c21f0d1f5c4498b" category="paragraph"><block ref="19fd68eefe67673d5c21f0d1f5c4498b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1864ca75c3d9655e9c9c1fb1fea390df" category="list-text">在 VMC 中選擇一個 VM 作為目標資料庫主機。主機上應該安裝並配置相同的 Oracle 版本。</block>
  <block id="81968b66a2163518ccc07aca74632b47" category="paragraph"><block ref="81968b66a2163518ccc07aca74632b47" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c1b5c3a41783f4011163cf3a7694f36d" category="list-text">在目標主機上選擇適當的 ORACLE_HOME、使用者和群組。保留預設憑證。</block>
  <block id="2a9ceba13cac6834a121165b7655e1eb" category="paragraph"><block ref="2a9ceba13cac6834a121165b7655e1eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="991df28ae4ba0a10c1ae7d1cc1ea3292" category="list-text">更改克隆資料庫參數以滿足克隆資料庫的配置或資源要求。</block>
  <block id="874b012adbaf6abb809a521380d7d5ae" category="paragraph"><block ref="874b012adbaf6abb809a521380d7d5ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="73ec64d1d5561a05f8953f32ccc418e3" category="list-text">選擇恢復範圍。<block ref="e6cb3190c21226943d9002045ab8a93a" prefix=" " category="inline-code"></block>將克隆還原到備份集中最後一個可用的日誌檔案。</block>
  <block id="d1cd045c499c1a3d105a5e07aa3cc551" category="paragraph"><block ref="d1cd045c499c1a3d105a5e07aa3cc551" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f940cd9350acca488dc054b4cb0fd9e" category="list-text">查看摘要並啟動克隆作業。</block>
  <block id="f502097b54b49b204de60be9cd20bac7" category="paragraph"><block ref="f502097b54b49b204de60be9cd20bac7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a6aaccd301944bbd2ed25852fb0e705a" category="list-text">監控克隆作業的執行情況<block ref="d2986ac8cb6bd55892099c1ffd6b1f6f" prefix=" " category="inline-code"></block>選項卡。</block>
  <block id="610db5fbae96fe01b535030f25c6783c" category="paragraph"><block ref="610db5fbae96fe01b535030f25c6783c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4eb7f9133e0f7dd8abfb2b1a117e57d8" category="list-text">克隆的資料庫會立即在SnapCenter中註冊。</block>
  <block id="a8e66d0947ba9e06f66044daff62637d" category="paragraph"><block ref="a8e66d0947ba9e06f66044daff62637d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65640816580ff72a56a1081922993c9f" category="list-text">從 DB VM ora_02 中，克隆的資料庫也在 Oracle Restart 網格控制中註冊，並且刪除的測試表在克隆的資料庫 cdb3tst 中恢復，如下所示。</block>
  <block id="9f6329a70dd516951fa70a4f7a3a10ea" category="paragraph">這完成了 AWS 上的 VMC SDDC 中 Oracle 資料庫的SnapCenter備份、復原和克隆的示範。</block>
  <block id="ac9c0a61f41745e8c77a713ddf6821eb" category="list-text">VMware Cloud on AWS 文檔</block>
  <block id="c795642cf5dd34e946fb3142d8f52288" category="inline-link-macro"><block ref="c795642cf5dd34e946fb3142d8f52288" category="inline-link-rx"></block></block>
  <block id="450d2faa3005c2b5ef481da0fa99a49c" category="paragraph"><block ref="450d2faa3005c2b5ef481da0fa99a49c" category="inline-link-macro-rx"></block></block>
  <block id="f6fe5f65828d55c1f997c1bf7b8bacf2" category="summary">此解決方案概述並詳細介紹如何在 AWS EC2 中使用 Redhat Enterprise Linux (RHEL) 上的 Pacemaker 叢集以及透過 NFS 協定使用Amazon FSx ONTAP實作資料庫儲存 HA 的 Oracle 高可用性 (HA)。</block>
  <block id="5bde66b68ed65b6f3e2143184fa4e287" category="doc">TR-4998：使用 Pacemaker Clustering 和 FSx ONTAP在 AWS EC2 中實作 Oracle HA</block>
  <block id="df71fa68d5ae3b4067c539f59f41a3c8" category="paragraph">許多努力在公有雲中自行管理和運行 Oracle 的客戶需要克服一些挑戰。其中一個挑戰是實現 Oracle 資料庫的高可用性。傳統上，Oracle 客戶依靠稱為「真正應用叢集」或 RAC 的 Oracle 資料庫功能在多個叢集節點上實現主動-主動事務支援。一個節點發生故障不會阻礙應用程式的處理。不幸的是，Oracle RAC 實現在許多流行的公有雲（如 AWS EC2）中並不容易獲得或支援。透過利用 RHEL 和Amazon FSx ONTAP中內建的 Pacemaker 叢集 (PCS)，客戶可以在無需 Oracle RAC 授權成本的情況下實現可行的替代方案，以便在運算和儲存上實現主動-被動集群，從而支援 AWS 雲端中的關鍵任務 Oracle 資料庫工作負載。</block>
  <block id="63215125560b028e48edb3ec01c2d19f" category="paragraph">本文檔示範了在 RHEL 上設定 Pacemaker 叢集、在 EC2 和使用 NFS 協定的Amazon FSx ONTAP上部署 Oracle 資料庫、在 Pacemaker 中配置 Oracle 資源以實作 HA 以及在最常遇到的 HA 場景下透過驗證完成簡報的詳細資訊。該解決方案還提供有關使用NetApp SnapCenter UI 工具快速備份、還原和克隆 Oracle 資料庫的資訊。</block>
  <block id="bda70cbd46213e517a6edf6b7aca7cf6" category="list-text">RHEL 中的 Pacemaker HA 叢集設定和配置。</block>
  <block id="2c4a0092362fe73af31befdf5d1c58e8" category="list-text">AWS EC2 和Amazon FSx ONTAP中的 Oracle 資料庫 HA 部署。</block>
  <block id="98b89d6751f11213b0c71acef2d2227d" category="list-text">想要在 AWS EC2 和Amazon FSx ONTAP中部署 Oracle 的 DBA。</block>
  <block id="e3a4f5d5a5924c80fbf8279dcf5b5eb4" category="list-text">一位資料庫解決方案架構師，想要在 AWS EC2 和Amazon FSx ONTAP中測試 Oracle 工作負載。</block>
  <block id="ba778845e9fce67c9a4599f51a6c3c24" category="list-text">想要在 AWS EC2 和Amazon FSx ONTAP中部署和管理 Oracle 資料庫的儲存管理員。</block>
  <block id="d2887edb936539802aa0e0fc7411ec17" category="list-text">希望在 AWS EC2 和Amazon FSx ONTAP中建立 Oracle 資料庫的應用程式擁有者。</block>
  <block id="28c3179b4d645d4a8ebc13e3ed582398" category="inline-image-macro">此圖提供了帶有 Pacemaker Clustering 和 FSx ONTAP 的AWS EC2 中的 Oracle HA 的詳細圖片。</block>
  <block id="1f70e23f0ae234400604a123ef00354c" category="paragraph"><block ref="1f70e23f0ae234400604a123ef00354c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5e39aec7105afeabde4a61beac5b9371" category="cell">us-east-1 中的單可用區，容量 1024 GiB，吞吐量 128 MB/s</block>
  <block id="9d7649826cfffa4c830a594a2aa28395" category="cell">資料庫伺服器的 EC2 執行個體</block>
  <block id="36912d3138028b9cb8254223bad05e5a" category="cell">兩個 EC2 T2 xlarge EC2 實例，一個作為主資料庫伺服器，另一個作為備用資料庫伺服器</block>
  <block id="77433b1c395ee065d09c9624e81afe87" category="cell">Ansible 控制器的虛擬機</block>
  <block id="3f6661478b267ff8048d072baab710db" category="cell">一個 Linux VM，用於在 NFS 上執行自動化 AWS EC2/FSx 配置和 Oracle 部署</block>
  <block id="d95adee972ae170512bd3bdbce557054" category="cell">起搏器</block>
  <block id="34471ee52af721273e94a36bef5caa59" category="cell">版本 0.10.18</block>
  <block id="6c2ce2341d501454a799e87145719e3e" category="cell">RedHat RHEL 8.0 高可用性附加元件</block>
  <block id="c5153aca08b1a4db2e223c59c1e1c5ae" category="section-title">AWS EC2/FSx 實驗室環境中的 Oracle 資料庫主動/被動配置</block>
  <block id="01aa7c49c1ceb37acc19c17632442e0c" category="cell">主節點：orapm01/ip-172.30.15.111</block>
  <block id="1f9855ba163e5821776108e92a90f96a" category="cell">NTAP(NTAP_PDB1,NTAP_PDB2,NTAP_PDB3)</block>
  <block id="2b4cf5ad813d81fa5e527e5f6899451a" category="cell">/u01、/u02、/u03 NFS 在Amazon FSx ONTAP磁碟區上掛載</block>
  <block id="e3669ef59cda4f01bf9c932d0dff7668" category="cell">備用節點：orapm02/ip-172.30.15.5</block>
  <block id="b14f37c5307f4d6bb24900e4c2e788e3" category="cell">故障轉移時 NTAP(NTAP_PDB1、NTAP_PDB2、NTAP_PDB3)</block>
  <block id="240df300f65d57468935936d05d26adf" category="cell">/u01、/u02、/u03 故障轉移時 NFS 掛載</block>
  <block id="6e05562cdd87776b39b57d6ea61382c0" category="list-text">* Amazon FSx ONTAP HA。 *預設情況下， Amazon FSx ONTAP在單一或多個可用區域的 HA 儲存控制器對中配置。它以主動/被動方式為關鍵任務資料庫工作負載提供儲存冗餘。儲存故障轉移對於最終用戶來說是透明的。發生儲存故障轉移時無需使用者乾預。</block>
  <block id="861110a6d0268877bf71e63396fc9e4e" category="list-text">*PCS 資源群組和資源排序。 *資源群組允許多個具有依賴關係的資源在同一個叢集節點上運作。資源順序強制執行資源啟動順序和關閉順序的相反順序。</block>
  <block id="dab6e7e29838a88473d5e17ba5e5e521" category="list-text">*首選節點。 * Pacemaker 叢集刻意部署在主動/被動叢集中（不是 Pacemaker 的要求），並與 FSx ONTAP叢集同步。當具有位置約束時，活動的 EC2 執行個體將配置為 Oracle 資源的首選節點。</block>
  <block id="2ea34e3a63928ab0fdb7e04ddd4d15c3" category="list-text">*備用節點的隔離延遲。 *在雙節點 PCS 叢集中，仲裁數被人為設定為 1。如果叢集節點之間出現通訊問題，則任一節點都可能嘗試隔離另一個節點，這可能會導致資料損壞。在備用節點上設定延遲可以緩解該問題，並允許主節點在備用節點被隔離時繼續提供服務。</block>
  <block id="fca5f3354258ffe645a350badc238fa7" category="list-text">*多可用區部署考慮。 *該解決方案在單一可用區域內部署並驗證。對於多可用區部署，需要額外的 AWS 網路資源在可用區之間移動 PCS 浮動 IP。</block>
  <block id="315fd44657ba26625ec59b3ca9603a6b" category="list-text">Oracle 資料庫儲存佈局。在此解決方案示範中，我們為測試資料庫 NTAP 配置三個資料庫磁碟區來託管 Oracle 二進位檔案、資料和日誌。這些磁碟區透過 NFS 安裝在 Oracle DB 伺服器上，形式為 /u01 - 二進位、/u02 - 資料和 /u03 - 日誌。在 /u02 和 /u03 掛載點上配置雙控製檔以實現冗餘。</block>
  <block id="23188bdc56a2b92fa7841dae55934d55" category="paragraph">以下部分提供了在 AWS EC2 中使用 Pacemaker 叢集和Amazon FSx ONTAP部署和配置 Oracle 資料庫 HA 以進行資料庫儲存保護的逐步流程。</block>
  <block id="7605a49783b639ba27403968d49af9df" category="paragraph">在 Ansible 控制器和 EC2 執行個體資料庫虛擬機器之間啟用 ssh 公鑰/私鑰認證。</block>
  <block id="0eaa3793e51fa525898cb2f3dbfe5220" category="section-title">配置 EC2 執行個體和Amazon FSx ONTAP儲存集群</block>
  <block id="76036f5d77a2071a9ee5be7c9c35f955" category="paragraph">雖然可以從 AWS 控制台手動配置 EC2 執行個體和Amazon FSx ONTAP ，但建議使用基於NetApp Terraform 的自動化工具包來自動配置 EC2 執行個體和 FSx ONTAP儲存叢集。以下是詳細步驟。</block>
  <block id="33d7ca25ee45cd96931f23c9254c331b" category="list-text">從 AWS CloudShell 或 Ansible 控制器 VM 複製 EC2 和 FSx ONTAP的自動化工具包副本。</block>
  <block id="bae7d0ac03ac455bfcc3c6965e07fd88" category="admonition">如果工具包不是從 AWS CloudShell 執行的，則需要使用 AWS 使用者帳戶存取/金鑰對對您的 AWS 帳戶進行 AWS CLI 驗證。</block>
  <block id="5f2c834acd2fc60dd30f480c88d72c6a" category="list-text">查看工具包中包含的 READme.md 檔案。根據所需的 AWS 資源修改 main.tf 和相關參數檔。</block>
  <block id="6820b23ea86b25919f28516f7308f210" category="list-text">驗證並執行 Terraform 計劃。成功執行將在目標 AWS 帳戶中建立兩個 EC2 執行個體和一個 FSx ONTAP儲存叢集。自動化輸出顯示 EC2 執行個體 IP 位址和 FSx ONTAP叢集端點。</block>
  <block id="9dbaac18b2c0a62ca302a3d4049bd869" category="paragraph">這完成了 Oracle 的 EC2 執行個體和 FSx ONTAP配置。</block>
  <block id="bc0092fea092d857c0eac1aff350982a" category="section-title">Pacemaker 叢集設置</block>
  <block id="400fa5b3553e14023887fe32071cb892" category="paragraph">RHEL 的高可用性附加元件是一個叢集系統，可為關鍵生產服務（如 Oracle 資料庫服務）提供可靠性、可擴充性和可用性。在此使用案例示範中，設定並配置了一個雙節點 Pacemaker 集群，以支援主動/被動叢集場景中 Oracle 資料庫的高可用性。  </block>
  <block id="30453ea8c03108a1df11c8020b608029" category="paragraph">以 ec2-user 身分登入 EC2 實例，完成下列任務<block ref="f6cb3e816496528d4187db53bc66567f" prefix=" " category="inline-code"></block>EC2 執行個體：</block>
  <block id="11c43481efb37bab52c1fc10fdaf286e" category="list-text">刪除 AWS Red Hat 更新基礎架構 (RHUI) 用戶端。</block>
  <block id="fd95ba94bf17e8ede3044fc8bf0cbde6" category="list-text">向 Red Hat 註冊 EC2 執行個體虛擬機器。</block>
  <block id="3f50d2362440491c14aaa712a76820f2" category="list-text">啟用 RHEL 高可用性 rpm。</block>
  <block id="e0170f80226fcadbd154e86dbc54b61c" category="list-text">安裝起搏器和圍欄代理。</block>
  <block id="b3c710ebe88703e176f0de3e34dd53d4" category="list-text">在所有叢集節點上為 hacluster 使用者建立密碼。對所有節點使用相同的密碼。</block>
  <block id="38132b685379ed7c5d770105bb06e07b" category="list-text">啟動 pcs 服務並使其在啟動時啟動。</block>
  <block id="0329cc41f4fb7250dd4f6b96a75226c0" category="list-text">驗證 pcsd 服務。</block>
  <block id="758390b315fd9d53cb04208c4635b0b7" category="list-text">將叢集節點新增至主機檔案。</block>
  <block id="dbf3cc886cd97491079b0587b3377a12" category="list-text">安裝並設定 awscli 以連接到 AWS 帳戶。</block>
  <block id="89eaeefddfdf7b4d5bebb16e171483e1" category="list-text">如果尚未安裝，請安裝資源代理程式套件。</block>
  <block id="3cf61f05d0f1b9598e3b14a255f8a783" category="paragraph">在<block ref="72bfdbba8247124dd972fab874e80dd8" prefix=" " category="inline-code"></block>叢集節點，完成以下任務來建立pcs叢集。</block>
  <block id="44b47b8c48ef4f3470b9faf0e6efc810" category="list-text">對pcs用戶hacluster進行身份驗證。</block>
  <block id="e8139e328342798e7c83f51be338504c" category="list-text">創建pcs集群。</block>
  <block id="3a3e520deb19f19a8fcda0c6f49e33b9" category="list-text">啟用叢集。</block>
  <block id="d11744358f5ffeade8c06909f641d769" category="list-text">啟動並驗證叢集。</block>
  <block id="032be6bb7f19b9d2fb3c069d566c441d" category="paragraph">這完成了 Pacemaker 叢集設定和初始配置。</block>
  <block id="3b1994e964aa61b410b6f38e103d3189" category="section-title">Pacemaker 叢集防護配置</block>
  <block id="23c40eb683eeb7db4cac735d3ddfab3c" category="paragraph">對於生產叢集來說，Pacemaker 防護配置是必要的。它可確保 AWS EC2 叢集上的故障節點被自動隔離，從而防止該節點消耗叢集的資源、損害叢集的功能或破壞共用資料。本節示範了使用 fence_aws 隔離代理程式配置叢集隔離。</block>
  <block id="9adac4e18fdb6bc6c6d20cd25a34ed54" category="list-text">以 root 使用者身分輸入下列 AWS 元資料查詢以取得每個 EC2 執行個體節點的執行個體 ID。</block>
  <block id="c532bf7c739b85f33a78f8d1bd76b094" category="list-text">輸入以下命令配置隔離設備。使用 pcmk_host_map 指令將 RHEL 主機名稱對應到實例 ID。使用您先前用於 AWS 驗證的 AWS 使用者帳戶的 AWS 存取金鑰和 AWS 秘密存取金鑰。</block>
  <block id="5f0b6ec64cccad3b96045ea05f880b6c" category="list-text">驗證防護配置。</block>
  <block id="f80fd70e49653634da7db6e9fcf5129f" category="list-text">將 stonith-action 設定為關閉，而不是在叢集層級重新啟動。</block>
  <block id="e9f501afd2041cd58df97b0583dcd5c5" category="admonition">當 stonith-action 設定為 off 時，隔離叢集節點將首先關閉。在 stonith power_timeout 定義的時間（240 秒）之後，隔離節點將重新啟動並重新加入叢集。</block>
  <block id="2d4e52ec684e0496b8b669638984a1f2" category="list-text">將備用節點的隔離延遲設定為 10 秒。</block>
  <block id="7f83d93e1b45e39bd9baf5a031bf7824" category="admonition">執行<block ref="b73e50698314b7708ccfe8c580213f8f" prefix=" " category="inline-code"></block>命令刷新已停止的 stonith 防護代理或清除失敗的 stonith 資源操作。</block>
  <block id="13cacfcb812b5bc8a9fc592092c5995f" category="section-title">在 PCS 叢集中部署 Oracle 資料庫</block>
  <block id="7505bd43d8d0a896a8f9d8061c336d18" category="paragraph">我們建議利用NetApp提供的 Ansible 劇本在 PCS 叢集上使用預先定義參數執行資料庫安裝和設定任務。對於此自動化 Oracle 部署，在劇本執行之前需要使用者輸入三個使用者定義的參數檔。</block>
  <block id="1afdf2aa5719a9cf66c9e973b6ccfe18" category="paragraph">除了這些使用者定義的變數文件之外，還有幾個預設變數文件，其中包含預設參數，除非必要，否則不需要更改。以下顯示了在 PCS 叢集配置中 AWS EC2 和 FSx ONTAP中自動 Oracle 部署的詳細資訊。</block>
  <block id="9468708dadd17ad76f8fb38774edd999" category="admonition">Ansible 控制器可以位於與資料庫 EC2 執行個體相同的 VPC 中，也可以位於本機，只要它們之間有網路連線即可。</block>
  <block id="3e7e6a965de97453e2fa8339bdb1b7b3" category="list-text">在hosts參數檔中填寫使用者定義的參數。以下是典型主機檔案配置的範例。</block>
  <block id="25bbc03c03b8ad5879510656f4079f84" category="list-text">在vars/vars.yml參數檔中填寫使用者定義的參數。以下是典型的 vars.yml 檔案配置的範例。</block>
  <block id="55c818c334d47e7e8570fb9feb5f9a4e" category="list-text">在host_vars/host_name.yml參數檔中填入使用者定義的參數。以下是典型的 host_vars/host_name.yml 檔案配置的範例。</block>
  <block id="3264b3d0627e431413788a124f2270c4" category="admonition">可以從上一節自動 EC2 和 FSx ONTAP部署的 FSx ONTAP叢集端點輸出中擷取 nfs_lif 位址。</block>
  <block id="cef8253b1f832596540379c7b88cc27a" category="list-text">從 AWS FSx 主控台建立資料庫磁碟區。確保使用 PCS 主節點主機名稱（orapm01）作為磁碟區的前綴，如下所示。</block>
  <block id="8cced4f39d58cbb3da3808e604055fab" category="inline-image-macro">此映像提供來自 AWS FSx 控制台的Amazon FSx ONTAP磁碟區配置</block>
  <block id="b39fd6187aa37a145506e6fe671ceeb2" category="paragraph"><block ref="c2cc58ca5ff864287877e6b75f65aa25" category="inline-image-macro-rx" type="image"></block> <block ref="55613e8b2928d9873cd3acef6f8fbaff" category="inline-image-macro-rx" type="image"></block> <block ref="ceb2c3de85ceb358c94c69728e641e66" category="inline-image-macro-rx" type="image"></block> <block ref="a366ab3b01c29619bdc42c19f12992ab" category="inline-image-macro-rx" type="image"></block> <block ref="c8e3f46863543587223da73f887daeb1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65bde4078ad12efa34bcae373d3bde6b" category="list-text">階段以下 Oracle 19c 安裝檔案在 PCS 主節點 EC2 執行個體的 ip-172-30-15-111.ec2.internal /tmp/archive 目錄中，權限為 777。</block>
  <block id="b3eee025ca84eef55bc15d2e0f412531" category="list-text">執行 Linux 配置的劇本<block ref="7124a5aeb30c637048ce8626f71acc6a" prefix=" " category="inline-code"></block>。</block>
  <block id="7007a29eb9ab3cafbaf1d12cb32c54ef" category="list-text">執行 Oracle 配置的劇本<block ref="d808cd1d70eb2b2def2f74c2bd9ca814" prefix=" " category="inline-code"></block>（註解掉 hosts 檔案中的備用節點）。</block>
  <block id="5a805d9dd13fd24f71ad968f59593c28" category="list-text">部署資料庫後，註解掉主節點上 /etc/fstab 中的 /u01、/u02、/u03 掛載，因為掛載點僅由 PCS 管理。</block>
  <block id="e44937e4417d6ff68da3fb08262848e4" category="list-text">將 /etc/oratab /etc/oraInst.loc、/home/oracle/.bash_profile 複製到備用節點。確保維護適當的文件所有權和權限。</block>
  <block id="63d57bfa5023c41791f5725885050e37" category="list-text">關閉資料庫、監聽器，並在主節點上卸載 /u01、/u02、/u03。</block>
  <block id="41ce4521050d987f08b357f0e1c5930f" category="list-text">在備用節點ip-172-30-15-5上建立掛載點。</block>
  <block id="8899e9f5e3fc43dc59cab9af27e6bb78" category="list-text">在備用節點 ip-172-30-15-5 上掛載 FSx ONTAP資料庫磁碟區。</block>
  <block id="8cae050271cc272a6223658a50a078fc" category="list-text">更改為 oracle 用戶，重新連結二進位。</block>
  <block id="3e727d182815595c8aa0f834b957dfbb" category="list-text">將 dnfs lib 複製回 odm 資料夾。重新連結可能會遺失 dfns 庫檔案。</block>
  <block id="53d01b5a2f17c92a3464146a38ee9a92" category="list-text">在備用節點 ip-172-30-15-5 上啟動資料庫進行驗證。</block>
  <block id="dd4d4715276de87327d00ae30c09bc49" category="list-text">關閉資料庫並將資料庫故障還原至主節點 ip-172-30-15-111。</block>
  <block id="e6627109370f2a2389b26634bf4c8cb2" category="section-title">配置 Oracle 資源以進行 PCS 管理</block>
  <block id="86fceef2e1fe5a76bec251d2427df4e0" category="paragraph">配置 Pacemaker 叢集的目標是建立一個主動/被動高可用性解決方案，用於在 AWS EC2 和 FSx ONTAP環境中執行 Oracle，並在發生故障時盡量減少使用者介入。下面示範了 PCS 管理的 Oracle 資源配置。</block>
  <block id="3968931e7d852a24a0fcf809ef574ba4" category="list-text">以主 EC2 執行個體 ip-172-30-15-111 上的 root 使用者身份，使用 VPC CIDR 區塊中未使用的私人 IP 位址作為浮動 IP 建立輔助私有 IP 位址。在此過程中，建立輔助私有 IP 位址所屬的 oracle 資源群組。</block>
  <block id="3e31ae60ed87a1024c88db250c74700c" category="admonition">如果 privip 恰好是在備用叢集節點上建立的，請將其移至主節點，如下所示。</block>
  <block id="d9484c480d9d90288daf62a460c8f958" category="list-text">在叢集節點之間移動資源。</block>
  <block id="8c92f4ca35c706bc98a0bf244638489f" category="list-text">為 Oracle 建立虛擬 IP（vip）。虛擬IP將根據需要在主節點和備用節點之間浮動。</block>
  <block id="556ab8c7a90097de9a951832131714d2" category="list-text">以 oracle 使用者身份，更新 listener.ora 和 tnsnames.ora 檔案以指向 vip 位址。重新啟動監聽器。如果需要，則反彈資料庫以便 DB 向偵聽器註冊。</block>
  <block id="03a280adcdd4a9210b25d58d8125b4bc" category="list-text">將 /u01、/u02、/u03 掛載點新增至 oracle 資源組。</block>
  <block id="87a0ff18c3c2d3c6c3d94549dffae145" category="list-text">在 oracle DB 中建立 PCS 監控使用者 ID。</block>
  <block id="72211627ffb22aa251cd426be026459e" category="list-text">將資料庫新增至 oracle 資源組。</block>
  <block id="67060db7add8a76c786404de04fbddb8" category="list-text">將資料庫監聽器加入到oracle資源組。</block>
  <block id="267bd1a31bd7dde4dd53337cd3d96200" category="list-text">將 oracle 資源群組中的所有資源位置約束更新為主節點作為首選節點。</block>
  <block id="afab9f8be9138ab622f0df16704326f4" category="list-text">驗證 Oracle 資源配置。</block>
  <block id="fb93919fdb772ca2bcf8e85cd49c80f3" category="section-title">部署後 HA 驗證</block>
  <block id="a7465490320b9eec820159c94e731033" category="paragraph">部署後，必須執行一些測試和驗證以確保 PCS Oracle 資料庫故障轉移群集配置正確並如預期運作。測試驗證包括管理故障轉移和模擬意外資源故障以及透過叢集保護機制進行復原。</block>
  <block id="b75b5e926d49413bee793b27e7970d16" category="list-text">透過手動觸發備用節點的防護來驗證節點防護，並觀察備用節點是否在逾時後離線並重新啟動。</block>
  <block id="6f85421f174c6ff87f28c58d29a55e01" category="list-text">透過終止監聽器程序來模擬資料庫監聽器故障，並觀察 PCS 監視監聽器故障並在幾秒鐘內重新啟動它。</block>
  <block id="6b7e1d09ce4175230e6954de1fbacd5f" category="list-text">透過終止 pmon 進程來模擬資料庫故障，並觀察 PCS 監視資料庫故障並在幾秒鐘內重新啟動它。</block>
  <block id="d8064bf0ba112423ec7ead336f82e22d" category="list-text">透過將主節點置於待機模式以將 Oracle 資源故障轉移到備用節點，驗證從主節點到備用節點的託管資料庫故障轉移。</block>
  <block id="780b348917daf4928244ca4613cb1939" category="list-text">透過非備用主節點驗證託管資料庫從備用故障還原到主節點，並觀察 Oracle 資源是否由於首選節點設定而自動故障復原。</block>
  <block id="9d7ebd8bfdc4020b80787b124334247c" category="paragraph">這完成了在 AWS EC2 中使用 Pacemaker 叢集和Amazon FSx ONTAP作為資料庫儲存後端的 Oracle HA 驗證和解決方案示範。</block>
  <block id="54b88dfac5142a6ef111d2804fcaefce" category="paragraph">NetApp建議使用SnapCenter UI 工具來管理部署在 AWS EC2 和Amazon FSx ONTAP中的 Oracle 資料庫。參考 TR-4979<block ref="0153a3553e83e4434512b51a9a7cbd13" category="inline-link-macro-rx"></block>部分<block ref="d372b360dda93a1ed98b047b474a8d14" prefix=" " category="inline-code"></block>有關設定SnapCenter和執行資料庫備份、復原和複製工作流程的詳細資訊。</block>
  <block id="8d604ece9d10bedbcf9843723c4fcc5f" category="inline-link-macro">配置和管理高可用性集群</block>
  <block id="53844bc49958d73d2cb9902888d2a99f" category="list-text"><block ref="53844bc49958d73d2cb9902888d2a99f" category="inline-link-macro-rx"></block></block>
  <block id="08308a5e75c5fd7dae81f458ca85ca02" category="list-text"><block ref="08308a5e75c5fd7dae81f458ca85ca02" category="inline-link-macro-rx"></block></block>
  <block id="376d4a8ab4b6448bdd9cf3e5b49152f3" category="summary">該解決方案提供了使用 Microsoft Azure NetApp Files (ANF) 作為主資料庫和備用資料庫儲存配置 Oracle Data Guard 的概述和詳細信息，以降低 Azure 雲端中 Oracle Data Guard HA/DR 解決方案的授權和營運成本。</block>
  <block id="5199060bcbb7cb2e69ac426a05561630" category="doc">TR-5002：使用Azure NetApp Files降低 Oracle Active Data Guard 成本</block>
  <block id="74ea172c8d694033520176b5ddf098b7" category="paragraph">如果您熱衷於削減 Oracle 資料庫操作成本並計劃在 Azure 雲端中設定 Active Data Guard，那麼您應該考慮另一種選擇。不要使用 Active Data Guard，而是使用 Data Guard 從主資料庫複製到Azure NetApp Files儲存上的單一實體備用資料庫。隨後，可以複製此備用資料庫的多個副本並打開以進行讀取/寫入訪問，以服務許多其他用例，例如報告、開發、測試等。最終結果有效地提供了 Active Data Guard 的功能，同時消除了 Active Data Guard 授權。在本文檔中，我們示範如何使用 ANF 儲存體上的現有主資料庫和實體備用資料庫設定 Oracle Data Guard。透過NetApp SnapCenter資料庫管理工具，可以備份和複製備用資料庫，以便根據需要對用例進行讀/寫存取。  NetApp解決方案工程團隊還提供了自動化工具包，用於按照使用者定義的計劃刷新克隆，從而實現完整、自動化的資料庫克隆生命週期管理，無需用戶幹預。</block>
  <block id="d46437a3c920e1a7e4d444db6e4ce8fe" category="list-text">在跨 Azure 區域的 Microsoft Azure NetApp Files儲存空間上的主資料庫和實體備用資料庫之間實作 Oracle Data Guard。</block>
  <block id="1c7854e2b1991ec817153c59c8e6cbbf" category="list-text">備份和複製實體備用資料庫以滿足報告、開發、測試等使用案例的需求。</block>
  <block id="6160e7e9069ff63c88e7673ce0d96873" category="list-text">透過自動化進行 Oracle 資料庫克隆刷新生命週期管理。</block>
  <block id="6e7b364ff61e6c348bb1aabfb9887c34" category="list-text">在 Azure 雲端中設定 Oracle Active Data Guard 以實現高可用性、資料保護和災難復原的 DBA。</block>
  <block id="dc9db537596cd8dca3523aef65c7cd15" category="list-text">對 Azure 雲端中的 Oracle Active Data Guard 配置感興趣的資料庫解決方案架構師。</block>
  <block id="79af86573852f19a3fb81d63d524468a" category="list-text">管理支援 Oracle Data Guard 的Azure NetApp Files儲存的儲存管理員。</block>
  <block id="7483aba493aca4cae17203fc4f72e9b5" category="list-text">喜歡在 Azure 雲端環境中建立 Oracle Data Guard 的應用程式擁有者。</block>
  <block id="0f1e5763d303b05dc0c9f30135bb0d6e" category="paragraph">此解決方案的測試和驗證是在 Azure 雲端實驗室設定中進行的，該設定可能與實際使用者部署環境不符。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="df427984e8736c269d2bd236d929f403" category="inline-image-macro">此圖提供了 ANF 上的 Azure 雲端中 Oracle Data Guard 實作的詳細圖片。</block>
  <block id="4213c90ad1dac07a7c15a3dbf4f86905" category="paragraph"><block ref="4213c90ad1dac07a7c15a3dbf4f86905" category="inline-image-macro-rx" type="image"></block></block>
  <block id="85dec17e5aae8074e9cc2265ba72e4f3" category="cell">Microsoft 提供的目前版本</block>
  <block id="bc62b56e4a468da879944f2fb5f5206f" category="cell">兩個 3 TiB 容量池、標準服務等級、自動 QoS</block>
  <block id="43ce18a6cfeb5b21b4398e16b32a7ae4" category="cell">用於資料庫伺服器的 Azure VM</block>
  <block id="19acc071e88e4f4be6d6d2745aacfcdb" category="cell">標準 B4ms（4 個 vcpus，16 GiB 記憶體）</block>
  <block id="89d5fb7ce1143cba364c8e7e347d0b40" category="cell">三個資料庫虛擬機，一個作為主資料庫伺服器，一個作為備用資料庫伺服器，第三個作為克隆資料庫伺服器</block>
  <block id="c5551760a04a6751873759596b08b4e8" category="cell">Red Hat Enterprise Linux 8.6（LVM）-x64 Gen2</block>
  <block id="5c014f8939a89da0166a347a0237cf4f" category="cell">SnapCenter</block>
  <block id="55e907e9a7937a6e4e6f8b54b8fa57a6" category="cell">版本 6.0.1</block>
  <block id="cbf18f668647ab0ec4b13d8ba8c954d2" category="cell">版本 6.0.1.4487</block>
  <block id="8b6f240f1b498b5883fe067867c6f22b" category="cell">為 Oracle 啟用 dNFS</block>
  <block id="337b5233207b521e8991f995229f8051" category="cell">NTAP_NY</block>
  <block id="a8b409275df2e9ffeeebb09c97594c2f" category="cell">NTAP_NY.internal.cloudapp.net</block>
  <block id="2dbec34a65724db94f81e8533ee18192" category="cell">支援</block>
  <block id="67de08426fc7abdaa5edc1a974106017" category="cell">NTAP_LA</block>
  <block id="31a7da2d9051b16899472698e665728e" category="cell">NTAP_LA.internal.cloudapp.net</block>
  <block id="04715e3bbf60dfad50a2b8b7f61b2637" category="list-text">*備用資料庫克隆。 *從主資料庫接收和套用交易日誌時，可以複製實體備用資料庫並將其安裝在 DB VM 上，以支援其他工作負載，例如 DEV、TEST 或 Report。克隆可以是薄克隆或厚克隆。目前，ANF 僅支援厚克隆，即備用資料庫的完整副本。 ANF 薄克隆選項即將發布。對於資料庫卷的精簡克隆副本，它共享備用資料庫的相同 DB 卷，並利用寫入時複製技術來服務寫入 IO。因此，克隆的儲存效率非常高，可以用於許多其他用例，為新的寫入 IO 分配最少且增量的新儲存。透過大幅減少 Active Data Guard 儲存空間，可以節省大量的儲存成本。  NetApp建議在資料庫從主儲存切換到備用 ANF 儲存時盡量減少FlexClone活動，以保持 Oracle 效能處於高水準。</block>
  <block id="6f5aee1606bc32b8cda116a18c44689a" category="list-text">*Oracle 軟體需求。 *一般而言，實體備用資料庫必須具有與主資料庫相同的資料庫主版本，包括補丁集異常 (PSE)、關鍵修補程式更新 (CPU) 和修補程式集更新 (PSU)，除非正在進行 Oracle Data Guard 備用優先補丁應用程式（如 My Oracle Support 說明 1265700.1 所述，網址為<block ref="0ab5bd35a1fa5e1394476ebbb9c4d982" category="inline-link-macro-rx"></block>。</block>
  <block id="0e308fd71b0ee649913ca390cf02390a" category="list-text">Azure VM 大小調整。在這些測試和驗證中，我們使用了具有 4 個 vCPU 和 16 GiB 記憶體的 Azure VM - Standard_B4ms。您需要根據實際工作負載需求，適當調整 Azure DB VM 的大小，以適應 vCPU 數量和 RAM 容量。</block>
  <block id="046a4224e07dc494210e5ccb905191d0" category="list-text">Azure NetApp Files配置。 Azure NetApp Files在 Azure NetApp儲存帳戶中指派為<block ref="a74c45c38136d5cb4b7be385e3a8c24e" prefix=" " category="inline-code"></block>。在這些測試和驗證中，我們部署了一個 3 TiB 容量池來託管東部區域的 Oracle 主資料庫和西部 2 區域的備用資料庫。  ANF 容量池有三種服務等級：Standard、Premium 和 Ultra。  ANF容量池的IO容量取決於容量池的大小及其服務等級。對於生產部署， NetApp建議全面評估您的 Oracle 資料庫吞吐量需求，並相應地確定資料庫容量池的大小。在建立容量池時，可以將 QoS 設定為“自動”或“手動”，並將靜態資料加密設為“單倍”或“雙倍”。  </block>
  <block id="1aaa50d1be4baffceb38042371421cd8" category="list-text">dNFS 配置。透過使用 dNFS，在具有 ANF 儲存的 Azure 虛擬機器上執行的 Oracle 資料庫可以比本機 NFS 用戶端驅動更多的 I/O。使用NetApp自動化工具包的自動化 Oracle 部署會自動在 NFSv3 上設定 dNFS。</block>
  <block id="338f920f41a055b87c208e43d2a356e4" category="paragraph">假設您已將主 Oracle 資料庫部署在 VNet 內的 Azure 雲端環境中，作為設定 Oracle Data Guard 的起點。理想情況下，主資料庫部署在具有 NFS 掛載的 ANF 儲存體上。為 Oracle 資料庫儲存建立了三個 NFS 掛載點：mount /u01 用於 Oracle 二進位文件，mount /u02 用於 Oracle 資料檔案和控製文件，mount /u03 用於 Oracle 目前和存檔日誌檔案以及冗餘控製文件。</block>
  <block id="476971b1fe4337b058f08247a46b4dc0" category="paragraph">您的主要 Oracle 資料庫也可以在NetApp ONTAP儲存或 Azure 生態系統或私有資料中心內的任何其他儲存體上執行。以下部分提供了在 Azure 中具有 ANF 儲存體的主 Oracle DB 與 Azure 中具有 ANF 儲存體的實體備用 Oracle DB 之間設定 Oracle Data Guard 的逐步部署程序。</block>
  <block id="ffa369d3a2435033b454caec664bfafd" category="list-text">已設定 Azure 雲端帳戶，並在您的 Azure 帳戶內建立了必要的 VNet 和網路子網路。</block>
  <block id="ed826a0ea4b8d674a29a54acb3442471" category="inline-link-macro">Azure 虛擬機</block>
  <block id="b40c72cf070584523ea9769beaa38246" category="list-text">從 Azure 雲端入口網站控制台，您需要部署至少三個 Azure Linux VM，一個作為主 Oracle DB 伺服器，一個作為備用 Oracle DB 伺服器，以及一個用於報表、開發和測試等的複製目標 DB 伺服器。有關環境設定的更多詳細信息，請參閱上一節中的體系結構圖。也審查了微軟<block ref="e2b42370d5c3948995fa1fb7ff8ecba8" category="inline-link-macro-rx"></block>了解更多。</block>
  <block id="ee71904859506ab4263b22bf4e8f4d97" category="list-text">主 Oracle 資料庫應該已經在主 Oracle DB 伺服器中安裝並配置。另一方面，在備用 Oracle DB 伺服器或複製 Oracle DB 伺服器中，僅安裝了 Oracle 軟體，而沒有建立 Oracle 資料庫。理想情況下，Oracle 檔案目錄佈局應該與所有 Oracle DB 伺服器完全相符。有關NetApp對 Azure 雲端和 ANF 中自動化 Oracle 部署的建議的詳細信息，請參閱以下技術報告以取得協助。</block>
  <block id="b69512ba398655f814ba260d85e13caf" category="list-text"><block ref="b69512ba398655f814ba260d85e13caf" category="inline-link-macro-rx"></block></block>
  <block id="674796d8d6c4f9b57ac77f0d52b9cdb6" category="admonition">確保在 Azure VM 根磁碟區中指派了至少 128G，以便有足夠的空間來暫存 Oracle 安裝檔案。</block>
  <block id="8c060d9ae24c7bc4518e54cd5ed13098" category="inline-link-macro">快速入門：設定Azure NetApp Files並建立 NFS 卷</block>
  <block id="06930c45b128808fe22a3ec3d6169a96" category="list-text">從 Azure 雲端入口網站控制台部署兩個 ANF 儲存容量池來託管 Oracle 資料庫磁碟區。 ANF 儲存容量池應位於不同的區域，以模擬真正的 DataGuard 配置。如果您不熟悉 ANF 儲存的部署，請參閱文檔<block ref="1bbe5611068f9dda0e0123e846af8b8b" category="inline-link-macro-rx"></block>以獲得逐步說明。</block>
  <block id="e33c6d7db8a7a86db5ccfddecb81897f" category="inline-image-macro">顯示 Azure 環境配置的螢幕截圖。</block>
  <block id="0cde9322261368b3e9ada8dc4e45433d" category="paragraph"><block ref="0cde9322261368b3e9ada8dc4e45433d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5444565322807053cf9a28647b9dd806" category="list-text">當主 Oracle 資料庫和備用 Oracle 資料庫位於兩個不同的區域時，應配置 VPN 閘道以允許兩個單獨的 VNet 之間的資料流量流動。 Azure 中的詳細網路配置超出了本文檔的範圍。以下螢幕截圖提供了有關如何在實驗室中設定、連接 VPN 閘道以及如何確認資料流量流動的一些參考。</block>
  <block id="88f0b1bce53ef0373663761415061e8a" category="paragraph">實驗室 VPN 閘道：<block ref="4f8175090220e33ac069ea5dcc8ae42c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="85ab9d24012e609a3c1d3ef2a3fd3c31" category="paragraph">主 VNet 閘道：<block ref="dc4cd1d2627a831b684872669edaf1da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="652ec542aee86abb50fcf4a256e17377" category="paragraph">Vnet網關連線狀態：<block ref="05674beddf8c009b66f52c183f504bd1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b6c40030ae531d13cc6979f8ec327095" category="paragraph">驗證流量是否已建立（點擊三個點開啟頁面）：<block ref="ccee1c77780b1e530d143226fe3a4a10" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23f6537ae49a0f2ea8867ca748da301c" category="paragraph">在此示範中，我們在主 Azure DB 伺服器上設定了一個名為 NTAP 的主 Oracle 資料庫，它具有三個 NFS 裝入點：/u01 用於 Oracle 二進位文件，/u02 用於 Oracle 資料檔案和 Oracle 控製文件，/u03 用於 Oracle 活動日誌、存檔 Oracle 檔案和冗餘日誌檔案和冗餘日誌檔案。以下說明了為 Oracle Data Guard 保護設定主資料庫的詳細流程。所有步驟都應以 Oracle 資料庫擁有者或預設使用者身分執行<block ref="a189c633d9995e11bf8607170ec9a4b8" prefix=" " category="inline-code"></block>用戶。</block>
  <block id="e3233dee851571ab0b05882fd75b67ea" category="list-text">主 Azure DB 伺服器 orap.internal.cloudapp.net 上的主資料庫 NTAP 最初部署為獨立資料庫，並以 ANF 作為資料庫儲存。</block>
  <block id="e55541d2bbbb4bdac3a112c6304e5a32" category="list-text">以 oracle 使用者登入主資料庫伺服器。透過 sqlplus 登入資料庫，在主資料庫上啟用強制日誌記錄。</block>
  <block id="95b5a36409ab1e34b31ffb5261dda901" category="list-text">從 sqlplus，在主資料庫上啟用閃回。閃回功能允許在故障轉移後輕鬆地將主資料庫還原為備用資料庫。</block>
  <block id="10509c4f00df46bac19e4373e779e45a" category="list-text">使用 Oracle 密碼文件設定重做傳輸驗證 - 如果未設置，則使用 orapwd 公用程式在主伺服器上建立 pwd 文件，並將其複製到備用資料庫 $ORACLE_HOME/dbs 目錄。</block>
  <block id="da73c165e3e25888a132859361d1f8a9" category="list-text">在主資料庫上建立與目前線上日誌檔案大小相同的備用重做日誌。日誌組比線上日誌檔案組多一個。然後，當發生故障轉移時，主資料庫可以快速轉換到備用角色並開始接收重做資料。重複以下指令四次，建立四個備用日誌檔案。</block>
  <block id="2d45e8c06ef3bf046ded76d84125ca0b" category="list-text">從 sqlplus，從 spfile 建立一個 pfile 進行編輯。</block>
  <block id="cc6ca465b181bec842179c065162e3a6" category="list-text">從 sqlplus 中，從修改後的 pfile 重新建立 spfile 以覆寫 $ORACLE_HOME/dbs 目錄中現有的 spfile。</block>
  <block id="a03784f83fc23eb62ecade006a307759" category="list-text">修改 $ORACLE_HOME/network/admin 目錄中的 Oracle tnsnames.ora，新增 db_unique_name 以進行名稱解析。</block>
  <block id="3ee89a269c95cfc958d00e3526dfeb77" category="admonition">如果您選擇將 Azure DB 伺服器命名為與預設名稱不同的名稱，請將名稱新增至本機主機檔案以進行主機名稱解析。</block>
  <block id="fc5c681a7e6a65cf78550259c1d37e4b" category="list-text">將主資料庫的資料保護服務名稱 NTAP_NY_DGMGRL.internal.cloudapp.net 新增至 listener.ora 檔案。</block>
  <block id="97a5e95ee961b0668c21ee7d5a940f1c" category="list-text">透過 sqlplus 關閉並重新啟動資料庫，並驗證資料保護參數現在是否處於活動狀態。</block>
  <block id="38172db4ce82c686a901dc8b829c3b49" category="paragraph">這完成了 Data Guard 的主資料庫設定。</block>
  <block id="31a770fda8923c41827859c59367682f" category="paragraph">Oracle Data Guard 需要 OS 核心配置和 Oracle 軟體堆疊（包括備用 DB 伺服器上的修補程式集）以與主 DB 伺服器相符。為了便於管理和簡單起見，備用資料庫伺服器的資料庫儲存配置理想情況下也應該與主資料庫伺服器匹配，例如資料庫目錄佈局和 NFS 掛載點的大小。以下是設定備用 Oracle DB 伺服器和啟動 Oracle DataGuard 以實現 HA/DR 保護的詳細步驟。所有命令都應以預設 Oracle 所有者使用者 ID 執行<block ref="a189c633d9995e11bf8607170ec9a4b8" prefix=" " category="inline-code"></block>。</block>
  <block id="5446e5ec60d5b828279661d24c9f6b14" category="list-text">首先，檢查主 Oracle DB 伺服器上主資料庫的配置。在此示範中，我們在主 DB 伺服器中設定了一個名為 NTAP 的主 Oracle 資料庫，並在 ANF 儲存體上安裝了三個 NFS。</block>
  <block id="99b4b6acb33685f8fb85368acdcb8133" category="list-text">如果您依照NetApp文件 TR-4987 設定 Oracle 備用資料庫伺服器<block ref="b69512ba398655f814ba260d85e13caf" category="inline-link-macro-rx"></block>，使用標籤<block ref="086570090d3b94e251b875c9d59376ed" prefix=" " category="inline-code"></block>在步驟 2 中<block ref="3fde1508528c4b7e4e8ed67ccec6aa4a" prefix=" " category="inline-code"></block>執行自動 Oracle 安裝。修改後的命令語法如下所示。此標籤將允許安裝和配置 Oracle 軟體堆疊，但不會建立資料庫。</block>
  <block id="05fdbf2eee600ac1e9d9ec8e14c89001" category="list-text">演示實驗室中備用站點的備用 Oracle DB 伺服器配置。</block>
  <block id="9698d2d6ae189df8a801461a97af0ffa" category="list-text">安裝並配置 Oracle 軟體後，設定 oracle 主目錄和路徑。此外，如果您還沒有這樣做，請從備用 $ORACLE_HOME dbs 目錄複製主資料庫的 oracle 密碼。</block>
  <block id="0658232c21e84c1a41c357f4b3221af1" category="list-text">使用以下條目更新 tnsnames.ora 檔案。</block>
  <block id="d2de60c5aa975f87f24cdf604bc2eda4" category="list-text">啟動 dbca 以從主資料庫 NTAP 實例化備用資料庫。</block>
  <block id="e5036187b6856f2313a16f0d4c3639c4" category="list-text">驗證重複的備用資料庫。新複製的備用資料庫最初以唯讀模式開啟。</block>
  <block id="f303f4b598c44903d4f958a556e5754c" category="list-text">重新啟動備用資料庫<block ref="19822b1b15d9eefc54c07ab49f87b100" prefix=" " category="inline-code"></block>階段並執行以下命令來啟動備用資料庫管理復原。</block>
  <block id="34d0e7c7d4594285d2ee3d8644d9772f" category="paragraph">這樣就完成了從主資料庫到備用資料庫的 NTAP 的 Data Guard 保護設置，並啟用了託管備用恢復。</block>
  <block id="ea9320283463d5e10b454d6d13459ba2" category="list-text">透過 sqlplus 使用以下命令在主資料庫和備用資料庫上啟動資料保護代理程式。</block>
  <block id="5ee3dedda42b77708f990b7c7e931557" category="list-text">在 Data Guard Broker 管理框架內驗證資料庫狀態。</block>
  <block id="5581ee08deb0114467d7c62fb3cf7214" category="paragraph">如果發生故障，可以使用 Data Guard Broker 立即將主資料庫故障轉移到備用資料庫。如果<block ref="1f47cdf46667a47e70a7da64a4a59b8e" prefix=" " category="inline-code"></block>啟用後，當偵測到故障時，Data Guard Broker 可以將主資料庫故障轉移到備用資料庫，而無需使用者乾預。</block>
  <block id="072f8b9b1892cf46bbd8ccc94c6525fd" category="paragraph">在 Oracle Data Guard 設定中的 ANF 上託管 Oracle 備用資料庫的主要好處是，如果啟用了精簡克隆，則可以快速克隆該資料庫以服務許多其他用例，同時只需極少的額外儲存投資。 NetApp建議使用SnapCenter UI 工具來管理您的 Oracle DataGuard 資料庫。在下一節中，我們將示範如何使用NetApp SnapCenter工具對 ANF 上已安裝和還原的備用資料庫磁碟區進行快照和複製，以用於其他目的，例如 DEV、TEST、REPORT 等。</block>
  <block id="e8ddb61b1be0ffb488af296ef36654e9" category="paragraph">以下是使用SnapCenter從 Oracle Data Guard 中的託管實體備用資料庫複製 READ/WRITE 資料庫的進階流程。有關如何在 ANF 上設定和配置SnapCenter for Oracle 的詳細說明，請參閱 TR-4988<block ref="490ee9b45ffe73b572c2cdde5f32b530" category="inline-link-macro-rx"></block>了解詳情。</block>
  <block id="2cd32452e5b7c1668ea7c770bac053fb" category="list-text">我們透過建立測試表並在主資料庫的測試表中插入一行來開始使用用例驗證。然後我們將驗證交易是否向下移動到待機狀態並最終到達克隆狀態。</block>
  <block id="27358749c7d27b33ef181e0416ab00af" category="list-text">在SnapCenter配置中，已將 unix 使用者（試用版為 azureuser）和 Azure 憑證（試用版為 azure_anf）新增至<block ref="03bc142e6422dbb9b288ad2cabee08c7" prefix=" " category="inline-code"></block>在<block ref="f4f70727dc34561dfde1a3c529b6205c" prefix=" " category="inline-code"></block>。</block>
  <block id="b88ae4d9ca99ca902a87244a31166449" category="paragraph"><block ref="b88ae4d9ca99ca902a87244a31166449" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8506441a9cc9c598ec207da7d5483249" category="list-text">使用 azure_anf 憑證將 ANF 儲存體新增至<block ref="5c6ab1284b6b7a5a7102854a969c99be" prefix=" " category="inline-code"></block>。如果您的 Azure 訂閱中有多個 ANF 儲存帳戶，請確保您按一下下拉清單以選擇正確的儲存帳戶。我們為此示範建立了兩個專用的 Oracle 儲存帳戶。</block>
  <block id="83114dd89d8a4b3e299b9bafabe933ed" category="paragraph"><block ref="83114dd89d8a4b3e299b9bafabe933ed" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0ad8e67e7e6ddf4f9059c84b3ef529db" category="list-text">所有 Oracle DB 伺服器均已新增至SnapCenter<block ref="8124579383e90243e4b06323d2b37f8d" prefix=" " category="inline-code"></block> 。</block>
  <block id="02ab2d789c472986838969bcb1d7b055" category="paragraph"><block ref="02ab2d789c472986838969bcb1d7b055" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b86d0a49c602ae82d6eab5152a65ec9" category="admonition">克隆資料庫伺服器應該安裝和配置相同的 Oracle 軟體堆疊。在我們的測試案例中，Oracle 19C 軟體已安裝並配置，但未建立資料庫。</block>
  <block id="851a04fb6142b36a0faa03412b54529e" category="paragraph"><block ref="851a04fb6142b36a0faa03412b54529e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53b8bf5236b6c7bd5de540264f9662cb" category="list-text">應用備份策略來保護備用資料庫<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡。最初發現時，資料庫狀態顯示為<block ref="4aa6066b3ed6d1b995450c6c7ad4a3d8" prefix=" " category="inline-code"></block>。</block>
  <block id="e6dccd80eeecc8522d016c50603f7c66" category="paragraph"><block ref="e6dccd80eeecc8522d016c50603f7c66" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1bdc3faaf34069dccd0ee53ae64e8930" category="list-text">您可以選擇手動觸發備份，或在套用備份策略後按設定的時間安排備份。</block>
  <block id="0b9638940486be86ab019291bcdf236d" category="paragraph"><block ref="0b9638940486be86ab019291bcdf236d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d8f3ae4ab4171c1cbd200327377acf2" category="list-text">備份後，按一下資料庫名稱以開啟資料庫備份頁面。選擇用於資料庫克隆的備份並點擊<block ref="ff24590464659ee8cdec688128c35f89" prefix=" " category="inline-code"></block>按鈕啟動克隆工作流程。</block>
  <block id="c1cdb3a269fd76cc7dfb2c77c98e9b22" category="paragraph"><block ref="c1cdb3a269fd76cc7dfb2c77c98e9b22" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9321d07871449f3537267c6fddaede8a" category="list-text">選擇<block ref="6d966589c645cae872f42060de0bbe70" prefix=" " category="inline-code"></block>並將克隆實例命名為 SID。</block>
  <block id="52be8ae8d2b018176d42b89ef57a3613" category="paragraph"><block ref="52be8ae8d2b018176d42b89ef57a3613" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7971008d84e34395fccaf6e7329449dc" category="list-text">選擇克隆資料庫伺服器，該伺服器託管從備用資料庫克隆的資料庫。接受資料檔案、重做日誌的預設值。將控制檔放在 /u03 掛載點上。</block>
  <block id="73f43b472e74c6289400f654cae3f68b" category="paragraph"><block ref="73f43b472e74c6289400f654cae3f68b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9e26d07e217e7fb5469ae943c2ad43ab" category="list-text">基於作業系統的身份驗證不需要資料庫憑證。將 Oracle 主目錄設定與克隆 DB 伺服器上的配置進行比對。</block>
  <block id="abcec197c9f755ec665ceab70ace785c" category="paragraph"><block ref="abcec197c9f755ec665ceab70ace785c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ee66e850ff33ce8c5dcd87b850c6eb62" category="list-text">如果需要，請變更克隆資料庫參數，例如降低克隆資料庫的 PGA 或 SGA 大小。指定複製之前要執行的腳本（如果有）。</block>
  <block id="99f228e767c81f60c164cfe312c99407" category="paragraph"><block ref="99f228e767c81f60c164cfe312c99407" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a3a68f972884eacded1a347d684cde6e" category="list-text">輸入克隆後運行的SQL。在示範中，我們執行指令來關閉 dev/test/report 資料庫的資料庫存檔模式。</block>
  <block id="6d6e14846373f96586278facb479f46b" category="paragraph"><block ref="6d6e14846373f96586278facb479f46b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49eef0b2da7844e7c9217fd1a38fed2c" category="paragraph"><block ref="49eef0b2da7844e7c9217fd1a38fed2c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="555609024b2674cfeaeede0ae73efd04" category="paragraph"><block ref="555609024b2674cfeaeede0ae73efd04" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ea157be665e5e852ad2af6c86e0b6a5e" category="list-text">監控複製作業<block ref="d2986ac8cb6bd55892099c1ffd6b1f6f" prefix=" " category="inline-code"></block>選項卡。我們觀察到克隆一個資料庫磁碟區大小約 950GB 的資料庫大約需要 14 分鐘。</block>
  <block id="0b1e7ddf072c7fd62297ea971fa67a91" category="paragraph"><block ref="0b1e7ddf072c7fd62297ea971fa67a91" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ed1cd7d9286032dc1d4d8c1cebc8c4fa" category="paragraph"><block ref="ed1cd7d9286032dc1d4d8c1cebc8c4fa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6009b71b10a93975ded6c094cea08e7b" category="list-text">從克隆資料庫伺服器查詢克隆資料庫。我們驗證了主資料庫中發生的測試事務已經傳遞到克隆資料庫。</block>
  <block id="6de3ee6cf49309efa9ee555799d83dc9" category="paragraph">這完成了 Azure ANF 儲存體上的 Oracle Data Guard 中針對 DEV、TEST、REPORT 或任何其他用例的 Oracle 備用資料庫複製的演示。可以從 ANF 上的 Oracle Data Guard 中的同一個備用資料庫克隆多個 Oracle 資料庫。</block>
  <block id="2a5eba546233f90579d3260dd00dbd31" category="list-text">TR-4988：使用SnapCenter在 ANF 上進行 Oracle 資料庫備份、復原和克隆</block>
  <block id="244eaea39e1742e612ba3ce80558cb17" category="paragraph"><block ref="244eaea39e1742e612ba3ce80558cb17" category="inline-link-macro-rx"></block></block>
  <block id="cf47eb0008cf0223ebb97c83c23361d9" category="paragraph"><block ref="cf47eb0008cf0223ebb97c83c23361d9" category="inline-link-macro-rx"></block></block>
  <block id="ef024b787204cedd20ab38792eb8aa97" category="list-text">Oracle Data Guard 概念與管理</block>
  <block id="300ff7c5525219cf0316ee35285ce086" category="summary">該解決方案提供了概述和詳細信息，用於快速恢復部署到 Azure VM 計算實例的 Oracle VLDB，並在Azure NetApp Files容量池上安裝 NFS，以暫存透過 RMAN 不斷增量合併的備用資料庫副本。</block>
  <block id="af9bda0d447d00102cfa07c616299ce9" category="doc">TR-4990：使用 ANF 上的增量合併快速復原 Oracle VLDB</block>
  <block id="22260d0205fff2334c6db0210fe74e87" category="paragraph">此解決方案提供了概述和詳細信息，用於快速恢復部署到 Azure VM 計算實例的 Oracle VLDB，並在Azure NetApp Files容量池上安裝 NFS，以暫存透過 RMAN 不斷增量合併的備用資料庫副本。</block>
  <block id="36c33b5f7d9b9effb307d69b5d9bbfcd" category="paragraph">如果您熱衷於 VLDB 的 SLA 並考慮將 Oracle 資料庫遷移到 Azure 等公有雲，則可以使用 Microsoft Azure NetApp Files (ANF) 等資源設定類似的資料庫保護結構來暫存備用資料庫映像副本。在本文檔中，我們示範如何從 ANF 容量池中配置和匯出 NFS 檔案系統，並將其安裝在 Oracle 資料庫伺服器上，以便在主儲存發生故障時暫存備用資料庫副本以便快速復原。</block>
  <block id="7c743caa66583893abbd5fd02fcd8c44" category="list-text">Oracle VLDB 映像副本透過 RMAN 在 Microsoft ANF 容量池儲存的 NFS 掛載點上進行增量合併。</block>
  <block id="c7b169899b3bf3e517397a1e66b1f9ba" category="list-text">當同一 Azure 資料庫伺服器 VM 發生故障時，快速復原 Oracle VLDB。</block>
  <block id="3ddf9d0387ffbe57231793a1a3a59444" category="list-text">當備用 Azure 資料庫伺服器 VM 發生故障時，快速復原 Oracle VLDB。</block>
  <block id="96f297eca8d0059e7b41d63cbfa46bb8" category="list-text">一位 DBA 透過 Azure 中的 RMAN 設定 Oracle VLDB 映像複製增量合併，以便更快復原資料庫。</block>
  <block id="86cc76cfb1ceaac3aaa0bace96f788de" category="list-text">在 Azure 公有雲中測試 Oracle 工作負載的資料庫解決方案架構師。</block>
  <block id="a92ab2bd86f06e76dca598f233e87f33" category="list-text">管理部署到 ANF 容量池儲存的 Oracle 資料庫的儲存管理員。</block>
  <block id="96ffa3242f6ce78c662078c986d2dd13" category="list-text">希望在 Azure 雲端環境中建立 Oracle 資料庫的應用程式擁有者。</block>
  <block id="a16384631c8a3c77092c08c44ebe3627" category="paragraph">此解決方案的測試和驗證是在 Microsoft ANF 容量池儲存和 Azure VM 運算環境中進行的，該環境可能與最終部署環境不符。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="df5be9cce2556109a991648585423150" category="inline-image-macro">此圖提供了 Azure 公有雲中使用 ANF 實現 Oracle VLDB 增量合併的詳細圖片。</block>
  <block id="5a582736ed938dddf357783a0920aa5d" category="paragraph"><block ref="5a582736ed938dddf357783a0920aa5d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="952ad133c322e6ea15c7668391a420d8" category="cell">ANF儲存</block>
  <block id="16f2328b190976509986f33db9227d85" category="cell">具有高級服務等級的 2 TiB ANF 容量池存儲</block>
  <block id="6d06f0bd5a2f3059a22e9257d7c1a905" category="cell">2 個虛擬機，一個作為主資料庫伺服器，另一個作為備用</block>
  <block id="2e705b831fd1a05f9ff862ccde72a99f" category="list-text">*用於 RMAN 增量合併的 Oracle VLDB 儲存佈局。 *在我們的測試和驗證中，Oracle 增量備份和合併的 NFS 磁碟區是從單一 ANF 容量池分配的，每個磁碟區有 100 TiB，總容量限制為 1000 TiB。對於超過閾值的部署，可以將多個磁碟區和 ANF 容量池與多個 NFS 掛載點並行連接以提供更高的容量。</block>
  <block id="fa44cff8a0d3a1bde3e39afbd57dc266" category="list-text">*使用 RMAN 增量合併實作 Oracle 可恢復性。 * RMAN 增量備份和合併通常會根據您的 RTO 和 RPO 目標以使用者定義的頻率執行。如果主資料儲存和/或歸檔日誌完全遺失，則可能會發生資料遺失。 Oracle 資料庫可以還原到 ANF 資料庫備份映像副本提供的最後一個增量備份。為了盡量減少資料遺失，可以在 ANF NFS 安裝點上設定 Oracle 閃回復原區，並將存檔日誌與資料庫映像副本一起備份到 ANF NFS 安裝點。</block>
  <block id="30de34c3a06eca8594944e005f614d80" category="list-text">*在 ANF NFS 檔案系統上執行 Oracle VLDB。 *與其他用於資料庫備份的大量儲存不同，Microsoft ANF 是一種支援雲端的生產級存儲，可提供高水準的效能和儲存效率。一旦 Oracle VLDB 從主儲存切換到 ANF NFS 檔案系統上的映像副本，資料庫效能就可以保持在高水平，同時解決主儲存故障。您可以放心，用戶應用程式體驗不會因主儲存故障而受到影響。</block>
  <block id="98ba9c7927b5d14764e8115588d2d54d" category="list-text">Azure 計算執行個體。在這些測試和驗證中，我們使用 Standard_B4ms Azure VM 作為 Oracle 資料庫伺服器。其他 Azure VM 可能經過最佳化，更適合資料庫工作負載。您還需要根據實際工作負載需求，適當調整 Azure VM 的 vCPU 數量和 RAM 容量。</block>
  <block id="f09ca0335aec5f261a1b868e570f0505" category="list-text">*ANF 容量池服務等級。 * ANF 容量池提供三種服務等級：標準、進階、超級。預設情況下，自動 QoS 適用於容量池內建立的捲，這會限製卷的吞吐量。可根據容量池的大小和服務等級手動調整磁碟區上的吞吐量。</block>
  <block id="4d189a9c9e5d55cc3a34938358e133d3" category="list-text">*dNFS 配置。 * dNFS 內建於 Oracle 核心中，並且已知當 Oracle 部署到 NFS 儲存時可顯著提高 Oracle 資料庫效能。 dNFS 打包到 Oracle 二進位檔案中，但預設未開啟。對於 NFS 上的任何 Oracle 資料庫部署，都應該啟用它。對於 VLDB 的多個 ANF 容量池部署，應正確配置到不同 ANF 容量池儲存的 dNFS 多路徑。</block>
  <block id="5ae994fde73945264c47ce48647d57b2" category="paragraph">假設您已經在 VNet 內的 Azure 雲端環境中部署了 Oracle VLDB。如果您需要在 Azure 中部署 Oracle 的協助，請參閱下列技術報告以取得協助。</block>
  <block id="3914554f3e4d9e4c6db0b30795651877" category="inline-link-macro">使用 NFS 在Azure NetApp Files上簡化、自動化 Oracle 部署</block>
  <block id="3229de008a550a1b47ddb6964fa5485c" category="list-text"><block ref="3229de008a550a1b47ddb6964fa5485c" category="inline-link-macro-rx"></block></block>
  <block id="879f2366c198b1fc05740657cacebcc1" category="inline-link-macro">Azure NetApp Files上的 Oracle 資料庫部署與保護</block>
  <block id="859aec84cfff3ac536a9719c48b75c30" category="list-text"><block ref="859aec84cfff3ac536a9719c48b75c30" category="inline-link-macro-rx"></block></block>
  <block id="a3f00a7e147e7b84aa2b711174f65541" category="paragraph">您的 Oracle VLDB 可以在 ANF 儲存體或 Azure 雲端生態系統中的任何其他儲存體上執行。以下部分提供了設定 RMAN 增量合併到在 ANF 儲存的 NFS 掛載中暫存的 Oracle VLDB 映像副本的逐步部署程序。</block>
  <block id="dda1820cbe40a6a04b7c08135677cb5f" category="list-text">已設定 Azure 帳戶，並在您的 Azure 帳戶內建立了必要的 Azure VNet 和網路區段。</block>
  <block id="ee50869919154f8e0bb1c9a79b0e68bf" category="inline-link-macro">Azure 虛擬機器系列</block>
  <block id="12b67dd937a6aa2aac9654fe14c80158" category="list-text">從 Azure 入口網站控制台，您必須部署兩個 Azure VM 執行個體，一個作為主 Oracle DB 伺服器，另一個作為選用的備用 DB 伺服器。有關環境設定的更多詳細信息，請參閱上一節中的架構圖。還請查看<block ref="0bcbff73d1e13f874b4c63b6603f9a12" category="inline-link-macro-rx"></block>了解更多。</block>
  <block id="2439b2fcc93766c923093f1c217cff51" category="list-text">從 Azure 入口網站控制台部署 ANF 儲存體來託管儲存 Oracle 資料庫備用映像副本的 NFS 磁碟區。如果您不熟悉 ANF 的部署，請參閱文檔<block ref="1bbe5611068f9dda0e0123e846af8b8b" category="inline-link-macro-rx"></block>以獲得逐步說明。</block>
  <block id="c78f04ded81296476b99e27cfcf8b81e" category="admonition">確保在 Azure VM 根磁碟區中指派了至少 128G，以便有足夠的空間來暫存 Oracle 安裝檔案。</block>
  <block id="57ce3e90b99a309ad26ec73de2896ff9" category="section-title">提供並匯出要安裝在主 Oracle VLDB 伺服器上的 NFS 卷</block>
  <block id="48e63302f12330ed309d536a92b3ff3d" category="paragraph">在本節中，我們將展示如何透過 Azure 入口網站控制台從 ANF 容量池配置 NFS 磁碟區。如果設定了多個 ANF 容量池來適應資料庫的大小，請對其他 ANF 容量池重複這些過程。</block>
  <block id="edc598e26c4191781ff6fb9a427f3e26" category="list-text">首先，從 Azure 入口網站控制台導覽至用於暫存 Oracle VLDB 映像複製的 ANF 容量池。</block>
  <block id="db13e5cf484d3e563e6a6313426b51c3" category="inline-image-macro">此圖提供了使用 Azure 入口網站控制台的 ANF 磁碟區設定畫面</block>
  <block id="1e83ea8a6e8cd0a02ac2c348ae00c565" category="paragraph"><block ref="1e83ea8a6e8cd0a02ac2c348ae00c565" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e5ba92870c86eabfee4cc4cc8bd42317" category="list-text">從選定的容量池 -<block ref="11e0eed8d3696c0a632f822df385ab3c" prefix=" " category="inline-code"></block> ， 點選<block ref="c6f01c78bfe0a0a495cb5d3ed77824a9" prefix=" " category="inline-code"></block>進而，<block ref="da20d395d0cd59983278111b9c95d6c3" prefix=" " category="inline-code"></block>啟動新增磁碟區工作流程。</block>
  <block id="8141b7ec7aec9bed8e05062ee1fd6a11" category="paragraph"><block ref="8141b7ec7aec9bed8e05062ee1fd6a11" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1318d277156dfc7ca8b396a8bacab47d" category="list-text">填寫<block ref="7ffce295d6c61cb38fd76a4e505cdb33" prefix=" " category="inline-code"></block>，<block ref="d2d5c3e087f684e56b5b81d6212d7ccb" prefix=" " category="inline-code"></block> ，<block ref="bf76cafc47141522dca89c4d6e25b822" prefix=" " category="inline-code"></block> ， 和<block ref="48d32046f376779858d068d73d85f80e" prefix=" " category="inline-code"></block>移至<block ref="888a77f5ac0748b6c8001822417df8b6" prefix=" " category="inline-code"></block>頁。</block>
  <block id="3b8d4c9b49219e733e7e1caac71ea58b" category="paragraph"><block ref="3b8d4c9b49219e733e7e1caac71ea58b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ca80750436bdab142d2e43cd1ef42cf" category="list-text">記下檔案路徑，輸入允許的客戶端 CIDR 範圍，然後啟用<block ref="677c422f11e77a5df1d44e4f6c517954" prefix=" " category="inline-code"></block>音量。</block>
  <block id="79bf0eefa3fd47307e8b7e15e106cab7" category="paragraph"><block ref="79bf0eefa3fd47307e8b7e15e106cab7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3df3ccf0cba7ad3be7d9143f84d067b4" category="list-text">如果需要，請新增磁碟區標籤。</block>
  <block id="eb782355945736b6c51aad301842df5d" category="paragraph"><block ref="eb782355945736b6c51aad301842df5d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="427d09585c379ab8f0af7219a6cac2a1" category="list-text">審查並創建卷。</block>
  <block id="0d864297daf4cabd371c2a5d525d209b" category="paragraph"><block ref="0d864297daf4cabd371c2a5d525d209b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d0f312ff08c789fc7e37000b9637b9c6" category="list-text">以具有 sudo 權限的使用者身分登入主 Oracle VLDB 伺服器並掛載從 ANF 儲存匯出的 NFS 磁碟區。根據需要變更為您的 ANF NFS 伺服器 IP 位址和檔案路徑。可以從 ANF 磁碟區控制台頁面擷取 ANF NFS 伺服器 IP 位址。</block>
  <block id="73304323457935ed833c76e67c23f068" category="section-title">在 ANF 上設定 Oracle RMAN 增量合併到映像副本</block>
  <block id="ec95b19db84d374be749fe05dbb34147" category="list-text">以 oracle 使用者登入主 Oracle VLDB 伺服器。</block>
  <block id="9466e78eda574ac1c2b0373b37e691eb" category="list-text">在掛載點 /nfsanf 下建立一個 oracopy 目錄，用於儲存 Oracle 資料檔案映像副本和用於 Oracle 閃回復原區的 archlog 目錄。</block>
  <block id="94c15d2a6c277de2e60033355a135ffd" category="list-text">透過 sqlplus 登入 Oracle 資料庫，啟用區塊變更追蹤以加快增量備份速度，並將 Oracle 快閃記憶體復原區變更為 ANF NFS 掛載（如果它目前位於主儲存上）。這允許將 RMAN 預設控製檔/spfile 自動備份和存檔日誌備份到 ANF NFS 掛載以進行還原。</block>
  <block id="d15e02bf0c54e008af2e8212aa7c7d4f" category="paragraph">預期輸出：</block>
  <block id="fb6dc8561460f909af465eb0cfcfd84d" category="list-text">在主 Oracle VLDB 伺服器上，以 oracle 使用者身分本地登入 RMAN，可以使用或不使用 RMAN 目錄。在此示範中，我們沒有連接到 RMAN 目錄。</block>
  <block id="c937bbcfc1739e03f02ce386195ec2fc" category="list-text">列出備份後的資料庫映像副本，觀察在 ANF NFS 掛載點中是否建立了資料庫映像副本。</block>
  <block id="7d3185dbec5bee3286899aa1908bdbc4" category="list-text">從 Oracle RMAN 命令提示字元報告模式以觀察目前 VLDB 資料檔案是否位於主儲存上。</block>
  <block id="0c6f3c70d69fdbc10889c0bf3d54d400" category="paragraph">這樣就完成了 Oracle VLDB 備用映像副本備份和合併的設定。</block>
  <block id="1afaba9f41e3dd6015389dd6a151412d" category="section-title">將 Oracle VLDB 切換到映像副本以實現快速恢復</block>
  <block id="dfba912cd166af4cfe8896146ef629da" category="paragraph">如果因主儲存問題（例如資料遺失或損壞）而發生故障，資料庫可以快速切換到 ANF NFS 掛載上的映像副本，並恢復到目前狀態，而無需資料庫還原。消除媒體復原可大幅加快 VLDB 的資料庫復原速度。此用例假設 Oracle VLDB DB 伺服器完好無損，且資料庫控製文件、存檔日誌和目前日誌均可供復原。</block>
  <block id="15f67ba350e31e49f6aac9b603305228" category="list-text">以 oracle 使用者登入 Azure 主 VLDB 伺服器主機，並在切換之前建立測試表。</block>
  <block id="dce3cc3b84024400ca1056239e416340" category="list-text">復原後從 sqlplus 檢查資料庫結構，觀察到除控制、臨時和目前日誌檔案之外的所有 VLDB 資料檔案現在都已切換到 ANF NFS 檔案系統上的副本。</block>
  <block id="bab07f680481d370684c7c7bb3717bae" category="list-text">從 SQL plus 中，檢查在切換到複製之前我們插入的測試表的內容。</block>
  <block id="26644cbe4753a4ade8012d2ba03e81e4" category="list-text">您可以在 ANF NFS 掛載中執行 Oracle VLDB 較長時間，同時保持預期的效能水準。當主儲存問題解決後，您可以透過逆轉增量備份合併過程，以最少的停機時間恢復原狀。</block>
  <block id="5a00ad02f147850c7af23fdfd27e0eaa" category="section-title">Oracle VLDB 從映像複製到備用資料庫伺服器的恢復</block>
  <block id="17296cbb22286362e179c848e8e57295" category="paragraph">如果發生故障，主儲存和主資料庫伺服器主機都會遺失，則無法從原始伺服器進行復原。但是，ANF NFS 檔案系統上提供的 Oracle 資料庫備份映像副本會很方便。您可以使用備份映像副本快速將主資料庫還原到備用資料庫伺服器（如果有）。在本節中，我們將示範此類恢復的逐步過程。</block>
  <block id="6936d296c2b811c489aca0e32d359fcd" category="list-text">在我們之前為 Oracle VLDB 還原到備用主機驗證而建立的測試表中插入一行。</block>
  <block id="f18d7c57a5ebb3caa3ea2bfe276de7f2" category="list-text">以 oracle 使用者身分執行 RMAN 增量備份並合併以將交易刷新到 ANF NFS 掛載上的備份集。</block>
  <block id="cb94a5220dfad4d0aa2f693c894fb9e9" category="list-text">關閉主 VLDB 伺服器主機以模擬儲存和 DB 伺服器主機的完全故障。</block>
  <block id="e761e3a893aaa3520b400ce648ab8a6a" category="list-text">在具有相同作業系統和版本的備用資料庫伺服器 ora-02 上，作業系統核心應與主 VLDB 伺服器主機一樣進行修補。此外，已在僅使用軟體選項的備用資料庫伺服器上安裝和設定了相同版本和修補程式的 Oracle。</block>
  <block id="8c37710929190bb2d41b656aeceeae08" category="list-text">配置與主 VLDB 伺服器 ora_01 類似的 oracle 環境，例如 oratab 和 oracle 使用者 .bash_profile 等。將這些檔案備份到 ANF NFS 掛載點是一種很好的做法。</block>
  <block id="62b6592dd07cf67430eb62e8fa7a1134" category="list-text">然後將 ANF NFS 檔案系統上的 Oracle 資料庫備份映像副本安裝在備用 DB 伺服器上以進行還原。以下步驟示範了流程的細節。</block>
  <block id="d7ee3226eda2c84f098cd207f0d54f24" category="paragraph">以 azueruser 身分建立掛載點。</block>
  <block id="ad8e2a2e998153fae9d61ff8f9d9f743" category="paragraph">以 azureuser 身分掛載儲存 Oracle VLDB 備份映像副本的 NFS 磁碟區。</block>
  <block id="57037eb23ec9213da633092ef5499d2e" category="list-text">驗證 ANF NFS 掛載點上的 Oracle 資料庫備份映像副本。</block>
  <block id="ebb08557fe1c4afb90525797dd43db2e" category="list-text">驗證 ANF NFS 掛載上可用的 Oracle 存檔日誌以進行恢復，並記下最後一個日誌檔案日誌序號。在本例中為 10。我們的恢復點最多到日誌序號 11。</block>
  <block id="a4182a7080e9f6f2151069ccb62a5457" category="list-text">以 oracle 使用者身份，將 ORACLE_HOME 變數設定為備用 DB 伺服器 ora-02 上的目前 Oracle 安裝，將 ORACLE_SID 設定為主 Oracle 實例 SID。在這種情況下，它是 NTAP1。</block>
  <block id="a0cf68f6b5b4902668150f7bd93de702" category="list-text">以 oracle 使用者身份，在 $ORACLE_HOME/dbs 目錄中建立一個通用 Oracle 初始化文件，並配置適當的管理目錄。最重要的是，擁有 Oracle<block ref="54205e08f5455705eb7a595f7e4f620f" prefix=" " category="inline-code"></block>指向主 Oracle VLDB 伺服器中定義的 ANF NFS 掛載路徑。<block ref="54205e08f5455705eb7a595f7e4f620f" prefix=" " category="inline-code"></block>配置在章節中進行了演示<block ref="73304323457935ed833c76e67c23f068" prefix=" " category="inline-code"></block>。將 Oracle 控制檔設定為 ANF NFS 檔案系統。</block>
  <block id="a43978f8f72cfac9215264289dc0bbc5" category="paragraph">如果出現差異，則應使用從主 Oracle VLDB 伺服器復原的備份初始化檔案取代上述初始化檔案。</block>
  <block id="763216a4e00351ecca33c64834ed517e" category="list-text">以 oracle 使用者身分啟動 RMAN 在備用資料庫伺服器主機上執行 Oracle 復原。首先，啟動 Oracle 實例<block ref="b407a7f2e317a40388660332475e7643" prefix=" " category="inline-code"></block>狀態。</block>
  <block id="8d54569996869aecad559c10bb1e2c87" category="list-text">設定資料庫ID。可以從 ANF NFS 掛載點上的映像副本的 Oracle 檔案名稱中檢索資料庫 ID。</block>
  <block id="a36331bab1648a62444eb296287a6fdc" category="list-text">將初始化檔案從 spfile 還原到 /tmp 資料夾，以便稍後更新參數檔案以與主 VLDB 相符。</block>
  <block id="245c0febb36259f78725542aabcf3a2c" category="list-text">驗證還原到新主機的資料庫結構以及我們在主 VLDB 故障之前插入的測試行。</block>
  <block id="5cfbf4ac8374e1dd5933aecbf7073072" category="list-text">刪除無效的臨時檔案並將新的臨時檔案新增至臨時表空間。</block>
  <block id="b254731bf46f569e3541aea574a9240f" category="paragraph">這樣就完成了從 ANF NFS 檔案系統上的備份映像副本到備用 DB 伺服器主機的 Oracle VLDB 資料庫復原。</block>
  <block id="d3f74ca8a0731f82353c037422b4a066" category="summary">此解決方案提供了在 Azure 雲端中使用 Oracle Data Guard 在 Microsoft Azure NetApp Files (ANF) 上配置高吞吐量 Oracle 超大型資料庫 (VLDB) 的概述和詳細資訊。</block>
  <block id="ea3f52ad072d0c22eef85e7718048f10" category="doc">TR-5003：ANF 上的高吞吐量 Oracle VLDB 實現</block>
  <block id="ac2a865a5ac3beffbb6e82feb1642f5d" category="paragraph">此解決方案提供了在 Azure 雲端中使用 Oracle Data Guard 在 Microsoft Azure NetApp Files (ANF) 上配置高吞吐量 Oracle 超大型資料庫 (VLDB) 的概述和詳細資訊。</block>
  <block id="bc44c54c1ace508b8c262b89414fc118" category="inline-link-macro">Azure NetApp Files多個磁碟區上的 Oracle 資料庫效能</block>
  <block id="7e91e431d0d705cb0deed644bfa3e158" category="paragraph">高吞吐量和任務關鍵型 Oracle VLDB 對後端資料庫儲存提出了很高的要求。為了滿足服務等級協定 (SLA)，資料庫儲存必須提供所需的容量和每秒高輸入/輸出作業數 (IOPS)，同時保持亞毫秒延遲效能。在具有共享儲存資源環境的公有雲中部署此類資料庫工作負載時，這一點尤其具有挑戰性。並非所有儲存平台都是平等的。進階Azure NetApp Files儲存與 Azure 基礎架構結合，可滿足如此高要求的 Oracle 工作負載的需求。在經過驗證的性能基準測試中（<block ref="9ab2ff2b4b0ce4e627f3b2b61c4c51e7" category="inline-link-macro-rx"></block> )，ANF 透過 SLOB 工具在合成的 100% 隨機選擇工作負載中提供了 250 萬次讀取 IOPS，延遲為 700 微秒。對於標準 8k 區塊大小，這相當於大約 20 GiB/s 的吞吐量。</block>
  <block id="40bb9e52a428c50e9d4260327ae36ae0" category="paragraph">在本文檔中，我們示範如何在具有多個 NFS 捲和 Oracle ASM 的 ANF 儲存體上設定具有 Data Guard 配置的 Oracle VLDB 以實現儲存負載平衡。備用資料庫可以透過快照快速（幾分鐘）備份，並根據需要複製以供用例進行讀取/寫入存取。  NetApp解決方案工程團隊提供了自動化工具包，可按照使用者定義的計畫輕鬆建立和刷新克隆。</block>
  <block id="6426a2ab6b3d824d1a657f76ce59af76" category="list-text">在跨 Azure 區域的 Microsoft Azure NetApp Files儲存空間上的 Data Guard 設定中實作 Oracle VLDB。</block>
  <block id="2bbb6519cb42fb5ad193cbb08504b0ea" category="list-text">快照備份並複製實體備用資料庫，以透過自動化服務於報告、開發、測試等用例。</block>
  <block id="576e227dcb1e0d80713bcf3c26196c6f" category="list-text">在 Azure 雲端中使用 Data Guard 設定 Oracle VLDB 以實現高可用性、資料保護和災難復原的 DBA。</block>
  <block id="5753258a78d8f3a9beb9cc106e6f9034" category="list-text">對 Azure 雲端中具有 Data Guard 配置的 Oracle VLDB 感興趣的資料庫解決方案架構師。</block>
  <block id="5274e960c7dd428c75a6144ebb308bce" category="list-text">管理支援 Oracle 資料庫的Azure NetApp Files儲存的儲存管理員。</block>
  <block id="703068f950e0ca65139d87b49eb83e6f" category="list-text">喜歡在 Azure 雲端環境中使用 Data Guard 建立 Oracle VLDB 的應用程式擁有者。</block>
  <block id="cc4e806c11d730c592dbbbbbe13e7e65" category="paragraph"><block ref="cc4e806c11d730c592dbbbbbe13e7e65" category="inline-image-macro-rx" type="image"></block></block>
  <block id="958e567b3c1c55ffc247da958c959bb0" category="cell">兩個 4 TiB 容量池、進階服務等級、自動 QoS</block>
  <block id="48cd7e2a04cc7a2c0db818d222feb3d9" category="cell">dNFS一次性補丁</block>
  <block id="0a47877dcb480736ed911404e6680808" category="cell">p32931941_190000_Linux-x86-64.zip</block>
  <block id="5f71efbefae6963d850d2f98f4eb45a7" category="cell">適用於網格和資料庫</block>
  <block id="ed04a43e0d6fd50cdfb484c753725112" category="cell">版本核心 2.16.2</block>
  <block id="8b4fa9fd84c38bb567a32f6a0529234a" category="cell">python版本-3.10.13</block>
  <block id="e8194910cb10ca7dabc8efc9910a19ac" category="section-title">Oracle VLDB Data Guard 配置，模擬紐約到洛杉磯的災難復原設置</block>
  <block id="63fee887d948a555fc7e7fa0e4048d52" category="list-text">Azure NetApp Files配置。 Azure NetApp Files在 Azure NetApp儲存帳戶中指派為<block ref="a74c45c38136d5cb4b7be385e3a8c24e" prefix=" " category="inline-code"></block>。在這些測試和驗證中，我們部署了一個 2 TiB 容量池來託管東部區域的 Oracle 主資料庫，並部署了一個 4 TiB 容量池來託管西部 2 區域的備用資料庫和資料庫克隆。  ANF 容量池有三種服務等級：Standard、Premium 和 Ultra。 ANF容量池的IO容量取決於容量池的大小及其服務等級。在建立容量池時，可以將 QoS 設定為“自動”或“手動”，並將靜態資料加密設為“單次”或“兩次”。</block>
  <block id="469fbba4b0f5f2060092292911ed8af8" category="list-text">*調整資料庫磁碟區的大小。 *對於生產部署， NetApp建議根據 Oracle AWR 報告對 Oracle 資料庫吞吐量需求進行全面評估。在決定資料庫的 ANF 磁碟區大小時，要同時考慮資料庫大小以及吞吐量需求。透過為 ANF 自動配置 QoS，可確保在超級服務等級分配的每 TiB 磁碟區容量下頻寬為 128 MiB/s。更高的吞吐量可能需要更大的容量才能滿足要求。</block>
  <block id="e169ef58267a44a036a2431b258bb8bb" category="list-text">*單卷或多卷。 *由於 QoS 是根據磁碟區大小和容量池服務等級嚴格執行的，因此單一大磁碟區可以提供與具有相同聚合大小的多個磁碟區類似的效能等級。建議為 Oracle VLDB 實作多個磁碟區（多個 NFS 掛載點），以便更好地利用共用後端 ANF 儲存資源池。實作 Oracle ASM 以實現多個 NFS 磁碟區上的 IO 負載平衡。</block>
  <block id="13405dddab4bfc8f05bf4cef70d4ba34" category="list-text">應用程式捲組。為 Oracle 部署應用程式磁碟區組 (AVG) 以最佳化效能。依應用程式磁碟區組部署的磁碟區會放置在區域或區域基礎架構中，以實現應用程式虛擬機器的最佳化延遲和吞吐量。</block>
  <block id="e3abfd4444bd3673edd8bcaf154ef1b7" category="list-text">Azure VM 考慮事項。在這些測試和驗證中，我們使用了具有 4 個 vCPU 和 16 GiB 記憶體的 Azure VM - Standard_B4ms。您需要為具有高吞吐量需求的 Oracle VLDB 選擇適當的 Azure DB VM。除了 vCPU 數量和 RAM 數量之外，在達到資料庫儲存容量之前，VM 網路頻寬（入口和出口或 NIC 吞吐量限制）也可能成為瓶頸。</block>
  <block id="3e3ac9cab9c622b8cdc90f392ca12717" category="list-text">dNFS 配置。透過使用 dNFS，在具有 ANF 儲存的 Azure 虛擬機器上執行的 Oracle 資料庫可以比本機 NFS 用戶端驅動更多的 I/O。確保應用 Oracle dNFS 補丁 p32931941 來解決潛在的錯誤。</block>
  <block id="0dc065cc938849ffd984d61b209b4102" category="paragraph">假設您已將主 Oracle 資料庫部署在 VNet 內的 Azure 雲端環境中，作為設定 Oracle Data Guard 的起點。理想情況下，主資料庫部署在具有 NFS 掛載的 ANF 儲存體上。您的主要 Oracle 資料庫也可以在NetApp ONTAP儲存或 Azure 生態系統或私有資料中心內的任何其他儲存體上執行。以下部分示範了在 Azure 中具有 ANF 儲存體的主 Oracle DB 與 Azure 中具有 ANF 儲存體的實體備用 Oracle DB 之間的 Oracle Data Guard 設定中 ANF 上的 Oracle VLDB 的配置。</block>
  <block id="b6a8795b89427b9bcedb329706ce612e" category="inline-link-macro">為 Oracle 部署應用程式磁碟區群組</block>
  <block id="f288dca98de9fd8f68cabce75de41f63" category="list-text">參考此文檔<block ref="92fe001805609a088a0730df6826e443" category="inline-link-macro-rx"></block>為 Oracle 部署應用程式磁碟區群組。</block>
  <block id="6de56926cf16ae7e5acadafffe9cebaa" category="section-title">Data Guard 的主要 Oracle VLDB 配置</block>
  <block id="3ad9c4c8e99ed69f2aabbca53120048e" category="paragraph">在此示範中，我們在主 Azure DB 伺服器上設定了一個名為 NTAP 的主 Oracle 資料庫，該資料庫有六個 NFS 掛載點：/u01 用於 Oracle 二進位文件，/u02、/u04、/u05、/u06 用於 Oracle 資料日誌檔案和 Oracle 控製文件，/u03 用於 Oracle 活動和 Oracle 檔案。此設定可作為參考配置。您的實際部署應該考慮到容量池大小、服務等級、資料庫磁碟區數量和每個磁碟區的大小的特定需求和要求。</block>
  <block id="d51ded5e9f753b1b0f2beb2d3abbb5b0" category="inline-link-macro">TR-5002- 使用Azure NetApp Files降低 Oracle Active Data Guard 成本</block>
  <block id="a83e8767090057c4cce3ba759abbcdf5" category="inline-link-macro">TR-4974- 使用 NFS/ASM 在 AWS FSx/EC2 上獨立重新啟動 Oracle 19c</block>
  <block id="e816473ee6c7a0f05babc405986f6f79" category="paragraph">有關使用 ASM 在 NFS 上設定 Oracle Data Guard 的詳細逐步流程，請參閱<block ref="b1d6ef03bcdcd359f71dd4154c9cceb7" category="inline-link-macro-rx"></block>和<block ref="20283444534604ae8bcc997636416590" category="inline-link-macro-rx"></block>相關章節。儘管 TR-4974 中的程式已在Amazon FSx ONTAP上得到驗證，但它們同樣適用於 ANF。以下說明了 Data Guard 配置中主 Oracle VLDB 的詳細資訊。</block>
  <block id="c45548c59f7dad91372bcd725f152c39" category="list-text">主 Azure DB 伺服器 orap.internal.cloudapp.net 上的主資料庫 NTAP 最初部署為獨立資料庫，其中 NFS 上的 ANF 和 ASM 作為資料庫儲存。</block>
  <block id="7bf1a0c80391c93f6f892d9092d39902" category="list-text">以 oracle 使用者登入主資料庫伺服器。驗證電網配置。</block>
  <block id="3ad7f7aa34443fba49a951acd20290a3" category="list-text">ASM 磁碟組配置。</block>
  <block id="3cf4fb8a73e23748b1f4113ab35d63b1" category="list-text">主資料庫上 Data Guard 的參數設定。</block>
  <block id="4af7aad920d7b025faecb6b1df125c0a" category="list-text">主資料庫配置。</block>
  <block id="e3bd7dd107adfa986e5c56078ffece74" category="list-text">主資料庫上的 dNFS 配置。</block>
  <block id="82d34c5b758259ddb431fbc68f3c1258" category="paragraph">這完成了在具有 NFS/ASM 的 ANF 主站點上為 VLDB NTAP 設定 Data Guard 的示範。</block>
  <block id="ee7ea56a90c6257d42a731fa2163e414" category="section-title">針對 Data Guard 的備用 Oracle VLDB 配置</block>
  <block id="073b26f74075ded1047f17ed2fb3f4e4" category="paragraph">Oracle Data Guard 需要 OS 核心配置和 Oracle 軟體堆疊（包括備用 DB 伺服器上的修補程式集）以與主 DB 伺服器相符。為了便於管理和簡單起見，備用資料庫伺服器的資料庫儲存配置理想情況下也應該與主資料庫伺服器匹配，例如資料庫目錄佈局和 NFS 掛載點的大小。</block>
  <block id="b13373feb0d0480cb26331702f9f72ab" category="inline-link-macro">TR-5002 - 使用Azure NetApp Files降低 Oracle Active Data Guard 成本</block>
  <block id="78aa914b3586201e6f7371f59227aea6" category="inline-link-macro">TR-4974 - 使用 NFS/ASM 在 AWS FSx/EC2 上獨立重新啟動 Oracle 19c</block>
  <block id="cf3a78e2385d868ecef44d6d54172850" category="paragraph">再次強調，有關使用 ASM 在 NFS 上設定 Oracle Data Guard 備用伺服器的詳細逐步流程，請參閱<block ref="94a03fa05762772c643d935de8449f7a" category="inline-link-macro-rx"></block>和<block ref="179b88d7d08fc36b4d4a3783382a72e4" category="inline-link-macro-rx"></block>相關章節。以下說明了 Data Guard 設定中備用資料庫伺服器上備用 Oracle VLDB 配置的詳細資訊。</block>
  <block id="edda20f8b9d369d8982c572e12f17fa5" category="list-text">備用資料庫伺服器上的網格基礎架構配置。</block>
  <block id="5bf53e0e8e47a0543347995a8936912f" category="list-text">備用資料庫伺服器上的 ASM 磁碟組配置。</block>
  <block id="b8b919859dcfe201ff05ad4c99c2757f" category="list-text">備用資料庫上的 Data Guard 參數設定。</block>
  <block id="179f52441082fa066322c1655150ce66" category="list-text">備用資料庫配置。</block>
  <block id="dc769e77c3d823a7a27acf7ecd475281" category="list-text">備用資料庫上的 dNFS 配置。</block>
  <block id="ab12cfbfb1418ea24706a0a5bd7644dd" category="paragraph">這樣就完成了 VLDB NTAP 的 Data Guard 設定演示，並在備用網站啟用了託管備用復原。</block>
  <block id="f8e190301bfcaa06e179b533dfde6240" category="section-title">透過自動化克隆其他用例的備用資料庫</block>
  <block id="b3d01b085ffe63145776626c2de38e93" category="paragraph">以下自動化工具包專門用於建立或刷新部署到 ANF 的 Oracle Data Guard 備用資料庫的克隆，並使用 NFS/ASM 配置實現完整的克隆生命週期管理。</block>
  <block id="117ea9c26563c0caf3f390559197cd2f" category="paragraph"><block ref="117ea9c26563c0caf3f390559197cd2f" category="inline-link-macro-rx"></block></block>
  <block id="f67f058c75bbff16c69f4bd1d435df34" category="paragraph"><block ref="f67f058c75bbff16c69f4bd1d435df34" category="inline-link-macro-rx"></block></block>
  <block id="b985336298cf9391b91c898572090625" category="summary">本節介紹使用 Azure 虛擬機器和Azure NetApp Files儲存的 Oracle 資料庫部署和資料保護解決方案架構。</block>
  <block id="91e17bfb5f535513b5320d68f6afe1fc" category="paragraph">以下體系結構圖說明了 Azure VM 執行個體和Azure NetApp Files儲存上的高可用性 Oracle 資料庫部署。</block>
  <block id="520c5c426000f1dbbd8ac385d5547603" category="paragraph">在該環境中，Oracle 運算執行個體會透過 Azure 服務 VM 控制台部署。控制台中有多種 Azure 執行個體類型可用。  NetApp建議部署一個以資料庫為導向的 Azure VM 實例，以滿足您的預期工作負載。</block>
  <block id="9e20ded809aa2fa1bd072f48ceacfdd8" category="paragraph">另一方面，Oracle 資料庫儲存是使用 Azure 控制台提供的Azure NetApp Files服務進行部署的。隨後，Oracle 二進位檔案、資料或日誌磁碟區將顯示並安裝在 Azure VM 執行個體 Linux 主機上。</block>
  <block id="6b5cae77dbc9c4b759bf654b117eb10b" category="inline-image-macro">此圖描述了主站點、備用站點以及每個站點的 vNet 對等之間的關係。這形成了四個獨立的虛擬網路。</block>
  <block id="bddd62b850dfe65861a140dee07a77c4" category="paragraph"><block ref="bddd62b850dfe65861a140dee07a77c4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03aa17a1290e1122adecd07d53463cde" category="paragraph">在許多方面，Azure 雲端中Azure NetApp Files的實作與具有許多內建冗餘（例如 RAID 和雙控制器）的本地ONTAP資料儲存架構非常相似。對於災難恢復，可以在不同的區域設定備用站點，並且可以使用應用程式層級複製（例如，Oracle Data Guard）將資料庫與主站點同步。</block>
  <block id="6f1714a5ced243b141295d01d4038364" category="paragraph">在我們對 Oracle 資料庫部署和資料保護的測試驗證中，Oracle 資料庫部署在單一 Azure VM 上，如下圖所示：</block>
  <block id="fef3344ae2f384e724a169b6e9d90be7" category="inline-image-macro">此圖描述了單一 Azure VM 與 vNet 對等互連的組織方式，以形成兩個獨立的虛擬網路。</block>
  <block id="066919795ab4c6c94fe9a4aef67a4607" category="paragraph"><block ref="066919795ab4c6c94fe9a4aef67a4607" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f3c70c58c925177cc6e4034cfa1006c0" category="paragraph">可使用 Ansible 控制器節點管理 Azure Oracle 環境，使用NetApp提供的工具包實現資料庫部署、備份、復原和資料庫遷移的自動化。可以並行執行 Oracle Azure VM 執行個體作業系統核心或 Oracle 修補的任何更新，以保持主伺服器和備用伺服器同步。事實上，如果需要的話，初始工具包可以輕鬆擴展以執行日常 Oracle 任務。如果您需要協助設定 CLI Ansible 控制器，請參閱<block ref="230dfc589866e347afe497262b15904b" category="inline-link-macro-rx"></block>開始吧。</block>
  <block id="cffc2899d8dda4926e6563cef4e76608" category="summary">本節詳細介紹在 Azure 虛擬機器和Azure NetApp Files儲存上部署 Oracle 資料庫時需要考慮的因素。</block>
  <block id="1a6a6241c0105da34f664d1e12534598" category="paragraph">以下部分介紹在具有Azure NetApp Files儲存在 Azure 虛擬機器實例上的 Azure 公有雲中部署 Oracle 資料庫時的主要注意事項。</block>
  <block id="c2b3b1e82aa97a133f0f6bbc12843085" category="section-title">VM 類型和大小</block>
  <block id="4ca9712a9cd82ea80c8e225977fae1bb" category="inline-link-macro">Azure 中的虛擬機器大小</block>
  <block id="7c4a17715675ccfa7ce507eea6098318" category="paragraph">選擇正確的虛擬機器類型和大小對於公有雲中關聯式資料庫的最佳效能非常重要。 Azure 虛擬機器提供了多種可用於託管 Oracle 資料庫工作負載的運算執行個體。請參閱 Microsoft 文檔<block ref="d854faa84ea41d8819c42ca3741a3561" category="inline-link-macro-rx"></block>適用於不同類型的 Azure 虛擬機器及其大小。一般來說， NetApp建議使用通用 Azure 虛擬機器部署中小型 Oracle 資料庫。對於部署更大的 Oracle 資料庫，記憶體最佳化的 Azure VM 是合適的。有了更多可用的 RAM，就可以配置更大的 Oracle SGA 或智慧型快閃記憶體快取來減少實體 I/O，從而提高資料庫效能。</block>
  <block id="84942a15b69259aab0ff7c2620afcaf6" category="inline-link-macro">TR-4780：Microsoft Azure 上的 Oracle 資料庫</block>
  <block id="760a7b6c1bd4f6ebab6918d42feb4825" category="paragraph">Azure NetApp Files會以連接到 Azure 虛擬機器的 NFS 掛載，可提供更高的吞吐量，並透過本機儲存克服儲存最佳化的 VM 吞吐量限制。因此，在Azure NetApp Files上執行 Oracle 可以減少可授權的 Oracle CPU 核心數量和授權成本。看<block ref="b46cbe9b7b18b9ff8101a014c206465f" category="inline-link-macro-rx"></block>，第 7 節 — Oracle 授權如何運作？</block>
  <block id="71b93ac808ac25bb511ebcbb028e32e8" category="paragraph">其他需要考慮的因素包括：</block>
  <block id="592bc946b588ad0e83c05f528895bcc8" category="list-text">根據工作負載特性選擇正確的 vCPU 和 RAM 組合。隨著虛擬機器上的 RAM 大小增加，vCPU 核心的數量也會增加。由於 Oracle 授權費用是根據 vCPU 核心數量收取的，因此在某個時候應該達到平衡。</block>
  <block id="fb9844eb7ee0ff341d6f7066f78918ff" category="list-text">在虛擬機器中新增交換空間。預設的 Azure VM 部署不會建立交換空間，這對資料庫來說不是最佳的。</block>
  <block id="81afc696937e3786d5701212de79c536" category="section-title">Azure NetApp Files效能</block>
  <block id="c7bc5faed38f5284386f25a6fc3a5752" category="paragraph">Azure NetApp Files磁碟區是從容量池中指派的，客戶必須在其Azure NetApp Files儲存帳戶中設定該容量池。每個容量池的分配如下：</block>
  <block id="3af20f4cec87eac026d0990a8a3f4169" category="list-text">達到定義整體性能能力的服務水準。</block>
  <block id="dd1fb66595c069d1b267fb8ca87e46eb" category="list-text">此容量池最初配置的儲存容量或分層。定義每個配置空間的總體最大吞吐量的服務品質 (QoS) 等級。</block>
  <block id="9dc50220b7e70511b5aeebb862346fad" category="paragraph">服務等級和初始配置的儲存容量決定了特定 Oracle 資料庫磁碟區的效能等級。</block>
  <block id="59b8b6b998c3c0fcd2f1b107a68c290a" category="section-title">1.Azure NetApp Files的服務級別</block>
  <block id="f02ad1a8080bf1b50f8a15cb346ed483" category="paragraph">Azure NetApp Files支援三種服務等級：Ultra、Premium 和 Standard。</block>
  <block id="3eec40f71dc46b07f32031c9703968ec" category="list-text">*超級儲存。 *此層級每分配 1TiB 磁碟區配額可提供高達 128MiBps 的吞吐量。</block>
  <block id="1b0fa75a1e8b815e03fb38f8a90d2a73" category="list-text">*進階儲存。 *此層級每分配 1TiB 磁碟區配額可提供高達 64MiBps 的吞吐量。</block>
  <block id="00792f6ec40d3e2833834d90802a7aa5" category="list-text">*標準存放。 *此層級每分配 1TiB 磁碟區配額可提供高達 16MiBps 的吞吐量。</block>
  <block id="7a720602d11a97fd37964c9979e2f1a5" category="section-title">2.容量池和服務質量</block>
  <block id="36ac84521252c58a4238292bf0c21d92" category="paragraph">每個所需的服務等級都與配置容量的成本相關，並包括定義配置空間的整體最大吞吐量的服務品質 (QoS) 等級。</block>
  <block id="7a93db9cf06fd65415faf241927e2087" category="paragraph">例如，具有進階服務等級的 10TiB 預先配置單容量池可為此容量池中的所有磁碟區提供 10x 64MBps 的總可用吞吐量，即 640MBps，具有 40,000 (16K) IOPs 或 80,000 (8K) IOPs。</block>
  <block id="18dc8b2cbfb938a0ba32c141664fba0e" category="paragraph">最小容量池大小為 4TiB。您可以根據工作負載需求的變化以 1TiB 為增量變更容量池的大小，以管理儲存需求和成本。</block>
  <block id="8a26494cf7b0c3c3ca7cd38e89c068eb" category="section-title">3.計算資料庫卷的服務級別</block>
  <block id="9ce59559a0b99338ee0bad0c153c961a" category="paragraph">Oracle 資料庫磁碟區的吞吐量限制由下列因素組合決定：磁碟區所屬容量池的服務等級及指派給該磁碟區的配額。</block>
  <block id="b87e1c6e437216fc2d3719c3dad93cb8" category="paragraph">下圖顯示如何計算 Oracle 資料庫磁碟區的吞吐量限制。</block>
  <block id="1624b6f83446cd1719c94bae28cbbeb7" category="inline-image-macro">此圖描述了應用於三個容量層級以確定總吞吐量的方程式。</block>
  <block id="2b9f85feb56e3ff5f26a18665197efe9" category="paragraph"><block ref="2b9f85feb56e3ff5f26a18665197efe9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ce3321601c29c87cb29ae9817843b8d" category="paragraph">在範例 1 中，來自具有高階儲存層的容量池的磁碟區分配了 2TiB 的配額，其吞吐量限制為 128MiBps（2TiB * 64MiBps）。無論容量池大小或實際容量消耗如何，此場景都適用。</block>
  <block id="69da5d3e48cc26414a9177d843bd55d9" category="paragraph">在範例 2 中，來自具有高階儲存層的容量池的磁碟區分配了 100GiB 的配額，其吞吐量限制為 6.25MiBps（0.09765625TiB * 64MiBps）。無論容量池大小或實際容量消耗如何，此場景都適用。</block>
  <block id="def2c2ae4fa72ee296eada07b44a0cc9" category="paragraph">請注意，最小磁碟區大小為 100GiB。</block>
  <block id="78ad659ec79d8ee9e7432271167d18d3" category="list-text">對於小型資料庫，所有 Oracle 檔案使用單卷佈局。</block>
  <block id="51672f1f7a65c28f28e5e113376309bd" category="inline-image-macro">該圖描繪了三個資料庫（DB1、DB2 和 DB3），每個資料庫都包含單一容量池內的資料檔案、重做日誌、存檔日誌和控制檔。</block>
  <block id="17b01d05a8624b76c9c3e11c01a97fe1" category="paragraph"><block ref="17b01d05a8624b76c9c3e11c01a97fe1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="816445ad7ba016a8c0be293c985f068b" category="list-text">對於大型資料庫，建議的磁碟區佈局是多個磁碟區：一個用於 Oracle 資料和重複控製文件，另一個用於 Oracle 活動日誌、存檔日誌和控製文件。  NetApp強烈建議為 Oracle 二進位檔案指派一個磁碟區而不是本機驅動器，以便資料庫可以重新定位到新主機並快速復原。</block>
  <block id="955db4ecf8716abf17a3ea3f8e113671" category="inline-image-macro">該圖描繪了兩個資料庫，每個資料庫有兩個卷。第一個磁碟區包含資料文件，而每個資料庫的第二個磁碟區包含重做日誌、存檔日誌和控製文件。全部都在一個容量池內。</block>
  <block id="3db3356640f2324630385dfbbdb66aca" category="paragraph"><block ref="3db3356640f2324630385dfbbdb66aca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="efeaafaa286e164985a0c325f0727cf1" category="paragraph">Linux 是最常見的作業系統，包含原生 NFS 功能。  Oracle 提供了原生整合到 Oracle 中的直接 NFS (dNFS) 用戶端。  Oracle dNFS 可繞過作業系統快取並支援平行處理以提高資料庫效能。  Oracle 已支援 NFSv3 超過 20 年，Oracle 12.1.0.2 及更高版本支援 NFSv4。</block>
  <block id="be5ef2ba2540e077db09ca784b1ac18f" category="paragraph">透過使用 dNFS（自 Oracle 11g 起可用），在 Azure 虛擬機器上執行的 Oracle 資料庫可以比本機 NFS 用戶端驅動更多的 I/O。使用NetApp自動化工具包的自動化 Oracle 部署會自動在 NFSv3 上設定 dNFS。</block>
  <block id="632bf0b812e05925eff22d7d0a7677c2" category="paragraph">下圖示範了使用 Oracle dNFS 的Azure NetApp Files上的 SLOB 基準。</block>
  <block id="08826656fd88155bdfaebbb292320e33" category="inline-image-macro">此圖表明顯顯示 dNFS 比 KNFS 改善了 DB 順序檔案延遲（毫秒）。</block>
  <block id="a2503533a9982cdf2864cc90fe439f25" category="paragraph"><block ref="a2503533a9982cdf2864cc90fe439f25" category="inline-image-macro-rx" type="image"></block></block>
  <block id="24019b0d54b5da3a46b400c6a6dfee77" category="paragraph">為了獲得最佳效能並防止效能問題，請將控制 TCP 槽表的核心參數調整為 128。</block>
  <block id="754e164c2de7ed1f02667d5f74297a0e" category="list-text">下表提供了針對 Linux NFSv3 單一執行個體的建議 NFS 掛載選項。</block>
  <block id="fa7abb28d1b83f9ee23d95aff1d3123b" category="inline-image-macro">下表顯示了以下檔案類型、控制檔案、資料檔案、重做日誌、ORACLE_HOME 和 ORACLE_BASE 的詳細 NFS 掛載選項。</block>
  <block id="26a8ec6fc2bf7ef2dbfdef2c7cf0e0f6" category="paragraph"><block ref="26a8ec6fc2bf7ef2dbfdef2c7cf0e0f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="41f2543265fcbcf566ce925409c1bfbb" category="summary">本節詳細介紹如何將 Oracle 資料庫從本機遷移到Azure NetApp Files以及反之亦然。</block>
  <block id="3c2b924258f32094eb64883db57a778a" category="paragraph">由於 Oracle 決定逐步淘汰單一實例資料庫，許多組織已將單一實例 Oracle 資料庫轉換為多租用戶容器資料庫。這使得能夠輕鬆地將稱為 PDB 的容器資料庫子集遷移到雲端，並具有最大可用性選項，從而最大限度地減少遷移期間的停機時間。</block>
  <block id="a221bb2d4b0b28bb7e9aa40527e36333" category="paragraph">但是，如果您仍然有一個 Oracle 資料庫的單一實例，則可以先將其轉換為多租用戶容器資料庫，然後再嘗試 PDB 遷移。</block>
  <block id="3312d9383c6e42558bb6c7ffa86498b5" category="paragraph">以下部分提供了在任一場景中將本機 Oracle 資料庫遷移到 Azure 雲端的詳細資訊。</block>
  <block id="b65ba7cc82289837e3a44b6025b8a104" category="paragraph">如果您仍然擁有單一執行個體 Oracle 資料庫，則無論您是否希望將其遷移到雲端中，都必須將其轉換為多租用戶容器資料庫，因為 Oracle 將很快停止支援單一執行個體資料庫。</block>
  <block id="60a4157f0722b484d4ce9ec02662db31" category="paragraph">以下步驟將單一實例資料庫作為可插拔資料庫或 PDB 插入容器資料庫。</block>
  <block id="aefccbe3e9382cbdd83d84fee06a408d" category="list-text">在與單一實例資料庫相同的主機上建立一個 shell 容器資料庫，並在另一個單獨的<block ref="e1f651debac4f720c13ae930ff3ca14a" prefix=" " category="inline-code"></block>。</block>
  <block id="182e093a477c76844c12680be3deb7a4" category="list-text">關閉單一實例資料庫並以唯讀模式重新啟動它。</block>
  <block id="48270a516aeb2dd47c2b7f5d897c3182" category="list-text">運行<block ref="707fc638546e97f4dca068fcf2fbe277" prefix=" " category="inline-code"></block>產生資料庫元資料的過程。</block>
  <block id="61c2d2d903cc3e2bc374cc66b3a1572d" category="list-text">關閉單一實例資料庫。</block>
  <block id="d0e90ac40083de7010746f1c7afa8680" category="list-text">啟動容器資料庫。</block>
  <block id="c9b14b140c5af8df85a71e71e823fcd9" category="list-text">運行<block ref="6f6e7bfe46efb74f46338dcd4b8d7530" prefix=" " category="inline-code"></block>函數來判斷非CDB是否與CDB相容。</block>
  <block id="b4579eff709cfd4a9e9d9b3c7823a470" category="paragraph">如果輸出為YES，則表示非CDB相容，可以繼續下一步。</block>
  <block id="b788542aadbeda07cae67fad51f01ecf" category="paragraph">如果輸出為 NO，則非 CDB 不相容，您可以檢查<block ref="40bcd9431704d488bfba8de25bdd0469" prefix=" " category="inline-code"></block>查看不相容的原因。繼續操作之前，必須先糾正所有違規行為。例如，任何版本或補丁不匹配的問題都應透過執行升級或 opatch 實用程式來解決。糾正違規行為後，運行<block ref="6f6e7bfe46efb74f46338dcd4b8d7530" prefix=" " category="inline-code"></block>再次確保非 CDB 與 CDB 相容。</block>
  <block id="3dc81f6d88ee2f38ca30676e4b371634" category="list-text">插入單一實例非 CDB。</block>
  <block id="10a9ce9a6e151e6ff04bee976e0cb1de" category="admonition">如果主機上沒有足夠的空間，<block ref="4777c7eb130280b37f5b4b3abde7c586" prefix=" " category="inline-code"></block>選項可用於建立 PDB。在這種情況下，單一實例非 CDB 在插入為 PDB 後將無法使用，因為原始資料檔案已用於 PDB。確保在轉換之前建立備份，以便在出現任何問題時可以依靠它。</block>
  <block id="03d9f2c68151dce9edd03b346e5b110c" category="list-text">如果來源單一實例非 CDB 和目標 CDB 之間的版本不同，則轉換後從 PDB 升級開始。對於同版本轉換，可跳過此步驟。</block>
  <block id="81954d0087f2bc7590c39792b2d3ff79" category="paragraph">查看升級日誌文件<block ref="8940bd010306ed7bc730469a2815003c" prefix=" " category="inline-code"></block>目錄。</block>
  <block id="65f9a981d9b9caaa37a227c9d787c280" category="list-text">開啟可插拔資料庫，檢查 pdb 插件違規，並重新編譯無效物件。</block>
  <block id="f4d5586e12195159e664b1f0a78cccd3" category="list-text">執行<block ref="30636d635a272a80dff68679e08f1c7a" prefix=" " category="inline-code"></block>更新資料字典。</block>
  <block id="182d7c995640cc8ef16b728a670fbe58" category="paragraph">關閉並重新啟動容器資料庫。  ncdb 已退出限制模式。</block>
  <block id="d6af386b8be94481db3de6778b3fc24a" category="section-title">透過 PDB 遷移將本機 Oracle 資料庫遷移到 Azure</block>
  <block id="8ba045e8292f88863e71268ec6dabc53" category="paragraph">具有最大可用性選項的 Oracle PDB 重定位採用了 PDB 熱克隆技術，該技術允許在 PDB 複製到目標時來源 PDB 可用。在切換時，使用者連線會自動重新導向到目標 PDB。因此，無論 PDB 的大小如何，停機時間都可以最小化。  NetApp提供了基於 Ansible 的工具包，可自動執行遷移過程。</block>
  <block id="a8efacce1c06e5f64504448dec25740a" category="list-text">在 Azure 公有雲中的 Azure VM 上建立具有相同版本和修補程式等級的 CDB。</block>
  <block id="0f09a4e81820f79a89d0b433bb0de6ca" category="list-text">從 Ansible 控制器複製自動化工具包的副本。</block>
  <block id="33abd0ac6a3fb7ef8c104725e8360e85" category="list-text">閱讀 README 文件中的說明。</block>
  <block id="59082266ab8171963eb8785041055ee1" category="list-text">為來源和目標 Oracle 伺服器設定 Ansible 主機變數檔案以及用於名稱解析的 DB 伺服器主機的設定檔。</block>
  <block id="166811e58fa2fd17b3ab3305ca4b1948" category="list-text">在 Ansible 控制器上安裝 Ansible 控制器先決條件。</block>
  <block id="e40dd1f176a77cef20eb421dee4fea9f" category="list-text">針對本機伺服器執行任何遷移前任務。</block>
  <block id="aba7f3209eb8c49aca729c7368fb42fe" category="admonition">admin用戶是本機Oracle伺服器主機上具有sudo權限的管理用戶。管理員使用者透過密碼進行身份驗證。</block>
  <block id="a1da14dd2e192d36a7fe7bae327c2b23" category="list-text">執行從本機到目標 Azure Oracle 主機的 Oracle PDB 重定位。</block>
  <block id="39f1871870cabd138bd313c450662e67" category="admonition">Ansible 控制器可以位於本機或 Azure 雲端。控制器需要連接到本機 Oracle 伺服器主機和 Azure Oracle VM 主機。本機 Oracle 伺服器主機和 Azure Oracle VM 主機之間的 Oracle 資料庫連接埠（例如 1521）已開啟。</block>
  <block id="63a48a0f7ee4b39ef32c11b92acc2baa" category="section-title">其他 Oracle 資料庫遷移選項</block>
  <block id="7619081ba13aebf0c83d5660f9bf01bb" category="inline-link-macro">Oracle 資料庫遷移決策流程</block>
  <block id="0257ad9cf0c221fcf0c611f835c027ca" category="paragraph">請參閱 Microsoft 文件以了解更多移轉選項：<block ref="421a85ebca6e289a6eff559e7e35faf8" category="inline-link-macro-rx"></block> 。</block>
  <block id="cf2fb9f52eae11aaa1b6818cc22ade30" category="section-title">透過 Azure 入口網站控制台部署具有 ANF for Oracle 的 Azure VM</block>
  <block id="5e89dc82cb54763baa7cece42e7c3189" category="paragraph">如果您是 Azure 新用戶，首先需要設定 Azure 帳戶環境。這包括註冊您的組織以使用 Azure Active Directory。以下部分是這些步驟的摘要。有關詳細信息，請參閱連結的 Azure 特定文件。</block>
  <block id="c743c9c56cd6cc2acf874405ef178af3" category="section-title">建立和使用 Azure 資源</block>
  <block id="cc59653114a0ca329e90c87f8de8f2da" category="paragraph">設定 Azure 環境並建立帳戶並將其與訂閱關聯後，您可以使用該帳戶登入 Azure 入口網站來建立執行 Oracle 所需的資源。</block>
  <block id="4848dfd418cc69fdc8a92da472ac41b8" category="section-title">1.建立虛擬網路或 VNet</block>
  <block id="dd587303db328c6fc30f15fbf133eade" category="paragraph">Azure 虛擬網路 (VNet) 是 Azure 中私有網路的基本建置區塊。 VNet 讓許多類型的 Azure 資源（例如 Azure 虛擬機器 (VM)）能夠安全地相互通訊、與 Internet 通訊以及與本機網路通訊。在配置 Azure VM 之前，必須先配置 VNet（部署 VM 的位置）。</block>
  <block id="2b9029fce84bbf7056c94e4b86015679" category="inline-link-macro">使用 Azure 入口網站建立虛擬網路</block>
  <block id="698a842fc17e080abbf6b6796628879b" category="paragraph">看<block ref="f497c9708f9505977884a23053323735" category="inline-link-macro-rx"></block>建立 VNet。</block>
  <block id="66d98f4e89afee6dc557332b0e9ebe43" category="section-title">2.為 ANF 建立NetApp儲存帳戶和容量池</block>
  <block id="fecd60b0aedf111caefb4cf98b8d7be5" category="paragraph">在此部署場景中，使用常規 Azure 儲存體配置 Azure VM OS，但配置 ANF 磁碟區以透過 NFS 執行 Oracle 資料庫。首先，您需要建立一個NetApp儲存帳戶和一個容量池來託管儲存磁碟區。</block>
  <block id="76dc01e3f39d83b88a3d3ad36c338654" category="inline-link-macro">設定Azure NetApp Files並建立 NFS 卷</block>
  <block id="8a57d5f988c678cd141c2f704e110472" category="paragraph">看<block ref="2337ae471c0cc5402cdba65ad3b4dc78" category="inline-link-macro-rx"></block>建立ANF能力池。</block>
  <block id="ed39ba49be7769bdf483ae876d88cdff" category="section-title">3.為 Oracle 預配 Azure VM</block>
  <block id="acb4908e71af4ce0945c90f9039d0fc2" category="paragraph">根據您的工作負載，決定您需要哪種類型的 Azure VM 以及為 Oracle 部署的 VM vCPU 和 RAM 的大小。然後，從 Azure 控制台按一下 VM 圖示以啟動 VM 部署工作流程。</block>
  <block id="20d1e12ba2a72916f3917e44ff29b40a" category="list-text">在 Azure VM 頁面中，按一下 *建立*，然後選擇 *Azure 虛擬機器*。</block>
  <block id="94f088d23454b3c408a17cfff3cb8989" category="inline-image-macro">此螢幕截圖顯示了可用的 Azure VM 清單。</block>
  <block id="8c5cf454eabef1850ea0ffb2653a77c6" category="paragraph"><block ref="8c5cf454eabef1850ea0ffb2653a77c6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="78ba4b8df4acae5536f056217b16c353" category="list-text">選擇部署的訂閱 ID，然後選擇資源群組、區域、主機名稱、VM 映像、大小和驗證方法。轉到磁碟頁面。</block>
  <block id="cbbcba216ab68f94c8fab62d9c907a00" category="inline-image-macro">此螢幕截圖顯示了「建立虛擬機器」頁面的輸入。</block>
  <block id="825d4c0973e48f04ab75cc30df85bbdc" category="inline-image-macro">此螢幕截圖顯示了「建立虛擬機器」頁面的附加輸入。</block>
  <block id="1da34b0dc20dafeba216b1017d6c0cdc" category="paragraph"><block ref="d343b3f21a3b8445ef0630fc7fd303c4" category="inline-image-macro-rx" type="image"></block> <block ref="55fdb72bee907ff2263eb8949e6ebba9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c435f9a03a03e7cff44b06c9efafa31" category="list-text">選擇 *進階 SSD* 實現作業系統本機冗餘，並將資料磁碟留空，因為資料磁碟是從 ANF 儲存掛載的。前往網路頁面。</block>
  <block id="04faa74bfe9ea34a9831d24d039dc159" category="inline-image-macro">此螢幕截圖顯示了「建立虛擬機器磁碟」頁面的輸入。</block>
  <block id="7670b911047caf1456c4e5a1cdea2099" category="paragraph"><block ref="7670b911047caf1456c4e5a1cdea2099" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f9c5742f2bffff7dd4a50e578bfb093b" category="list-text">選擇 VNet 和子網路。分配一個公用 IP 供外部 VM 存取。然後進入管理頁面。</block>
  <block id="0c0077e9a9d4700a64e70d30e9d110df" category="inline-image-macro">此螢幕截圖顯示了「建立虛擬機器」頁面的進一步輸入。</block>
  <block id="4b018590f08f314594692835596b90aa" category="paragraph"><block ref="4b018590f08f314594692835596b90aa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6d5e4bb7568c6e8fb6a1f49aea08e975" category="list-text">保留管理的所有預設設定並轉到高級頁面。</block>
  <block id="45291c6293e8de1084c3b8de71bfe120" category="inline-image-macro">此螢幕截圖顯示了建立虛擬機器管理頁面的輸入。</block>
  <block id="db42c8205ca730413e7d4b544635768b" category="paragraph"><block ref="db42c8205ca730413e7d4b544635768b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22b5d3beb0289dfe21618d5664538321" category="list-text">保留高級頁面的所有預設設置，除非您需要在使用自訂腳本部署後自訂 VM。然後轉到標籤頁面。</block>
  <block id="1a911a2f1237ad150a29236bcfe044a0" category="inline-image-macro">此螢幕截圖顯示了建立虛擬機器高級頁面的輸入。</block>
  <block id="7b193f52167fe62720e1191e3efa2f05" category="paragraph"><block ref="7b193f52167fe62720e1191e3efa2f05" category="inline-image-macro-rx" type="image"></block></block>
  <block id="46dfe2059392afeb84a872afb7cd09d5" category="list-text">如果需要，請為虛擬機器新增標籤。然後，前往「審核 + 建立」頁面。</block>
  <block id="85e3843de649be49b63e3b04c6887bcd" category="inline-image-macro">此螢幕截圖顯示了「建立虛擬機器標籤」頁面的輸入。</block>
  <block id="1965d4b328b0678fe742226c1592b886" category="paragraph"><block ref="1965d4b328b0678fe742226c1592b886" category="inline-image-macro-rx" type="image"></block></block>
  <block id="57a6346e9ebfe8164361d5e2facffb62" category="list-text">部署工作流程對設定執行驗證，如果驗證通過，請按一下「*建立*」以建立虛擬機器。</block>
  <block id="dec1fd75845506029d8751bb7979c797" category="inline-image-macro">「此螢幕截圖顯示了建立虛擬機器審核和建立頁面的輸入」。</block>
  <block id="2f823056bdc8319f09d63c5d35397828" category="paragraph"><block ref="2f823056bdc8319f09d63c5d35397828" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c18c3fe2e695bda0cb8b3e7ecccbdc4e" category="section-title">4.為 Oracle 預配 ANF 資料庫磁碟區Provision ANF databasevolumes for Oracle</block>
  <block id="f162c2b2b89920293c1f24ac435c520e" category="paragraph">必須為 ANF 容量池建立三個 NFS 卷，分別用於 Oracle 二進位磁碟區、資料捲和日誌卷。</block>
  <block id="09d8c19d5844128b31e1fa195808b215" category="list-text">在 Azure 控制台中，在 Azure 服務清單下，按一下「Azure NetApp Files」以開啟磁碟區建立工作流程。如果有多個 ANF 儲存帳戶，請按一下要從中設定磁碟區的帳戶。</block>
  <block id="733cf6b848c8e38a49b4b604225141a5" category="inline-image-macro">此螢幕截圖顯示了 Azure 服務頁面，其中突出顯示了 ANF。</block>
  <block id="5c9f9e2ae2dd3406b2c3ed99714481d1" category="paragraph"><block ref="5c9f9e2ae2dd3406b2c3ed99714481d1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a8972cd5a80e6e385a27023ce45537a9" category="list-text">在您的NetApp儲存帳戶下，按一下 *磁碟區*，然後按一下 *新增磁碟區* 以建立新的 Oracle 磁碟區。</block>
  <block id="c8ce9170654447aba6747494e61bf3a2" category="inline-image-macro">此螢幕截圖顯示了NetApp儲存帳戶的登入畫面。</block>
  <block id="b0d2d575f2aee1703b6e2896d43b72f9" category="inline-image-macro">此螢幕截圖顯示了NetApp儲存帳戶可用的磁碟區。</block>
  <block id="27c5f8d8117616b1145ce68857574d45" category="paragraph"><block ref="be9f79088d942996d006cfa074f5385e" category="inline-image-macro-rx" type="image"></block> <block ref="2c16e3955ad0449ac72b48cd76a3cf75" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cbeaec71dc2b8275a14b23283d51cc04" category="list-text">作為一個很好的做法，使用 VM 主機名稱作為前綴來標識 Oracle 卷，然後跟上主機上的掛載點，例如 u01 表示 Oracle 二進位文件，u02 表示 Oracle 數據，u03 表示 Oracle 日誌。為磁碟區和 VM 選擇相同的 VNet。按一下“下一步：協議&gt;”。</block>
  <block id="ce4ff1bdb6d954e6967a7c241ff89518" category="inline-image-macro">卷創建螢幕。</block>
  <block id="3d982f5483fec64974322b41c9939c41" category="paragraph"><block ref="3d982f5483fec64974322b41c9939c41" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b50bdcda066df8ed373847c60bc2f546" category="list-text">選擇NFS協議，將Oracle主機IP位址新增至允許的客戶端，並刪除允許所有IP位址0.0.0.0/0的預設策略。然後點選*下一步：標籤&gt;*。</block>
  <block id="f8bc211f91c2b350b268959a57418393" category="inline-image-macro">在磁碟區建立畫面上輸入協定。</block>
  <block id="2e72ba5a8e99432be226f3c8010a796c" category="paragraph"><block ref="2e72ba5a8e99432be226f3c8010a796c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fffcdc9cd5233d4718046c8f6d19c80b" category="list-text">如果需要，請新增磁碟區標籤。然後點選「*審核 + 建立&gt;*」。</block>
  <block id="05864b350d713935d13966f3c8fcbcd7" category="inline-image-macro">在磁碟區建立畫面上輸入標籤。</block>
  <block id="c24d8e027538479bd8224eaad667feae" category="paragraph"><block ref="c24d8e027538479bd8224eaad667feae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e574c0c875926f1fe654026995f3543" category="list-text">如果驗證通過，請按一下「建立」來建立磁碟區。</block>
  <block id="4a585922412f050ac4a7fbcc34a2655b" category="inline-image-macro">檢視並建立磁碟區建立畫面的階段。</block>
  <block id="1b0924565a7b6db6820b4bf3dec72aaa" category="paragraph"><block ref="1b0924565a7b6db6820b4bf3dec72aaa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d2dbc217706d8bb1248bc209e0ab9da" category="section-title">使用 ANF 在 Azure VM 上安裝和設定 Oracle</block>
  <block id="7beaf3d9487c79b7245a1d9ae42d46aa" category="paragraph">NetApp解決方案團隊創建了許多基於 Ansible 的自動化工具包，以協助您在 Azure 中順利部署 Oracle。請依照下列步驟在 Azure VM 上部署 Oracle。</block>
  <block id="0c782f45b1de4e6d016eafeeb60d286f" category="section-title">設定 Ansible 控制器</block>
  <block id="41532ec0bce440e4eaf71b75b5f03284" category="paragraph">如果您尚未設定 Ansible 控制器，請參閱<block ref="230dfc589866e347afe497262b15904b" category="inline-link-macro-rx"></block>，其中有關於如何設定 Ansible 控制器的詳細說明。</block>
  <block id="ce9ef6052d2c6ac4b97c01049ee4ec2b" category="section-title">取得 Oracle 部署自動化工具包</block>
  <block id="52eae91ee8ea917bc73df6d9f1792469" category="paragraph">使用您用於登入 Ansible 控制器的使用者 ID，在您的主目錄中複製 Oracle 部署工具包的副本。</block>
  <block id="19cd6e3dfb797a7325548b346dc358f1" category="section-title">使用您的設定執行工具包</block>
  <block id="98f609c421f8172f6df79c8e630eb3e0" category="paragraph">查看<block ref="6ac1394093c86e2516997ffd90247387" category="inline-link-macro-rx"></block>使用 CLI 執行劇本。當您從 Azure 控制台而不是 CLI 建立資料庫磁碟區時，可以忽略全域 VARS 檔案中變數配置的ONTAP部分。</block>
  <block id="24e16cc700e2ced028e529370af380e1" category="admonition">此工具包預設部署帶有 RU 19.8 的 Oracle 19c。只需對預設配置進行微小的更改，它就可以輕鬆適應任何其他補丁等級。預設種子資料庫活動日誌檔案也部署到資料卷中。如果您需要日誌卷上的活動日誌文件，則應在初始部署後重新定位它。如果需要，請聯絡NetApp解決方案團隊尋求協助。</block>
  <block id="dd52a71d2066e527d28efdbd46784e07" category="section-title">為 Oracle 的應用程式一致性快照設定 AzAcSnap 備份工具</block>
  <block id="211e60df4f320c617afaa9a96f62758f" category="paragraph">Azure 應用程式一致性快照工具 (AzAcSnap) 是一個命令列工具，它透過在拍攝儲存快照之前處理將第三方資料庫置於應用程式一致性狀態所需的所有業務流程來實現對第三方資料庫的資料保護。然後它將這些資料庫還原到可操作狀態。 NetApp建議在資料庫伺服器主機上安裝該工具。請參閱下面的安裝和設定程序。</block>
  <block id="40390144ce134a2e38bfef9f590f867b" category="section-title">安裝 AzAcSnap 工具</block>
  <block id="c2d834909e264a2f3bf3d3facd27740b" category="inline-link-macro">AzArcSnap 安裝程式</block>
  <block id="aed9be57adbc2906c27b7f325e1322aa" category="list-text">取得最新版本的<block ref="696590d44d21e9b71649cae0895a0bca" category="inline-link-macro-rx"></block>。</block>
  <block id="243004130aa732bde904924170fa2e5c" category="list-text">將下載的自安裝程式複製到目標系統。</block>
  <block id="1aa45c54511185e4e2043ee91e8969bc" category="list-text">以 root 使用者身分使用預設安裝選項執行自我安裝程式。如果有必要，請使用<block ref="48c01707d676030dd223de543c6beb09" prefix=" " category="inline-code"></block>命令。</block>
  <block id="483944250a0e1f955ad6fec7c6578bde" category="section-title">配置 Oracle 連接</block>
  <block id="b6f7df8a3ada5b45cee3400740b83c9a" category="paragraph">快照工具與 Oracle 資料庫通信，需要具有適當權限的資料庫使用者來啟用或停用備份模式。</block>
  <block id="6cd11918e51f60b6ce021e9d56c9e74a" category="section-title">1.設定 AzAcSnap 資料庫用戶</block>
  <block id="84fe6666ea577b7ede5c61912d97705e" category="paragraph">以下範例顯示了 Oracle 資料庫使用者的設定以及如何使用 sqlplus 與 Oracle 資料庫進行通訊。範例命令在 Oracle 資料庫中設定使用者（AZACSNAP）並根據需要變更 IP 位址、使用者名稱和密碼。</block>
  <block id="342df2b2fb63c81cdd53e5e7bc5d00b9" category="list-text">從 Oracle 資料庫安裝啟動 sqlplus 登入資料庫。</block>
  <block id="ab0840eee4ba613870ae404c907c1948" category="list-text">創建用戶。</block>
  <block id="e90b9dc19df07f784e3fc408169077df" category="list-text">授予使用者權限。此範例設定 AZACSNAP 使用者的權限，以便將資料庫置於備份模式。</block>
  <block id="f508d634fc1aa5df7fed84e6b58afce9" category="list-text">將預設使用者的密碼有效期限變更為無限制。</block>
  <block id="bc5fff092e99ce3d1966b94061cb5953" category="list-text">驗證資料庫的 azacsnap 連線。</block>
  <block id="8e0d0fb1cb3a50066ecd397700dfd22e" category="section-title">2.配置 Linux 用戶 azacsnap 使用 Oracle 錢包進行資料庫訪問</block>
  <block id="7140a904f4b795616fdc3c3efbdcd066" category="paragraph">AzAcSnap 預設安裝會建立一個 azacsnap OS 使用者。必須配置其 Bash shell 環境才能存取 Oracle 資料庫，且密碼必須儲存在 Oracle 錢包中。</block>
  <block id="c54cf7bb99b0e669ce6dc05ec8272470" category="list-text">以 root 使用者身分執行<block ref="760381f8107a856bc583301b7b272917" prefix=" " category="inline-code"></block>命令來識別主機上的 ORACLE_HOME 和 ORACLE_SID 變數。</block>
  <block id="2a4941dc3f20c8f34a09b066691e66a5" category="list-text">將 ORACLE_HOME、ORACLE_SID、TNS_ADMIN 和 PATH 變數新增至 azacsnap 使用者 bash 設定檔。根據需要更改變數。</block>
  <block id="e3c85fad3d30c470aac355430e98dc21" category="list-text">以 Linux 用戶 azacsnap 的身份建立錢包。系統會提示您輸入錢包密碼。</block>
  <block id="83617bd12022f2dd9ba94816c7e56670" category="list-text">將連接字串憑證新增至 Oracle Wallet。在下面的範例命令中，AZACSNAP 是 AzAcSnap 要使用的連接字串，azacsnap 是 Oracle 資料庫用戶，AzPasswd1 是 Oracle 用戶的資料庫密碼。系統將再次提示您輸入錢包密碼。</block>
  <block id="02f08719de6240015b4e67725107792a" category="list-text">創建<block ref="9de875b13677cf9b036a438bf9aedf5c" prefix=" " category="inline-code"></block>文件。在下面的範例指令中，HOST 應設定為 Oracle 資料庫的 IP 位址，Server SID 應設定為 Oracle 資料庫 SID。</block>
  <block id="0eec77cc5ed96c42afb08c83ea3f1e3b" category="list-text">創建<block ref="0501c2d94325e267bf15055591fb8157" prefix=" " category="inline-code"></block>文件。</block>
  <block id="cafefcc0e796f3e73bc39de23dfc6b68" category="list-text">使用錢包測試 Oracle 存取。</block>
  <block id="5fe36f3a6d3cc4a34d1f045b7cd14ac3" category="paragraph">該命令的預期輸出：</block>
  <block id="54eb020b97d7e8a9f56d67e93754e270" category="section-title">配置 ANF 連接</block>
  <block id="8c9356aaf30e863db064ba22b7d4b204" category="paragraph">本節介紹如何啟用與Azure NetApp Files （使用 VM）的通訊。</block>
  <block id="d78964ac0334c0f69ef24aada9864028" category="list-text">在 Azure Cloud Shell 工作階段中，請確保您已登入要預設與服務主體關聯的訂閱。</block>
  <block id="8611ff0fcccf2f05ff0dbde909379c14" category="list-text">如果訂閱不正確，請使用以下命令：</block>
  <block id="2d66e076b40e24c73ffa7a1704d985db" category="list-text">使用 Azure CLI 建立服務主體，如下例所示：</block>
  <block id="707cc085819c641d15b9ea2b3b13cb53" category="paragraph">預期輸出：</block>
  <block id="c51a1e8c830ed4f63c489347dbcce1a7" category="list-text">將輸出內容剪下並貼上到名為<block ref="b50999884a39c5efe8da46cd87acfeb2" prefix=" " category="inline-code"></block>儲存在 Linux 使用者 azacsnap 使用者 bin 目錄中，並使用適當的系統權限保護該檔案。</block>
  <block id="211f39ae9cd979a9f01bb800eca0b832" category="admonition">確保 JSON 檔案的格式與上面描述的完全一致，尤其是用雙引號 (") 括起來的 URL。</block>
  <block id="c1f6adfa882cba0dbd256d4909ac588c" category="section-title">完成 AzAcSnap 工具的設置</block>
  <block id="e0e7b63ff02eb3221940162934949dd0" category="paragraph">請依照下列步驟配置和測試快照工具。測試成功後，即可執行第一次資料庫一致性儲存快照。</block>
  <block id="fe615094ac9bb468d26149280e3769d7" category="list-text">變更為快照使用者帳戶。</block>
  <block id="4ef9af49185e683998d060aa71c30e2b" category="list-text">更改命令的位置。</block>
  <block id="412d274adbc3fc7cb51ab315d7a77f82" category="list-text">配置儲存備份詳細檔案。這創造了<block ref="8ed8c6bfea85d72bc4a36772490109c7" prefix=" " category="inline-code"></block>設定檔。</block>
  <block id="d4c18f094b4959d27f52ee2a9709a6b9" category="paragraph">具有三個 Oracle 卷的預期輸出：</block>
  <block id="72b0a1cda785576a979ca4ee2e3c8c62" category="list-text">以 azacsnap Linux 使用者身分執行 azacsnap test 指令進行 Oracle 備份。</block>
  <block id="7be23e8f29bfc799fd8fbcdc55fe0e77" category="list-text">運行您的第一個快照備份。</block>
  <block id="c61bde3125ecb64e4b84664b7b602512" category="summary">本最佳實務指南提供了在 Azure NetApp檔案儲存體和 Azure VM 上部署和遷移 Oracle 資料庫的解決方案的詳細資訊。</block>
  <block id="8a70737cbbacb33fdb8f99eff63d5441" category="doc">TR-4954：針對 ANF 的 Oracle 資料庫部署與遷移最佳實踐</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="section-title">概況</block>
  <block id="b2bd5134cf9b573edd93cbfe6ee4559d" category="paragraph">許多任務關鍵型 Oracle 企業資料庫仍託管在本地，許多企業正在尋求將這些 Oracle 資料庫遷移到公有雲。通常，這些 Oracle 資料庫以應用程式為中心，因此需要特定於使用者的配置，而許多資料庫即服務公有雲產品都缺少此功能。因此，目前的資料庫環境需要基於公有雲的 Oracle 資料庫解決方案，該解決方案由能夠滿足獨特需求的高效能、可擴展的運算和儲存服務所建構。  Azure 虛擬機器運算執行個體和Azure NetApp Files儲存服務可能是這個難題的缺失部分，您可以利用它們來建置關鍵任務 Oracle 資料庫工作負載並將其遷移到公有雲。</block>
  <block id="ca1f43ed95dcff37918897f15b054794" category="section-title">Azure 虛擬機</block>
  <block id="e3247bf98cee6a48e2210749d0b7ab2d" category="paragraph">Azure 虛擬機器是 Azure 提供的幾個隨選、可擴充運算資源之一。通常，當您需要比其他選項提供的更多控制運算環境時，您會選擇虛擬機器。  Azure 虛擬機器提供了一種快速簡便的方法來建立具有執行 Oracle 資料庫所需的特定配置的計算機，無論是用於計算密集型工作負載還是記憶體密集型工作負載。  Azure 虛擬網路中的虛擬機器可輕鬆連接到您組織的網絡，例如透過安全的 VPN 隧道。</block>
  <block id="8f53b5241aa3284f9058318dcbc2504d" category="section-title">Azure NetApp Files(ANF)</block>
  <block id="466d154dd31c873c4a2fd7113dc6b818" category="paragraph">Azure NetApp Files是一項完全託管的 Microsoft 服務，它可以比以往更快、更安全地將您的資料庫工作負載轉移到雲端。它旨在滿足在雲端中運行高效能工作負載（如 Oracle 資料庫）的核心要求，並提供反映實際 IOPS 需求的效能層、低延遲、高可用性、高耐用性、大規模可管理性以及快速高效的備份、復原和複製。這些功能之所以能夠實現，是因為Azure NetApp Files是基於在 Azure 資料中心環境中執行的實體全快閃NetApp ONTAP系統。 Azure NetApp Files完全整合到 Azure DC 和入口網站中，客戶可以使用與任何其他 Azure 物件相同的舒適圖形介面和 API 來建立和管理共用檔案。透過 Azure NetApp文件，您可以解鎖 Azure 的全部功能，而無需額外的風險、成本或時間，並信任 Azure 原生的唯一企業文件服務。</block>
  <block id="30106aaa3e986f62cbb327f935569bca" category="inline-link-macro">Microsoft Azure 上的 Oracle 資料庫</block>
  <block id="bdb41d103336edebf957f48add0f3554" category="inline-link-macro">NetApp自動化</block>
  <block id="b3013ddda19ca14bf0c11f196dff4a57" category="paragraph">本文檔詳細介紹如何使用 Azure 虛擬機器和Azure NetApp Files儲存服務部署、設定和遷移 Oracle 資料庫，以提供與本機系統類似的效能和耐用性。有關最佳實踐指導，請參閱 TR-4780<block ref="43d70d3cb7600babfb5820086b5480b6" category="inline-link-macro-rx"></block> 。更重要的是， NetApp還提供自動化工具包，可自動執行在 Azure 公有雲中部署、配置、資料保護、遷移和管理 Oracle 資料庫工作負載所需的大部分任務。自動化工具包可在NetApp公共 GitHub 網站下載：<block ref="1b9adaed0e4ba13a6d8f6edc7ab8f2d8" category="inline-link-macro-rx"></block> 。</block>
  <block id="466e75a50b0c71805b14d8243bd95d89" category="summary">此解決方案提供了一個有用的工具包，用於調整 Azure 雲端中 ANF 上 Oracle 部署的運算和儲存大小</block>
  <block id="785f4ba8d55db20dc724a60afc28f84a" category="doc">適用於Azure NetApp Files的Oracle 大小調整指南</block>
  <block id="20b809a3f4824b521376cfc292ddd483" category="paragraph">此解決方案提供了一個有用的工具包，用於調整 Azure 雲端中 ANF 上 Oracle 部署的運算和儲存大小。</block>
  <block id="ed5766f3cdc3adad7995cc81f0248354" category="paragraph">將現有的 Oracle 工作負載從一個平台移至另一個平台（例如從本地到公有雲），需要調整目標平台中的運算和儲存規模以滿足效能和服務等級要求。本文檔示範了一個實現該目標的簡單工具包。</block>
  <block id="878511663b5526e80590b1e795eb9060" category="paragraph">與可能隨著時間推移而成長的新資料庫應用程式不同，現有的 Oracle 工作負載已在運算和儲存需求方面建立了工作負載模式，這些模式記錄在 Oracle 工作負載儲存庫或 AWR 中。此工具包利用 HTML 解析器從 Oracle AWR 檢索相關資訊。透過針對資料庫的 SQL 腳本所取得的額外大小資訊對結果進行了補充，以便在重新定位 Oracle 資料庫時提供有意義的運算和儲存指導。</block>
  <block id="e7f0bfd3895df86bb57d400fdbd480eb" category="list-text">將資料庫從本機遷移到 Microsoft Azure 雲端時，提供 Oracle 資料庫伺服器運算的大小指導。</block>
  <block id="4c5bd28bfdb3c1a3ec92f8604e5aacaa" category="list-text">將資料庫從本機遷移到 Microsoft Azure NetApp Files時，提供 Oracle 資料庫伺服器儲存的大小指導。</block>
  <block id="d6d4c06619c0b547d4b3329d35ce5f1d" category="list-text">在本機私有資料中心或 Microsoft Azure 雲端環境中管理 Oracle 資料庫的 DBA。</block>
  <block id="0028d1ecc06926cad9bf6ed3e97d0582" category="list-text">管理支援 Oracle 資料庫的本機儲存或 Microsoft Azure NetApp Files儲存的儲存管理員。</block>
  <block id="24533dfc47add8f8960eaaf1f7ab538f" category="list-text">喜歡將 Oracle 資料庫從本機遷移到 Microsoft Azure 雲端的應用程式擁有者。</block>
  <block id="398393a6740417ed0a5020cc6382706c" category="paragraph">透過存取、下載、安裝或使用此工具包儲存庫中的內容，您同意<block ref="62d065fbd7084423125af257eab414b9" category="inline-link-macro-rx"></block>。</block>
  <block id="1d7ed3a0dc5ae98ed34a1698c0936087" category="admonition">使用此工具包儲存庫中的內容製作和/或分享任何衍生作品都有一定的限制。請確保在使用該內容之前閱讀許可條款。如果您不同意所有條款，請不要存取、下載或使用此儲存庫中的內容。</block>
  <block id="a9434144b2ecab8a1551aa3f356831a4" category="list-text">Oracle AWR 報告擷取應用程式工作負載高峰期間資料庫活動的快照。</block>
  <block id="09893c03681f0427847775f074f38963" category="list-text">以 DBA 權限存取 Oracle 資料庫並執行 SQL 腳本。</block>
  <block id="97b8f9378711f0d69311d576b1f4a080" category="inline-link-macro">Oracle ANF 規模指南</block>
  <block id="d61fd641d504e6b15572a5b645d11d7d" category="paragraph">從儲存庫中檢索工具包<block ref="9d80dd73d3a7a092e6605ac547074b0f" category="inline-link-macro-rx"></block></block>
  <block id="ef67c85019e8ac817ecbbb2983bd0153" category="section-title">如何使用工具包？</block>
  <block id="e0849abccea244e0fba40c3aa575d398" category="paragraph">該工具包由一個基於 Web 的 HTML 解析器和兩個用於收集 Oracle 資料庫資訊的 SQL 腳本組成。然後將輸出輸入到 Excel 範本中，以產生 Oracle 資料庫伺服器的運算和儲存大小指導。</block>
  <block id="f5db9a220f11d7b08f96f33f94122f33" category="inline-link-macro">HTML解析器</block>
  <block id="e82f0c37b6bd3400eddaf0d48fac4a76" category="list-text">使用<block ref="735c7742f70fe756ee1537fe41775ee0" category="inline-link-macro-rx"></block>AWR 模組從 AWR 報表中檢索目前 Oracle 資料庫的大小資訊。</block>
  <block id="c000aa7f2c0d2b7df671b9d059b39d9a" category="list-text">以 DBA 身分執行 ora_db_data_szie.sql 以從資料庫中檢索實體 Oracle 資料檔案大小。</block>
  <block id="7e56648a80a16947fe5208c82f20d2f8" category="list-text">以 DBA 身分執行 ora_db_logs_size.sql 來檢索 Oracle 存檔日誌大小以及所需的存檔日誌保留視窗（天）。</block>
  <block id="d4cc69ca96964b53d4dc4a8c8e70fa45" category="list-text">將上面獲得的尺寸資訊輸入到 excel 範本檔案 oracle_db_sizing_template_anf.xlsx 中，以建立有關 Oracle DB 伺服器的運算和儲存的尺寸指南。</block>
  <block id="c32f0548f32df1c5796715d6838accdc" category="section-title">工具包使用演示</block>
  <block id="d5f96f88e7de03605e304965b97f0def" category="list-text">開啟HTML解析器AWR模組。</block>
  <block id="da50365aa63534d4c2bd7ce86099231d" category="inline-image-macro">此圖提供了用於 Oracle 大小調整的 HTML 解析器螢幕</block>
  <block id="3f5b57723c46294beb00e1186aa5ad24" category="paragraph"><block ref="3f5b57723c46294beb00e1186aa5ad24" category="inline-image-macro-rx" type="image"></block></block>
  <block id="331c55723aab195e48092626da4e6907" category="list-text">檢查輸出格式為.csv並點選<block ref="c7de86f69db264c3950d8ae46ed2e33f" prefix=" " category="inline-code"></block>上傳 awr 報告。解析器傳回結果在 HTML 頁面中，其中包含表格摘要以及 output.csv 文件<block ref="801ab24683a4a8c433c6eb40c48bcd9d" prefix=" " category="inline-code"></block>資料夾。</block>
  <block id="b1669933b15a72a1d097ccb948f1a63e" category="paragraph"><block ref="b1669933b15a72a1d097ccb948f1a63e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e58053ef001d0bd68ef74dcf703dbfc2" category="list-text">開啟 excel 範本檔案並將 csv 內容複製並貼上到 A 列和儲存格 1 中以產生 DB 伺服器大小資訊。</block>
  <block id="a404780f0611d0e3011cd46a7dfab9ca" category="inline-image-macro">此圖提供了 Oracle 規模的 Excel 範本螢幕截圖</block>
  <block id="b7e4998429b3b5a8354876cd11e093d1" category="paragraph"><block ref="b7e4998429b3b5a8354876cd11e093d1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c72112d51e1f40e5814355a84f4fdae" category="list-text">反白顯示 A 列和欄位 1 和 2，點擊<block ref="f6068daa29dbb05a7ead1e3b5a48bbee" prefix=" " category="inline-code"></block>， 然後<block ref="0e219571c786524302c4eebb4879a15e" prefix=" " category="inline-code"></block>開啟文字精靈。選擇<block ref="f6a6c0fefcadb1df90205a0b9a7fb8b7" prefix=" " category="inline-code"></block>， 然後<block ref="10ac3d04253ef7e1ddc73e6091c0cd55" prefix=" " category="inline-code"></block>到下一個畫面。</block>
  <block id="6b8b67eff4ae7619f4c9640e5d46b619" category="paragraph"><block ref="6b8b67eff4ae7619f4c9640e5d46b619" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d01033901ef75a46bb97c8b3a8178d1" category="list-text">查看<block ref="6311ae17c1ee52b36e68aaf4ad066387" prefix=" " category="inline-code"></block>，然後輸入“=”作為<block ref="958b66a95f3598861511c6b9239889ce" prefix=" " category="inline-code"></block>。點選<block ref="10ac3d04253ef7e1ddc73e6091c0cd55" prefix=" " category="inline-code"></block>到下一個畫面。</block>
  <block id="4392e02cbca6fe375bf473ca46e889e9" category="paragraph"><block ref="4392e02cbca6fe375bf473ca46e889e9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="709647fd98d95c62185491a6e07ba5b5" category="list-text">點選<block ref="a20ddccbb6f808ec42cd66323e6c6061" prefix=" " category="inline-code"></block>完成將字串轉換為可讀的列格式。請注意，VM 和 ANF 大小欄位已填入從 Oracle AWR 報表中檢索的資料。</block>
  <block id="cf05c5c12e1ac1f3947032075df24058" category="paragraph"><block ref="82d32fbdd353c5f6df12ee246dab167e" category="inline-image-macro-rx" type="image"></block> <block ref="ffaae23b1e866c7cdc3ad6a2059cb9d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="16a45fbf8378bcc158d03e720d4b5bba" category="list-text">在 sqlplus 中以 DBA 身分執行腳本 ora_db_data_size.sql、ora_db_logs_size.sql，以擷取現有 Oracle 資料庫資料大小和存檔日誌大小以及保留視窗的天數。</block>
  <block id="5accfe4816c4c580d7ae070e09f468e5" category="admonition">使用上述腳本檢索的資料庫大小資訊是所有實體資料庫資料檔案或日誌檔案的實際大小的總和。它沒有考慮每個資料檔案內部可能可用的可用空間。</block>
  <block id="bb5201d282886d5d02f43e46996631ad" category="list-text">將結果輸入excel文件，完成尺寸指導輸出。</block>
  <block id="ebee364afb3abd101bd0eeb4f1016806" category="paragraph"><block ref="ebee364afb3abd101bd0eeb4f1016806" category="inline-image-macro-rx" type="image"></block></block>
  <block id="08917e640578a9459480e8e1aa85c104" category="list-text">ANF 使用三層服務等級（標準、進階、超級）來管理資料庫磁碟區吞吐量限制。參考<block ref="d946b67215f0c4092575c0d87ca9aa5f" category="inline-link-macro-rx"></block>了解詳情。根據大小指導輸出，選擇提供滿足資料庫要求的吞吐量的 ANF 服務等級。</block>
  <block id="a9d2cd7c11b6889ebe8c5d20ef8d1190" category="summary">該解決方案提供了部署到 Google Compute Engine VM 的 Oracle VLDB 的概述和詳細信息，該 VM 透過在Google Cloud NetApp Volumes儲存池上掛載 NFS 來快速恢復，以暫存透過 RMAN 不斷增量合併的備用資料庫副本。</block>
  <block id="3df18118dead4d7d954b6bd79e563b6b" category="doc">TR-5007：透過Google Cloud NetApp Volumes上的伺服器內增量合併優化 Oracle VLDB 備份與還原</block>
  <block id="4dea7f6b93d69a3281f7d12f28f2c836" category="paragraph">使用 Oracle 復原管理器 (RMAN) 備份工具還原 Oracle 中的超大型資料庫 (VLDB) 可能是一項極具挑戰性的任務。發生故障時從備份媒體還原資料庫的過程可能非常耗時，從而延遲資料庫復原並可能嚴重影響您的服務等級協定 (SLA)。由於成本考慮，RMAN 備份通常串流傳輸到物件存儲，因此對於部署在雲端的 Oracle VLDB 來說，情況變得更加糟糕。因此，如果 SLA 必不可少，則恢復和恢復 VLDB 是不可行的。從 10g 版本開始，Oracle 引入了 RMAN 功能，允許使用者在資料庫伺服器主機上的附加磁碟儲存上建立 Oracle 資料庫資料檔案的分階段映像副本。這些影像副本可以使用 RMAN 依照使用者定義的間隔進行增量更新。如果發生故障，資料庫管理員 (DBA) 可以迅速將 Oracle 資料庫從故障媒體切換到映像副本，從而無需進行完整的資料庫媒體還原。儘管所需的資料庫儲存量增加了一倍，但其結果是 SLA 得到了極大改善。</block>
  <block id="2fa5d7dc487549a7833401477b2c605b" category="paragraph">如果您熱衷於 VLDB 的 SLA 並考慮將 Oracle 資料庫遷移到 Google Cloud Platform (GCP) 等公有雲，則可以使用Google Cloud NetApp Volumes (GCNV) 等資源設定類似的資料庫保護結構來暫存備用資料庫映像副本。 GCNV 是 Google 提供的完全託管的高效能文件儲存服務，它使在 Google Cloud 中遷移和運行要求嚴格的企業應用程式（例如 Oracle 資料庫）變得更容易、更安全、更有經濟。其多樣化的服務等級允許靈活地控制儲存成本，同時實現接近零的 RPO 和可管理的 RTO。在本文檔中，我們示範如何從 GCNV 儲存池配置和匯出 NFS 檔案系統，並將其掛載到 Oracle 資料庫伺服器上，以便在主儲存發生故障時暫存備用資料庫副本以便快速復原。</block>
  <block id="e41fb07802a91f8849d8c2ce357c8d4f" category="list-text">Oracle 資料庫資料檔案映像透過 RMAN 複製備份到Google Cloud NetApp Volumes儲存池上的伺服器內 NFS 檔案系統。</block>
  <block id="217aa677edcff2aa1e3bba382f52fef3" category="list-text">當同一台或備用 Google Compute Engine VM 發生故障時，可以快速復原 Oracle VLDB。</block>
  <block id="003d272efe0cb24d229088b8e7fb7859" category="list-text">在幾分鐘內從暫存資料庫映像副本複製主機上的 Oracle 資料庫副本以供其他用例使用。</block>
  <block id="511cf9fac168dd7d5b1261e335c2e0f8" category="list-text">在 Google Cloud Platform 中設定和管理 Oracle VLDB 的 DBA。</block>
  <block id="45cc5f4bdb8bb6eeab5a5b1da8d2293d" category="list-text">在 Google Cloud Platform 中測試 Oracle 工作負載的資料庫解決方案架構師。</block>
  <block id="ab635707025ce48f98ee4d6a3c166a17" category="list-text">管理部署到 GCNV 儲存池的 Oracle 資料庫的儲存管理員。</block>
  <block id="4d47d0eed355af4efa793ed30818be40" category="list-text">希望在 Google Cloud Platform 中建立 Oracle 資料庫的應用程式擁有者。</block>
  <block id="e6849ae533ce1e181073f2cfe965c78c" category="paragraph">此解決方案的測試和驗證是在Google Cloud NetApp Volumes儲存池和 Google Compute Engine VM 中執行的，這些儲存池和虛擬機器可能與最終部署環境不符。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="c11a98355b333f2b180fd5f54595dc7c" category="inline-image-macro">此圖提供了使用 GCNV 在 Google 雲端實現 Oracle VLDB 增量合併的詳細圖片。</block>
  <block id="982aa9d8c6b2535aa9b84732aec0dab1" category="paragraph"><block ref="982aa9d8c6b2535aa9b84732aec0dab1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f21b6a2382d256aa586680b59e096f52" category="cell">Google Cloud NetApp Volumes儲存池</block>
  <block id="4eefdf824befa119e7123cbc3506ff77" category="cell">Google 目前提供的服務</block>
  <block id="7c2735930a64d6d644940444317ccba5" category="cell">進階服務 2 TiB 儲存池，標準服務 2 TiB 儲存池</block>
  <block id="dc311520f56bf65b0f05633ee3a59438" category="cell">用於資料庫伺服器的 Google Compute Engine VM</block>
  <block id="994403285c25c7868b9c5d12040acaa0" category="cell">N1（4 個 vCPU，15 GiB 記憶體）</block>
  <block id="b87a8dedca7795dfd0a96cf1a447f06f" category="cell">2 個虛擬機，一個作為主資料庫伺服器，另一個作為備用或克隆資料庫伺服器</block>
  <block id="f6a00acc4e994469d58fd3e88369ec5f" category="cell">Red Hat Enterprise Linux 8.10（Ootpa）- x86/64</block>
  <block id="5def2287fc9938fd6e8233a1aab13eb5" category="cell">RHEL 市場圖像，PAYG</block>
  <block id="ce636607c5b432e8113a4c010a03698b" category="list-text">*GCNV 儲存池服務等級。 * GCNV儲存池提供四種服務等級：Standard、Premium、Extreme和Flex。預設情況下，自動 QoS 適用於儲存池內建立的捲，它會根據磁碟區的大小和服務等級限製卷的吞吐量。唯一的例外是，從 Flex 儲存池指派的磁碟區共用儲存池可用的吞吐量。</block>
  <block id="b6e3073aa6f03b7abbef4a13fe7bad06" category="list-text">*RMAN 增量合併的 Oracle VLDB 伺服器內備份儲存限制。 *在我們的測試和驗證中，用於 Oracle 增量備份和合併的 NFS 磁碟區是從具有標準服務等級的單一 GCNV 儲存池中分配的，該儲存池的容量限制為 200 TiB。對於超過該閾值的部署，可以並行實作多個 GCNV 儲存池和多個 NFS 掛載點，以提供更高的容量。</block>
  <block id="2dc86d5e55889328f95168005ae971e6" category="list-text">*使用 RMAN 增量合併實作 Oracle 可恢復性。 * RMAN 伺服器內增量備份和合併通常會根據您的 RTO 和 RPO 目標以使用者定義的頻率執行。如果主資料庫檔案儲存和/或歸檔日誌完全遺失，則可能會發生資料遺失。 Oracle 資料庫可以從伺服器內的資料庫備份映像副本還原到最新的可用增量備份。為了最大限度地減少資料遺失，需要在 GCNV NFS 備份掛載點上設定 Oracle 閃回復原區，並將存檔日誌與資料庫映像副本一起備份到同一個 NFS 掛載點，以便在發生故障時將資料庫前滾到最後的存檔日誌。因此，可以實現接近零的 RPO。</block>
  <block id="fa8962ac2a0644c0b737f5d9913ed2aa" category="list-text">*在 GCNV 儲存池上從 NFS 映像備份執行 Oracle VLDB。 *目前，不支援將資料庫磁碟區服務等級從標準重新分配為高級或極端。但是，支援將服務等級從高級重新分配到極致。為了在發生故障後長時間在映像副本上執行資料庫，建議從進階儲存池中指派磁碟區以用於資料庫映像副本備份。</block>
  <block id="a65a4d1b202aad0e41c33159971db2da" category="list-text">*Google Compute Engine 虛擬機器。 *在測試驗證中，我們使用N1類型的GCE VM實例作為Oracle資料庫伺服器。其他類型的 GCE VM 可能更優化，更適合資料庫工作負載。根據實際工作負載要求，適當調整虛擬機器的 vCPU 數量和 RAM 容量。</block>
  <block id="58c31c175760ef2afef9370059c87279" category="list-text">*dNFS 配置。 * dNFS 內建於 Oracle 核心中，並且已知當 Oracle 部署到 NFS 儲存時可顯著提高 Oracle 資料庫效能。 dNFS 打包到 Oracle 二進位檔案中，但預設未開啟。對於 NFS 上的任何 Oracle 資料庫部署，都應該啟用它。對於 VLDB 的多個 GCNV 儲存池部署，應正確配置到不同 GCNV 儲存池的 dNFS 多路徑。</block>
  <block id="d5042fcbf75a335e4bbd64458969c169" category="paragraph">此解決方案假定 Oracle VLDB 已部署在 VPC 內的 Google Cloud 環境中。 Oracle VLDB 可以在 GCNV 儲存或 Google Cloud 生態系統內的任何其他儲存選項上運作。以下部分提供了設定 Oracle VLDB 映像備份並透過 RMAN 增量合併到從 GCNV 儲存池掛載的 NFS 檔案系統的逐步部署程序。  Oracle VLDB 的主儲存也託管在不同的 GCNV 儲存池中。</block>
  <block id="4584e211ab63f558a256410aadccfe21" category="list-text">已設定 GCP 帳戶，並在 Google Cloud 帳戶中的專案內建立了必要的 VPC 和網路配置。</block>
  <block id="694bb5d3641d16eb91812f8515d06f39" category="inline-link-macro">建立儲存池</block>
  <block id="9629c50053f6440c4d3f3de413fa5c5d" category="list-text">在 Google Cloud 入口網站控制台中，依照文件操作<block ref="ccf54767debcb21f2c036879522a1373" category="inline-link-macro-rx"></block>建立一個具有標準服務的GCNV儲存池，如下所示。</block>
  <block id="39f75c435beb6f2c1269a252d1eeb433" category="inline-image-macro">此圖展示了 Google 雲端入口網站控制台的 GCNV 儲存池螢幕</block>
  <block id="fa882d48839ce7c395cb6672faf3203c" category="paragraph"><block ref="fa882d48839ce7c395cb6672faf3203c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dc88dce8ec264777b2f90ec0af744f43" category="inline-link-macro">創建卷</block>
  <block id="089b4c13d09085d441e341f9e9a07c9f" category="list-text">在 Google Cloud 入口網站控制台中，依照文件操作<block ref="4db6c28dc7628e964ce59182faf325bf" category="inline-link-macro-rx"></block>為伺服器內 Oracle VLDB 映像備份建立磁碟區。在此解決方案演示中，Oracle VLDB 主儲存也託管在 GCNV 上，如下所示。</block>
  <block id="8c35935b792dbfb0c45b0ba043179020" category="inline-image-macro">此圖展示了 Google 雲端入口網站控制台的 GCNV 儲存卷螢幕</block>
  <block id="f3cba55811f1586d3cbcd30eb0d88882" category="paragraph"><block ref="f3cba55811f1586d3cbcd30eb0d88882" category="inline-image-macro-rx" type="image"></block></block>
  <block id="63d963bb68e25b14a31a9131be37d0f6" category="section-title">將 NFS 磁碟區從 GCNV 掛載到主 Oracle VLDB 伺服器</block>
  <block id="65deb2cd638fe3e222246b20b5ef3fdb" category="paragraph">為了獲得更好的效能，為 Oracle VLDB 伺服器內備份配置的 GCNV 磁碟區理想情況下應位於與主資料庫伺服器和主儲存相同的 Google Cloud 區域。</block>
  <block id="05629bf787dc88b6a67261df4424ecdc" category="list-text">從 Google Cloud 控制台擷取 GCNV 磁碟區 NFS 匯出路徑。</block>
  <block id="e78f41de213df01d36f1200c184f68f0" category="paragraph"><block ref="e78f41de213df01d36f1200c184f68f0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="509b916009ae5598cca4730826e296de" category="list-text">登入主 Oracle VLDB 伺服器。以 root 身分掛載從 GCNV 儲存導出的 NFS 磁碟區。根據需要變更為您的 NFS 伺服器 IP 位址和檔案路徑。</block>
  <block id="4f9459ab35b0d146cb31194babf2fbc1" category="list-text">將掛載點所有權更改為 oracle:oisntall，或根據需要更改為您的 oracle 使用者名稱和主要群組。</block>
  <block id="18ff92cceaf8a206e0bd24262ca37891" category="list-text">將 NFS 掛載新增至 /etc/fstab。</block>
  <block id="0270b4b10541e40381248cc22e46cff0" category="section-title">設定 Oracle RMAN 增量合併到 GCNV 上的映像副本，以進行伺服器內 VLDB 備份</block>
  <block id="29942911cbc26b4e3d4d25c44d4633eb" category="paragraph">RMAN 增量合併在每個增量備份/合併間隔持續更新暫存資料庫資料檔案映像副本。資料庫備份的映像副本將與您執行增量備份/合併的頻率一樣最新。因此，在決定 RMAN 增量備份和合併的頻率時，請考慮資料庫效能、RTO 和 RPO 目標。</block>
  <block id="38f21ad9fd660bb6f7bfaa10848ca926" category="list-text">為了驗證此解決方案，主資料庫設定為具有網格基礎架構重新啟動配置的獨立伺服器，如下所示。主儲存託管在提供優質服務的 GCNV 儲存池上。再次強調，這不是必需的，主儲存可以是 Google 雲端中的任何其他儲存選項。</block>
  <block id="149c37c34bf64c04f425d2e582aee8e7" category="list-text">在掛載點 /nfsgcnv 下建立一個 oracopy 目錄來儲存 oracle 資料檔案映像副本，以及一個 archlog 目錄用於 Oracle 閃回復原區。</block>
  <block id="5dc0b9ea1d15566116bce3ddf354b931" category="list-text">透過 sqlplus 登入 Oracle 資料庫，啟用區塊變更追蹤以加快增量備份速度，如果 Oracle 快閃記憶體復原區目前位於主儲存體上，則將其變更為 GCNV NFS 掛載。這允許將 RMAN 預設控製檔/spfile 自動備份和存檔日誌備份到 GCNV NFS 掛載，以便將資料庫還原到最後一個可用的存檔日誌。</block>
  <block id="d2042742856dda13e5e180b25f282a3e" category="list-text">列出備份後的資料庫映像副本，觀察到在 GCNV NFS 掛載點中已建立資料庫映像副本。</block>
  <block id="9dd2693d04c45817b40d8020cd923c73" category="list-text">依照所需的時間間隔，從 crontab 中的簡單 UNIX shell 腳本執行 RMAN 備份腳本。</block>
  <block id="1a9c5eb6e12ed6f71cff1f8c31f50b15" category="paragraph">這完成了從 GCNV 儲存在伺服器內 NFS 掛載上對 Oracle VLDB 備用映像副本備份和合併的設定。</block>
  <block id="e2402f914162d51a116e757f8412b5ce" category="section-title">使用備份映像副本快速還原 Oracle VLDB</block>
  <block id="a55c5b79e21221c0ad4ffa7c4c337f7c" category="section-title">完全恢復遺失或損壞的 Oracle 資料文件</block>
  <block id="bbe965d3a3fa8390637051d65ad58304" category="paragraph">如果因主儲存問題（例如資料遺失或損壞）而發生故障，資料庫可以快速切換到 GCNV NFS 掛載上的映像副本，並還原到目前狀態，而無需資料庫還原。消除媒體復原可大幅加快 VLDB 的資料庫復原速度。此用例假設 Oracle VLDB DB 伺服器完好無損，且資料庫控製文件、存檔日誌和目前日誌均可供復原。</block>
  <block id="fc28edcb3ff08bd19407349a833c74ab" category="list-text">以 oracle 使用者身分登入主 VLDB 伺服器主機並在切換之前建立測試表。</block>
  <block id="3de1e8fb0b4f48ceb3b91426c1db1605" category="list-text">在測試表中插入一行。該行是在最近的增量備份和合併之後插入的，其資料不在備份集中。後續演示將顯示資料庫完全恢復後，測試行也被恢復。</block>
  <block id="f0df32e03ca40e95e9ec6f50b54fa7d8" category="list-text">透過關閉資料庫來模擬故障。</block>
  <block id="81fe64311fbf36dab3bfa4debc9226d2" category="list-text">以 oracle 使用者身份，透過 RMAN 連接到 Oracle 資料庫切換要複製的資料庫。</block>
  <block id="1a80f9f85d51c0eaa1e7f56c32ab7fdd" category="list-text">復原後從 sqlplus 檢查資料庫結構，觀察到除控制、臨時和目前日誌檔案之外的所有 VLDB 資料檔案現在都已切換到 GCNV NFS 檔案系統上的副本。</block>
  <block id="4170eaea10d4eb66d78f56d93c9f7189" category="list-text">從 SQL plus 中，驗證上次增量備份之後和切換到映像備份副本之前我們已惰性化的測試行是否已還原。</block>
  <block id="b3c20344742571292e7fbc9dae69c6f2" category="section-title">將 Oracle VLDB 從備份副本還原到主存儲</block>
  <block id="951f9098a1bd5e0cb3a5c4d265de5b28" category="paragraph">主存儲的存儲故障修復後，資料庫可以輕鬆恢復到主存儲，並且停機時間最短。以下是逐步操作步驟。</block>
  <block id="2f3f0c5d325ccc40351c7608487e1ff1" category="list-text">從 RMAN 檢查 DB 模式目前位於 GCNV 備份儲存上。</block>
  <block id="f3c7d225a25d3e0d3358226dab079c17" category="list-text">一旦主資料庫切換到映像副本，主資料庫現在就是 RMAN 記錄中的副本。</block>
  <block id="c57e0a236ef4cc67ce104cc96b7ab18e" category="list-text">如果存在，請清除主儲存上現已過時的資料文件，以釋放空間和/或清除記錄。</block>
  <block id="24ec1af504c3fd594fe5b48c8f447603" category="list-text">修改 rman 備份和合併腳本以指向主存儲，在我們的測試案例中 - RMAN 通道定義中的 ASM 磁碟組 +DATA。執行修改後的備份腳本以在主儲存體上建立新的映像副本。</block>
  <block id="b1fdb89a4902d5b114543243a80cd23f" category="list-text">驗證現在在主儲存體上是否建立了新的 VLDB 映像副本。</block>
  <block id="53f34ebce82695dc1498d6eb421b67e5" category="list-text">在測試表中插入新的測試行，並驗證還原到主儲存上的影像副本是否可以恢復所有交易。</block>
  <block id="adf4c6ec1e9cbc93c79f4cca7f25a856" category="list-text">從 RMAN 關閉資料庫以切換回主儲存體上的備份映像副本。</block>
  <block id="704923b5531f2d38ee358e8b85c89915" category="list-text">驗證資料庫現在是否已返回主儲存。</block>
  <block id="a1c5c3c4079a86e3567cf5162d7609f6" category="list-text">從 sqlplus 驗證測試表中所有交易均已復原。</block>
  <block id="7ab2cb4b14d02bbea99aedfdd93fcb0c" category="list-text">最後，刪除 GCNV 備份儲存體上過時的 DB 映像副本，並在 GCNV 備份儲存體上建立新的備份映像以完成循環。</block>
  <block id="3a03bef7a5f9afdda5e2bf8be11f8d91" category="section-title">遺失所有 Oracle 檔案的時間點恢復</block>
  <block id="f607c9390b2d7eaa214d13dc1ffd7795" category="paragraph">如果發生故障，導致主儲存和/或主資料庫伺服器主機遺失，則存檔日誌檔案中沒有的所有交易都會遺失。但是，GCNV NFS 檔案系統上提供的 Oracle 資料庫備份映像副本非常方便。您可以使用備份映像副本將主資料庫快速還原到同一個主資料庫伺服器或備用資料庫伺服器（如果有）。在本節中，我們將演示還原到主資料庫伺服器的逐步過程。恢復到新的備用資料庫伺服器的方法幾乎相同；但是，必須在安裝和配置相同的 Oracle 軟體堆疊的備用資料庫伺服器上安裝資料庫備份映像副本。</block>
  <block id="7cd2e8d2b04e02c373aaf508697f7682" category="list-text">在我們先前建立的測試表中插入一行，以進行 Oracle VLDB 時間點復原驗證。</block>
  <block id="e87b088552e84be458ac617a3ee72000" category="list-text">歸檔目前日誌文件，以便將交易推送到歸檔日誌檔案。</block>
  <block id="19eedf1b8ce6986e31cab0197162ffb5" category="list-text">如果在備用資料庫伺服器上執行恢復，請確保它與主資料庫伺服器主機具有相同的作業系統、相同的版本，並且作業系統核心已修補。此外，已在僅使用軟體選項的備用資料庫伺服器上安裝和設定了相同版本和修補程式的 Oracle。</block>
  <block id="808f426c59edd80c09bbda921a0085cb" category="list-text">另外，在備用資料庫伺服器上配置與主資料庫伺服器類似的 oracle 環境，例如 oratab 和 oracle 使用者 .bash_profile 等。將這些檔案備份到 GCNV NFS 掛載點是一個很好的做法。</block>
  <block id="efc019b59b6d6b9d0343e8d170eb9bb2" category="list-text">然後將 GCNV NFS 檔案系統上的 Oracle 資料庫備份映像副本安裝在備用 DB 伺服器上以進行還原。以下步驟示範了流程的細節。</block>
  <block id="d2bada662e6483ee2947ddc07417c7be" category="paragraph">以管理員使用者身分建立掛載點。</block>
  <block id="0c996df5bdd4066f20471ce79fa250a9" category="paragraph">以管理員使用者身分掛載儲存 Oracle VLDB 備份映像副本的 NFS 磁碟區。</block>
  <block id="59a58fd47c9ac89585d6c1c3aecfb047" category="list-text">驗證 GCNV NFS 掛載上可用的 Oracle 存檔日誌以進行恢復，並記下最後一個日誌檔案日誌序號。在我們的測試案例中，這個數字是 27。我們的復原點最多到日誌序號 28。</block>
  <block id="06864d719b131b436e991e3f7be1c375" category="list-text">如果從備用資料庫主機恢復，以 oracle 使用者身份，將 ORACLE_HOME 變數設定為備用資料庫伺服器上的目前 Oracle 安裝，將 ORACLE_SID 設定為主 Oracle 實例 SID。本次測試中為NTAP。</block>
  <block id="b53bb5d301f145df038caa7789e0dbe9" category="list-text">以 oracle 使用者身份，在 $ORACLE_HOME/dbs 目錄中建立一個通用 Oracle 初始化文件，並配置適當的管理目錄。最重要的是，擁有 Oracle<block ref="54205e08f5455705eb7a595f7e4f620f" prefix=" " category="inline-code"></block>指向主 Oracle VLDB 伺服器中定義的 GCNV NFS 掛載路徑。<block ref="54205e08f5455705eb7a595f7e4f620f" prefix=" " category="inline-code"></block>配置在章節中進行了演示<block ref="0270b4b10541e40381248cc22e46cff0" prefix=" " category="inline-code"></block>。將 Oracle 控制檔設定為 GCNV NFS 備份檔案系統。</block>
  <block id="ce91b89a8eed647341c691bebf7404c7" category="list-text">以 oracle 使用者身分啟動 RMAN 在主或備用 DB 伺服器主機上執行 Oracle 復原。首先，啟動 Oracle 實例<block ref="b407a7f2e317a40388660332475e7643" prefix=" " category="inline-code"></block>狀態。</block>
  <block id="770cba9e0c8b6233e05f029908ff7214" category="list-text">設定資料庫ID。可以從 GCNV NFS 掛載點上的映像副本的 Oracle 檔案名稱中檢索資料庫 ID。</block>
  <block id="74be05b5a013409e259d8d7ee1f6a650" category="list-text">將初始化檔案從 spfile 還原到 $ORACLE_HOME/dbs 資料夾，以便稍後更新參數檔案以與主 VLDB 相符。</block>
  <block id="d7a1c9f02040db2b8f64ea7d73a17d6b" category="list-text">驗證資料庫檔案現在位於 GCNV 上的備份檔案系統上。</block>
  <block id="2757591555ce9050f73606ac8dd57a3e" category="list-text">要恢復到主存儲，請按照第節中詳述的完全相同的步驟操作<block ref="d286e8a221136fce9fa30a138e88c921" prefix=" " category="inline-code"></block>。如果在備用資料庫伺服器上恢復，則需要將主儲存匯入備用資料庫伺服器。還需要將 Oracle 控製文件和當前線上日誌檔案從 GCNV nfs 掛載重新定位回主存儲，這可以在幾分鐘的停機時間內完成。</block>
  <block id="4b28dc325fead360c696104250629571" category="paragraph">這樣就完成了從 GCNV NFS 檔案系統上的備份映像副本到同一主 DB 伺服器或備用 DB 伺服器的 Oracle VLDB 資料庫時間點復原。</block>
  <block id="0a879ff481208b2cc39cbad824621329" category="section-title">從備份映像副本複製 Oracle VLDB 以供其他用例使用</block>
  <block id="18755f82163e565c1b5a547156656d87" category="paragraph">從 GCNV 上的備份映像副本複製新的 Oracle VLDB 類似於將主資料庫按時間點還原到新的 DB 伺服器。  NetApp解決方案工程團隊提供了自動化工具包，以促進整個流程的快速（幾分鐘）和輕鬆實施。</block>
  <block id="b1f1cc52fda1ee9837b78c5d34520a8e" category="paragraph">以下自動化工具包包含一個劇本，可用於透過 NFS 掛載從儲存在 GCNV 儲存上的主資料庫備份映像副本建立或刷新 Oracle VLDB 的克隆，以實現完整的克隆生命週期管理。詳細內容請參考文件：<block ref="ab1a6aadd5a9f254399b11073837e41d" category="inline-link-macro-rx"></block> 。</block>
  <block id="2e48619d7f0f1a861022ed80eed6e4b9" category="list-text">NetApp 在 Google Cloud 上提供一流的文件儲存服務</block>
  <block id="611541e99ccc797c389336c16d58f458" category="inline-link-macro"><block ref="611541e99ccc797c389336c16d58f458" category="inline-link-rx"></block></block>
  <block id="e6ef22ce453d3903dec6964c177adeb1" category="paragraph"><block ref="e6ef22ce453d3903dec6964c177adeb1" category="inline-link-macro-rx"></block></block>
  <block id="9e176713e99defae5803c109e73b8ee9" category="summary">此解決方案提供了在Google Cloud NetApp Volumes (GCNV) 上使用 Google 雲端中的 Oracle Data Guard 配置高吞吐量 Oracle 超大型資料庫 (VLDB) 的概述和詳細資訊。</block>
  <block id="65891978f449047f0d48a6d9b6f5455d" category="doc">TR-5006：在Google Cloud NetApp Volumes上使用 Data Guard 實現高吞吐量 Oracle VLDB</block>
  <block id="2ed312235681fd18dabb3ed5a3d54438" category="paragraph">高吞吐量和任務關鍵型 Oracle VLDB 對後端資料庫儲存提出了很高的要求。為了滿足服務等級協定 (SLA)，資料庫儲存必須提供所需的容量和每秒高輸入/輸出作業數 (IOPS)，同時保持亞毫秒延遲效能。在具有共享儲存資源環境的公有雲中部署此類資料庫工作負載時，這一點尤其具有挑戰性。並非所有儲存平台都是平等的。 GCNV 是 Google 提供的進階儲存服務，可支援 Google 雲端中需要持續 IOPS 和低延遲效能特性的關鍵任務 Oracle 資料庫部署。此架構可適應 OLTP 和 OLAP 工作負載，並具有支援各種效能設定檔的可設定服務層。  GCNV 提供超快的效能和亞毫秒級的延遲，在混合讀取/寫入工作負載下實現每卷高達 4.5 GiBps 的吞吐量。</block>
  <block id="7a5181ae501724c8981b2701a0733efb" category="paragraph">利用 GCNV 的快速快照備份（秒）和克隆（分鐘）功能，可以從實體備用資料庫動態克隆生產資料庫的全尺寸副本，以滿足許多其他用例（如 DEV、UAT 等）的需求。您可以擺脫 Active Data Guard 授權以及低效率且複雜的快照備用資料庫。可以節省大量成本。對於在主 Oracle 和備用 Oracle 伺服器上均配備 64 個核心 CPU 的典型 Oracle Data Guard 設置，根據最新的 Oracle 價格表，僅 Active Data Guard 授權成本節省高達 1,472,000 美元。  </block>
  <block id="e40168b16a72066fc1b03f2a7f835b9e" category="paragraph">在本文檔中，我們示範如何在具有多個 NFS 捲和 Oracle ASM 的 GCNVS 儲存體上設定具有 Data Guard 配置的 Oracle VLDB，以實現儲存負載平衡。備用資料庫磁碟區可以透過快照快速備份並複製以進行讀取/寫入存取。  NetApp解決方案工程團隊提供了自動化工具包，以透過簡化的生命週期管理來建立和刷新克隆。</block>
  <block id="5f69812f74c145354686734c0c7a7208" category="list-text">在 Google 雲端區域的 GCNV 儲存服務上的 Data Guard 設定中實作 Oracle VLDB。</block>
  <block id="0fdfcc206ca7a481aa45be7b6a45414f" category="list-text">一位 DBA 在 Google 雲端中使用 Data Guard 設定 Oracle VLDB 以實現高可用性、資料保護和災難復原。</block>
  <block id="914fecaa697a83ba7600c174057db529" category="list-text">一位對 Google 雲端中帶有 Data Guard 配置的 Oracle VLDB 感興趣的資料庫解決方案架構師。</block>
  <block id="5583b43c5b2bd0cfc165dd5b88e321df" category="list-text">管理支援 Oracle 資料庫的 GCNV 儲存的儲存管理員。</block>
  <block id="3b2bfc934cedcd552f3068ba796e288a" category="list-text">喜歡在 Google 雲端環境中使用 Data Guard 建立 Oracle VLDB 的應用程式擁有者。</block>
  <block id="a6cbbdd808b8b892517323e2f3505d19" category="paragraph">此解決方案的測試和驗證是在 Google 雲端實驗室設定中進行的，可能與實際使用者部署環境不符。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="7fb941faea81cb735c59e1830fe69196" category="inline-image-macro">此圖提供了 GCNV 上的 Google 雲端中 Oracle Data Guard 實施的詳細圖片。</block>
  <block id="90f88c874b755d612817bb7b5c0f2725" category="paragraph"><block ref="90f88c874b755d612817bb7b5c0f2725" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1215f8190533dfdf63d2224a6d88266f" category="cell">Google Cloud NetApp Volumes</block>
  <block id="a699af9b8517f65b9f7b6f0440e0f495" category="cell">Google 目前提供的服務</block>
  <block id="17a4b1be155a0821da124687c67a12ef" category="cell">兩個儲存池、進階服務等級、自動 QoS</block>
  <block id="40fe8ff9e3c4bff0c248e322fa50c913" category="cell">用於資料庫伺服器的 Google Compute Engine 虛擬機</block>
  <block id="5980c1c893a4847a950667aa69c2b19d" category="cell">四個 DB VM、主 DB 伺服器、備用 DB 伺服器、複製 DB 伺服器和 Data Guard 觀察器。</block>
  <block id="8d055ca47d2f6064ebb4f1b454aa761a" category="cell">NTAP_NY.cvs-pm-主機-1p.內部</block>
  <block id="4dea8a1b4fa06cccbb47de1dfcbdd15d" category="cell">NTAP_LA.cvs-pm-主機-1p.內部</block>
  <block id="7e7a78ceef36035bc24e49c533b4d776" category="list-text">* Google Cloud NetApp Volumes配置。 * GCNV 在 Google 雲端分配為<block ref="3052d17347aa0231748580e06110ace9" prefix=" " category="inline-code"></block>。在這些測試和驗證中，我們部署了一個 2 TiB 儲存池來託管 East4 區域的 Oracle 主資料庫，並部署了一個 4 TiB 儲存池來託管 West4 區域的備用資料庫和資料庫克隆。  GCNV儲存池有四個服務等級：Flex、Standard、Premium、Extreme。 ANF容量池的IO容量取決於容量池的大小及其服務等級。在建立容量池時，您可以設定儲存池位置、服務等級、可用區域和儲存池容量。對於 Oracle Data Guard 配置，區域可用性應該足夠，因為 Data Guard 會因區域層級故障而提供資料庫故障轉移保護。</block>
  <block id="8c3623c958bd98afd3ab6fd8fa7968e9" category="list-text">*調整資料庫磁碟區的大小。 *對於生產部署， NetApp建議根據 Oracle AWR 報告對 Oracle 資料庫吞吐量需求進行全面評估。在為 VLDB 資料庫設計 GCNV 卷佈局時，請考慮資料庫大小、吞吐量需求和服務等級。建議僅使用<block ref="8d5e7e72f12067991186cdf3cb7d5d9d" prefix=" " category="inline-code"></block>或者<block ref="ba1f6c59525d71aee4c027798d2470fd" prefix=" " category="inline-code"></block>Oracle 資料庫服務。頻寬保證為每 TiB 卷容量 64 MiB/s，最高可達 4.5 GiBps<block ref="8d5e7e72f12067991186cdf3cb7d5d9d" prefix=" " category="inline-code"></block>服務，每 TiB 卷容量 128 MiB/s，最高 4.5 GiBps<block ref="ba1f6c59525d71aee4c027798d2470fd" prefix=" " category="inline-code"></block>服務。更高的吞吐量將需要更大的體積尺寸來滿足要求。</block>
  <block id="973d97f89ddf30f80669e85bc4a984e2" category="list-text">*多個捲和負載平衡。 *由於 QoS 是根據磁碟區大小和儲存池服務等級嚴格執行的，因此單一大磁碟區可以提供與具有相同聚合磁碟區大小的多個磁碟區類似的效能等級。建議為 Oracle VLDB 實作多個磁碟區（多個 NFS 掛載點），以便更好地利用共用後端 GCNV 儲存資源池，並滿足超過 4.5 GiBps 的吞吐量要求。實作 Oracle ASM 以實現多個 NFS 磁碟區上的 IO 負載平衡。</block>
  <block id="7d946e09b4f5939557577b4479b9e59b" category="list-text">*Google Compute Engine VM 實例考慮。 *在這些測試和驗證中，我們使用了具有 4 個 vCPU 和 15 GiB 記憶體的 Compute Engine VM - N1。您需要為具有高吞吐量需求的 Oracle VLDB 選擇適當的 Compute Engine DB VM 實例。除了 vCPU 數量和 RAM 數量之外，在達到資料庫儲存吞吐量之前，VM 網路頻寬（入口和出口或 NIC 吞吐量限制）也可能成為瓶頸。</block>
  <block id="912441f8b8f0f9a5ce71e92b8c985172" category="list-text">dNFS 配置。透過使用 dNFS，在具有 GCNV 儲存的 Google Compute Engine VM 上執行的 Oracle 資料庫可以比本機 NFS 用戶端驅動更多的 I/O。確保應用 Oracle dNFS 補丁 p32931941 來解決潛在的錯誤。</block>
  <block id="4b3e9724bafa75f8657791e9184bf00b" category="paragraph">以下部分示範了在 Oracle Data Guard 設定中 GCNV 上的 Oracle VLDB 的配置，該設定位於東部地區 Google 雲端中使用 GCNV 儲存的主 Oracle 資料庫和西部地區 Google 雲端中使用 GCNV 儲存的實體備用 Oracle 資料庫之間。</block>
  <block id="c4239e5816a56456c9440b520721aab4" category="list-text">已設定 Google 雲端帳戶，並在您的 Google 帳戶內建立專案以部署設定 Oracle Data Guard 的資源。</block>
  <block id="828be31f82120f85f42eb895ed8a9b22" category="list-text">建立跨越 Data Guard 所需區域的 VPC 和子網路。對於有彈性的 DR 設置，請考慮將主資料庫和備用資料庫放置在可以容忍本地區域發生重大災難的不同地理位置。</block>
  <block id="9b6abd08dc38af4f47a14db2aeafebf0" category="inline-link-macro">在 Compute Engine 中建立 Linux 虛擬機器實例</block>
  <block id="f209110c4a2b9c92541ac8c73f4ca357" category="list-text">從 Google 雲端入口網站控制台部署四個 Google 運算引擎 Linux VM 實例，一個作為主 Oracle DB 伺服器，一個作為備用 Oracle DB 伺服器，一個複製目標 DB 伺服器和一個 Oracle Data Guard 觀察器。有關環境設定的更多詳細信息，請參閱上一節中的架構圖。按照 Google 文件操作<block ref="7c269d13ab08f0e4a16eee3ccb2f9bcd" category="inline-link-macro-rx"></block>以獲得詳細說明。</block>
  <block id="76bc4fe907c18b851012dc9e1c6fd194" category="admonition">確保在 Azure VM 根磁碟區中分配了至少 50G，以便有足夠的空間來暫存 Oracle 安裝檔案。預設情況下，Google 計算引擎虛擬機器在實例層級被鎖定。為了實現虛擬機器之間的通信，應該建立特定的防火牆規則來開啟 TCP 連接埠流量，例如典型的 Oracle 連接埠 1521。</block>
  <block id="6f3af7b095b39097875024d32ad80490" category="inline-link-macro">建立儲存池快速入門</block>
  <block id="b57a4b91a392e3b79b60619e2ff1b95d" category="list-text">從 Google 雲端入口網站控制台部署兩個 GCNV 儲存池來託管 Oracle 資料庫磁碟區。參考文檔<block ref="f943731a6c99cd3fb77312da872c5af6" category="inline-link-macro-rx"></block>以獲得逐步說明。以下是一些螢幕截圖，供快速參考。</block>
  <block id="37f58172636065668f3a8ba4f6dde3cc" category="inline-image-macro">顯示 GCNV 環境配置的螢幕截圖。</block>
  <block id="61d3340ba88008053f53d953ef0346c9" category="paragraph"><block ref="c886cfeaed26c9a9c940b977ab6c3e79" category="inline-image-macro-rx" type="image"></block> <block ref="09eadbdcd4c749f3338ba4b2e0abef60" category="inline-image-macro-rx" type="image"></block> <block ref="952e4a56346f8c18ff351e9e31949d08" category="inline-image-macro-rx" type="image"></block> <block ref="ddd79d52091f0eff41c950f5a28af67a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d8c284636a07eef88bc1b2c9dd45cae8" category="inline-link-macro">創建卷快速入門</block>
  <block id="344f48f154fd458152c704c8c50ff770" category="list-text">在儲存池中建立資料庫磁碟區。參考文檔<block ref="9ce4a27139b3fc8aa37b1a3a93853509" category="inline-link-macro-rx"></block>以獲得逐步說明。以下是一些螢幕截圖，供快速參考。</block>
  <block id="37ef2d10b88e70db2e7243e645f783fe" category="paragraph"><block ref="2fb4bd9d59ce0e0908121c8c2325785c" category="inline-image-macro-rx" type="image"></block> <block ref="aaea86b0b663cbb71703ef7b44a3916c" category="inline-image-macro-rx" type="image"></block> <block ref="0ffd04a2ded7d8c294060b1c69ec1c52" category="inline-image-macro-rx" type="image"></block> <block ref="03c89e11db54cda919be66c627093c99" category="inline-image-macro-rx" type="image"></block> <block ref="6b06bd57dfee1ff5b9024618f032636a" category="inline-image-macro-rx" type="image"></block> <block ref="ce409f437929bc8b0865262e709da410" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8bee93b982e500325112ec74f8355617" category="list-text">主 Oracle 資料庫應該已經在主 Oracle DB 伺服器中安裝並配置。另一方面，在備用 Oracle DB 伺服器或複製 Oracle DB 伺服器中，僅安裝了 Oracle 軟體，而沒有建立 Oracle 資料庫。理想情況下，Oracle 檔案目錄佈局應該與所有 Oracle DB 伺服器完全相符。有關使用 NFS/ASM 安裝和設定 Oracle 網格基礎架構和資料庫的協助，請參閱 TR-4974。雖然該解決方案在 AWS FSx/EC2 環境上得到了驗證，但它同樣可以應用於 Google GCNV/Compute Engine 環境。</block>
  <block id="34d88af36024ed534c76d180d56a88cb" category="list-text"><block ref="34d88af36024ed534c76d180d56a88cb" category="inline-link-macro-rx"></block></block>
  <block id="8553ed953d5742f994f5786780c12369" category="paragraph">在本示範中，我們在主 DB 伺服器上設定了一個名為 NTAP 的主 Oracle 資料庫，該資料庫具有八個 NFS 掛載點：/u01 用於 Oracle 二進位文件，/u02、/u03、/u04、/u05、/u06、/u07 用於 Oracle 資料檔案，並使用 Oracle ASM 磁碟負載用於 Oracle /活動日誌、歸檔日誌文件，並使用 Oracle ASM 磁碟組 +LOGS 進行負載平衡。 Oracle 控制檔放置在 +DATA 和 +LOGS 磁碟組上以實現冗餘。此設定可作為參考配置。您的實際部署應該考慮到儲存池大小、服務等級、資料庫磁碟區數量和每個磁碟區的大小的特定需求和要求。</block>
  <block id="48efe48e8a04269e45f8628943318993" category="inline-link-macro">使用Azure NetApp Files降低 Oracle Active Data Guard 成本</block>
  <block id="0d145c0e95a62c44cc2c6ff7f3a297a5" category="paragraph">有關使用 ASM 在 NFS 上設定 Oracle Data Guard 的詳細逐步流程，請參閱 TR-5002 -<block ref="f34df1fa8abd7a29bb8dfc47fcc8c59d" category="inline-link-macro-rx"></block> 。雖然 TR-5002 中的程式是在 Azure ANF 環境上驗證的，但它們同樣適用於 Google GCNV 環境。</block>
  <block id="3d1e8aa80cbf0d900cabd7c0b608aac1" category="paragraph">以下說明了 Google GCNV 環境中 Data Guard 配置中主 Oracle VLDB 的詳細資訊。</block>
  <block id="5b5f44a9ebf473213d27db2160cc9233" category="list-text">主計算引擎 DB 伺服器中的主資料庫 NTAP 作為單一實例資料庫在 GCNV 儲存上的獨立重新啟動設定中部署，使用 NFS 協定和 ASM 作為資料庫儲存磁碟區管理器。</block>
  <block id="882aa8204fd59148381a26733ec28722" category="list-text">Oracle 監聽器配置。</block>
  <block id="8b92bad94df2d37136e4ea0184c8ec24" category="list-text">主資料庫已啟用閃回。</block>
  <block id="37822d5db58a24c9b1215939174b98fd" category="paragraph">這樣就完成了在 GCNV 主站點上使用 NFS/ASM 為 VLDB NTAP 設定 Data Guard 的示範。</block>
  <block id="0db5b0495fd85156ef598b71b9e928c8" category="inline-link-macro">TR-5002 - 使用Azure NetApp Files降低 Oracle Active Data Guard 成本</block>
  <block id="cf428304b924b7f784b8a83ad9e30a86" category="paragraph">再次強調，有關使用 ASM 在 NFS 上設定 Oracle Data Guard 備用伺服器的詳細逐步流程，請參閱<block ref="a6f539298da44e4cb32383c1745a6f24" category="inline-link-macro-rx"></block>和<block ref="179b88d7d08fc36b4d4a3783382a72e4" category="inline-link-macro-rx"></block>相關章節。以下說明了 Google GCNV 環境中 Data Guard 設定中備用資料庫伺服器上備用 Oracle VLDB 配置的詳細資訊。</block>
  <block id="38f7c15d022557134b151e24231f38e4" category="list-text">備用資料庫已啟用閃回。</block>
  <block id="f332b6150683f6bfd2857082da767979" category="section-title">使用觀察者設定 Data Guard Broker 和 FSFO</block>
  <block id="d76d14a6b7996f87cd8d8628faa6871e" category="section-title">使用觀察者配置 FSFO</block>
  <block id="c104d754f64a61d49dab80e5e865b10d" category="paragraph">或者，可以為 Data Guard Broker 啟用快速啟動故障轉移 (FSFO)，以便在發生故障時自動將主資料庫故障轉移到備用資料庫。以下是使用觀察者實例設定 FSFO 的步驟。</block>
  <block id="7b37fbbe98e5b5a178e5426e834407ac" category="list-text">建立一個輕量級的 Google 運算引擎實例，以在與主資料庫伺服器或備用資料庫伺服器不同的區域執行 Observer。在測試案例中，我們使用了具有 2 個 vCPU、7.5G 記憶體的 N1 實例。在主機上安裝相同版本的 Oracle。</block>
  <block id="adb254d72e8902a448a82cc5249a8ae5" category="list-text">以 oracle 使用者身分登入並在 oracle 使用者 .bash_profile 中設定 oracle 環境。</block>
  <block id="d957f0efa9bb2bf48b2412ab28478cbc" category="list-text">將主資料庫和備用資料庫 TNS 名稱條目新增至 tnsname.ora 檔案。</block>
  <block id="4ce4e38faaab50c88369c238478ffb45" category="list-text">建立並使用密碼初始化錢包。</block>
  <block id="b8cc6ce06065e91511090ee39402a8b4" category="list-text">為主資料庫和備資料庫的使用者 sys 啟用無密碼認證。先輸入系統密碼，然後輸入上一個步驟的錢包密碼。</block>
  <block id="99bc8a3db5d5db309ef6f0d2bb2dc77f" category="paragraph">mkstore -wrl /u01/app/oracle/admin/NTAP/wallet -createCredential NTAP_NY sys</block>
  <block id="f2e0cb4d2af80f2857bbb9a807644a29" category="paragraph">mkstore -wrl /u01/app/oracle/admin/NTAP/wallet -createCredential NTAP_LA sys</block>
  <block id="c36128d065e9b385457b2685e0510065" category="list-text">使用錢包位置更新 sqlnet.ora。</block>
  <block id="1771e316623df1d2d5f036dd83d41c2f" category="list-text">驗證憑證。</block>
  <block id="c1bae5368d595b9e9b0d5802288e42ea" category="list-text">配置並啟用快速啟動故障轉移。</block>
  <block id="3c7194e8047047bc3902fd70f214665e" category="list-text">啟動並驗證觀察者。</block>
  <block id="4a4079b1a514d5e3c4b71005775d7422" category="admonition">為了實現零資料遺失，需要將 Oracle Data Guard 保護模式設定為<block ref="00d3443d618873afe8993c693e791995" prefix=" " category="inline-code"></block>或者<block ref="bd7b78324a1ce0ffe376b2b2947a6b1b" prefix=" " category="inline-code"></block>模式。預設保護模式<block ref="e68a7d40fb24f35e9af79c8a8a16ab4e" prefix=" " category="inline-code"></block>可以透過編輯 Data Guard 配置並更改來從 Data Guard Broker 介面進行更改<block ref="4c30d9f64bc6a599bc663cfa3960ae58" prefix=" " category="inline-code"></block>從異步到同步。 Oracle 歸檔日誌目標日誌模式需要相應變更。當根據需要為 Data Guard 啟用即時日誌應用程式時<block ref="00d3443d618873afe8993c693e791995" prefix=" " category="inline-code"></block>，避免自動重新啟動資料庫，因為自動重新啟動資料庫可能會無意中開啟備用資料庫<block ref="aa972431776a654708f7d18717a8b756" prefix=" " category="inline-code"></block>模式，該模式需要 Active Data Guard 許可證。相反，手動啟動資料庫以確保它保持<block ref="4a03a012bfc6e4f83139d742e7491d92" prefix=" " category="inline-code"></block>即時管理恢復的狀態。</block>
  <block id="983995df6f145b4506ca5b1b15a10e10" category="paragraph">以下自動化工具包專門用於建立或刷新部署到 GCNV 的 Oracle Data Guard 備用資料庫的克隆，並使用 NFS/ASM 配置實現完整的克隆生命週期管理。</block>
  <block id="793eb66d4d2bc3758a112c60e7131633" category="admonition">目前，只有具有 bitbucket 存取權限的NetApp內部使用者才能存取該工具包。對於有興趣的外部用戶，請向您的客戶團隊要求存取權限或聯絡NetApp解決方案工程團隊。參考<block ref="03300e451b2559a8f174daf2fbe59048" category="inline-link-macro-rx"></block>了解使用說明。</block>
  <block id="0b5a6e1f3287513b32657f6ab3857f99" category="summary">Oracle 資料庫工作負載需要可擴充的儲存容量，以提供一致的 IO 回應時間、頻寬和低延遲。  Google Cloud NetApp Volumes提供支援 NFS 協定存取的完全託管文件儲存服務，專門設計用於滿足這些嚴苛的要求。</block>
  <block id="9e5fca31ff29556b8be5e8abad3bf09e" category="doc">概述：Oracle 資料庫與Google Cloud NetApp Volumes</block>
  <block id="abe9f7fe1776c301eb3cabcbbf17f446" category="paragraph">此解決方案使組織能夠在 Google Cloud 上運行 Oracle 資料庫工作負載，同時保持企業級儲存功能。</block>
  <block id="5c61afd68fc6a88f95d143ab10ec3463" category="section-title">Google Cloud NetApp Volumes的優勢</block>
  <block id="ff95b02caeabab2c83214e8a4b9a2c2c" category="paragraph">Google Cloud NetApp Volumes有以下優勢：</block>
  <block id="16e2bc65f6e161fd0368b1c883ec91ce" category="paragraph">動態資源管理：</block>
  <block id="049ae0ea6a80b3d13a24e9447436bd1a" category="paragraph">儲存資源可以即時調整以適應業務需求。管理員可以根據需求擴大或縮小儲存容量，而無需中斷服務。這種靈活性使組織能夠有效地優化其儲存資源，確保在控製成本的同時保持適當的效能水準。該系統提供容量和效能特徵的無縫擴展，適應不斷變化的工作負載需求，而不會影響資料庫操作。</block>
  <block id="a3ac95f7c7602f0c706ce7ade72f35f9" category="paragraph">*企業級架構*： NetApp Volumes 的基礎建立在ONTAP技術之上，提供了強大且可靠的儲存平台。基礎設施的設計以高可用性為核心原則，並融入了多層次的冗餘。內建的跨位置磁碟區複製功能支援全面的業務連續性規劃和災難復原。這包括跨區域資料保護，確保不同地理位置的資料可用性和持久性。</block>
  <block id="e8a5a476a6a4882f8903ac541ecb3abd" category="paragraph">工作量管理：</block>
  <block id="18a956e8a54e474de0d8d49fe7b1c0ff" category="paragraph">NetApp Volumes 擅長支援多個資料庫實例，同時保持適當的隔離和效能特性。組織可以對每個資料庫甚至資料庫元件（例如選擇資料檔案或存檔日誌目標）實施細粒度的儲存管理。結果是最佳的性能和管理。儲存資源可以單獨擴展，提供資源分配的彈性。這種精細的控制能夠有效管理具有不同效能和容量需求的各種資料庫工作負載。</block>
  <block id="668e26a86f41e7595b750fc238dd8783" category="paragraph">*資料保護與管理：*</block>
  <block id="bfc29e4eb95eab21df52e1af0da3cc1f" category="paragraph">資料保護功能包括可以捕獲特定時間點的應用程式狀態的即時快照。快照技術節省空間，在保持資料完整性的同時最大限度地減少儲存開銷。該服務與本機備份解決方案無縫集成，支援全面的資料生命週期管理。組織可以根據業務需求實施時間點復原、執行備份和復原作業以及管理資料保留。</block>
  <block id="ce44945a28785f38fa4cfc6f7a747b29" category="paragraph">*開發和測試支援:*</block>
  <block id="8cc99760cd55a918952494057967d9f9" category="paragraph">NetApp Volumes 透過高效的磁碟區克隆功能簡化了資料庫副本的建立。開發團隊可以低成本快速配置測試環境，而不會影響生產工作負載。該平台為開發工作區提供隔離，使團隊能夠獨立工作同時共享基礎設施資源。這些功能顯著增強了開發和測試週期，允許快速迭代和驗證資料庫變更。</block>
  <block id="27019257bfc4d6c153c0a728d709d301" category="paragraph">儲存架構：</block>
  <block id="c080665081690959a9721dce66a5d5e5" category="paragraph">該服務提供多個層級以適應不同的工作負載要求，從開發環境到關鍵任務生產資料庫。此架構支援容量和效能指標的獨立擴展，可針對特定資料庫工作負載進行微調最佳化。該平台支援並發資料庫操作和低延遲資料訪問，支援要求苛刻的企業應用程式。</block>
  <block id="6adb757ee641d095e609ea30e81c44ad" category="paragraph">可擴充性選項：</block>
  <block id="6378cee11a1aa7752f5e247b67e92399" category="paragraph">由於可以根據需要動態添加卷，因此儲存管理變得簡單。該平台的規模從 GB 到 PB，支援任意規模的資料庫。可根據工作負載要求調整效能特徵，確保資料庫成長時效能保持一致。可擴展性功能支援資料庫需求的計畫成長和意外高峰。</block>
  <block id="2a3b399798aa16ecfbc1425cc560bfad" category="section-title">用例</block>
  <block id="77365112505008139064d41131e07043" category="paragraph">*高效能生產環境：*</block>
  <block id="5dd2b7c649d3def5e47f0b72f1c67c26" category="paragraph">NetApp Volumes 支援需要持續 IOPS 和低延遲效能特性的任務關鍵型 Oracle 資料庫部署。此架構可適應 OLTP 和 OLAP 工作負載，並具有支援各種效能設定檔的可設定服務層。  NetApp Volumes 提供超快速的效能，即使在混合讀取/寫入工作負載下也能達到高達 4.6 GiBps 和 340K IOPS 的卓越吞吐量。</block>
  <block id="9602da20980a1fbf9da862ebfc76b029" category="paragraph">雲端遷移：</block>
  <block id="a2e475c707bac0f49be075fd6b883797" category="paragraph">該平台有助於將 Oracle 資料庫環境從本地基礎架構直接遷移到 Google Cloud。選項包括 Oracle Recovery Manager (RMAN)、Oracle Data Guard 和 Oracle GoldenGate。  NFS 儲存架構可透過最少的架構變更實現無縫過渡，支援離線和線上遷移策略，同時維持現有的備份和復原程序。</block>
  <block id="2e56c635136648875b337cea9858c465" category="paragraph">資料庫整合架構：</block>
  <block id="374071a4e61f1493eb8c8b30ce03ba21" category="paragraph">該架構透過多租戶部署模型實現資料庫整合。管理員可以在磁碟區層級實現資源隔離，為 Oracle 可插入資料庫、特定資料檔案、重做日誌和存檔日誌提供專用磁碟區。此設計支援Oracle Multitenant架構，能夠有效利用資源，同時保持資料庫之間的效能隔離。</block>
  <block id="0d1898c295f4168a38e2047578068e24" category="paragraph">企業系統複製：</block>
  <block id="9da046618842f93cbef8b7d37e98db69" category="paragraph">該平台的快照和克隆功能支援從生產數據快速配置開發和測試環境。卷克隆技術可以實現具有獨立性能特徵的節省空間的資料庫副本。此功能支援需要頻繁刷新資料庫和具有生產級性能的隔離測試環境的 CI/CD（持續整合和持續開發）管道。</block>
  <block id="70895b62b8c428c3f36c1645b7fa6448" category="paragraph">您可以在具有一個或多個儲存磁碟區的 Google Compute Engine 上執行 Oracle 資料庫。卷的數量取決於資料分離的等級。例如，較小的資料庫可能被放置在單一磁碟區上。具有更嚴格的 IO 或管理要求的大型資料庫可能需要單獨的資料檔案、重做日誌和存檔日誌磁碟區。也可以新增用於應用程式或備份資料的附加磁碟區。每個磁碟區的大小都可以根據要託管的資料的需要進行調整。</block>
  <block id="401f6cd3f40aa51e178512b2b23480fa" category="paragraph"><block ref="401f6cd3f40aa51e178512b2b23480fa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8bcec2083d821a1c1a4f106efd02166c" category="section-title">準備Google Cloud NetApp Volumes</block>
  <block id="9190975428f02b211204d39637e4bef5" category="paragraph">建立所需容量和服務等級的Google Cloud NetApp Volumes儲存池。查看快速入門以了解如何設定Google Cloud NetApp Volumes。如果您要將現有的 Oracle 資料庫從本地遷移到 Google，則可以利用 Metrics Explorer 獲取當前吞吐量統計信息，以便確定Google Cloud NetApp Volumes存儲池和卷的大小。有關如何使用該服務的詳細信息，請聯絡您的 Oracle on Google 專家。儲存池中磁碟區的可用吞吐量由所選儲存池的大小和服務等級（標準、進階或極限等）定義</block>
  <block id="aa88ccfa825dadd9cbb9acc84e508b2c" category="paragraph">可擴展性</block>
  <block id="313e1c0bb958c3d0a6e0452378338b74" category="paragraph">NetApp磁碟區能夠輕鬆擴展以適應不斷增長的資料和工作負載，同時支援許多小卷。單一儲存池可以輕鬆從最小 2 TiB 成長到最大 10 PiB 的任意大小。請參閱配額和限制詳情。</block>
  <block id="0526070c28c019164a730675d790fb4d" category="paragraph">*成分*</block>
  <block id="1608eebdb453334139d8fad6837db5e1" category="paragraph">此解決方案使用以下組件：</block>
  <block id="d23f1247c469802c9822b41af95fe05d" category="list-text">* Google Cloud NetApp Volumes* 是第一方 Google NetApp Volumes 是一種完全託管的基於雲端的資料儲存服務，可提供進階資料管理功能和高度可擴展的效能。它是由 Google 和 Google 合作夥伴NetApp開發的。</block>
  <block id="2b4669bf60c88eb28c8a8eae0310f25d" category="inline-link-macro">Compute Engine 與 Oracle 資料庫</block>
  <block id="76f7738d1ac17ef791853e339bf2c740" category="list-text">*虛擬機器*是一種基礎架構即服務 (IaaS) 產品。您可以使用運算引擎來部署按需、可擴展的運算資源。 Compute Engine 提供了虛擬化的靈活性，但消除了實體硬體的維護需求。該解決方案使用<block ref="ed9e33b0ca8bc4215de0c8753958ceb2" category="inline-link-macro-rx"></block>。</block>
  <block id="19db0937c14accbafa2cd68e91c8b422" category="list-text">*Google 虛擬私有雲虛擬私有雲 (VPC)* 為 Compute Engine 虛擬機器 (VM) 執行個體、Google Kubernetes Engine (GKE) 叢集和無伺服器工作負載提供網路功能。  VPC 為您的基於雲端的資源和服務提供全球性的、可擴展的、靈活的網路。</block>
  <block id="ddc4509cb8285aaf0b1e6d3e4e15d887" category="list-text">*Oracle 資料庫* 是一個多模型資料庫管理系統。它支援各種資料類型和工作負載。 dNFS 用戶端最佳化 Oracle 和 NFS 伺服器之間的 I/O 路徑。因此，它提供的效能比傳統的 NFS 客戶端好得多。</block>
  <block id="0b3fbc0b5204dbd35ad7e0a12c1b3d1b" category="section-title">主要優點</block>
  <block id="24fb69f49e38268a9d19571c0170ea1f" category="paragraph">此圖（圖 2）顯示了將Google Cloud NetApp Volumes與 Oracle Database 結合使用的好處。</block>
  <block id="7b5bca74f48123693b362a8eb4609a2d" category="paragraph"><block ref="7b5bca74f48123693b362a8eb4609a2d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="913c81de3ae91549b7810ad12f7f60bc" category="paragraph">*簡單可靠的服務*</block>
  <block id="978c475c6d2286d1263abd87a1428c7e" category="paragraph">Google Cloud NetApp Volumes在 Google Cloud 內無縫運行，為企業儲存提供了簡單的方法。作為原生服務，它與 Google Cloud 的生態系統自然集成，讓您可以像使用其他 Google Cloud 儲存選項一樣配置、管理和擴充磁碟區。本服務利用 NetApp 的ONTAP資料管理軟體，提供專門針對 Oracle 資料庫和其他關鍵企業應用程式最佳化的企業級 NFS 磁碟區。</block>
  <block id="071837c9e9b64c6471791f180cff1f20" category="paragraph">*高效能係統*</block>
  <block id="2c91d42db049e0667b4332152f1fa2ad" category="paragraph">除了使用共享和高度可擴展的儲存之外， Google Cloud NetApp Volumes還提供低延遲。這些因素使得該服務非常適合使用 NFS 協定透過網路執行 Oracle 資料庫工作負載。</block>
  <block id="1b4abd4c94972ae16a646540bf73c773" category="paragraph">Google Cloud 運算實例可以使用高效能全快閃NetApp儲存系統。這些系統也整合到了 Google Cloud 網路中。因此，您可以獲得與內部解決方案相當的高頻寬、低延遲共享儲存。此架構的效能滿足最嚴苛、業務關鍵型企業工作負載的要求。有關Google Cloud NetApp Volumes效能優勢的更多信息，請參閱Google Cloud NetApp Volumes。</block>
  <block id="94618b5b16346a12ee26f0c0d7939934" category="paragraph">從本質上講， Google Cloud NetApp Volumes利用全快閃儲存系統的裸機群，為要求嚴苛的工作負載提供卓越的效能。該架構與共享和高度可擴展的儲存功能相結合，可確保始終如一的低延遲 - 使其特別適合透過 NFS 協定運行 Oracle 資料庫工作負載。</block>
  <block id="e8c00c9dedafb32ad01504fa4ca7b0dd" category="paragraph">與 Google Cloud 運算實例的整合可提供高效能。透過與 Google Cloud 網路的深度集成，客戶可以獲得以下好處：</block>
  <block id="7c0b796eaa520e47e5030546b0d6e5f9" category="list-text">高頻寬、低延遲共享存儲</block>
  <block id="c23f7a45f61688b571a42af9d7bfccc5" category="list-text">效能可與本地解決方案媲美</block>
  <block id="f9355b01bc7443f1033619d8e00b3d0a" category="list-text">靈活的按需擴展能力</block>
  <block id="8d5cba2e648fca72a04a5179df0a5776" category="list-text">最佳化的工作負載配置</block>
  <block id="ad7edc835cdc013b3bb1106b6fdbfb7f" category="paragraph">企業級資料管理</block>
  <block id="7ada7d3b835538f91b08efa4b2ad13ad" category="paragraph">此解決方案以ONTAP軟體為基礎，為企業資料管理設立了新的標準。其突出特點之一是節省空間、即時克隆，這顯著增強了開發和測試環境。該平台支援動態容量和效能擴展，確保所有工作負載的有效資源利用。 Google Cloud NetApp Volumes中的快照功能代表了資料庫管理的重大進步。這些快照以卓越的效率提供了一致的資料庫點。主要優勢包括：</block>
  <block id="09a038572bcac1b65d8a2a9e532a34c1" category="list-text">快照建立的最小儲存開銷</block>
  <block id="9df00cc7cc4b7ef9bd4f3a190cbcf745" category="list-text">快速建立、複製和復原功能</block>
  <block id="68fc4dc8ffb2225bf790e102b9b83841" category="list-text">對卷操作的性能沒有任何影響</block>
  <block id="0a607c8aebe65125000509c20d8f61e7" category="list-text">頻繁創建快照的高可擴展性</block>
  <block id="d22318251d28e05685b867739e1f7c27" category="list-text">支援多個並發快照</block>
  <block id="01980f5ad4b936d2f9ca85ba45df1787" category="paragraph">這種強大的快照功能使備份和復原解決方案能夠滿足積極的復原時間目標 (RTO) 和復原點目標 (RPO) 服務等級協議，而不會影響系統效能。</block>
  <block id="b23520be98d664aa8ea6741a9f0d8558" category="paragraph">*混合災難復原*</block>
  <block id="702738f14b556746f0c517e16580d448" category="paragraph">Google Cloud NetApp Volumes提供適用於雲端和混合式環境的全面災難復原解決方案。此整合支援複雜的 DR 計劃，這些計劃可跨多個區域有效運行，同時保持與內部資料中心的兼容性。</block>
  <block id="145481d97c3d36dd53343cfd062a2804" category="paragraph">災難復原框架提供：</block>
  <block id="2a01fbd781ec5b8d491ca14b4de659a5" category="list-text">無縫跨位置卷複製</block>
  <block id="e93b1dc6f67582a97fbc63291ffb202b" category="list-text">靈活的恢復選項</block>
  <block id="d775117b4d0831fa53fdc592830e40f0" category="list-text">跨環境的一致資料保護</block>
  <block id="d6aea4b6ba6626c4bee07310895321fb" category="paragraph">這種全面的災難復原方法可確保業務連續性，同時保持所有部署場景中的資料完整性。此解決方案的靈活性使組織能夠設計和實施與其業務需求精確匹配的 DR 策略，無論是完全在雲端中運作還是在混合環境中運作。</block>
  <block id="f6134f58b2507b7ec74620f418e3ef18" category="paragraph">此解決方案需要考慮以下事項：</block>
  <block id="a8a0a52ecf502c3e88a60ca3d11595c2" category="paragraph">*可用性*</block>
  <block id="2d91a4dea9afc6e775a0cb83d4176cd7" category="paragraph">Google Cloud NetApp Volumes透過其強大的架構提供企業級可用性。該服務由全面的服務等級協定 (SLA) 支持，其中詳細說明了具體的可用性保證和支援承諾。作為企業級資料管理功能的一部分，該服務提供快照功能，可在備份和復原解決方案中有效利用，確保資料保護和業務連續性。</block>
  <block id="2f48fe9e8eb190b75f221035fdc91ef8" category="paragraph"><block ref="2f48fe9e8eb190b75f221035fdc91ef8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e91b838261a5e488b5d3a2fa56986a97" category="paragraph">可擴充性：</block>
  <block id="904150722f0b4edd9fc18730d161ed39" category="paragraph">內建可擴充性是Google Cloud NetApp Volumes的基石功能，如高效能係統部分所述。該服務允許動態擴展資源以滿足不斷變化的工作負載需求，提供傳統儲存解決方案通常缺乏的靈活性。</block>
  <block id="db5f42d6c131ee4fd9e1c31f2c366835" category="paragraph">*安全：*</block>
  <block id="1cd14a80c9883cb4f90490fe3a4b6a54" category="paragraph">Google Cloud NetApp Volumes實施全面的安全措施來保護您的資料。安全框架包括：</block>
  <block id="9f0125f1c71e429424cb0f7c56fd19a5" category="list-text">內建資料保護機制</block>
  <block id="e2dc8bb0bdde377f17dc7eaeb30ef942" category="list-text">進階加密功能</block>
  <block id="ceb27f1d0855e0f026ee765092a1bb2d" category="list-text">可配置的策略規則</block>
  <block id="db0bdd443a2909aa62e45e1c07358189" category="list-text">基於角色的存取控制功能</block>
  <block id="c8918eeed68cfad1cfeec3a18d68891d" category="list-text">詳細的活動記錄和監控</block>
  <block id="f46430a61f9f63230c66421aadf129d8" category="paragraph">成本最佳化：</block>
  <block id="541537b0320edbeafb40258eb34461d9" category="paragraph">傳統的內部部署配置通常需要根據最大工作負載需求進行調整，因此僅在高峰使用時才具有成本效益。相較之下， Google Cloud NetApp Volumes支援動態可擴充性，可讓您根據目前工作負載需求最佳化配置，從而減少不必要的開支。</block>
  <block id="10b521d0b1acdd1c70e5bc375245dcef" category="paragraph">VM 大小最佳化：</block>
  <block id="3d67090062087c20366957a7b181215b" category="paragraph">該服務的架構可以透過多種方式優化虛擬機器來節省成本：</block>
  <block id="628cf362a889ee2010e975c91df9458f" category="paragraph">*性能優勢：*</block>
  <block id="0f06b882b83afef5e6bbca36af3ed12b" category="paragraph">低延遲儲存存取使較小的虛擬機器能夠使用超級磁碟儲存來匹配較大的虛擬機器的效能</block>
  <block id="df8eeec9f98c3a53d8019d0f2b823325" category="paragraph">由於 I/O 限制減少，網路附加儲存即使使用較小的虛擬機器也能實現卓越的效能</block>
  <block id="8378233383e0f7c79ec346325e768fec" category="paragraph">資源限制與優勢：</block>
  <block id="b920edc0c0565b25f6906252a0cb66ff" category="paragraph">雲端資源通常會施加 I/O 操作限制，以防止因資源耗盡或意外中斷而導致效能下降。使用Google Cloud NetApp Volumes：</block>
  <block id="7184c4eba3ab5a02aea0ab3f6fc9f8d0" category="list-text">僅適用網路頻寬限制，且這些限制僅影響資料輸出，虛擬機器級磁碟 I/O 限制不會影響效能</block>
  <block id="b9b231b8d3d33dc5c1b5c03de37e6c1b" category="list-text">網路限制通常高於磁碟吞吐量限制</block>
  <block id="f1eaffa191e6a7d86a1d9e1fe22c1af3" category="paragraph">*節省成本的優勢*</block>
  <block id="d5488d3ac0e616492a832eccceef6821" category="paragraph">使用較小虛擬機器的經濟效益包括：</block>
  <block id="c66c91d7bb13c1fd35d1b0f4ebe116cc" category="list-text">降低直接虛擬機器成本</block>
  <block id="ced72828b05f0fc0f6e35e36e50d34ca" category="list-text">降低 Oracle 資料庫授權成本，特別是使用受限程式碼 SKU</block>
  <block id="62acf9d7eba20363e8a5a81494919b05" category="list-text">網路附加儲存中不存在 I/O 成本元件</block>
  <block id="6361c2d8d59812a5eb50c7ce054e14b0" category="list-text">與磁碟儲存解決方案相比，整體擁有成本更低</block>
  <block id="07984601af21a07effa109928eecd215" category="paragraph">靈活的擴展、最佳化的效能和高效的資源利用率的結合使Google Cloud NetApp Volumes成為滿足企業儲存需求的經濟實惠的選擇。適當調整儲存和運算資源的能力使組織能夠在有效控製成本的同時保持高效能。</block>
  <block id="c53dba1ad099d932b01eacd82bd500f2" category="doc">NVA-1155：在FlexPod Datacenter 上使用Cisco UCS 和NetApp AFF A800透過 FC 部署 Oracle 19c RAC 資料庫 - 設計與部署指南</block>
  <block id="547673676a9fdbc79f1364e749be4d0a" category="paragraph">NetApp的 Allen Cao</block>
  <block id="ffaaa5a04a78a6ce5d807980dbf83e64" category="paragraph">此指南針對在FlexPod資料中心上使用Cisco UCS 和NetApp AFF A800透過 FC 部署 Oracle 19c RAC 資料庫提供了解決方案設計的詳細資訊以及在使用 Oracle Linux 8.2 作業系統和 Red Hat 相容核心的最新FlexPod資料中心基礎架構上託管 Oracle RAC 資料庫的分步部署流程。</block>
  <block id="3b872d3a96131109e4700e3031e4b158" category="inline-link-macro">NVA-1155：在FlexPod資料中心上使用Cisco UCS 和NetApp AFF A800透過 FC 運行 Oracle 19c RAC 資料庫</block>
  <block id="202f51b1cd08b9562681a95f87429702" category="paragraph"><block ref="202f51b1cd08b9562681a95f87429702" category="inline-link-macro-rx"></block></block>
  <block id="92726ec0eae6e1e73c6db87d872ebe6e" category="summary">該解決方案提供了在 Microsoft Azure NetApp Files中自動部署 Oracle 的概述和詳細信息，該部署作為具有 NFS 協議的主資料庫存儲，並且 Oracle 資料庫部署為啟用 dNFS 的容器資料庫。使用SnapCenter UI 工具保護部署在 Azure 中的資料庫，以簡化資料庫管理</block>
  <block id="f344dcb6783f656a2b1d73c6cdf6976f" category="paragraph">該解決方案提供了在 Microsoft Azure NetApp Files中自動部署 Oracle 的概述和詳細信息，該部署作為具有 NFS 協議的主資料庫存儲，並且 Oracle 資料庫部署為啟用 dNFS 的容器資料庫。使用SnapCenter UI 工具保護 Azure 中部署的資料庫，以簡化資料庫管理。</block>
  <block id="3c0b969f02b8a026925047057738fc1b" category="paragraph">NetApp SnapCenter software是一個易於使用的企業平台，可安全地協調和管理跨應用程式、資料庫和檔案系統的資料保護。它透過將這些任務轉移給應用程式擁有者來簡化備份、復原和複製生命週期管理，同時又不犧牲監督和管理儲存系統活動的能力。透過利用基於儲存的資料管理，它可以提高效能和可用性，並減少測試和開發時間。</block>
  <block id="f5374dd6e81292f8768efaeefbb870fc" category="paragraph">在 TR-4987 中，<block ref="3229de008a550a1b47ddb6964fa5485c" category="inline-link-macro-rx"></block> ，我們示範了在 Azure 雲端中的Azure NetApp Files (ANF) 上自動部署 Oracle。在本文檔中，我們使用非常使用者友善的SnapCenter UI 工具展示了 Azure 雲端中 ANF 上的 Oracle 資料庫保護和管理。</block>
  <block id="81fa72cbc547f894c7c04a4127dfe5ea" category="list-text">使用SnapCenter備份並還原在 Azure 雲端中的 ANF 上部署的 Oracle 資料庫。</block>
  <block id="6cfd0230dc78dea7b5afceb0812f2f42" category="list-text">管理資料庫快照和複製副本，以加速應用程式開發並改善資料生命週期管理。</block>
  <block id="9de2392a5a7812b0166ee1ad25de89f1" category="list-text">想要在Azure NetApp Files上部署 Oracle 資料庫的 DBA。</block>
  <block id="9a0a3a7d3a2a195a355c15770cfa5372" category="list-text">希望在Azure NetApp Files上部署和管理 Oracle 資料庫的儲存管理員。</block>
  <block id="88ee29f0e07795688dabad629e6b1a38" category="cell">具有進階服務等級的容量池</block>
  <block id="5b51e2d6963535892778a3ec85923303" category="cell">兩個 Linux 虛擬機器實例</block>
  <block id="fcac956b151981c790450bffbe8a6ec5" category="cell">2022 資料中心；AE 熱補丁 - x64 Gen2</block>
  <block id="66bda974b27aec9fc4c649e866e2d848" category="cell">補丁 p34765931_190000_Linux-x86-64.zip</block>
  <block id="e2bc304a34949cf78793eb2d9a4466f7" category="cell">補丁 p6880880_190000_Linux-x86-64.zip</block>
  <block id="58b1cd722de6d096e347df95b97f1708" category="list-text">* SnapCenter部署。 * SnapCenter可以在 Windows 網域或工作群組環境中部署。對於基於網域的部署，網域使用者帳戶應該是網域管理員帳戶，或網域使用者屬於SnapCenter託管伺服器上的本機管理員群組。</block>
  <block id="51b67e7136bcea8684399bd788343a3d" category="list-text">*名稱解析。 * SnapCenter伺服器需要將名稱解析為每個託管目標資料庫伺服器主機的 IP 位址。每個目標資料庫伺服器主機必須將SnapCenter伺服器名稱解析為 IP 位址。如果 DNS 伺服器不可用，請將命名新增至本機主機檔案以進行解析。</block>
  <block id="5201585f52455453631952654fbcfdc1" category="list-text">資源組配置。 SnapCenter中的資源群組是可以一起備份的類似資源的邏輯分組。因此，它簡化並減少了大型資料庫環境中的備份作業的數量。</block>
  <block id="9b274f274cc2fdf5c2eaac7308f2a980" category="list-text">*單獨進行完整資料庫和存檔日誌備份。 *完整資料庫備份包含資料磁碟區和日誌卷一致組快照。頻繁的完整資料庫快照會導致更高的儲存消耗，但可以提高 RTO。另一種方法是減少完整資料庫快照的頻率，增加存檔日誌備份的頻率，這樣可以減少儲存空間並改善 RPO，但可能會延長 RTO。設定備份方案時，請考慮您的 RTO 和 RPO 目標。卷上的快照備份數量也有限制（1023）。</block>
  <block id="b85fa7425df71e674278fea13b4d8df3" category="list-text">*Privileges委託。 *如果需要，利用SnapCenter UI 內建的基於角色的存取控制將權限委託給應用程式和資料庫團隊。</block>
  <block id="e27bf8eca64c83fe8b6062fb95e333d9" category="paragraph">以下部分提供了 Azure 雲端中Azure NetApp Files上的SnapCenter部署、配置以及 Oracle 資料庫備份、復原和複製的逐步流程。</block>
  <block id="3a384b8853704266e740bf9b8d8dadc3" category="paragraph">部署需要在 Azure 中的 ANF 上執行現有的 Oracle 資料庫。如果沒有，請依照下列步驟建立兩個 Oracle 資料庫用於解決方案驗證。有關在 Azure 雲端中的 ANF 上自動化部署 Oracle 資料庫的詳細信息，請參閱 TR-4987：<block ref="3229de008a550a1b47ddb6964fa5485c" category="inline-link-macro-rx"></block></block>
  <block id="ec8e7a436a2d10b04ead30082c3bb22a" category="list-text">從 Azure 雲端門戶，將 Azure Linux VM 部署為 Oracle DB 伺服器。為 Oracle 資料庫建立Azure NetApp Files容量池和資料庫磁碟區。為 azureuser 到 DB 伺服器啟用 VM SSH 私鑰/公鑰身份驗證。有關環境設定的詳細信息，請參閱上一節中的架構圖。也提到<block ref="d5e84e000b0fd3823ab4fd818742266e" category="inline-link-macro-rx"></block>了解詳細資訊。</block>
  <block id="47c878359f4c935db42a7d950cb56e05" category="admonition">對於使用本機磁碟冗餘部署的 Azure VM，請確保在 VM 根磁碟中指派至少 128G，以便有足夠的空間來暫存 Oracle 安裝檔案並新增 OS 交換檔。相應地擴展 /tmplv 和 /rootlv OS 分區。確保資料庫磁碟區命名遵循 VMname-u01、VMname-u02 和 VMname-u03 約定。</block>
  <block id="7248ba2d36ba4b2b7deb2879ad658327" category="list-text">從 Azure 雲端入口網站設定 Windows 伺服器以執行最新版本的NetApp SnapCenter UI 工具。詳細資訊請參考以下連結：<block ref="131e9eb1b10c693e5b08c2ea655bbc23" category="inline-link-macro-rx"></block> 。</block>
  <block id="f5823da50f0c261f93cac13c89efabe5" category="inline-link-macro">TR-4887</block>
  <block id="f7fd458b3791277e17cfe29113527c1c" category="list-text">克隆適用於 NFS 的NetApp Oracle 部署自動化工具包的副本。按照說明進行操作<block ref="a9bd41d1123cc2320afb581bf5c8b5c0" category="inline-link-macro-rx"></block>執行劇本。</block>
  <block id="bfa29a4d1633c304ce5ea63b28050c30" category="list-text">回顧<block ref="e0c4332e8c13be976552a059f106354f" prefix=" " category="inline-code"></block>線上菜單。</block>
  <block id="b6bfa5b7d69b44a49fead07bd2c2a3ae" category="section-title">SnapCenter安裝與設定</block>
  <block id="7608e75619cff3eeb4e8bce40481b456" category="inline-link-macro">SnapCenter軟體文檔</block>
  <block id="d2e6519128f0c0f4297df9dfcf74f4f4" category="paragraph">我們建議透過線上<block ref="709a64672cb1b481d7e1d00abe15371a" category="inline-link-macro-rx"></block>在繼續進行SnapCenter安裝和設定之前：。以下提供了在 Azure ANF 上安裝和設定 Oracle 的SnapCenter software的步驟的進階摘要。</block>
  <block id="2f16590362b9a77201075964ad79edf6" category="list-text">從SnapCenter Windows 伺服器下載並安裝最新的 Java JDK<block ref="1a0bb7a886be273015991771cf1b1190" category="inline-link-macro-rx"></block> 。</block>
  <block id="4c432947190d17ebbfafd109af579e8b" category="inline-link-macro">NetApp | 支持</block>
  <block id="252ae86269b0f2ac0af59ba9dbaf9f77" category="list-text">從SnapCenter Windows 伺服器，從NetApp支援網站下載並安裝最新版本（目前為 5.0）的SnapCenter安裝執行檔：<block ref="f0da1a8fe9efadb5bab3d3f47fea4f67" category="inline-link-macro-rx"></block> 。</block>
  <block id="06f6fe269bc66b13969ba522de05e124" category="list-text">安裝SnapCenter伺服器後，啟動瀏覽器透過連接埠 8146 使用 Windows 本機管理員使用者或網域使用者憑證登入SnapCenter 。</block>
  <block id="59b99dff4b9ef65674331e7340fa08d7" category="inline-image-macro">此圖像提供SnapCenter伺服器的登入畫面</block>
  <block id="9e64d87d797f6ef8300dcbd71ba061b3" category="paragraph"><block ref="9e64d87d797f6ef8300dcbd71ba061b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="96a37aec5c27e605088aea24d5d14206" category="list-text">審查<block ref="e0c4332e8c13be976552a059f106354f" prefix=" " category="inline-code"></block>線上菜單。</block>
  <block id="e4ecaf6c95aea5efc31bb0908136fe57" category="inline-image-macro">此圖提供SnapCenter伺服器的線上選單</block>
  <block id="e7174631e335934782d6c5f90cc6b72e" category="paragraph"><block ref="e7174631e335934782d6c5f90cc6b72e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26580f485e752465df198f9ca8753224" category="list-text">在<block ref="4d6066956a45bb2668fa0c138b1f3d03" prefix=" " category="inline-code"></block>， 查看<block ref="6b2d6702a0358e8df43b31cf0890a30f" prefix=" " category="inline-code"></block>然後點選更新。</block>
  <block id="ffae6a01cee8b80c47313ba0d044f280" category="inline-image-macro">此圖像提供SnapCenter伺服器的虛擬機器管理程式設置</block>
  <block id="a9c88fbfcc57e31173d9238e34e76664" category="paragraph"><block ref="a9c88fbfcc57e31173d9238e34e76664" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b970cc736d04d4b56c58fea4ad5c9da" category="list-text">如果需要，調整<block ref="67fde4caae23fade4d1bd7de40c81bc7" prefix=" " category="inline-code"></block>將SnapCenter UI 設定為所需的間隔。</block>
  <block id="d0d8ee4e483915ff866ab8323293c1d0" category="inline-image-macro">此圖像提供SnapCenter伺服器的會話逾時</block>
  <block id="570b8eeed70ef938c2f4b57048a01cbf" category="paragraph"><block ref="570b8eeed70ef938c2f4b57048a01cbf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0acc9513d8b87ae002c74de46229c03" category="list-text">如果需要，請向SnapCenter新增其他用戶。</block>
  <block id="025955fc32ea828a9e5153bf02eac7b2" category="inline-image-macro">此圖像提供SnapCenter伺服器的“設定 - 用戶和存取權限”</block>
  <block id="78bc4dd16c516914018e2c23d2c2d9cb" category="paragraph"><block ref="78bc4dd16c516914018e2c23d2c2d9cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e481d0de1e224ddd98e9dfb72c1f658d" category="list-text">這<block ref="a5cd3ed116608dac017f14c046ea56bf" prefix=" " category="inline-code"></block>選項卡列出了可以分配給不同SnapCenter用戶的內建角色。管理員使用者也可以建立具有所需權限的自訂角色。</block>
  <block id="ee0d0d1f1f6fe1110797be4d48053fae" category="inline-image-macro">此圖像提供SnapCenter伺服器的角色</block>
  <block id="a1791585a88d4c2c3396ebe9ea77628e" category="paragraph"><block ref="a1791585a88d4c2c3396ebe9ea77628e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3fb40cbc384305df9161da52ec4c2d0d" category="list-text">從<block ref="c4646a4d73e5bf2cf1843bda6cd9f769" prefix=" " category="inline-code"></block>，為SnapCenter管理目標建立憑證。在此示範案例中，他們是用於登入 Azure VM 的 Linux 使用者和用於容量池存取的 ANF 憑證。</block>
  <block id="dc06424d30636d2437b7c082a44271de" category="inline-image-macro">此圖像提供SnapCenter伺服器的憑證</block>
  <block id="0df6784b503c41399d83a2f361cf4574" category="paragraph"><block ref="e39bbbd05f8020a4772bbfcb7e19ef2f" category="inline-image-macro-rx" type="image"></block> <block ref="8c6a0aea884f94491ad7ecb4f09fa845" category="inline-image-macro-rx" type="image"></block> <block ref="6027d8ffcbae416fc0888a15f185b54d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dd4237b12d92b22e7ad381bf28522e7f" category="list-text">從<block ref="5c6ab1284b6b7a5a7102854a969c99be" prefix=" " category="inline-code"></block>選項卡，新增<block ref="7450cfde7058dc5e1f7909d0280fd7ae" prefix=" " category="inline-code"></block>使用上面建立的憑證。</block>
  <block id="71e910f4881c08ea6897e22b79389cf4" category="inline-image-macro">此映像提供用於SnapCenter伺服器的Azure NetApp Files</block>
  <block id="8f8b38fef6eae25d3fd89e2263c39eac" category="paragraph"><block ref="a005fe8582f4fcd72fede084ef2cb22f" category="inline-image-macro-rx" type="image"></block> <block ref="874f615eb62654ab381adcc0800ad1b0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d7702d89b895aa6ec99def769587c405" category="list-text">從<block ref="8124579383e90243e4b06323d2b37f8d" prefix=" " category="inline-code"></block>選項卡，新增 Azure DB VM，在 Linux 上安裝適用於 Oracle 的SnapCenter插件。</block>
  <block id="b979fe379fa5345e56adf94005f84929" category="inline-image-macro">此圖像為SnapCenter伺服器提供主機</block>
  <block id="bbcc613599c9e5715a277211dc9e8265" category="paragraph"><block ref="c1f33d38cd4c230d7542f5038d30507a" category="inline-image-macro-rx" type="image"></block> <block ref="240cc5b6f0609e40ae315f77dfd6f383" category="inline-image-macro-rx" type="image"></block> <block ref="e3e019b1a7125de45cc9153a40334638" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a3a63bd1ddab3e696228b7b61878c09d" category="inline-link-macro">為 Oracle 資料庫建立備份策略</block>
  <block id="2166a1bececf10153acd19c3ed9b1d2e" category="list-text">一旦在資料庫伺服器虛擬機器上安裝了主機插件，主機上的資料庫就會自動被發現並可見<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡。返回<block ref="6c8a99d2cb03d4bc5a863f8606453994" prefix=" " category="inline-code"></block>，建立Oracle資料庫全量線上備份和僅存檔日誌備份的備份策略。參考此文檔<block ref="9c987a74ad0aa597c1c522b0007ec5d5" category="inline-link-macro-rx"></block>了解詳細的逐步步驟。</block>
  <block id="886ca5ebbeb3beae0e42d559adb9afa6" category="inline-image-macro">此圖像提供SnapCenter伺服器的設定策略</block>
  <block id="2031f316750a077dff90583a06314612" category="paragraph"><block ref="2031f316750a077dff90583a06314612" category="inline-image-macro-rx" type="image"></block></block>
  <block id="89a532a917f392c521eb9922d1a47d62" category="paragraph">NetApp快照備份會建立資料庫磁碟區的時間點映像，您可以在系統故障或資料遺失時使用它來進行還原。快照備份所需的時間很少，通常不到一分鐘。備份映像佔用的儲存空間極小，且產生的效能開銷可以忽略不計，因為它僅記錄自上次快照複製以來檔案的變更。以下部分示範了SnapCenter中 Oracle 資料庫備份的快照實作。</block>
  <block id="2622a793728d35ec6877f6afb1a153e6" category="list-text">導航至<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡，其中列出了在資料庫虛擬機器上安裝SnapCenter插件後發現的資料庫。最初，<block ref="58d4fcf0afd65a0eb3857a2d3e254c8c" prefix=" " category="inline-code"></block>資料庫顯示為<block ref="4aa6066b3ed6d1b995450c6c7ad4a3d8" prefix=" " category="inline-code"></block>。</block>
  <block id="4ba96929ee643a0f3d8eb215ab8d7c35" category="inline-image-macro">此映像為SnapCenter伺服器提供資料庫備份</block>
  <block id="9d507498182d7ea6be0a6489ec72c0e1" category="paragraph"><block ref="9d507498182d7ea6be0a6489ec72c0e1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7fb0e0d4bbba69fa67fe86fdcf6fa41f" category="list-text">點選<block ref="4351cfebe4b61d8aa5efa1d020710005" prefix=" " category="inline-code"></block>下拉更改為<block ref="dd23acac46f17cbfd4d5541f8ee3c7a1" prefix=" " category="inline-code"></block>。點選<block ref="ec211f7c20af43e742bf2570c3cb84f9" prefix=" " category="inline-code"></block>在右側簽名以新增資源組。</block>
  <block id="75ee349943fa87c02204fd724db93e8c" category="paragraph"><block ref="75ee349943fa87c02204fd724db93e8c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="19ff1cea165e0fcce11d79410c000e25" category="list-text">命名您的資源群組、標籤和任何自訂命名。</block>
  <block id="002f9712d4308af5a88b3a9bf376dfeb" category="paragraph"><block ref="002f9712d4308af5a88b3a9bf376dfeb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9cf2d7ee69e3a812dae0bd35100b6081" category="list-text">將資源新增到您的<block ref="dd23acac46f17cbfd4d5541f8ee3c7a1" prefix=" " category="inline-code"></block>。對類似資源進行分組可以簡化大型環境中的資料庫管理。</block>
  <block id="bc7e4c82a94a1565c725f9d679f9148e" category="paragraph"><block ref="bc7e4c82a94a1565c725f9d679f9148e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="875d3bcc106894cef94c8362d4bada10" category="list-text">選擇備份策略並透過點擊“+”符號設定計劃<block ref="b54c2aaa814d856436c9f864ac8afdd5" prefix=" " category="inline-code"></block>。</block>
  <block id="d5578d1feb20b550eb1a91632e395995" category="paragraph"><block ref="065f7b2a26fa4e4e245647144e5f02b7" category="inline-image-macro-rx" type="image"></block> <block ref="d115e46980c432e346d7b5c9b666dd8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7918c5620dbf35faced9d7a3a666da15" category="list-text">如果政策中未配置備份驗證，則保留驗證頁面原樣。</block>
  <block id="d97e19ad114eb3dc9069a84e78c335b7" category="paragraph"><block ref="d97e19ad114eb3dc9069a84e78c335b7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b2396ffd0abd0c6bffee737277b76430" category="list-text">為了透過電子郵件發送備份報告和通知，環境中需要有 SMTP 郵件伺服器。如果未設定郵件伺服器，則將其保留為黑色。</block>
  <block id="5b38e03481f78ad8e72f415a2846bc20" category="paragraph"><block ref="5b38e03481f78ad8e72f415a2846bc20" category="inline-image-macro-rx" type="image"></block></block>
  <block id="71dc91d121e985620a277b7fad0f6168" category="list-text">新資源組的摘要。</block>
  <block id="fa5f7125afc894425ac5b5d51bcc2af4" category="paragraph"><block ref="fa5f7125afc894425ac5b5d51bcc2af4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9fbbeced92d891e91891234bc859d078" category="list-text">重複上述步驟，建立具有對應備份策略的資料庫歸檔日誌備份。</block>
  <block id="91ad8b58c73da2748483a0070caadf56" category="paragraph"><block ref="91ad8b58c73da2748483a0070caadf56" category="inline-image-macro-rx" type="image"></block></block>
  <block id="24f86cfce0092ac5d9090957526aacbe" category="list-text">按一下資源組可以顯示其包含的資源。除了已排程的備份作業外，還可以透過點擊<block ref="9a9852432e1a7055c64fef6ff8f6dd65" prefix=" " category="inline-code"></block>。</block>
  <block id="85ffec48187fe9957a1677aa963d6304" category="paragraph"><block ref="b09286e22fd6db1ed1363d87f99a2897" category="inline-image-macro-rx" type="image"></block> <block ref="fccd097ec6b8c39706247a99c6d82d38" category="inline-image-macro-rx" type="image"></block></block>
  <block id="287f76d0aaad99fd67c4537bef25ac74" category="list-text">點擊正在運行的作業即可開啟監控窗口，操作員可以即時追蹤作業進度。</block>
  <block id="fd45b4ee60c803a806ddbcc32961f73a" category="paragraph"><block ref="fd45b4ee60c803a806ddbcc32961f73a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="489facdfbfbab274d7adce93c4539d9f" category="list-text">一旦備份作業成功完成，快照備份集就會出現在資料庫拓樸下。完整資料庫備份集包括資料庫資料卷的快照和資料庫日誌磁碟區的快照。僅日誌備份僅包含資料庫日誌磁碟區的快照。</block>
  <block id="92476b738112505da321bf41c92caef5" category="paragraph"><block ref="92476b738112505da321bf41c92caef5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b7bd6844cb7d1a58c24be2eb5e09dd9e" category="paragraph">透過SnapCenter進行資料庫復原可還原資料庫磁碟區映像時間點的快照副本。然後，資料庫將前滾到 SCN/時間戳記所期望的點或備份集中可用存檔日誌所允許的點。以下部分示範了使用SnapCenter UI 進行資料庫復原的工作流程。</block>
  <block id="1276bda3e84c962765c7f939562edc1b" category="list-text">從<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡，開啟資料庫<block ref="9075f786989ed7df222b4297bec16422" prefix=" " category="inline-code"></block>頁。選擇資料庫資料卷的快照，然後點選<block ref="2bd339d85ee3b33e513359ce781b60cc" prefix=" " category="inline-code"></block>按鈕啟動資料庫復原工作流程。如果您喜歡透過 Oracle SCN 或時間戳記運行恢復，請記下備份集中的 SCN 號或時間戳記。</block>
  <block id="a482c65925dcf03c4f1df8c0c00d80a6" category="inline-image-macro">此映像為SnapCenter伺服器提供資料庫還原</block>
  <block id="7a72e560e7a8003b7812f6bd79788071" category="paragraph"><block ref="7a72e560e7a8003b7812f6bd79788071" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7a0d6064f45219ea8485b59931a129f9" category="list-text">選擇<block ref="2fff52bd70c3fc704bb228287925cfae" prefix=" " category="inline-code"></block>。對於容器資料庫， SnapCenter可以靈活地執行完整容器資料庫（所有資料檔案）、可插入資料庫或表空間層級復原。</block>
  <block id="d5f73731610aad0f4be12831fca07f5b" category="paragraph"><block ref="d5f73731610aad0f4be12831fca07f5b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bac7059283bff97f7d76c4328850c8e8" category="list-text">選擇<block ref="ec47ba775b6cce559706e86f20fde009" prefix=" " category="inline-code"></block>。<block ref="d50d6a874b376378de702eec4c6c0b96" prefix=" " category="inline-code"></block>表示應用備份集中所有可用的歸檔日誌。也可以透過 SCN 或時間戳進行時間點恢復。</block>
  <block id="091614cde97f2bed43da8a1b19fdd2c7" category="paragraph"><block ref="091614cde97f2bed43da8a1b19fdd2c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e89ca0accc18535a19f3f8bf9e942886" category="list-text">這<block ref="ced009502445c11dc6162d3d7758d07b" prefix=" " category="inline-code"></block>允許在復原/復原操作之前針對資料庫執行腳本。</block>
  <block id="685024253073386c3e6e6a66ca7b7912" category="paragraph"><block ref="685024253073386c3e6e6a66ca7b7912" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c23a56c7db12aa77b66795215479decf" category="list-text">這<block ref="5fa20aa4f779d0f14b1c9545ded7baa6" prefix=" " category="inline-code"></block>允許在復原/復原操作後針對資料庫執行腳本。</block>
  <block id="a2a1f69706b668e4146e64d310d4e76c" category="paragraph"><block ref="a2a1f69706b668e4146e64d310d4e76c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="33402d9fc6c4297fd3a48930e49eb9e4" category="list-text">如果需要，可以透過電子郵件通知。</block>
  <block id="3a9d94aa43f64f2237fec5a4bc00bd42" category="paragraph"><block ref="3a9d94aa43f64f2237fec5a4bc00bd42" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4867bf6fc07300b11d5e52009f6943e3" category="list-text">恢復工作摘要</block>
  <block id="aec80d15488463cfc1222eb1a2d91fb4" category="paragraph"><block ref="aec80d15488463cfc1222eb1a2d91fb4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a2ac78daad6f0e5548bf6b3c8a744961" category="list-text">點擊正在運行的作業打開<block ref="4f65019520415bd6c5a529f526f86dd7" prefix=" " category="inline-code"></block>窗戶。還可以從<block ref="d2986ac8cb6bd55892099c1ffd6b1f6f" prefix=" " category="inline-code"></block>選項卡。</block>
  <block id="f930792970439359f667f9074f035f8c" category="paragraph"><block ref="f930792970439359f667f9074f035f8c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fd808403d73611b482552bb655a619b6" category="paragraph">透過SnapCenter進行資料庫克隆是透過從磁碟區的快照建立新磁碟區來完成的。系統使用快照訊息，使用拍攝快照時磁碟區上的資料來複製新磁碟區。更重要的是，與其他方法相比，它快速（幾分鐘）且高效，可以克隆生產資料庫以支援開發或測試。從而顯著改善您的資料庫應用程式生命週期管理。以下部分示範了使用SnapCenter UI 進行資料庫複製的工作流程。</block>
  <block id="f2914a331ca3beda8620803b7496d121" category="list-text">從<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡，開啟資料庫<block ref="9075f786989ed7df222b4297bec16422" prefix=" " category="inline-code"></block>頁。選擇資料庫資料卷的快照，然後點選<block ref="d329fd777726c300d7a044e482b967e7" prefix=" " category="inline-code"></block>按鈕啟動資料庫克隆工作流程。</block>
  <block id="f9d20d3938f49ba79e7e71b35367dd8a" category="inline-image-macro">此映像為SnapCenter伺服器提供資料庫克隆</block>
  <block id="d17fc95295fc6a482c11914f4d69c365" category="paragraph"><block ref="d17fc95295fc6a482c11914f4d69c365" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dd25eb8a6cd5e51eb9a829670231a42d" category="list-text">將克隆資料庫命名為 SID。或者，對於容器資料庫，也可以在 PDB 層級進行複製。</block>
  <block id="5943fc719aadae0f706834d9b6f6e8d9" category="paragraph"><block ref="5943fc719aadae0f706834d9b6f6e8d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="25fa34588c9138998f469c3fd58ada8e" category="list-text">選擇要放置克隆資料庫副本的資料庫伺服器。保留預設檔案位置，除非您想以不同的方式命名它們。</block>
  <block id="ebb17d6d8367d7009ff4221b71e97311" category="paragraph"><block ref="ebb17d6d8367d7009ff4221b71e97311" category="inline-image-macro-rx" type="image"></block></block>
  <block id="af6adf0da4d64fb1eb5f9d629d0dfaeb" category="list-text">應該在克隆資料庫主機上安裝並配置與來源資料庫相同的 Oracle 軟體堆疊。保留預設憑證，但更改<block ref="021e4a863e5da100e496150783eb8099" prefix=" " category="inline-code"></block>與克隆資料庫主機上的設定相符。</block>
  <block id="4ddad74440aff68a53512d056840528b" category="paragraph"><block ref="4ddad74440aff68a53512d056840528b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1be0ae8621a560e5682f70d0ad924cb8" category="list-text">這<block ref="ced009502445c11dc6162d3d7758d07b" prefix=" " category="inline-code"></block>允許在克隆操作之前執行腳本。可以調整資料庫參數以滿足克隆資料庫與生產資料庫的需求，例如減少 SGA 目標。</block>
  <block id="189ce86b532cccb73074a8ea578c0102" category="paragraph"><block ref="189ce86b532cccb73074a8ea578c0102" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9b647ca121466de8e754099a317efa26" category="list-text">這<block ref="5fa20aa4f779d0f14b1c9545ded7baa6" prefix=" " category="inline-code"></block>允許在克隆操作後針對資料庫執行腳本。克隆資料庫復原可以是基於 SCN、時間戳記或直到取消（將資料庫前滾到備份集中的最後一個存檔日誌）。</block>
  <block id="82e75b2e1c8b19c32ff9e9ac1b9153c9" category="paragraph"><block ref="82e75b2e1c8b19c32ff9e9ac1b9153c9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8619adcb91e677017924ca6b16ba96ed" category="paragraph"><block ref="8619adcb91e677017924ca6b16ba96ed" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bf4fecad178142ecaf84d1631bd0de91" category="list-text">克隆作業摘要。</block>
  <block id="e2300820531ea21f5bf35a6412ab52b4" category="paragraph"><block ref="e2300820531ea21f5bf35a6412ab52b4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6dd94797fb2b846da1943beb63a9a64e" category="paragraph"><block ref="6dd94797fb2b846da1943beb63a9a64e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2b9ad7101315fee480147c99a1b004e9" category="list-text">克隆的資料庫立即向SnapCenter註冊。</block>
  <block id="e2e8e461cee4c0f3181ed0e03d95614d" category="paragraph"><block ref="e2e8e461cee4c0f3181ed0e03d95614d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f1a562c6e48bea55b2f5d52385feef1c" category="list-text">驗證資料庫伺服器主機上的克隆資料庫。對於克隆的開發資料庫，應該關閉資料庫存檔模式。</block>
  <block id="532841fbf704673d5f6dc65db8d8cf66" category="inline-link-macro"><block ref="532841fbf704673d5f6dc65db8d8cf66" category="inline-link-rx"></block></block>
  <block id="a88dfa4149ba3595ee197cb2ff9fdd79" category="paragraph"><block ref="a88dfa4149ba3595ee197cb2ff9fdd79" category="inline-link-macro-rx"></block></block>
  <block id="3cd3290a9231e38be51fc2cb3ce01572" category="inline-link-macro">部署流程</block>
  <block id="f2c7ec07b8a46e173b04cc559f954e0f" category="paragraph"><block ref="f2c7ec07b8a46e173b04cc559f954e0f" category="inline-link-macro-rx"></block></block>
  <block id="6845898fa7e9ec1fa3b8934d8e91b0c1" category="summary">此解決方案提供了使用BlueXP控制台使用NetApp SnapCenter SaaS 進行 Oracle 資料庫備份、復原和複製的概述和詳細資訊。</block>
  <block id="4a2b9d3fbf0ce23b647509fb31e70cde" category="doc">TR-4977：使用SnapCenter服務備份、還原和克隆 Oracle 資料庫 - Azure</block>
  <block id="182e6145515371c9597ab0106bf34ee9" category="paragraph">此解決方案提供了使用NetApp SnapCenter SaaS 透過BlueXP控制台進行 Oracle 資料庫備份、復原和複製的概述和詳細資訊。</block>
  <block id="63260fe4291efeee8bde616a2f5684d4" category="paragraph">SnapCenter Services 是經典SnapCenter資料庫管理 UI 工具的 SaaS 版本，可透過NetApp BlueXP雲端管理控制台使用。它是NetApp雲端備份、資料保護產品不可或缺的一部分，適用於在Azure NetApp Files上執行的 Oracle 和 HANA 等資料庫。這項基於 SaaS 的服務簡化了傳統的SnapCenter獨立伺服器部署，該部署通常需要在 Windows 網域環境中執行的 Windows 伺服器。</block>
  <block id="29f3642491ac9aeb7b665ce66bb22367" category="paragraph">在本文檔中，我們示範如何設定SnapCenter服務來備份、還原和複製部署在Azure NetApp Files區和 Azure 運算執行個體上的 Oracle 資料庫。使用基於 Web 的BlueXP使用者介面可以非常輕鬆地為部署在Azure NetApp Files上的 Oracle 資料庫設定資料保護。</block>
  <block id="e9077c444a6fe7487b79ae7f79962528" category="list-text">使用快照對Azure NetApp Files和 Azure VM 中託管的 Oracle 資料庫進行資料庫備份</block>
  <block id="403ca933973134cbaf8f9354830b4d9c" category="list-text">Oracle資料庫故障時的復原</block>
  <block id="3c0389598fef1a83350821d4fdeef712" category="list-text">快速克隆用於開發、測試環境或其他用例的主資料庫</block>
  <block id="de98fb1438e12380191eaa97d6c6b90d" category="paragraph">此解決方案適用於以下受眾：</block>
  <block id="d187540921045cfa569cefc03bc2d168" category="list-text">管理在Azure NetApp Files儲存上執行的 Oracle 資料庫的 DBA</block>
  <block id="bd1e27892a57409e18119bb2e541f4b1" category="list-text">對在 Azure 中測試 Oracle 資料庫備份、還原和克隆感興趣的解決方案架構師</block>
  <block id="42f6ca06d2c7da03707222828f8997d0" category="list-text">支援和管理Azure NetApp Files儲存的儲存管理員</block>
  <block id="94afe08a60e7f6e3a5a129eb73659899" category="list-text">擁有部署到Azure NetApp Files儲存體和 Azure VM 的應用程式的應用程式擁有者</block>
  <block id="8b610eaf828fa120f2c2b10c15be044b" category="paragraph">此解決方案的測試和驗證是在實驗室環境中進行的，可能與最終部署環境不符。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="f11ac801004d872ca260befe72ccef06" category="inline-image-macro">此圖提供了BlueXP控制台內應用程式的BlueXP backup and recovery的詳細圖片，包括其管理的 UI、連接器和資源。</block>
  <block id="26857de22d338fb1ce363971beede582" category="paragraph"><block ref="26857de22d338fb1ce363971beede582" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cbe02f66cac21399f800de4cd1e8fe3b" category="paragraph">此圖提供了BlueXP控制台內應用程式的BlueXP backup and recovery的詳細圖片，包括 UI、連接器及其管理的資源。</block>
  <block id="55ee60e84e278b25241f6d746cda7b4c" category="cell">Azure NetApp Files儲存</block>
  <block id="2b5527ea942b29b10a9a691160f3137b" category="cell">高級服務級別</block>
  <block id="d8e8e079bcd8fa97afc26513da9e1110" category="cell">自動QoS類型，測試中儲存容量為4TB</block>
  <block id="4c791dd8c709f803e2c279029455d4da" category="cell">用於計算的 Azure 實例</block>
  <block id="d82c3df85e2512cdff298dd446d58313" category="cell">部署了兩個實例，一個作為主資料庫伺服器，另一個作為克隆資料庫伺服器</block>
  <block id="985045c742c1926df0960f2e40377fde" category="cell">Red Hat Enterprise Linux 8.7（LVM）-x64 Gen2</block>
  <block id="ca6c2c8fbdec80fdc9c7b41d5742dec2" category="cell">版本 v2.5.0-2822</block>
  <block id="d22bbe9a49e393259ebd1a700f02c6fb" category="cell">代理版本 v2.5.0-2822</block>
  <block id="f6b9199115e06b52287c2e656c7170b7" category="list-text">*連接器將部署在與資料庫和Azure NetApp Files相同的虛擬網路/子網路中。 *如果可能，連接器應部署在相同的 Azure 虛擬網路和資源群組中，以便能夠連接到Azure NetApp Files儲存和 Azure 運算實例。</block>
  <block id="4275ae61422c34253a59329bd20a0449" category="inline-link-macro">設定 Azure 權限</block>
  <block id="a2c89159a457c3034a118e2f5ec42ea8" category="list-text">*在 Azure 入口網站上為SnapCenter連接器建立的 Azure 使用者帳戶或 Active Directory 服務主體。 *部署BlueXP連接器需要特定權限來建立和設定虛擬機器及其他運算資源、設定網路以及取得 Azure 訂閱的存取權限。它還需要權限以便稍後創建連接器要操作的角色和權限。在 Azure 中建立具有權限的自訂角色並指派給使用者帳戶或服務原則。請查看以下連結以了解詳細資訊：<block ref="b49637e40777f5433f5c24dbb998f3cf" category="inline-link-macro-rx"></block> 。</block>
  <block id="448ffe9dc9c373b8324c69a8af97c086" category="list-text">*在 Azure 資源組中建立的 ssh 金鑰對。 *  ssh 金鑰對指派給 Azure VM 用戶，用於登入連接器主機，並指派給資料庫 VM 主機，用於部署和執行外掛程式。 BlueXPBlueXPUI 使用 ssh 金鑰將SnapCenter服務外掛程式部署到資料庫主機，以實現一步式外掛程式安裝和應用程式主機資料庫發現。</block>
  <block id="68c6f0e24ad67438a9793997e4148b4a" category="list-text">*已將憑證新增至BlueXP控制台設定。 *若要將Azure NetApp Files儲存加入到BlueXP工作環境，需要在BlueXP控制台設定中設定授予從BlueXP控制台存取Azure NetApp Files 的權限的憑證。</block>
  <block id="7076747996fba0bd3dae4b26df9e5b81" category="list-text">*java-11-openjdk 安裝在 Azure VM 資料庫實例主機上。 * SnapCenter服務安裝需要 Java 版本 11。在嘗試部署插件之前，需要在應用程式主機上安裝它。</block>
  <block id="c9643c7018a32634bcea72e6f9a9b01c" category="paragraph">NetApp擁有大量內容更豐富的文檔，可協助您保護雲端原生應用程式資料。本文檔的目標是提供逐步流程，涵蓋使用BlueXP控制台部署SnapCenter服務，以保護部署在Azure NetApp Files儲存和 Azure 運算實例上的 Oracle 資料庫。</block>
  <block id="20c4c0cc24d7fc086bd9c72220d4827f" category="paragraph">首先，請完成以下步驟：</block>
  <block id="eb5668f5c3459c84cc715cf197e7c91a" category="inline-link-macro">保護您的雲端原生應用程式數據</block>
  <block id="9e5915c4d38dc3c29af322b9d02d5b8d" category="list-text">閱讀一般說明<block ref="4a82485e6c558a94a8e73b73116d1bce" category="inline-link-macro-rx"></block>以及與 Oracle 和Azure NetApp Files相關的部分。</block>
  <block id="ce953d67aae97c7fc7524432a6090e33" category="list-text">觀看以下影片示範</block>
  <block id="96410c05710545cd17f642c52cfd8867" category="video-title">Oracle 和 ANF 部署視頻</block>
  <block id="80478dbd4349cfca50f458d912a95795" category="section-title">SnapCenter服務部署的先決條件</block>
  <block id="1aa4f0058fb883a083f057768fa6878f" category="list-text">Azure VM 執行個體上的主 Oracle 資料庫伺服器，其中已完全部署並正在執行 Oracle 資料庫。</block>
  <block id="9c1e7cfdc38dedc2e99c928ece55f763" category="list-text">在 Azure 中部署的Azure NetApp Files儲存服務容量池，其容量可滿足硬體元件部分所列的資料庫儲存需求。</block>
  <block id="400fbf8e332fd888d81e51801a0c2cc4" category="list-text">Azure VM 執行個體上的輔助資料庫伺服器，可用於測試將 Oracle 資料庫複製到備用主機，以支援開發/測試工作負載或任何需要生產 Oracle 資料庫完整資料集的用例。</block>
  <block id="3ada7886f4bfea6ef925116fa1e9d3a2" category="list-text">有關Azure NetApp Files和 Azure 計算實例上的 Oracle 資料庫部署的其他信息，請參閱<block ref="87519c89a986d65c2f08fecd9e87563f" category="inline-link-macro-rx"></block>。</block>
  <block id="b8b1139d652a0eeb20f8d04852ac0ff4" category="section-title">加入BlueXP 的準備</block>
  <block id="87d337785ad5798c5ccb41300628991a" category="list-text">使用連結<block ref="f796c57cbc184209dde3e35268bc382f" category="inline-link-macro-rx"></block>註冊BlueXP控制台存取。</block>
  <block id="b6ae4eb3df8e4641d8de2566803478d7" category="list-text">建立 Azure 使用者帳戶或 Active Directory 服務主體，並在 Azure 入口網站中授予角色權限以進行 Azure 連接器部署。</block>
  <block id="81ec66aa59e6b366dbe7a76be739caf3" category="list-text">若要設定BlueXP來管理 Azure 資源，請新增BlueXP憑證，其中包含BlueXP可用於向 Azure Active Directory（應用程式用戶端 ID）進行驗證的 Active Directory 服務主體的詳細資訊、服務主體應用程式的用戶端機密（用戶端機密）以及您的組織的 Active Directory ID（租用戶 ID）。</block>
  <block id="15c84c91cca87e33136482d747da05a0" category="list-text">您還需要 Azure 虛擬網路、資源群組、安全性群組、用於 VM 存取的 SSH 金鑰等，以便為連接器設定和資料庫外掛程式安裝做好準備。</block>
  <block id="43e23d889dea00cd09a68857a66540a2" category="section-title">為SnapCenter服務部署連接器</block>
  <block id="ab08177e4206526be72dbdc84ee2ea8e" category="list-text">登入BlueXP控制台。</block>
  <block id="0cbdd4f6affab5037fdf9f209cc9c3a6" category="paragraph"><block ref="0cbdd4f6affab5037fdf9f209cc9c3a6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b68454c1eb2120854c603f290cc17fda" category="list-text">按一下「*連接器*」下拉箭頭和「*新增連接器*」以啟動連接器設定工作流程。</block>
  <block id="5822f4e2d21ff1df830bd1fd9564688d" category="paragraph"><block ref="5822f4e2d21ff1df830bd1fd9564688d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e810044bd3b9f9b02ca265b4d3eebe93" category="list-text">選擇您的雲端提供者（在本例中為*Microsoft Azure*）。</block>
  <block id="c45be448ec85e60d33dd361b175651c2" category="paragraph"><block ref="c45be448ec85e60d33dd361b175651c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="047b152c8199802dac7e7e1ed26059ed" category="list-text">如果您已在 Azure 帳戶中設定了*權限*、*身份驗證*和*網路*步驟，請跳過這些步驟。如果沒有，您必須先配置這些才能繼續。從這裡，您還可以檢索上一節中引用的 Azure 策略的權限“<block ref="2204dd011c923b13eaa19e758c798231" category="inline-xref-macro-rx"></block> “</block>
  <block id="99e14f7699280eab49fc6e5e02042d24" category="paragraph"><block ref="99e14f7699280eab49fc6e5e02042d24" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e5bb415e11f78e565d29b6276832d292" category="list-text">按一下「*跳至部署*」來設定您的連接器「*虛擬機器驗證*」。將您在加入BlueXP準備期間在 Azure 資源組中建立的 SSH 金鑰對新增至連接器作業系統驗證。</block>
  <block id="b495a7280ed7e3158d73021a45c65ec4" category="paragraph"><block ref="b495a7280ed7e3158d73021a45c65ec4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d5895de98f1a29d1e51aec000e336a8" category="list-text">為連接器執行個體提供名稱，選擇*建立*並接受*詳細資料*下的預設*角色名稱*，然後選擇 Azure 帳戶的訂閱。</block>
  <block id="787023b324c189f4d96cebeb90c2ddd8" category="paragraph"><block ref="787023b324c189f4d96cebeb90c2ddd8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f92ddd8d0b54f5b5292875e85830a9e" category="list-text">使用適當的 *VNet*、*Subnet* 設定網絡，並停用 *Public IP*，但請確保連接器在您的 Azure 環境中具有互聯網存取權限。</block>
  <block id="d480a764511a0d80c029921c1cfe58d7" category="paragraph"><block ref="d480a764511a0d80c029921c1cfe58d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="46eaff1ae08db28efc06b6f93a0d936f" category="list-text">為允許 HTTP、HTTPS 和 SSH 存取的連接器設定*安全群組*。</block>
  <block id="e1c11e927f550277f01f81927662d556" category="paragraph"><block ref="e1c11e927f550277f01f81927662d556" category="inline-image-macro-rx" type="image"></block></block>
  <block id="83b7e5528d645d061628677d96552818" category="list-text">查看摘要頁面並點擊“*新增*”以開始建立連接器。部署完成一般需10分鐘左右。完成後，連接器執行個體 VM 會出現在 Azure 入口網站中。</block>
  <block id="18b3d1323f9cf21b0cd62911affeda5c" category="paragraph"><block ref="18b3d1323f9cf21b0cd62911affeda5c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="055717b8b2a845f9fe90ecae965b1feb" category="list-text">連接器部署後，新建立的連接器將出現在「*連接器*」下拉式功能表下。</block>
  <block id="e45c67c2fabc5203448e017545fff2c4" category="paragraph"><block ref="e45c67c2fabc5203448e017545fff2c4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8de7e309885d21366a248cc336a9b9f" category="section-title">在BlueXP中定義用於存取 Azure 資源的憑證</block>
  <block id="c60c5069d027433cec0a8d7858d4cf82" category="list-text">點選BlueXP控制台右上角的設定圖示開啟 *帳戶憑證* 頁面，點選 *新增憑證* 開始憑證設定工作流程。</block>
  <block id="584c508a139fd2cc138a954c407113a7" category="paragraph"><block ref="584c508a139fd2cc138a954c407113a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="92a4163561d0ead1f38efbf8eb4b7404" category="list-text">選擇憑證位置為 - *Microsoft Azure - BlueXP*。</block>
  <block id="c2b8e1d04d9cb9e8942a8e67bcc06777" category="paragraph"><block ref="c2b8e1d04d9cb9e8942a8e67bcc06777" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a7fd310fb0430315594373f0dfbb1417" category="list-text">使用適當的 *客戶端金鑰*、*客戶端 ID* 和 *租用戶 ID* 定義 Azure 憑證，這些憑證應該在先前的BlueXP入職過程中收集。</block>
  <block id="d29a0cf18a4736fe0d1e1452f74347f2" category="paragraph"><block ref="d29a0cf18a4736fe0d1e1452f74347f2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c88e4920161ccc0d0ba4bd132e4631ee" category="list-text">審查並*添加*。<block ref="fab53fce8ecc2aab6221f1b4c4ea3322" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5ae99842103cb5be866b8e69f0419936" category="list-text">您可能還需要將*市場訂閱*與憑證關聯起來。<block ref="d69ea63a3a456ddd332b56a1c3f892f9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bb46d1e3b94fe670b59ad65582cc45d9" category="section-title">SnapCenter服務設定</block>
  <block id="515410530ff315add6baa9b8fec25661" category="paragraph">配置 Azure 憑證後，現在可以依照下列步驟設定SnapCenter服務：</block>
  <block id="dda049d95317fa5a13b47acbe45fde94" category="list-text">返回 Canvas 頁面，從 *我的工作環境* 點擊 *新增工作環境* 以發現部署在 Azure 中的Azure NetApp Files。</block>
  <block id="43f02e4067dfce17c2cca62c84f3e481" category="list-text">選擇*Microsoft Azure*作為位置並點擊*發現*。</block>
  <block id="8d31ffb5d4531a6681adb9a1304342f6" category="paragraph"><block ref="8d31ffb5d4531a6681adb9a1304342f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="81999498d9ff326372c05514e6c0f430" category="list-text">命名為*工作環境*並選擇上一節中建立的*憑證名稱*，然後按一下*繼續*。</block>
  <block id="755a398e8e64390776dfae4ac5951fb2" category="paragraph"><block ref="755a398e8e64390776dfae4ac5951fb2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bc2004ebba5da01423dc17da06b98ec5" category="list-text">BlueXP控制台回到 *我的工作環境*，並發現 Azure 中的Azure NetApp Files現在出現在 *Canvas* 上。</block>
  <block id="6b094653fe5ce010c56b23f62dc93359" category="paragraph"><block ref="6b094653fe5ce010c56b23f62dc93359" category="inline-image-macro-rx" type="image"></block></block>
  <block id="adc19ffc08c8bfc67e1ce0cfd3eaee91" category="list-text">按一下 * Azure NetApp Files* 圖標，然後按一下 * 進入工作環境 * 以查看部署在Azure NetApp Files儲存中的 Oracle 資料庫磁碟區。</block>
  <block id="5aa571bb9d70acb246b372f9fa001a7b" category="paragraph"><block ref="5aa571bb9d70acb246b372f9fa001a7b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="04353f9112bb1b7ff1621abd8ff0ef5b" category="list-text">從控制台左側邊欄，將滑鼠懸停在保護圖示上，然後點擊*保護*&gt;*應用程式*以開啟應用程式啟動頁面。點擊“發現應用程式”。</block>
  <block id="265641b1d8e46cb9d360c17e5d1d7134" category="paragraph"><block ref="265641b1d8e46cb9d360c17e5d1d7134" category="inline-image-macro-rx" type="image"></block></block>
  <block id="598fd5b506ddf6b5a73368a488fa16c0" category="list-text">選擇“Cloud Native”作為應用程式來源類型。</block>
  <block id="cf695d460f15654867aa6a0ee09bb83c" category="paragraph"><block ref="cf695d460f15654867aa6a0ee09bb83c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="627521257f072e1e0bb18ed662aab17a" category="list-text">選擇應用程式類型*Oracle*，點擊*下一步*開啟主機詳細資料頁面。</block>
  <block id="60f47e40ed33ae9173f55c6989715b7b" category="paragraph"><block ref="60f47e40ed33ae9173f55c6989715b7b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0c26490521d58cef4fc131db2e81a94e" category="list-text">選擇*使用 SSH*並提供 Oracle Azure VM 詳細信息，例如*IP 位址*、*連接器*、Azure VM 管理*使用者名稱*（例如 azureuser）。按一下「*新增 SSH 私密金鑰*」以貼上用於部署 Oracle Azure VM 的 SSH 金鑰對。系統也會提示您確認指紋。</block>
  <block id="8a07233d0a8be5be1fa13beccf60ffe1" category="paragraph"><block ref="9b0ba5823ee0aeeaf801e979ce4d658e" category="inline-image-macro-rx" type="image"></block> <block ref="13cec39c1b2eb365dfe8f40ad64fd59a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c6e130fb96d37b0095d24d5358f21e4b" category="list-text">前往下一個*配置*頁面以在 Oracle Azure VM 上設定 sudoer 存取。</block>
  <block id="1acf04c446da45b9c3273f92182f5326" category="paragraph"><block ref="1acf04c446da45b9c3273f92182f5326" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ee8d75911c779ac7019740198b8f107" category="list-text">查看並按一下「發現應用程式」以在 Oracle Azure VM 上安裝插件並一步發現 VM 上的 Oracle 資料庫。</block>
  <block id="8cf270f4ac64dcac2646ed937d147733" category="paragraph"><block ref="8cf270f4ac64dcac2646ed937d147733" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e32c1f544cd9b2d6fdfd7c81e67e8d4" category="list-text">Azure VM 上發現的 Oracle 資料庫被加入到“*應用程式*”，“*應用程式*”頁面列出了環境中的主機和 Oracle 資料庫的數量。資料庫*保護狀態*最初顯示為*不受保護*。</block>
  <block id="f4e3bfdca62706ac2612870e2962a7d6" category="paragraph"><block ref="f4e3bfdca62706ac2612870e2962a7d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9958dec2bab238d2e917ab477e6687a5" category="paragraph">這完成了 Oracle 的SnapCenter服務的初始設定。本文檔接下來的三節介紹 Oracle 資料庫的備份、復原和複製作業。</block>
  <block id="7f7c0dda9cb78e17432e91abc3c9a290" category="section-title">Oracle資料庫備份</block>
  <block id="91992eeb76f243096a177a51576aa930" category="list-text">我們在 Azure VM 中測試的 Oracle 資料庫配置了三個卷，總儲存量約為 1.6 TiB。這提供了有關此大小的資料庫的快照備份、還原和克隆的時間背景。</block>
  <block id="5a3f2aba9cdc20567fc4f7d91f0f39d2" category="list-text">若要保護資料庫，請按一下資料庫*保護狀態*旁的三個點，然後按一下*指派原則*以查看可套用於 Oracle 資料庫的預設預先載入或使用者定義的資料庫保護策略。在*設定* - *策略*下，您可以選擇建立自己的策略，並自訂備份頻率和備份資料保留視窗。</block>
  <block id="a668fbeb3ee9def0beed3023a4342c96" category="paragraph"><block ref="a668fbeb3ee9def0beed3023a4342c96" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b87d60fc36851d813026dccde8a103ae" category="list-text">當您對策略配置感到滿意時，您可以*分配*您選擇的策略來保護資料庫。</block>
  <block id="5b29983ad2edf0e4bd8b244c2718b53f" category="paragraph"><block ref="5b29983ad2edf0e4bd8b244c2718b53f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31db12a4d1827bab87af3a7cf14c8c46" category="list-text">套用原則後，資料庫保護狀態變成*受保護*，並有綠色複選標記。 BlueXP根據定義的計畫執行快照備份。此外，您可以從如下所示的三點下拉選單中取得*按需備份*。</block>
  <block id="c25906d6ebf774f077637de8e2739961" category="paragraph"><block ref="c25906d6ebf774f077637de8e2739961" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b344283baf9e89aa98e1a9aa97568974" category="list-text">從*作業監控*標籤中，可以查看備份作業的詳細資訊。我們的測試結果顯示，備份一個約 1.6 TiB 的 Oracle 資料庫大約需要 4 分鐘。</block>
  <block id="955ede1fc6cbf43ce42d718c394d67a6" category="paragraph"><block ref="955ede1fc6cbf43ce42d718c394d67a6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="99abbb4565ab40d4f0845ba2bb23b66e" category="list-text">從三點下拉選單*查看詳細資料*中，您可以查看從快照備份建立的備份集。</block>
  <block id="cb210f231abf4b4bf7e77156c6d9af06" category="paragraph"><block ref="cb210f231abf4b4bf7e77156c6d9af06" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c00d75f1dfb37464bcc7247839c2b868" category="list-text">資料庫備份詳細資訊包括*備份名稱*、*備份類型*、*SCN*、*RMAN 目錄*和*備份時間*。備份集包含資料捲和日誌卷分別的應用程式一致的快照。日誌卷快照在資料庫資料卷快照之後立即發生。如果您正在備份清單中尋找特定的備份，您可以套用篩選器。</block>
  <block id="df2e437a1565f3512ccc0e3132f5f98a" category="paragraph"><block ref="df2e437a1565f3512ccc0e3132f5f98a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8fd0ba63e6574c7326fb2e810b4537e0" category="section-title">Oracle 資料庫還原與復原</block>
  <block id="da619d6941ecdd2c7e548d9654a841ef" category="list-text">對於資料庫還原，請按一下「*應用程式*」中要還原的特定資料庫的三點下拉式選單，然後按一下「*還原*」以啟動資料庫還原和復原工作流程。</block>
  <block id="eca636f2206f98ef29538e7f3b06e1d6" category="paragraph"><block ref="eca636f2206f98ef29538e7f3b06e1d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7a6466f8754f254181618465d6d07095" category="list-text">透過時間戳選擇您的*還原點*。清單中的每個時間戳代表一個可用的資料庫備份集。</block>
  <block id="263de3e09efd5458da895268dcfe76a5" category="paragraph"><block ref="263de3e09efd5458da895268dcfe76a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a8bc1a0adc65e8e1943672063a060cff" category="list-text">選擇您的*復原位置*到*原始位置*以進行 Oracle 資料庫的就地復原和復原。</block>
  <block id="e0c6ed935f81f3da2748f0152eb3f771" category="paragraph"><block ref="e0c6ed935f81f3da2748f0152eb3f771" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2ac50fae413c6d5e5094eae408e73538" category="list-text">定義您的*恢復範圍*和*恢復範圍*。所有日誌意味著包括當前日誌在內的最新完整復原。</block>
  <block id="b82a2c64293a9f980e828f7f75d47c22" category="paragraph"><block ref="b82a2c64293a9f980e828f7f75d47c22" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8ac2cb8dff52fa25ab3c4179d23af060" category="list-text">審查並*恢復*以開始資料庫復原和復原。</block>
  <block id="c44963e6d282a11303fe43325b58cc36" category="paragraph"><block ref="c44963e6d282a11303fe43325b58cc36" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93c57cdfffd8f5678e2781396b8052ee" category="list-text">從「作業監控」標籤中，我們觀察到運行完整的資料庫還原和復原需要 2 分鐘。</block>
  <block id="c4c7ae5c5def1bdf078062bbebc8d763" category="paragraph"><block ref="c4c7ae5c5def1bdf078062bbebc8d763" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9dc2f50af584776a2ecc51a0ebcdded2" category="section-title">Oracle 資料庫克隆</block>
  <block id="10f67c792b4c3a171ec4459316640f04" category="paragraph">資料庫克隆過程與還原類似，但要使用預先安裝和配置了相同 Oracle 軟體堆疊的備用 Azure VM。</block>
  <block id="0a726ae819aa445c83a06d6c6b45248d" category="admonition">確保 Azure NetApp檔案儲存具有足夠的容量，可以容納與要複製的主資料庫大小相同的克隆資料庫。備用 Azure VM 已新增至 *應用程式*。</block>
  <block id="78984c1b4316df6a6010d6cb1420883b" category="list-text">按一下「*應用程式*」中要複製的特定資料庫的三點下拉式選單，然後按一下「*復原*」以啟動複製工作流程。</block>
  <block id="65caff5ab87f1c10a087061e4939f8b9" category="paragraph"><block ref="65caff5ab87f1c10a087061e4939f8b9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c81741abd46b5657b1b137ad6b08c60d" category="list-text">選擇*還原點*並檢查*還原到備用位置*。</block>
  <block id="a0841efea10f00b9bbc3f509848fae54" category="paragraph"><block ref="a0841efea10f00b9bbc3f509848fae54" category="inline-image-macro-rx" type="image"></block></block>
  <block id="821f3d32c228cdb4c83894cf7f22f5bc" category="list-text">在下一個*設定*頁面中，設定備用*主機*、新資料庫*SID*和*Oracle Home*，如在備用 Azure VM 上配置的那樣。</block>
  <block id="f58306559405e420a708a23c68e3404a" category="paragraph"><block ref="f58306559405e420a708a23c68e3404a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76241d79c5d5f01636b403e2ed5ec804" category="list-text">審查*常規*頁面顯示克隆資料庫的詳細信息，例如 SID、備用主機、資料檔案位置、復原範圍等。</block>
  <block id="919457baf5bc69e697038268ff748687" category="paragraph"><block ref="919457baf5bc69e697038268ff748687" category="inline-image-macro-rx" type="image"></block></block>
  <block id="43b6971c27d0d503f52ec88935ec1382" category="list-text">審查*資料庫參數*頁面顯示克隆資料庫配置的詳細資訊以及一些資料庫參數設定。</block>
  <block id="265af2d53b98a4c429f58239ed335d01" category="paragraph"><block ref="265af2d53b98a4c429f58239ed335d01" category="inline-image-macro-rx" type="image"></block></block>
  <block id="62dc32438ca73d555756784b39f074d2" category="list-text">從*作業監控*標籤監控複製作業狀態，我們觀察到複製 1.6 TiB Oracle 資料庫需要 8 分鐘。</block>
  <block id="ee4b933cf91fbaaac40195ecc0d8a4ac" category="paragraph"><block ref="ee4b933cf91fbaaac40195ecc0d8a4ac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d3c33cefae6ca0544ea18f72546fa955" category="list-text">在BlueXP *應用程式* 頁面中驗證克隆的資料庫，該頁面顯示克隆的資料庫已立即在BlueXP中註冊。</block>
  <block id="1189e171398f74969e379450b83800f8" category="paragraph"><block ref="1189e171398f74969e379450b83800f8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c63639ec48ac9f3ed5e3bd19cb501647" category="list-text">驗證 Oracle Azure VM 上的克隆資料庫，顯示克隆資料庫如預期運作。</block>
  <block id="75ead5c1986187bca2c28b0d7c9c99e8" category="paragraph"><block ref="75ead5c1986187bca2c28b0d7c9c99e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dc555bae6dace1d6d3b409d213670af3" category="paragraph">這完成了使用SnapCenter服務透過NetApp BlueXP控制台在 Azure 中備份、還原和克隆 Oracle 資料庫的示範。</block>
  <block id="0f68b904e33d9ac04605aecc958bcf52" category="section-title">附加資訊</block>
  <block id="f12aeeed0f164c86af69a57fddb01689" category="list-text">設定和管理BlueXP</block>
  <block id="74e12c8bec754bf4a9feb44c8cada2dc" category="inline-link-macro"><block ref="74e12c8bec754bf4a9feb44c8cada2dc" category="inline-link-rx"></block></block>
  <block id="7656afc87b0bcecbad9c778ab6b4a2a5" category="paragraph"><block ref="7656afc87b0bcecbad9c778ab6b4a2a5" category="inline-link-macro-rx"></block></block>
  <block id="c756b6b1ba6b752239a8d49eda5ad2a4" category="list-text">BlueXP backup and recovery文檔</block>
  <block id="ed133d2d4bade971a41aae35897a0bd2" category="inline-link-macro"><block ref="ed133d2d4bade971a41aae35897a0bd2" category="inline-link-rx"></block></block>
  <block id="21af149e524c5f7a8eb5e23197309e60" category="paragraph"><block ref="21af149e524c5f7a8eb5e23197309e60" category="inline-link-macro-rx"></block></block>
  <block id="27e1212a42107cfc0301ede49e34c2b6" category="list-text">Azure 入門</block>
  <block id="1835dca082bed53483a7a062cc1bc8d0" category="inline-link-macro"><block ref="1835dca082bed53483a7a062cc1bc8d0" category="inline-link-rx"></block></block>
  <block id="a35f1c37303f15b458dc1914b868ff3f" category="paragraph"><block ref="a35f1c37303f15b458dc1914b868ff3f" category="inline-link-macro-rx"></block></block>
  <block id="200ceef64376fb4963e417594c2660f0" category="summary">此解決方案提供了使用 Azure 雲端中的BlueXP控制台使用NetApp SnapCenter SaaS 進行 Oracle 資料庫備份、復原和複製的概述和詳細資訊。</block>
  <block id="698740e9ee6a7bf04119b53400b8b9a7" category="doc">TR-4964：使用SnapCenter服務備份、還原和克隆 Oracle 資料庫 - AWS</block>
  <block id="3bc3588fd9f44812f3a183ebc0fe8242" category="paragraph">此解決方案提供了使用 Azure 雲端中的BlueXP控制台使用NetApp SnapCenter SaaS 進行 Oracle 資料庫備份、復原和複製的概述和詳細資訊。</block>
  <block id="8ae5c33b293249b4befae60cdc1d6364" category="paragraph">SnapCenter Services 是經典SnapCenter資料庫管理 UI 工具的 SaaS 版本，可透過NetApp BlueXP雲端管理控制台使用。它是NetApp雲端備份、資料保護產品的重要組成部分，適用於在NetApp雲端儲存上執行的 Oracle 和 HANA 等資料庫。這項基於 SaaS 的服務簡化了傳統的SnapCenter獨立伺服器部署，該部署通常需要在 Windows 網域環境中執行的 Windows 伺服器。</block>
  <block id="9f870916f2c5933d14c66deba672bb8f" category="paragraph">在本文檔中，我們示範如何設定SnapCenter服務來備份、還原和複製部署到Amazon FSx ONTAP儲存和 EC2 運算執行個體的 Oracle 資料庫。儘管設定和使用起來更容易，但SnapCenter服務提供了舊版SnapCenter UI 工具中可用的關鍵功能。</block>
  <block id="875a52f58bb1105b34b61cb5f82ec4cb" category="list-text">使用快照對Amazon FSx ONTAP中託管的 Oracle 資料庫進行資料庫備份</block>
  <block id="6f2d8b46ec98e47be22d4747b82a02d2" category="list-text">為開發/測試環境或其他用例快速且有效率地複製主資料庫</block>
  <block id="e9675bd3e469e8f65c5972247bd04a0e" category="list-text">管理在Amazon FSx ONTAP儲存上執行的 Oracle 資料庫的 DBA</block>
  <block id="d6e066caa1ab2a9ead96779ac0a95670" category="list-text">有興趣在公有 AWS 雲端中測試 Oracle 資料庫備份、復原和複製的解決方案架構師</block>
  <block id="5c5e736f226bc0963f1984c02bd59f33" category="list-text">支援和管理Amazon FSx ONTAP儲存的儲存管理員</block>
  <block id="d10cce9398d656c266c4ffedee4b085b" category="list-text">擁有部署到Amazon FSx ONTAP儲存的應用程式的應用程式擁有者</block>
  <block id="2eeab2fbb902fda77febfa45cdf75deb" category="paragraph"><block ref="2eeab2fbb902fda77febfa45cdf75deb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f4cd1b0523380b825fa78ec70975a14" category="cell">兩個 EC2 T2 xlarge EC2 實例，一個作為主資料庫伺服器，另一個作為克隆資料庫伺服器</block>
  <block id="86fae68c14c723bf36942c2c83e8a847" category="list-text">*連接器將與資料庫和 FSx 部署在同一個 VPC 中。 *如果可能，連接器應部署在同一個 AWS VPC 中，以便能夠連接到 FSx 儲存和 EC2 運算執行個體。</block>
  <block id="56427e5f1c1f5700ead6c9a9bce7060b" category="list-text">*為SnapCenter連接器建立的 AWS IAM 原則。 * JSON 格式的政策可在詳細的SnapCenter服務文件中找到。當您使用BlueXP控制台啟動連接器部署時，系統也會提示您設定先決條件，並以 JSON 格式提供所需權限的詳細資訊。此政策應指派給擁有連接器的 AWS 使用者帳戶。</block>
  <block id="0c28eaf31a69bb7791a4813ad2b0bcad" category="list-text">*AWS 帳戶存取金鑰和在 AWS 帳戶中建立的 SSH 金鑰對。 * SSH 金鑰對指派給 ec2-user，用於登入連接器主機，然後將資料庫插件部署到 EC2 DB 伺服器主機。存取金鑰授予使用上述 IAM 政策配置所需連接器的權限。</block>
  <block id="5860dbd315496353b9c33ed1628c8d92" category="list-text">*已將憑證新增至BlueXP控制台設定。 *若要將Amazon FSx ONTAP新增至BlueXP工作環境，需要在BlueXP控制台設定中設定授予BlueXP存取Amazon FSx ONTAP 的權限的憑證。</block>
  <block id="74a16f5a2cb515e5359c279dfe53d615" category="list-text">*java-11-openjdk 安裝在 EC2 資料庫執行個體主機上。 * SnapCenter服務安裝需要 Java 版本 11。在嘗試部署插件之前，需要在應用程式主機上安裝它。</block>
  <block id="5c19db900874c5ab0cd22f4e4081f831" category="paragraph">NetApp擁有大量內容更豐富的文檔，可協助您保護雲端原生應用程式資料。本文檔的目標是提供逐步程序，涵蓋使用BlueXP控制台部署SnapCenter服務，以保護部署到Amazon FSx ONTAP和 EC2 運算執行個體的 Oracle 資料庫。本文檔補充了一般說明中可能缺少的某些細節。</block>
  <block id="4a83f58d14ab15e985eab2f73d26659f" category="list-text">閱讀一般說明<block ref="4a82485e6c558a94a8e73b73116d1bce" category="inline-link-macro-rx"></block>以及與 Oracle 和Amazon FSx ONTAP相關的部分。</block>
  <block id="f2f7f5c9af8a75d22b9aca95d23faad9" category="list-text">觀看以下影片示範。</block>
  <block id="dd1d4adbfe73c3cd87fc248a003b05a0" category="video-title">解決方案部署</block>
  <block id="ee260886ab2b6b27905543032620ac6f" category="list-text">EC2 執行個體上的主 Oracle 資料庫伺服器，其中已完全部署並正在執行 Oracle 資料庫。</block>
  <block id="5d946d3b37cf4bbc657e5762bfd2491e" category="list-text">在 AWS 中部署的Amazon FSx ONTAP集群，託管上述資料庫磁碟區。</block>
  <block id="d15621373250f7778b58f1a57646d590" category="list-text">EC2 執行個體上的選用資料庫伺服器，可用於測試將 Oracle 資料庫複製到備用主機，以支援開發/測試工作負載或任何需要生產 Oracle 資料庫完整資料集的用例。</block>
  <block id="db579bb3e1bf17d7e586850eefed39bb" category="list-text">如果您需要協助以滿足在Amazon FSx ONTAP和 EC2 運算執行個體上部署 Oracle 資料庫的上述先決條件，請參閱<block ref="9fe0964775d4e89b8fa0000697106e28" category="inline-link-macro-rx"></block>或白皮書<block ref="e448c29edca53d71511282e59019cb95" category="inline-link-macro-rx"></block></block>
  <block id="905649aa82828b72c7609e32261b6541" category="list-text">登入您的 AWS 帳戶以建立具有適當權限的 IAM 政策，並將該政策指派給將用於BlueXP連接器部署的 AWS 帳戶。</block>
  <block id="9e2d2c1f725377dfd47bb10a092edb06" category="paragraph"><block ref="9e2d2c1f725377dfd47bb10a092edb06" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2f43b4d90aacd2dff66dbba89df8d3e8" category="paragraph">此策略應使用NetApp文件中提供的 JSON 字串進行配置。當啟動連接器設定並提示您指派先決條件權限時，也可以從頁面中擷取 JSON 字串。</block>
  <block id="8a93a46df85bf33efa5d5200b6c4ce06" category="list-text">您還需要 AWS VPC、子網路、安全群組、AWS 使用者帳戶存取金鑰和機密、ec2-user 的 SSH 金鑰等，以準備好連接器設定。</block>
  <block id="04592f11c82d99f55bd84f8036b45389" category="list-text">登入BlueXP控制台。對於共用帳戶，最佳做法是透過點擊 *帳戶* &gt; *管理帳戶* &gt; *工作區* 來新增新的工作區，從而建立單獨的工作區。</block>
  <block id="9c817d87ae36c552433df25f369d56f6" category="paragraph"><block ref="9c817d87ae36c552433df25f369d56f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c47cec29fcf0d8e782f2c91ad12914b4" category="list-text">按一下「*新增連接器*」以啟動連接器設定工作流程。</block>
  <block id="91a013de6f075ef92c9d4ce3606f454c" category="paragraph"><block ref="91a013de6f075ef92c9d4ce3606f454c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6bb78288dc7f5beb506e79a3af8041de" category="list-text">選擇您的雲端提供者（在本例中為*Amazon Web Services*）。</block>
  <block id="9e6221a639f56c05f62c9ded99dabc50" category="paragraph"><block ref="9e6221a639f56c05f62c9ded99dabc50" category="inline-image-macro-rx" type="image"></block></block>
  <block id="06a5177c61e31798acfdd25d766ef121" category="list-text">如果您已經在 AWS 帳戶中設定了*權限*、*身份驗證*和*網路*步驟，請跳過這些步驟。如果沒有，您必須先配置這些才能繼續。從這裡，您還可以檢索上一節中引用的 AWS 策略的權限“<block ref="2204dd011c923b13eaa19e758c798231" category="inline-xref-macro-rx"></block> “</block>
  <block id="144a7bf6e4b78ed80ccc5310a3175b96" category="paragraph"><block ref="144a7bf6e4b78ed80ccc5310a3175b96" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dfaeef102040345b1180ea94f2b0c2ff" category="list-text">使用 *存取金鑰* 和 *金鑰* 輸入您的 AWS 帳戶驗證。</block>
  <block id="dd50e3a02dab7e3acd66b5bdd87bcf06" category="paragraph"><block ref="dd50e3a02dab7e3acd66b5bdd87bcf06" category="inline-image-macro-rx" type="image"></block></block>
  <block id="712e596a90ac38ed31c6d4d55347a559" category="list-text">命名連接器實例並選擇*詳細資料*下的*建立角色*。</block>
  <block id="7f944bfe70957d841a98d0bfef5ae8b8" category="paragraph"><block ref="7f944bfe70957d841a98d0bfef5ae8b8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a8f366d09f3fd92a0239f6862ee9d35e" category="list-text">使用適當的 *VPC*、*Subnet* 和 SSH *Key Pair* 設定網路以進行連接器存取。</block>
  <block id="132addd04cd3d0a22460fe2d8b46b04d" category="paragraph"><block ref="132addd04cd3d0a22460fe2d8b46b04d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2e132860f3a8d1cbe124a67c4b5d67cc" category="list-text">為連接器設定*安全群組*。</block>
  <block id="12c98e3f9c1fc15bdba478eaa446f222" category="paragraph"><block ref="12c98e3f9c1fc15bdba478eaa446f222" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f067570884442aa68da666583a8530cc" category="list-text">查看摘要頁面並點擊“*新增*”以開始建立連接器。部署完成一般需10分鐘左右。完成後，連接器執行個體將出現在 AWS EC2 儀表板中。</block>
  <block id="3a5d3a8eac6b7d7f10fa64c6ed905670" category="paragraph"><block ref="3a5d3a8eac6b7d7f10fa64c6ed905670" category="inline-image-macro-rx" type="image"></block></block>
  <block id="74be0e1339ee168e43642c78894f516c" category="section-title">在BlueXP中定義憑證以存取 AWS 資源</block>
  <block id="e0d8224cb04f8209c7dd255259abe722" category="list-text">首先，從 AWS EC2 控制台，在 *身分和存取管理 (IAM)* 選單 *角色*、*建立角色* 中建立一個角色，以啟動角色建立工作流程。</block>
  <block id="ac27945c5043bbc256b7076402d94d9c" category="paragraph"><block ref="ac27945c5043bbc256b7076402d94d9c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3f70a9b0bcfff938be5c9b967baac38" category="list-text">在*選擇受信任實體*頁面中，選擇*AWS 帳戶*、*另一個 AWS 帳號*，然後貼上BlueXP帳號 ID，該 ID 可從BlueXP控制台擷取。</block>
  <block id="f8a5067f11fb586f430e190923856331" category="paragraph"><block ref="f8a5067f11fb586f430e190923856331" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c29f350fe0ef034c8595e5a9732939b3" category="list-text">透過 fsx 過濾權限策略並將*權限策略*新增至角色。</block>
  <block id="e892d792775a223804619e2ccefd0982" category="paragraph"><block ref="e892d792775a223804619e2ccefd0982" category="inline-image-macro-rx" type="image"></block></block>
  <block id="61a7a81a82f0f1d0520b066c19c3e2a1" category="list-text">在*角色詳情*頁面中，命名角色，新增描述，然後按一下*建立角色*。</block>
  <block id="ce048ed468da61c10cabb548207df10e" category="paragraph"><block ref="ce048ed468da61c10cabb548207df10e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="21b7150d8525df111105dbb7e805e729" category="list-text">返回BlueXP控制台，點選控制台右上角的設定圖示開啟 *帳戶憑證* 頁面，點選 *新增憑證* 啟動憑證設定工作流程。</block>
  <block id="a134163a058f0d807e081a99b22dd935" category="paragraph"><block ref="a134163a058f0d807e081a99b22dd935" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e555a0fd2fff62a47775a52b4b58f3b1" category="list-text">選擇憑證位置為 - *Amazon Web Services - BlueXP*。</block>
  <block id="febd09224960038dd84e9ebf92486500" category="paragraph"><block ref="febd09224960038dd84e9ebf92486500" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2dc9db68323ce54999aefadc7fa6b9bf" category="list-text">使用適當的*角色 ARN*定義 AWS 憑證，可以從上述第一步驟建立的 AWS IAM 角色中檢索。  BlueXP *帳戶 ID*，用於在第一步驟建立 AWS IAM 角色。</block>
  <block id="42aa1d8d21329fe959f7f8de75f142a0" category="paragraph"><block ref="42aa1d8d21329fe959f7f8de75f142a0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="712abba9fa690a0bcf8c85fa106d80c5" category="list-text">審查並*添加*。<block ref="2cbed4ca8b8c1538ee78b3a4aae794da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4f3b4caea09bcee5fb52b1e6e4756a63" category="paragraph">部署連接器並新增憑證後，現在可以按照下列步驟設定SnapCenter服務：</block>
  <block id="3ecf7d7cbb172543fe0f740496cfb9b0" category="list-text">從*我的工作環境*點擊*新增工作環境*以發現部署在 AWS 中的 FSx。</block>
  <block id="f49134cf37d9c85295178385c83794e0" category="paragraph"><block ref="f49134cf37d9c85295178385c83794e0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4daeb16c1a9b1a0d173181068ef06541" category="list-text">選擇*Amazon Web Services*作為位置。</block>
  <block id="6986de4b1e4a1fa939faedf4a6b0ea17" category="paragraph"><block ref="6986de4b1e4a1fa939faedf4a6b0ea17" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bb51de833ca03a249f4885fe70ba6225" category="list-text">按一下 * Amazon FSx ONTAP* 旁的 *發現現有*。</block>
  <block id="b2a9ca88eea55298331d961c3ccc121e" category="paragraph"><block ref="b2a9ca88eea55298331d961c3ccc121e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f6786db8c7bf41a3b431dcdbe1f49520" category="list-text">選擇您在上一節中建立的 *Credentials Name*，以授予BlueXP管理 FSx ONTAP所需的權限。如果您尚未新增憑證，您可以從BlueXP控制台右上角的「設定」功能表中新增。</block>
  <block id="55ada501711ea95913a857d1ea85fc5c" category="paragraph"><block ref="55ada501711ea95913a857d1ea85fc5c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a01598f0f6397c112b45ac564bf14137" category="list-text">選擇部署Amazon FSx ONTAP 的AWS 區域，選擇託管 Oracle 資料庫的 FSx 集群，然後按一下新增。</block>
  <block id="0cda79b1b9779defaa9601607b81fc64" category="paragraph"><block ref="0cda79b1b9779defaa9601607b81fc64" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31407a3229acfa74059052991d399f9d" category="list-text">發現的Amazon FSx ONTAP實例現在出現在工作環境中。</block>
  <block id="d018c4412fae6d277b3d7669a002023b" category="paragraph"><block ref="d018c4412fae6d277b3d7669a002023b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5abed4635dac308091151770538f31f6" category="list-text">您可以使用 fsxadmin 帳戶憑證登入 FSx 叢集。</block>
  <block id="52508b4c18f0dca1b061d364ee571624" category="paragraph"><block ref="52508b4c18f0dca1b061d364ee571624" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b5627a020a262be5583e9e9a66bc4592" category="list-text">登入Amazon FSx ONTAP後，檢查資料庫儲存資訊（例如資料庫磁碟區）。</block>
  <block id="eaafc606281ab05ed5d9eb6835cf017e" category="paragraph"><block ref="eaafc606281ab05ed5d9eb6835cf017e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d66cf0e6cdb8abb33e7b0167faf0c6b2" category="paragraph"><block ref="d66cf0e6cdb8abb33e7b0167faf0c6b2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d731a7d9a334af8231f2950894841f9" category="paragraph"><block ref="8d731a7d9a334af8231f2950894841f9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bfcedcc06ce70b69b0c25371a7b68359" category="list-text">選擇*Oracle*作為應用程式類型。</block>
  <block id="a2e181caa9c8b77b7e8d7522f6e15d45" category="paragraph"><block ref="a2e181caa9c8b77b7e8d7522f6e15d45" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c6ce8aeb69282423f1e8709e9bece6ce" category="list-text">填寫 AWS EC2 Oracle 應用程式主機詳細資訊。選擇*使用 SSH*作為*主機安裝類型*，以進行一步插件安裝和資料庫發現。然後，點擊*新增 SSH 私鑰*。</block>
  <block id="60aced922f1d4dc5629cfb12b5d45914" category="paragraph"><block ref="60aced922f1d4dc5629cfb12b5d45914" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ea41a89df50cac84ab851e6f7730c00d" category="list-text">貼上資料庫 EC2 主機的 ec2-user SSH 金鑰，然後按一下 *驗證* 繼續。</block>
  <block id="cdda006d85b762021def263d2bee3f9b" category="paragraph"><block ref="cdda006d85b762021def263d2bee3f9b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a70359387fcaa0512296895fb4f6a4ae" category="list-text">系統將提示您「驗證指紋」以繼續。</block>
  <block id="71a3a4aab456d55189f44d0816ebb0ac" category="paragraph"><block ref="71a3a4aab456d55189f44d0816ebb0ac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="032b4254e4889aa8b7e197feb31cbc5a" category="list-text">按一下「*下一步*」安裝 Oracle 資料庫外掛程式並發現 EC2 主機上的 Oracle 資料庫。發現的資料庫被加入到*應用程式*。最初發現時，資料庫*保護狀態*顯示為*不受保護*。</block>
  <block id="9ba7a868bfbcd5f0cbd87bedd4cd9518" category="paragraph"><block ref="9ba7a868bfbcd5f0cbd87bedd4cd9518" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d243d925299e4128a453e9d54b57e25d" category="list-text">按一下資料庫*保護狀態*旁邊的三個點，然後按一下*策略*以查看可套用來保護 Oracle 資料庫的預設預先載入資料庫保護策略。</block>
  <block id="a8f47f1d8b77e6a181edf1a736649f50" category="paragraph"><block ref="a8f47f1d8b77e6a181edf1a736649f50" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b95d24dbc11f9b34c6cf18b07dcf3f7" category="list-text">您也可以建立自己的策略，自訂備份頻率和備份資料保留視窗。</block>
  <block id="155791e775944a613a29e1f3ce070b11" category="paragraph"><block ref="155791e775944a613a29e1f3ce070b11" category="inline-image-macro-rx" type="image"></block></block>
  <block id="44fa14fc437558bfdfce0d0ac643d1e2" category="list-text">當您對策略配置感到滿意時，您可以指派您選擇的策略來保護資料庫。</block>
  <block id="683778b7af98207a0f70928f086f27a7" category="paragraph"><block ref="683778b7af98207a0f70928f086f27a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4861abebdaa3d58ada4e621adac79010" category="list-text">選擇要指派給資料庫的策略。</block>
  <block id="0e26253868fb22250c13f6fb84dd23b1" category="paragraph"><block ref="0e26253868fb22250c13f6fb84dd23b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="da1635fa4036afa9fa39c868740e8560" category="list-text">套用原則後，資料庫保護狀態變成*受保護*，並有綠色複選標記。</block>
  <block id="497ec1a307eb39cd1d25a616b5227f3c" category="paragraph"><block ref="497ec1a307eb39cd1d25a616b5227f3c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7474327f9583bb0f2aa4aa276aa11e53" category="list-text">資料庫備份按照預定的時間表運行。您也可以執行一次性按需備份，如下所示。</block>
  <block id="2940056c70a31f5cb7b642861f280bae" category="paragraph"><block ref="2940056c70a31f5cb7b642861f280bae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f7ba3fa48656ab6088ca8f9f4c64578f" category="list-text">可以透過點擊選單清單中的「查看詳細資料」來查看資料庫備份詳細資訊。這包括備份名稱、備份類型、SCN 和備份日期。備份集涵蓋資料捲和日誌卷的快照。日誌卷快照在資料庫磁碟區快照之後立即發生。如果您要在長列表中尋找特定的備份，則可以套用篩選器。</block>
  <block id="a4c193c614b7b601a25b10d44af844f4" category="paragraph"><block ref="a4c193c614b7b601a25b10d44af844f4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d747acf93ee8abac3afd574a32b975fe" category="list-text">對於資料庫恢復，請選擇正確的備份，可以透過 SCN 或備份時間。按一下資料庫資料備份中的三個點，然後按一下*還原*以啟動資料庫復原和復原。</block>
  <block id="64af0d7f2b5cd42bdfbe0dafd5de301a" category="paragraph"><block ref="64af0d7f2b5cd42bdfbe0dafd5de301a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4ced09bd050d5fa98df8a41ef04173e0" category="list-text">選擇您的恢復設定。如果您確定備份後實體資料庫結構沒有任何變更（例如新增了資料檔案或磁碟組），則可以使用*強制就地還原*選項，這通常速度更快。否則，請不要選取此方塊。</block>
  <block id="393085e74500064736f2084487ad8085" category="paragraph"><block ref="393085e74500064736f2084487ad8085" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d58c0a59c722f81b5e2d0f77ffc4e126" category="list-text">審查並開始資料庫還原和復原。</block>
  <block id="01716ed26147b8c9edc54ca43b870e3d" category="paragraph"><block ref="01716ed26147b8c9edc54ca43b870e3d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e370cf26e04645138a40a3379e743fb7" category="list-text">從「作業監控」標籤中，您可以查看還原作業的狀態以及執行時的任何詳細資訊。</block>
  <block id="543c7f1e348fcffb05c8fbb143500608" category="paragraph"><block ref="543c7f1e348fcffb05c8fbb143500608" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4628ff02cd985f6d6a919efa900759ca" category="paragraph"><block ref="4628ff02cd985f6d6a919efa900759ca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="35526fc92bd49edc3a11a0affafeae3b" category="paragraph">若要複製資料庫，請從相同資料庫備份詳細資料頁面啟動複製工作流程。</block>
  <block id="71f8cd32cfa279d796f673879629f671" category="list-text">選擇正確的資料庫備份副本，點擊三個點查看選單，然後選擇*克隆*選項。</block>
  <block id="72cd7574215273a51cc4d60317ce2039" category="paragraph"><block ref="72cd7574215273a51cc4d60317ce2039" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d552bd00a2d8ed3e1872a0f795180b9f" category="list-text">如果您不需要變更任何複製資料庫參數，請選擇「*基本*」選項。</block>
  <block id="69a9b64c3a2d35a09f8e3def7da68c67" category="paragraph"><block ref="69a9b64c3a2d35a09f8e3def7da68c67" category="inline-image-macro-rx" type="image"></block></block>
  <block id="90b931da49f7db8ce97de89c2b7ea8d5" category="list-text">或者，選擇*規範檔案*，它為您提供了下載當前初始化檔案、進行更改然後將其上傳回作業的選項。</block>
  <block id="1874b05f60b78935de303ca836c556a9" category="paragraph"><block ref="1874b05f60b78935de303ca836c556a9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58b9252d48a9fcf8c03ec68f357e943a" category="list-text">審查並啟動該工作。</block>
  <block id="e943133b9f12f3d41661ebcba559e3fb" category="paragraph"><block ref="e943133b9f12f3d41661ebcba559e3fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d388d0f32172ebe7aea2c3eeae0dfc4" category="list-text">從「*作業監控*」標籤監控複製作業狀態。</block>
  <block id="683a283d67f46c0f233c8704ff2b8114" category="paragraph"><block ref="683a283d67f46c0f233c8704ff2b8114" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4e0fb0a8b932b4f05d487ea8a5748901" category="list-text">驗證 EC2 執行個體主機上的克隆資料庫。</block>
  <block id="c180b587fd0c77ff5aafc3b02fd3c7f3" category="paragraph"><block ref="c180b587fd0c77ff5aafc3b02fd3c7f3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bbe91a88c409ff6baf6da643e8e46fd1" category="paragraph"><block ref="bbe91a88c409ff6baf6da643e8e46fd1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d5b9082efbf726d2e38c5042668ae4f0" category="doc">TR-4250：在 UNIX 和 NFS 上使用 Oracle 的 SAP，以及NetApp Clustered Data ONTAP和SnapManager for SAP 3.4</block>
  <block id="bb8cd3f7aec777de29cee988f4ade068" category="paragraph">NetApp的 Nils Bauer</block>
  <block id="ea455e11718ea0bfb200c540f4e0c038" category="paragraph">TR-4250 解決了設計儲存解決方案以使用 Oracle 資料庫支援 SAP 業務套件產品的挑戰。本文檔主要關注使用最新一代 SAP 解決方案的業務和 IT 領導者所面臨的常見儲存基礎架構設計、部署、操作和管理挑戰。本文檔中的建議是通用的；它們並非特定於 SAP 應用程式或 SAP 實施的規模和範圍。  TR-4250 假設讀者對NetApp和 SAP 產品的技術和操作有基本的了解。  TR-4250 是基於NetApp、SAP、Oracle 和我們客戶的技術人員的互動而製定的。</block>
  <block id="fb558936249b78a9b426ac6a575ece20" category="paragraph"><block ref="fb558936249b78a9b426ac6a575ece20" category="inline-link-macro-rx"></block></block>
  <block id="6e170e4c0b9eb50546a09aafc90dc157" category="doc">TR-4794： NetApp EF 系列上的 Oracle 資料庫</block>
  <block id="9b6fc59469e9f5ee36cb85b08daacec3" category="paragraph">Mitch Blackburn、Ebin Kadavy、 NetApp</block>
  <block id="fa8b4902d0c1e464dcf9256a434920ba" category="paragraph">TR-4794 旨在協助儲存管理員和資料庫管理員在NetApp EF 系列儲存上成功部署 Oracle。</block>
  <block id="c6f1106d361e6595d08ff6340c004516" category="paragraph"><block ref="c6f1106d361e6595d08ff6340c004516" category="inline-link-macro-rx"></block></block>
  <block id="fe9155886965f88b4bb029103061156b" category="summary">此解決方案概述並詳細介紹了 VMware Cloud Foundation (VCF) 中的 Oracle 部署和保護，其中 vSphere Virtual Volumes (vVols) 作為主資料庫存儲，Oracle 資料庫採用 Real Application Clusters (RAC) 配置。</block>
  <block id="d04e05cc6f5337608b6ccfaae12a4905" category="doc">TR-4997：使用vVols在 VCF 中部署和保護 Oracle RAC</block>
  <block id="ac91541ff82c6ee76b58150eca1250c7" category="paragraph">VMware vSphere 虛擬磁碟區 (vVols) 是一個 SAN/NAS 管理和整合框架，它將虛擬磁碟作為本機儲存物件公開，並在虛擬磁碟層級支援基於陣列的操作。換句話說， vVols使 SAN/NAS 設備能夠感知虛擬機，並能夠以虛擬機為中心的方式在單一虛擬磁碟的粒度上利用基於陣列的資料服務。 vVols使客戶能夠利用其當前儲存投資的獨特功能，並在不中斷的情況下過渡到針對跨所有儲存類型的虛擬環境優化的更簡單、更有效率的營運模式。</block>
  <block id="77cb41e2baadb036dc6e4ed432367f90" category="inline-link-macro">TR-4996</block>
  <block id="98748e5f5bd3294051d902f505cedb3a" category="paragraph">在<block ref="a7f49ff11d15a9bd315ad584c8aeb5aa" category="inline-link-macro-rx"></block>，我們示範了使用vVols在 VCF 中部署和保護單一實例 Oracle 資料庫。本文檔示範如何在 VMware Cloud Foundation 環境中部署和保護 Oracle RAC 資料庫，並使用vVols作為NetApp ONTAP儲存叢集中的主要資料庫儲存。 Oracle RAC 資料庫的配置就像部署在本機儲存系統上的本機檔案系統一樣。本技術報告重點介紹在 VCF 中為 Oracle RAC 部署建立vVols的步驟。我們也示範了使用NetApp自動化工具包在vVols上的 VCF 中部署 Oracle RAC 資料庫，以及使用NetApp SnapCenter UI 工具進行 RAC 資料庫保護。</block>
  <block id="f21a9288a8dbb6dc5e01f87371a1796f" category="list-text">在 VCF 中部署 Oracle RAC 資料庫，並使用NetApp ONTAP AFF上的vVols資料儲存作為主資料庫存儲</block>
  <block id="eb3a7a665b2ee606d74bf7d4657d5f1e" category="list-text">使用NetApp SnapCenter UI 工具在 VCF 中使用vVols資料儲存區備份和還原 Oracle 資料庫</block>
  <block id="ba926686ab6ce2f50a39841cb91cf855" category="list-text">一位 DBA 希望在 VCF 中部署 Oracle RAC，並使用NetApp ONTAP AFF上的vVols資料儲存作為主資料庫存儲</block>
  <block id="8e1c769a51ea82515d72b8676691e34f" category="list-text">一位資料庫解決方案架構師，希望使用NetApp ONTAP AFF儲存上的vVols資料儲存在 VCF 中測試 Oracle RAC 工作負載</block>
  <block id="f4498db90eae07fa4265e83f899ed7fb" category="list-text">一位儲存管理員希望在NetApp ONTAP AFF儲存上使用vVols資料儲存部署到 VCF 的 Oracle RAC 資料庫並進行管理</block>
  <block id="ea94460ea59d1791e128c063e36a3f19" category="list-text">希望使用 vVol 資料儲存在 VCF 中建立 Oracle RAC 資料庫的應用程式擁有者</block>
  <block id="e433a0f4d7802525d03be3ae89b7a1ff" category="paragraph">此解決方案的測試和驗證是在 VCF 的實驗室環境中進行的，其中vVols資料儲存在NetApp ONTAP AFF儲存上，可能與最終部署環境不符。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="b91e86fc606e025f797c89b8aaa36a3c" category="paragraph"><block ref="b91e86fc606e025f797c89b8aaa36a3c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ad4ac6db8d9decf0eb775290a8c971cb" category="cell">NetApp ONTAP AFF A300</block>
  <block id="e5de8dc14dd3942120c44d5982b5a825" category="cell">版本 9.14.1P4</block>
  <block id="0d4078e1e13a983e4de55aa01e5ad590" category="cell">DS224 磁碟架，配備 24 個 NVMe 磁碟，總容量 35.2 TiB</block>
  <block id="92950a7604605975794d500e05f4c7eb" category="cell">VMware VSphere 集群</block>
  <block id="6e22cffc6ebecbdd7f47bd5d00e45b99" category="cell">版本 8.02</block>
  <block id="bc5d0a2c32203fc25813789555247ee7" category="cell">12 個 CPU x Intel(R) Xeon(R) Gold 5218 CPU @ 2.30GHz，8 個節點（4 個管理域和 4 個工作負載域）</block>
  <block id="c6ab07ee1aab16fa0a20d509cdf7b072" category="cell">託管 Oracle DB 伺服器，部署 RedHat 訂閱進行測試</block>
  <block id="8003cafa06ec27e11cb235ec9544ef74" category="cell">Centos Linux</block>
  <block id="ceebe4fc3acd82fd3188cded15f1d864" category="cell">CentOS Linux 版本 8.5.2111</block>
  <block id="2d33ab49719ed91ddb197340eb32a2db" category="cell">託管 Ansible 控制器</block>
  <block id="f7dc6582169de1adc76cc1bd4479d98f" category="cell">版本 6.0</block>
  <block id="3390e3575b3e341afa2b7172ff5b33a7" category="cell">SnapCenter Plug-in for VMware vSphere</block>
  <block id="0a8382f1a17329bbc921d30dfa2a2515" category="cell">作為 OVA 虛擬機器部署到 vSphere 集群</block>
  <block id="a75e60f152424197f37afc9c5e9a5c2d" category="cell">適用於 VMware vSphere 的ONTAP工具</block>
  <block id="117158dddb508cb9387d41bfdbfe579b" category="cell">版本 9.13</block>
  <block id="5ce8d13929389b81584b3a78c447b524" category="cell">版本 java-11-openjdk-11.0.23.0.9-3.el8.x86_64</block>
  <block id="dd2b4d4faabc0fc80eacfaa74bf5a62d" category="section-title">VCF中的Oracle RAC資料庫配置</block>
  <block id="087c943fce6420f1490d5fc4bb4d400f" category="cell">*RAC 節點*</block>
  <block id="cdd29859f51951ed5dd9535ccabf7075" category="cell">ora01</block>
  <block id="71f37500421f11ce0f41f795e618b625" category="cell">NTAP(NTAP_pdb1,NTAP_pdb2,NTAP_pdb3)</block>
  <block id="2d100c6ae63b5a20bd943bcf20dc9391" category="cell">NetApp ONTAP AFF A300上的vVols資料儲存區（VCF_ORA_BINS、VCF_ORA_CRS、VCF_ORA_DAT1、VCF_ORA_DAT2、VCF_ORA_LOGS）</block>
  <block id="13ea1c308c536ce3317611dcb43ba74f" category="cell">ora02</block>
  <block id="d3d99bd870c856c58acfb8243d399b8b" category="list-text">* vVols到ONTAP集群連線的協定。 * NFS 或 iSCSI 都是不錯的選擇。性能水平相當。在此解決方案示範中，我們使用 iSCSI 作為vVols連接到下劃線ONTAP儲存叢集的儲存協定。如果 VCF 基礎架構支持， NetApp ONTAP上的vVols資料儲存也支援 FC/FCoE、NVMe/FC 協定。</block>
  <block id="18531131659005f729763c4bffd5f157" category="list-text">vVols資料儲存上的 Oracle 儲存佈局。 *在我們的測試和驗證中，我們為 Oracle 二進位檔案、Oracle 叢集註冊表/投票、Oracle 資料和 Oracle 日誌檔案部署了五個vVols資料儲存區。將不同類型的 Oracle 檔案分離到各自的資料儲存體是一種很好的做法，這樣可以輕鬆管理和執行資料庫備份、復原或複製。為大型資料庫建立專用vVols ，並為較小的資料庫或具有類似 QoS 設定檔的資料庫共用vVols 。 </block>
  <block id="406ce3af2ccd70d558c48b5e4f0e9cb5" category="list-text">Oracle 儲存冗餘。使用<block ref="5aaa25223f67673cf29042a34b88e27e" prefix=" " category="inline-code"></block>用於關鍵的 Oracle RAC 叢集註冊表/投票文件，以便三個 ASM 磁碟故障群組上的三個投票文件提供最佳叢集保護，並且叢集註冊表在 ASM 磁碟故障群組之間鏡像。使用<block ref="1f9ad4982cbae9fb459c61ba4e63bac9" prefix=" " category="inline-code"></block>用於 Oracle 二進位檔案、資料檔案和日誌文件，以最佳化儲存使用率。帶下劃線的ONTAP RAID-DP 在以下情況下提供資料保護<block ref="1f9ad4982cbae9fb459c61ba4e63bac9" prefix=" " category="inline-code"></block>受僱。</block>
  <block id="3ed99aa53a2f633957eb421708c54e40" category="list-text">* ONTAP儲存驗證的憑證。 *僅使用ONTAP叢集級憑證進行ONTAP儲存叢集驗證，包括SnapCenter與ONTAP儲存叢集的連線或ONTAP工具與ONTAP儲存叢集的連線。</block>
  <block id="a6d88ee32eb46635dfd1330ee9c755dd" category="list-text">*從vVols資料儲存區到資料庫虛擬機器配置儲存。 *一次只能從vVols資料儲存到資料庫虛擬機器中新增一個磁碟。目前不支援同時從vVols資料儲存新增多個磁碟。  </block>
  <block id="d1d4875856254459ea4c9c715e096d52" category="list-text">*資料庫保護。 *  NetApp提供了用於資料庫備份和復原的SnapCenter software套件，並具有使用者友好的 UI 介面。  NetApp建議實作這樣的管理工具來實現快速的 SnapShot 備份、快速的資料庫還原和復原。</block>
  <block id="3a05b8d15001b422dfd704ad762eb5cc" category="paragraph">以下部分提供了在 Oracle RAC 配置中的NetApp ONTAP儲存上使用vVols資料儲存在 VCF 中部署 Oracle 19c 資料庫的逐步程序。</block>
  <block id="d9bda8b1c18ddbd2b5915f4d86da5ee6" category="inline-link-macro">VMware 雲端基礎文檔</block>
  <block id="a12fb51e6a26df58be980a0d67dc8ef0" category="list-text">VMware VCF 已設定。有關如何建立 VCF 的資訊或說明，請參閱 VMware 文檔<block ref="59168b7ce3f6dbe18036b34793095689" category="inline-link-macro-rx"></block>。</block>
  <block id="79ff58877947942c116cf0b6b10c20e0" category="list-text">在 VCF 工作負載域中配置三個 Linux VM、兩個用於 Oracle RAC 資料庫叢集的 VM 和一個用於 Ansible 控制器的 VM。配置一個 Windows 伺服器 VM 以執行NetApp SnapCenter伺服器。有關設定 Ansible 控制器以自動部署 Oracle 資料庫的信息，請參閱以下資源<block ref="5611d9cfd1946804a6fc54c4e7defca3" category="inline-link-macro-rx"></block>。</block>
  <block id="90d497d59ee5d1ed30bf4e510c2643ac" category="list-text">Oracle RAC 資料庫虛擬機器應該至少配置兩個網路介面 - 一個用於 Oracle RAC 專用互連，一個用於應用程式或公共資料流量。</block>
  <block id="8c3d0c00ea667e3e0723e5cdc6473a09" category="inline-link-macro">SnapCenter Plug-in for VMware vSphere文檔</block>
  <block id="abef732dd483cfddd1aaa364ad7fef69" category="list-text">VMware vSphere 的SnapCenter外掛程式版本 6.0 已在 VCF 中部署。有關插件部署，請參考以下資源：<block ref="b0d40f86037388f17d222087e64d79a3" category="inline-link-macro-rx"></block> 。</block>
  <block id="26ffc687a7267f96a389530199971cd1" category="inline-link-macro">ONTAP tools for VMware vSphere文檔</block>
  <block id="70f233bf52a3a33941dc2ecd693f03ae" category="list-text">VMware vSphere 的ONTAP工具已在 VCF 中部署。有關適用於 VMware vSphere 部署的ONTAP工具，請參閱下列資源：<block ref="124f85081ad68c1408c62c0c72a9a0d0" category="inline-link-macro-rx"></block></block>
  <block id="ba5602a7d83e50db49caf0853dacb46a" category="section-title">建立儲存能力設定檔</block>
  <block id="574f4871a7f478f5bcc72e03eef4a96f" category="paragraph">首先，為託管vVols資料儲存的下劃線ONTAP儲存建立自訂儲存功能設定檔。</block>
  <block id="ffb7e150691b98e078662c7a23f4adbe" category="list-text">從 vSphere 用戶端捷徑開啟NetApp ONTAP工具。確保ONTAP儲存叢集已新增至<block ref="5c6ab1284b6b7a5a7102854a969c99be" prefix=" " category="inline-code"></block>作為ONTAP工具部署的一部分。</block>
  <block id="ce0f28375029ece59ae6afd04718446f" category="inline-image-macro">顯示自訂儲存功能設定檔配置的螢幕截圖。</block>
  <block id="d436681d1ba8c29c46f80b632ee9d35e" category="paragraph"><block ref="9146b6c4dda783e91bff3bed3df79ddb" category="inline-image-macro-rx" type="image"></block> <block ref="923f1b2327c5f0b26b7cfbc2e9c17418" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93b2d42abda9af2775a45e3d82033a4c" category="list-text">點選<block ref="5671a8cbfb87337b09f7c0b3f03c48ec" prefix=" " category="inline-code"></block>為 Oracle 新增自訂設定檔。命名設定檔並新增簡短描述。</block>
  <block id="032d6bcbe3c9911863c15ef1f1e3de32" category="paragraph"><block ref="032d6bcbe3c9911863c15ef1f1e3de32" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f7c1e70b93b043a558fd33a60b2b9a4f" category="list-text">選擇儲存控制器類別：效能、容量或混合。</block>
  <block id="a94a0ff1fbf802792d20f206753a4a32" category="paragraph"><block ref="a94a0ff1fbf802792d20f206753a4a32" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6208541b7c69092d9c6007ae118c5a02" category="list-text">選擇協議。</block>
  <block id="739891b8e01a85a9820bac242051b8a3" category="paragraph"><block ref="739891b8e01a85a9820bac242051b8a3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="40b8327c5adffbb8fd939d1e60225518" category="list-text">如果需要，定義 QoS 策略。</block>
  <block id="b2ab72db8cc86555efabbbd859f38f6d" category="paragraph"><block ref="b2ab72db8cc86555efabbbd859f38f6d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f248abccd937c20eb587021d08cf5665" category="list-text">設定檔的附加儲存屬性。如果您想要具有加密功能，請確保在NetApp控制器上啟用了加密，否則在套用設定檔時可能會導致問題。</block>
  <block id="541454602119f2616b2e52d1437eaa42" category="paragraph"><block ref="541454602119f2616b2e52d1437eaa42" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d8259b9d166c6def0c94e28529b07408" category="list-text">查看摘要並完成儲存能力設定檔的建立。</block>
  <block id="3f190ee140f52ed9a70e98b2160ba070" category="paragraph"><block ref="3f190ee140f52ed9a70e98b2160ba070" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dff98535475eb3bdfc270946dfc29280" category="section-title">建立並配置vVols資料存儲</block>
  <block id="08c0ac84a22cfe0e83d0056cdd1fa92c" category="paragraph">完成先決條件後，透過 vSphere 用戶端以管理員使用者身分登入 VCF，導覽至工作負載網域。不要使用內建 VMware 儲存選項來建立vVols。相反，使用NetApp ONTAP工具來建立vVols。下面示範了建立和配置vVols 的過程。</block>
  <block id="067d6c9f3530bf26b24a96375614a55b" category="list-text">vVols建立工作流程可以從ONTAP工具介面或 VCF 工作負載域叢集觸發。</block>
  <block id="d3e1d44cc16d5e3186aa6459e33c27e4" category="inline-image-macro">顯示vVols資料儲存配置的螢幕截圖。</block>
  <block id="1b17a29e6b887eb0d9ab7f9cb10f0d23" category="paragraph"><block ref="1b17a29e6b887eb0d9ab7f9cb10f0d23" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8b46e4068fac7221bf52e8488be49c68" category="paragraph"><block ref="8b46e4068fac7221bf52e8488be49c68" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5988bd65b90ceb685034d86d3495df44" category="list-text">填寫資料儲存的一般信息，包括配置目標、類型、名稱和協定。</block>
  <block id="d368189b519e970a5a27b306b8f18bd0" category="paragraph"><block ref="d368189b519e970a5a27b306b8f18bd0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8eba6077a8d57ff41f9729a6edb1283e" category="list-text">選擇上一步驟建立的自訂儲存功能設定文件，<block ref="f31303ddb8ada38aed08c2bb8f9d8e6c" prefix=" " category="inline-code"></block> ， 和<block ref="541b6c1ab6b503c34fc7cd5ed7105896" prefix=" " category="inline-code"></block>，要在其中建立vVols 。</block>
  <block id="330ab8276772c395097c58fcd2e16906" category="paragraph"><block ref="330ab8276772c395097c58fcd2e16906" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f8639edb08078b0872af987ffcb3c41a" category="list-text">選擇<block ref="088758c5f1801338b7483d3a2cda15aa" prefix=" " category="inline-code"></block>，填寫磁碟區名稱和大小，然後點擊<block ref="9eeb52badb613229884838847294b90d" prefix=" " category="inline-code"></block>然後<block ref="47559fb833ff58321570e5e877b467f6" prefix=" " category="inline-code"></block>移至摘要頁面。</block>
  <block id="f51d7f6d1bec980f632c3b10651ddbe8" category="paragraph"><block ref="013327d04afd6ea8e9faec4777de31d2" category="inline-image-macro-rx" type="image"></block> <block ref="eef5142ea01c24de90052c34a0ce18ab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6879b520f65a093360e318970237ae41" category="list-text">點選<block ref="a20ddccbb6f808ec42cd66323e6c6061" prefix=" " category="inline-code"></block>為 Oracle 二進位檔案建立vVols資料儲存。</block>
  <block id="13f8e21ff600374db353b1507b9f9f06" category="paragraph"><block ref="13f8e21ff600374db353b1507b9f9f06" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93661ffe65302224a0ead77d9b4edad1" category="list-text">為 Oracle 叢集註冊表或 CRS 建立資料儲存。</block>
  <block id="1c47f3e49fcd620b8a1d29a756da0f5b" category="paragraph"><block ref="1c47f3e49fcd620b8a1d29a756da0f5b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c63205151dd92ee20affd76d5bfb792e" category="admonition">您可以為vVols資料儲存區新增多個卷，或將vVols資料儲存區卷分佈在ONTAP控制器節點之間，以提高效能或實現冗餘。</block>
  <block id="17f1e06e290e3a19906298c1d44152f2" category="list-text">為 Oracle 資料建立資料儲存。理想情況下，在每個ONTAP控制器節點上建立單獨的資料存儲，並使用 Oracle ASM 在控制器節點之間對資料進行條帶化，以最大限度地利用ONTAP儲存叢集容量。</block>
  <block id="0cc1f1380316a9b5fec93a6891981a02" category="paragraph"><block ref="fbc8cc302454a9bf54bf4a602124946d" category="inline-image-macro-rx" type="image"></block> <block ref="6c823f69e41e997eaf09e437dd277eba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09f886aa0490a78c38eebcf984caafb7" category="list-text">為 Oracle 日誌建立資料儲存。鑑於 Oracle 日誌寫入的順序性，最好將其放在單一ONTAP控制器節點上。</block>
  <block id="417e6a6d8788543679526f3590accc7d" category="paragraph"><block ref="417e6a6d8788543679526f3590accc7d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="98485cfae59d0d91d7e5836355cda9f1" category="list-text">部署後驗證 Oracle 資料儲存。</block>
  <block id="6aac64fbe8699f7b2039377a331e6bb7" category="paragraph"><block ref="6aac64fbe8699f7b2039377a331e6bb7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53805fd039c130e4639961665f4d52c7" category="section-title">根據儲存能力設定檔建立虛擬機器儲存策略</block>
  <block id="8597b3e29b3bfd1a6d11508383239d6f" category="paragraph">在將儲存空間從vVols資料儲存配置到資料庫 VM 之前，請根據上一個步驟建立的儲存功能設定檔新增 VM 儲存策略。以下是具體步驟。</block>
  <block id="0cac31d91fd3c9b2951a23b3238222ba" category="list-text">從 vSphere Client 選單打開<block ref="618825ca73695fc2a237f6dcf99e5c27" prefix=" " category="inline-code"></block>並突出顯示<block ref="9f1893d8db5ceaf62726d1a0aa228224" prefix=" " category="inline-code"></block>。點選<block ref="686e697538050e4664636337cc3b834f" prefix=" " category="inline-code"></block>打開<block ref="9f1893d8db5ceaf62726d1a0aa228224" prefix=" " category="inline-code"></block>工作流程。</block>
  <block id="9a6d57df0589e3632c8c0f69749dfbb0" category="inline-image-macro">顯示虛擬機器儲存策略配置的螢幕截圖。</block>
  <block id="e5500d8d9309a538769c9fc3ef496163" category="paragraph"><block ref="e5500d8d9309a538769c9fc3ef496163" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c1b50b4d689fb35a32cefabc42b21c7" category="list-text">命名虛擬機器儲存策略。</block>
  <block id="c0a108e0c5e3b490410317e9ddd118a3" category="paragraph"><block ref="c0a108e0c5e3b490410317e9ddd118a3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="19fbb3187befaa8e7ddf2ee168778b40" category="list-text">在<block ref="e06edd159cb29fd25e7a6b6ca07b5c45" prefix=" " category="inline-code"></block>， 查看<block ref="e4cbdedd5072d1d5bf70b96942a75033" prefix=" " category="inline-code"></block></block>
  <block id="904d383f8fe0b5448083390508155d00" category="paragraph"><block ref="904d383f8fe0b5448083390508155d00" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d1fd9dc94d502a651207949123c63c43" category="list-text">對於NetApp.clustered.Data. ONTAP.VP.vvol 規則<block ref="ae13e51f99f3be623a6d44d7439d9bb5" prefix=" " category="inline-code"></block>，選擇上一步驟建立的自訂儲存容量設定檔。</block>
  <block id="92ca1c06b53a9bf7169d9d37b87c5b78" category="paragraph"><block ref="92ca1c06b53a9bf7169d9d37b87c5b78" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8f6f104c16849aecc74ac68cf09c0c24" category="list-text">對於NetApp.clustered.Data. ONTAP.VP.vvol 規則<block ref="8c340dc334134096f68b880b42a8692c" prefix=" " category="inline-code"></block>， 選擇<block ref="b9f5c797ebbf55adccdd8539a65a0241" prefix=" " category="inline-code"></block>如果vVols未被複製。</block>
  <block id="8165f4626c70c1132ec673e56c7820ce" category="paragraph"><block ref="8165f4626c70c1132ec673e56c7820ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="37da436400640cf811c491c3a99d576c" category="list-text">儲存相容性頁面顯示 VCF 環境中相容的vVols資料儲存。</block>
  <block id="ece101e6dd39ee01ca8d93783001fb96" category="paragraph"><block ref="ece101e6dd39ee01ca8d93783001fb96" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4a923ac6fb99ee5d0fc17211d1c3eec5" category="list-text">審查並完成建立虛擬機器儲存策略。</block>
  <block id="08364e1b880d527123d02990fd16ba05" category="paragraph"><block ref="08364e1b880d527123d02990fd16ba05" category="inline-image-macro-rx" type="image"></block></block>
  <block id="818749afba521c90e53181fd57b26e4f" category="list-text">驗證剛剛建立的虛擬機器儲存策略。</block>
  <block id="d6a760252e81d9cb59b731f435829b28" category="paragraph"><block ref="d6a760252e81d9cb59b731f435829b28" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1abdd6a035215ba0bbd05f64107eba8b" category="section-title">從vVols資料儲存體向 RAC VM 指派磁碟並配置 DB 存儲</block>
  <block id="1694a0fa71dd4bf27eb32be743d62229" category="paragraph">從 vSphere 用戶端，透過編輯 VM 設定將vVols資料儲存中的所需磁碟新增至資料庫 VM。然後，登入 VM 格式化並將二進位磁碟掛載到掛載點 /u01。下面示範了具體的步驟和任務。</block>
  <block id="671c65f2aaf6e342c3dc64e10e4c1de7" category="list-text">在將磁碟從資料儲存分配到資料庫虛擬機器之前，請登入 VMware ESXi 主機進行驗證並確保在 ESXi 層級啟用了多寫入器（GBLAllowMW 值設定為 1）。</block>
  <block id="13ab15eddd890290ff1ab6c3369c5105" category="list-text">新增一個新的專用 SCSI 控制器以供 Oracle RAC 磁碟使用。停用 SCSI 總線共用。</block>
  <block id="bd7a11e9ebe1d463ea78c92b8e7ae29a" category="inline-image-macro">顯示虛擬機器儲存配置的螢幕截圖。</block>
  <block id="7129a382764ea949fb8bed104a6ade0d" category="paragraph"><block ref="7129a382764ea949fb8bed104a6ade0d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="97583967fb763c3e123e7d04b518fc1d" category="list-text">從 RAC 節點 1 - ora01，向 VM 新增一個磁碟用於 Oracle 二進位儲存（不共用）。</block>
  <block id="c27003cfb2a02d3762fb8010a92687e3" category="paragraph"><block ref="c27003cfb2a02d3762fb8010a92687e3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53c2a1ff3fee6b5a708dd1e2272923a0" category="list-text">從 RAC 節點 1 開始，向 VM 新增三個磁碟用於 Oracle RAC CRS 儲存並啟用多寫入器共用。</block>
  <block id="f919bb8993e2bfb16b2fd0d702c971dc" category="paragraph"><block ref="53bf97527722008ce8d661e5a309e560" category="inline-image-macro-rx" type="image"></block> <block ref="08ea8751649164407ff156cec3b0f8df" category="inline-image-macro-rx" type="image"></block> <block ref="b3fd0f6ce783da27e8e68462beeebe24" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9eece672ad02e005280b550f41a48a30" category="list-text">從 RAC 節點 1 開始，從每個資料儲存區分別新增兩個磁碟，用於將資料傳送至 VM，以實現共用 Oracle 資料儲存。</block>
  <block id="270e62c3c8d11006b7edcfe66059250a" category="paragraph"><block ref="d7b183566e25dc549478bcca6cdc80c2" category="inline-image-macro-rx" type="image"></block> <block ref="fe2d230937200fbf9d659ef323fee125" category="inline-image-macro-rx" type="image"></block> <block ref="6533373b87f2553fe6f1fc753af7035e" category="inline-image-macro-rx" type="image"></block> <block ref="0df165bcac752e5c603b8291621de793" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1359af07f8950bb57fd01d7cb00ae87d" category="list-text">從 RAC 節點 1，從日誌資料儲存體向 VM 新增兩個磁碟，用於共用 Oracle 日誌檔案儲存。</block>
  <block id="1a2621fa74db5588a92781648c7a9b36" category="paragraph"><block ref="dd19d7d15f63e0956db9b7d3d79be330" category="inline-image-macro-rx" type="image"></block> <block ref="b8e00814d92a9ec8d8b4002f70a59bf7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a49c9fafad9c156d258b0cfaa9465b32" category="list-text">從 RAC 節點 2 開始，向 VM 新增一個磁碟用於 Oracle 二進位儲存（不共用）。</block>
  <block id="91065060851a6c470074ef0bfcb42538" category="paragraph"><block ref="91065060851a6c470074ef0bfcb42538" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b675282a475ed2d6ad7cf98f616e6501" category="list-text">從 RAC 節點 2，透過選擇新增其他共用磁碟<block ref="6aed226660dfd7b887814d05152d2b27" prefix=" " category="inline-code"></block>選項並為每個共用磁碟啟用多寫入器共用。</block>
  <block id="da16222a0401d0bf0515114004684032" category="paragraph"><block ref="d9c573b6e63b8ec12d1408782f147dd4" category="inline-image-macro-rx" type="image"></block> <block ref="3d61bea0adbfbf5903f99d8ef7176268" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2693086f370c879a2082d4d3d7dab372" category="list-text">從虛擬機<block ref="21b14bb4c76726ee1f508919a7a313cc" prefix=" " category="inline-code"></block>，<block ref="c9d7eedc8be4380c02106619824b8449" prefix=" " category="inline-code"></block> ，添加屬性<block ref="786ce2a862b7971f5d75434b768ebdbe" prefix=" " category="inline-code"></block>具有價值<block ref="c0d83f0b82a6b30de8811e69e6d95c61" prefix=" " category="inline-code"></block>。需要關閉虛擬機器才能新增進階參數。設定此選項可使SnapCenter準確地識別您環境中的 vVol。這應該在所有 RAC 節點上完成。</block>
  <block id="4797e9bfb4da93ec6f6a12558ab02361" category="paragraph"><block ref="4797e9bfb4da93ec6f6a12558ab02361" category="inline-image-macro-rx" type="image"></block></block>
  <block id="665639cc3720d39b6e081d6894c32ad9" category="list-text">現在，重新啟動虛擬機器。透過 ssh 以管理員使用者身分登入 VM 以查看新新增的磁碟機。</block>
  <block id="a0d946a1dd4f8686c8eb7d38dfac9fce" category="list-text">從每個 RAC 節點，透過接受預設選擇將 Oracle 二進位磁碟 (/dev/sdb) 分割區為主分割區和單一分割區。</block>
  <block id="092b3ded0c71a57dc9e6c900236e8802" category="list-text">將分割區的磁碟格式化為xfs檔案系統。</block>
  <block id="bb3b392e1475d9424bf707a161d5e269" category="list-text">將磁碟掛載到掛載點 /u01。</block>
  <block id="5c14ee5bcebed05ca6f36737fa926611" category="list-text">將掛載點新增至 /etc/fstab，以便在 VM 重新啟動時掛載磁碟機。</block>
  <block id="9a05743b08fa1f2a741732b4dcc91133" category="section-title">VCF中的Oracle RAC部署</block>
  <block id="adcafa77c4aa4f4efd0db63c6320a0c5" category="paragraph">建議利用NetApp自動化工具包在具有vVols的 VCF 中部署 Oracle RAC。仔細閱讀隨附的說明（READme），並按照工具包中的說明配置部署參數文件，例如部署目標文件 - hosts、全域變數文件 - vars/vars.yml 和本地 DB VM 變數檔案 - host_vars/host_name.yml。以下是逐步的程序。</block>
  <block id="4a5abe82a7fae2eaf788dd6f9951e913" category="list-text">透過 ssh 以管理員使用者身分登入 Ansible 控制器 VM，並使用vVols複製用於在 VCF 中部署 Oracle RAC 的自動化工具包副本。</block>
  <block id="8cbbbb19113497bb9e98082d50559d57" category="list-text">將下列 Oracle 安裝檔案暫存於 RAC 節點 1 資料庫 VM 上的 /tmp/archive 資料夾中。該資料夾應允許所有使用者以 777 權限存取。</block>
  <block id="24171804df1cf0c75810555078f5363a" category="list-text">在 Ansible 控制器和資料庫虛擬機器之間設定 ssh 無密鑰身份驗證，這需要產生 ssh 密鑰對並將公鑰複製到資料庫虛擬機器管理員用戶根目錄 .ssh 資料夾 authorized_keys 檔案中。</block>
  <block id="728193b5c7846573379d02085e909342" category="list-text">設定使用者定義的目標主機參數檔。以下是目標主機檔案 hosts 的典型設定範例。</block>
  <block id="69e161901e08e482a784be5dc7f0a651" category="list-text">設定使用者定義的本機特定參數檔。以下是本機 host_name.yml 檔案 - ora01.yml 的典型設定範例。</block>
  <block id="f58c2ca9903ffc6f561b9a0ad4d259ce" category="list-text">配置使用者定義的全域參數檔。以下是全域參數檔 vars.yml 的典型配置範例</block>
  <block id="e24b23c25dcec5be6339809014c3bdcd" category="list-text">從 Ansible 控制器，複製自動化工具包主目錄 /home/admin/na_oracle_deploy_rac，執行先決條件劇本來設定 ansible 先決條件。</block>
  <block id="6ae4f18884244011c1af48b055b81490" category="list-text">執行 Linux 配置劇本。</block>
  <block id="7bf1e8acde5c2dc40b02275ed5e2cc1d" category="list-text">執行 Oracle 部署劇本。</block>
  <block id="a7119acd29a953169996c6cd5828ae0e" category="list-text">或者，上述所有劇本也可以透過單一劇本運行來執行。</block>
  <block id="f72bad29aa332450a1473c4ee42daca5" category="section-title">VCF 中的 Oracle RAC 部署驗證</block>
  <block id="6837977f570679b216db78e041f5750c" category="paragraph">本節提供有關 VCF 中的 Oracle RAC 部署驗證的詳細信息，以確保所有 Oracle RAC 資源都已完全部署、配置並按預期運行。</block>
  <block id="44f80d3b64dcf0f0f6d4874745b23da8" category="list-text">以管理員使用者身分登入 RAC VM 以驗證 Oracle 網格基礎架構。</block>
  <block id="b8a929b95bdc686f95e0bbb3ccdb7465" category="list-text">列出叢集節點。</block>
  <block id="bfd716e1e7ec88f5c5b5066291adc63e" category="list-text">驗證 OCR/VOTE。</block>
  <block id="da3a1bafa7ba4c1638c7b89315232c57" category="list-text">更改為 oracle 使用者來驗證叢集資料庫。</block>
  <block id="7513062e80b0ae42ada4bcb96f44b96c" category="list-text">或在成功執行劇本後登入 EM express 來驗證 RAC 資料庫。</block>
  <block id="5afe58c129643433adc50a2af141f9f9" category="inline-image-macro">顯示 Oracle EM Express 配置的螢幕截圖。</block>
  <block id="0d718d583110b0638c413fa9daabb09e" category="paragraph"><block ref="02c78b42881b138cbd2173e76d46ae3c" category="inline-image-macro-rx" type="image"></block> <block ref="070c3132ee6ef8b48eed502e3adc9130" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7b1814436c2f5e378f75bf1540169449" category="section-title">使用SnapCenter在 VCF 中備份和還原 Oracle RAC 資料庫</block>
  <block id="75e3c73d79159eb8120f96e67738c1e4" category="paragraph">SnapCenter版本 6 比版本 5 有許多功能增強，包括對 VMware vVols資料儲存的支援。 SnapCenter依賴資料庫虛擬機器上的主機端插件來執行應用程式感知的資料保護管理活動。有關適用於 Oracle 的NetApp SnapCenter插件的詳細信息，請參閱此文檔<block ref="7a6b1ddf3a0731d31936d6522df7c6ca" category="inline-link-macro-rx"></block>。下面提供了在 VCF 中設定SnapCenter版本 6 以進行 Oracle RAC 資料庫備份和復原的進階步驟。</block>
  <block id="db870e382c718288732e8cddc579b13c" category="list-text">從NetApp支援網站下載SnapCenter software版本 6：<block ref="3cca19c7256555824970f142627f53d3" category="inline-link-macro-rx"></block> 。</block>
  <block id="9535205879e21b3b44dc228f092b815c" category="list-text">以管理員身分登入託管 Windows VM 的SnapCenter 。安裝SnapCenter 6.0 的先決條件。</block>
  <block id="14aae9a2299009444cb9a8fdd1043241" category="inline-image-macro">顯示SnapCenter 6.0 先決條件的螢幕截圖。</block>
  <block id="74a7e491803d407fa356faec536f3e4a" category="paragraph"><block ref="74a7e491803d407fa356faec536f3e4a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8586c002ab45881c90190837b88451c2" category="list-text">以管理員身份安裝最新的 Java JDK<block ref="1a0bb7a886be273015991771cf1b1190" category="inline-link-macro-rx"></block> 。</block>
  <block id="fb21ef84f7da10fcc41ae83d827544e8" category="paragraph"><block ref="fb21ef84f7da10fcc41ae83d827544e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="212969042f73c7fab7539a4425462c46" category="list-text">審查<block ref="e0c4332e8c13be976552a059f106354f" prefix=" " category="inline-code"></block>如果您是新用戶，可以透過選單快速了解SnapCenter 。</block>
  <block id="75a05d0c05723a7a5ede08e6f38be9b9" category="paragraph"><block ref="75a05d0c05723a7a5ede08e6f38be9b9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dfed4c63c22e68017be86717e681a47d" category="list-text">將ONTAP儲存叢集新增至<block ref="5c6ab1284b6b7a5a7102854a969c99be" prefix=" " category="inline-code"></block>使用群集管理 IP 並透過群集管理員使用者 ID 進行身份驗證。</block>
  <block id="88a22ff01ead33d55b3381621c99e508" category="paragraph"><block ref="118ecd8fa6fa8ef279ec1b295b0e4b39" category="inline-image-macro-rx" type="image"></block> <block ref="0aed5468c7b83a06063df279a572fb30" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9be829820801059aa2e6f8032dedcb5b" category="list-text">新增 Oracle RAC 資料庫虛擬機器和 vSphere 插件虛擬機<block ref="03bc142e6422dbb9b288ad2cabee08c7" prefix=" " category="inline-code"></block>用於SnapCenter存取 DB VM 和 vSphere 插件 VM。該憑證應在 Linux VM 上具有 sudo 權限。您可以為虛擬機器的不同管理使用者 ID 建立不同的憑證。 vShpere 外掛程式虛擬機器管理使用者 ID 是在 vCenter 中部署插件虛擬機器時定義的。</block>
  <block id="4f27b1e39049720a171ec680e3ecb615" category="list-text">在 VCF 中新增 Oracle RAC 資料庫虛擬機<block ref="8124579383e90243e4b06323d2b37f8d" prefix=" " category="inline-code"></block>使用上一個步驟中建立的 DB VM 憑證。</block>
  <block id="8ddc920b9e6fb57e45e5771d5f36dc94" category="paragraph"><block ref="fbff666368d60621f04b1ee0149f2820" category="inline-image-macro-rx" type="image"></block> <block ref="5a4aa74a2cc8a46683840b27cac3651f" category="inline-image-macro-rx" type="image"></block> <block ref="c9618368d4d179889440afac05b78be5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="532bf73956152aae1e31d71a303110bb" category="list-text">類似地，將NetApp VMware 外掛程式 VM 新增至<block ref="8124579383e90243e4b06323d2b37f8d" prefix=" " category="inline-code"></block>使用上一個步驟中建立的 vSphere 外掛程式 VM 憑證。</block>
  <block id="b09c50eb29716e0670c57af959a2f106" category="paragraph"><block ref="d67c0eec4e399b286c043e8cf3a4bec1" category="inline-image-macro-rx" type="image"></block> <block ref="925268510b9e4bd3e1443c47abec7cf9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="836e220077eef7f134a2eca3d11dd42a" category="list-text">最後，在 DB VM 上發現 Oracle 資料庫後，回到<block ref="f4f70727dc34561dfde1a3c529b6205c" prefix=" " category="inline-code"></block><block ref="9e476387322a5c250893cf9c5c4ce78c" prefix="-" category="inline-code"></block>建立 Oracle 資料庫備份策略。理想情況下，建立單獨的存檔日誌備份策略，以允許更頻繁的備份間隔，從而最大限度地減少故障時的資料遺失。</block>
  <block id="9042135e15b7d736f2926087cc1cbac4" category="admonition">確保SnapCenter伺服器名稱可以解析為 DB VM 和 vSphere 插件 VM 的 IP 位址。同樣，DB VM 名稱和 vSphere 外掛程式 VM 名稱可以解析為SnapCenter伺服器的 IP 位址。</block>
  <block id="f2f5ea20fbc62b491869c43a522dcf59" category="paragraph">與傳統的基於 RMAN 的方法相比， SnapCenter利用ONTAP磁碟區快照實現更快的資料庫備份、復原或複製。由於資料庫在快照之前處於 Oracle 備份模式，因此快照與應用程式一致。</block>
  <block id="9700d849a16259acb4af12489f80cf93" category="paragraph"><block ref="9700d849a16259acb4af12489f80cf93" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d86fa67cb5a60379e561235b1bbcf1a2" category="list-text">按一下資料庫以啟動工作流程來啟用資料庫保護。</block>
  <block id="d1479f1d5187c38b8bdcce66ac37574d" category="paragraph"><block ref="d1479f1d5187c38b8bdcce66ac37574d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0a32086592e3e98e202dec84f5352e6b" category="list-text">如果需要，請套用備份策略並設定計劃。</block>
  <block id="2dbd120aca5ea296277fd8a472f62e83" category="paragraph"><block ref="2dbd120aca5ea296277fd8a472f62e83" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d9550848b32d2fbf200fe1071ca3cfa4" category="list-text">如果需要，設定備份作業通知。</block>
  <block id="2165fc473cdf3ef639e0944d17ddddb7" category="paragraph"><block ref="2165fc473cdf3ef639e0944d17ddddb7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5dad3646303c6a4e4f76cc956dddef68" category="list-text">查看摘要並完成以啟用資料庫保護。</block>
  <block id="33f837abd461bac99f5941eccc6afcc4" category="paragraph"><block ref="33f837abd461bac99f5941eccc6afcc4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="60b30cb13078f340c18a220e2cbe412f" category="list-text">只需點擊即可觸發按需備份作業<block ref="9af892ad254c844922acba8e89078d6d" prefix=" " category="inline-code"></block>。</block>
  <block id="dd9e46e6124a944f89102fd53f55b762" category="paragraph"><block ref="a002fd216ac89a97a3ce9b1e6da49f41" category="inline-image-macro-rx" type="image"></block> <block ref="336b8ad4002b898a6de2a41977355869" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2bf9c2e0bb29d6312e54a54f058ac378" category="paragraph"><block ref="2bf9c2e0bb29d6312e54a54f058ac378" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bf4113b041da79313c635fc0fc15a81f" category="list-text">按一下資料庫以查看 RAC 資料庫的已完成備份集。</block>
  <block id="e41ad1e36bc19ff3165359f835ddef80" category="paragraph"><block ref="e41ad1e36bc19ff3165359f835ddef80" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c978f8cd51a54f6f818224c07b37081" category="section-title">資料庫還原/復原</block>
  <block id="c416dcf0d7b8466599ed23e88f4d2c7b" category="paragraph">SnapCenter為 Oracle RAC 資料庫提供了多種從快照備份中復原的選項。在此範例中，我們示範如何從較舊的快照備份進行恢復，然後將資料庫前滾到最後一個可用日誌。</block>
  <block id="ac8a46d614401dc313c8dfdc41d3b6ad" category="list-text">首先，執行快照備份。然後，建立測試表並向表中插入一行，以驗證在建立測試表之前從快照映像還原的資料庫是否重新取得測試表。</block>
  <block id="516bbb855bac93422a0befab9b7f2cc7" category="list-text">來自SnapCenter<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡，開啟資料庫NTAP1備份拓樸頁面。反白顯示3天前建立的快照資料備份集。點選<block ref="2bd339d85ee3b33e513359ce781b60cc" prefix=" " category="inline-code"></block>啟動復原工作流程。</block>
  <block id="9c4b6c788f60f2fceed9808039828690" category="paragraph"><block ref="9c4b6c788f60f2fceed9808039828690" category="inline-image-macro-rx" type="image"></block></block>
  <block id="15d3f8cc8551722b92986955a6f33ed1" category="paragraph"><block ref="15d3f8cc8551722b92986955a6f33ed1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b2e47b0bb47c8052c2ba29b2a019287" category="list-text">選擇恢復範圍<block ref="eeb41be937965dcb49c6d428805a16ba" prefix=" " category="inline-code"></block>。</block>
  <block id="5004792c73659bd8e32f395acb2b5bb1" category="paragraph"><block ref="5004792c73659bd8e32f395acb2b5bb1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="97c0a280f28f15fdfc930e4311736a46" category="paragraph"><block ref="97c0a280f28f15fdfc930e4311736a46" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8ca9f3877e706843edbe4178753216f5" category="paragraph"><block ref="8ca9f3877e706843edbe4178753216f5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="96890589023936940a4cb9f6c0c8d9f6" category="paragraph"><block ref="96890589023936940a4cb9f6c0c8d9f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b1cc93933588a5b4d56f03e039adeb25" category="paragraph"><block ref="b1cc93933588a5b4d56f03e039adeb25" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a8a920caceb0dfbf3270fa19b5faafdc" category="list-text">從 RAC DB VM ora01 驗證資料庫的還原/復原是否成功前滾到其最新狀態並還原 3 天後所建立的測試表。</block>
  <block id="5af876911ef89b1e7c4739bf87f4c28a" category="paragraph">這完成了使用vVols在 VCF 中對 Oracle RAC 資料庫進行SnapCenter備份、還原和復原的示範。</block>
  <block id="ded9cd19cde727f824d72e3ad8ef7662" category="inline-link-macro">VMware 雲端基礎</block>
  <block id="153af65d8710c27484761f4f0f0b1328" category="list-text"><block ref="153af65d8710c27484761f4f0f0b1328" category="inline-link-macro-rx"></block></block>
  <block id="8127605cde4cee83a23b35f1207c7572" category="inline-link-macro">SnapCenter software文檔</block>
  <block id="bb45eb5524b20b253fe60d799a69dbf8" category="list-text"><block ref="bb45eb5524b20b253fe60d799a69dbf8" category="inline-link-macro-rx"></block></block>
  <block id="124f85081ad68c1408c62c0c72a9a0d0" category="list-text"><block ref="124f85081ad68c1408c62c0c72a9a0d0" category="inline-link-macro-rx"></block></block>
  <block id="ed7da1d98db2a5f56b9b51c80676689c" category="summary">此解決方案概述並詳細介紹了 VMware Cloud Foundation (VCF) 中的 Oracle 部署和保護，其中 vSphere Virtual Volumes (vVols) 作為主資料庫存儲，Oracle 資料庫採用單一實例 (SI) 配置。</block>
  <block id="7771b3227f6011277af7c6f86381981f" category="doc">TR-4996：使用vVols在 VCF 中部署和保護 Oracle SI</block>
  <block id="63187ee661198eecd7fe25cff775a86a" category="paragraph">此解決方案概述並詳細介紹了 VMware Cloud Foundation (VCF) 中的 Oracle 部署和保護，其中使用 vSphere Virtual Volumes (vVols) 作為主資料庫存儲，並使用單一實例 (SI) 配置中的 Oracle 資料庫。</block>
  <block id="54c64849cbb768c12543c38fa3342f0f" category="paragraph">本文檔示範如何在 VMware Cloud Foundation 環境中部署和保護 Oracle 單一實例資料庫，並使用vVols作為NetApp ONTAP儲存叢集中的主資料庫儲存。 Oracle 資料庫的配置就像部署在本機儲存系統上的本機檔案系統一樣。本技術報告重點介紹在 VCF 中為 Oracle 部署建立vVols的步驟。我們也示範如何使用NetApp SnapCenter UI 工具備份、還原和複製 Oracle 資料庫以用於開發/測試或 VCF 中儲存高效的資料庫作業的其他用例。</block>
  <block id="4c7d4a60b738b4714cddcc488009b210" category="list-text">在 VCF 中部署 Oracle SI 資料庫，並使用NetApp ONTAP AFF上的vVols資料儲存作為主資料庫存儲</block>
  <block id="25f2a359e29ebc505f92bc2118d15bec" category="list-text">使用NetApp SnapCenter UI 工具在 VCF 中使用vVols資料儲存複製 Oracle 資料庫以進行開發/測試或其他用例</block>
  <block id="3b17c15a96e90a03f424ba8ff84edda9" category="list-text">一位 DBA 希望在 VCF 中部署 Oracle，並使用NetApp ONTAP AFF上的vVols資料儲存作為主資料庫存儲</block>
  <block id="d349eb44120afd2a733ed0cca1af1bb6" category="list-text">一位資料庫解決方案架構師，希望使用NetApp ONTAP AFF儲存上的vVols資料儲存在 VCF 中測試 Oracle 工作負載</block>
  <block id="1b7115ed74fb7546fe9b3aaf8e5001c8" category="list-text">一位儲存管理員希望在NetApp ONTAP AFF儲存上使用vVols資料儲存部署到 VCF 並管理 Oracle 資料庫</block>
  <block id="ee657e8e58545003d830b6e8249dfef8" category="list-text">希望使用 vVol 資料儲存在 VCF 中建立 Oracle 資料庫的應用程式擁有者</block>
  <block id="514383da7989f9a243a928e30fa946eb" category="paragraph">此解決方案的測試和驗證是在實驗室環境中進行的，使用NetApp ONTAP AFF儲存上的具有vVols資料儲存的 VCF，該儲存可能與最終部署環境不符。有關更多信息，請參閱<block ref="a5cbf5f16a1fba6d9697a814ff593254" category="inline-xref-macro-rx"></block> 。</block>
  <block id="f41b2cba0fbf8126d5b6737390e57f17" category="paragraph"><block ref="f41b2cba0fbf8126d5b6737390e57f17" category="inline-image-macro-rx" type="image"></block></block>
  <block id="338b2420dac1e34d75bddea18c33a6ed" category="section-title">VCF中的Oracle資料庫配置</block>
  <block id="0db665f03cbb89d625759cc113d29320" category="cell">NTAP1(NTAP1_pdb1、NTAP1_pdb2、NTAP1_pdb3)</block>
  <block id="847c86000821f4308a632844393be895" category="cell">NetApp ONTAP AFF A300上的vVols資料存儲</block>
  <block id="fdd523ab1355a652be7785ec356296ce" category="cell">NTAP2（NTAP2_pdb1，NTAP2_pdb2，NTAP2_pdb3），NTAP1CLN</block>
  <block id="e833c850593670a5e6671378fcfddf3a" category="list-text">* vVols到ONTAP集群連線的協定。 * NFS 或 iSCSI 都是不錯的選擇。性能水平相當。在此解決方案示範中，我們使用 NFS 作為vVols連接到下劃線ONTAP儲存叢集的儲存協定。如果 VCF 基礎架構支持， NetApp ONTAP上的vVols資料儲存也支援 FC/FCoE、NVMe/FC 協定。</block>
  <block id="038f6eed09324a5254381f8e80a54f3d" category="list-text">vVols資料儲存上的 Oracle 儲存佈局。 *在我們的測試和驗證中，我們為 Oracle 二進位檔案、Oracle 資料和 Oracle 日誌檔案部署了三個vVols資料儲存區。將不同類型的 Oracle 檔案分離到其資料儲存中是一種很好的做法，這樣可以輕鬆管理和執行資料庫備份、還原或複製。為大型資料庫建立專用vVols ，並為較小的資料庫或具有類似 QoS 設定檔的資料庫共用vVols 。 </block>
  <block id="935faab0c1724a6292faa21145fa1f7a" category="list-text">*資料庫保護。 *  NetApp提供了SnapCenter software套件，用於資料庫備份、復原和克隆，並具有使用者友好的 UI 介面。  NetApp建議實施這樣的管理工具，以實現快速（一分鐘內）的 SnapShot 備份、快速（幾分鐘內）的資料庫復原和資料庫複製。</block>
  <block id="3ff3605993898c98bf107a74c1104b5c" category="paragraph">以下部分提供了在 Oracle 單一實例配置中的NetApp ONTAP儲存上使用vVols資料儲存在 VCF 中部署 Oracle 19c 的逐步程序。</block>
  <block id="d642b6b6d64510f4e9ecdb6b6ab5f2ba" category="list-text">在 VCF 工作負載域中配置三個 Linux VM、兩個用於 Oracle 資料庫的 VM 和一個用於 Ansible 控制器的 VM。配置一個 Windows 伺服器 VM 以執行NetApp SnapCenter伺服器。有關設定 Ansible 控制器以自動部署 Oracle 資料庫的信息，請參閱以下資源<block ref="5611d9cfd1946804a6fc54c4e7defca3" category="inline-link-macro-rx"></block>。</block>
  <block id="a003917c4a9634b2ce8d9b5b71ace9f5" category="paragraph"><block ref="a003917c4a9634b2ce8d9b5b71ace9f5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6197223bdacc221a4a98dfbf0784cdf8" category="paragraph"><block ref="6197223bdacc221a4a98dfbf0784cdf8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d4ab805ff1f111190e4619a5680e27d5" category="paragraph"><block ref="d4ab805ff1f111190e4619a5680e27d5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1dbcab7480e5628accc586b51e7ae14a" category="admonition">您可以為vVols資料儲存區新增多個磁碟區，或將vVols資料儲存區磁碟區分佈在ONTAP控制器節點上以提高效能。</block>
  <block id="3aa2eedce4fdf93f0da96e86a78819b6" category="paragraph"><block ref="3aa2eedce4fdf93f0da96e86a78819b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f623a471bae2cf02f80bfc265f6c3d5f" category="list-text">重複相同的步驟為 Oracle 資料和日誌建立vVols資料儲存。</block>
  <block id="c85846f79fb826c4698a667ef5c4c6e9" category="paragraph"><block ref="c85846f79fb826c4698a667ef5c4c6e9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c49449890c4bc83acd8f37c4b0c8c760" category="admonition">請注意，當克隆 Oracle 資料庫時，會將用於資料的附加vVols加入vVols清單中。</block>
  <block id="a8753f2e6a16f8ea1de20f8500f9aeef" category="paragraph"><block ref="a8753f2e6a16f8ea1de20f8500f9aeef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d9aaa275a447e9d31c528981b4f80a9" category="section-title">從vVols資料儲存區向 DB VM 指派磁碟並配置 DB 存儲</block>
  <block id="0148fef951b21df8e50803feb861c17f" category="paragraph">從 vSphere 用戶端，透過編輯 VM 設定將vVols資料儲存中的三個磁碟新增至資料庫 VM。然後，登入 VM 格式化磁碟並將其掛載到掛載點 /u01、/u02 和 /u03。下面示範了具體的步驟和任務。</block>
  <block id="8a594a4062120343f6d1214b060c990e" category="list-text">向 VM 新增磁碟用於 Oracle 二進位儲存。</block>
  <block id="d028d3a30efb13a13d7bf44b7a3b2d5d" category="paragraph"><block ref="d028d3a30efb13a13d7bf44b7a3b2d5d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f7b26f1b39d7f1134b617c758271388d" category="list-text">向 VM 新增磁碟用於 Oracle 資料儲存。</block>
  <block id="ecfd90db517d3ccb7f53640add067b20" category="paragraph"><block ref="ecfd90db517d3ccb7f53640add067b20" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9688034f93bd59a451be614f54b3bd31" category="list-text">向 VM 新增磁碟用於 Oracle 日誌儲存。</block>
  <block id="0216433349985bcb31e3f4f975f30b1b" category="paragraph"><block ref="0216433349985bcb31e3f4f975f30b1b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="20494f43a704174a7c66937c434822c8" category="list-text">從虛擬機<block ref="21b14bb4c76726ee1f508919a7a313cc" prefix=" " category="inline-code"></block>，<block ref="c9d7eedc8be4380c02106619824b8449" prefix=" " category="inline-code"></block> ，添加屬性<block ref="786ce2a862b7971f5d75434b768ebdbe" prefix=" " category="inline-code"></block>具有價值<block ref="c0d83f0b82a6b30de8811e69e6d95c61" prefix=" " category="inline-code"></block>。需要關閉虛擬機器才能新增進階參數。設定此選項可使SnapCenter準確地識別您環境中的 vVol。</block>
  <block id="5c74da629f32767926f7ad7166336d3d" category="list-text">只需接受預設選擇即可將磁碟機分割為主分割區和單一分割區。</block>
  <block id="81529182dc2ad74d9f7dad30c6854f7a" category="list-text">將磁碟機掛載到掛載點 /u01、/u02 和 /u03。</block>
  <block id="25f25999e7ae6cad40283a3ef624517a" category="section-title">VCF中的Oracle資料庫部署</block>
  <block id="a2dbdc551f64fb11d4fa44270223db37" category="inline-link-macro">使用 NFS 在NetApp C 系列上實現簡化、自動化的 Oracle 部署</block>
  <block id="6813d3fc7d4ebe73dd45031ac8800804" category="paragraph">建議利用NetApp自動化工具包在有vVols的 VCF 中部署 Oracle。關於在xfs檔案系統上執行Oracle自動化部署的詳細參考，請參考TR-4992：<block ref="69e84a8d3d6c5d27b49fbb81c11a7d37" category="inline-link-macro-rx"></block> 。儘管 TR-4992 涵蓋了使用 NFS 在NetApp C 系列上進行自動 Oracle 部署，但如果繞過安裝到資料庫 VM 的 NFS 檔案系統，它與使用vVols在 VCF 中進行 Oracle 部署相同。我們只需使用特定標籤即可跳過該操作。以下是逐步程序。</block>
  <block id="18221967648c6cef9becffedbdba6e84" category="list-text">透過 ssh 以管理員使用者身分登入 Ansible 控制器 VM，並在 NFS 上複製 Oracle 自動化工具包的副本。</block>
  <block id="1ac10c3f57c4a31176d5de142e164d21" category="list-text">將下列 Oracle 安裝檔案暫存於資料庫 VM 上的 /tmp/archive 資料夾中。該資料夾應允許所有使用者以 777 權限存取。</block>
  <block id="4f8a7e3d09ed245456c0fe6a1f23244b" category="list-text">根據 TR-4992 本節中的說明配置部署目標檔案 - hosts、全域變數檔案 - vars/vars.yml 和本地 DB VM 變數檔案 - host_vars/host_name.yml：<block ref="7bf5a4a19d96bb799d8289a13fabc6df" category="inline-link-macro-rx"></block> 。從本機 DB VM 變數檔案中註解掉 nfs_lif 變數。</block>
  <block id="f04a957e840ec1a63abf180d46387d50" category="list-text">從 Ansible 控制器，複製自動化工具包主目錄 /home/admin/na_oracle_deploy_nf，執行先決條件劇本。</block>
  <block id="3380790c6b6607b8bdbb4dc491a193a6" category="list-text">成功執行劇本後，登入 EM express 來驗證 Oracle。</block>
  <block id="842c4b652e88ec571da9b891cb513244" category="paragraph"><block ref="888d57860441dfc9c1fc6082d2364d89" category="inline-image-macro-rx" type="image"></block> <block ref="23eee6fde5b44fcfda003276b407c10b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="17fa3d33636f0f23f65c8d49f2592f2a" category="list-text">或者，執行 destroy playbook 從 DB VM 中刪除資料庫。</block>
  <block id="7a1924f25fed25748daead1d2d5b01e9" category="section-title">使用SnapCenter在 VCF 中備份、還原和克隆 Oracle</block>
  <block id="9884c3c5b6856de90af08a8c26b025bd" category="paragraph">SnapCenter版本 6 比版本 5 有許多功能增強，包括對 VMware vVols資料儲存的支援。 SnapCenter依賴資料庫虛擬機器上的主機端插件來執行應用程式感知的資料保護管理活動。有關適用於 Oracle 的NetApp SnapCenter插件的詳細信息，請參閱此文檔<block ref="7a6b1ddf3a0731d31936d6522df7c6ca" category="inline-link-macro-rx"></block>。以下提供了在 VCF 中設定SnapCenter版本 6 以進行 Oracle 資料庫備份、復原和複製的進階步驟。</block>
  <block id="b4368c5bff67fcdd30ed15befeb0bb5d" category="list-text">新增資料庫虛擬機器和 vSphere 插件虛擬機<block ref="03bc142e6422dbb9b288ad2cabee08c7" prefix=" " category="inline-code"></block>用於SnapCenter存取 DB VM 和 vSphere 插件 VM。該憑證應在 Linux VM 上具有 sudo 權限。您可以為虛擬機器的不同管理使用者 ID 建立不同的憑證。</block>
  <block id="59d5938e76d240d7dd6bc36a5b63bc74" category="list-text">將 VCF 中的 Oracle 資料庫 VM 新增至<block ref="8124579383e90243e4b06323d2b37f8d" prefix=" " category="inline-code"></block>使用上一個步驟中建立的 DB VM 憑證。</block>
  <block id="14e24ed3000f63d13b3c2dbb72725f64" category="paragraph"><block ref="31ccdda516ff15be043ab5bb01cc947b" category="inline-image-macro-rx" type="image"></block> <block ref="bdfb0675b851e14184fa62f280c17011" category="inline-image-macro-rx" type="image"></block> <block ref="816c425a89ae21b88cf83bcffbcca090" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9cee3f5f59ee683c1f09b5ea98a48249" category="paragraph"><block ref="d67c0eec4e399b286c043e8cf3a4bec1" category="inline-image-macro-rx" type="image"></block> <block ref="a5a429cf4b72212fd76c54db96065177" category="inline-image-macro-rx" type="image"></block></block>
  <block id="573d0af89416c61b52d479e98cf7ea8d" category="paragraph"><block ref="573d0af89416c61b52d479e98cf7ea8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="16449fcb2911066c7f22bf61fb1b5bb0" category="paragraph"><block ref="16449fcb2911066c7f22bf61fb1b5bb0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="11b72074cc43b17dab69c669721461b1" category="paragraph"><block ref="11b72074cc43b17dab69c669721461b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0a88fdb2227fc9514ba4a101761f20c3" category="paragraph"><block ref="0a88fdb2227fc9514ba4a101761f20c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fa630faa71e62812c5b73b74a2a0ce4c" category="paragraph"><block ref="fa630faa71e62812c5b73b74a2a0ce4c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ee7678087998f16363ef172e3d47ffc" category="paragraph"><block ref="45708633ac635c8f7f9a04ff20faadd5" category="inline-image-macro-rx" type="image"></block> <block ref="9924c9c2cae1dacadbe543dfd833d3b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dd1646b54a28735656217e244fe43d3f" category="paragraph"><block ref="dd1646b54a28735656217e244fe43d3f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="812d6325185d3c54cc9fdb6993aa88d5" category="list-text">按一下資料庫以查看每個資料庫已完成的備份集。</block>
  <block id="2fa8dc10d20419afc3a60bdeb1b193be" category="paragraph">SnapCenter為 Oracle 資料庫提供了多種從快照備份中復原的選項。在此範例中，我們示範如何從較舊的快照備份進行恢復，然後將資料庫前滾到最後一個可用日誌。</block>
  <block id="4de3a9d50c6a6b2be148858c04496ca7" category="list-text">來自SnapCenter<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡，開啟資料庫NTAP1備份拓樸頁面。反白顯示測試表建立之前設定的快照資料備份。點選<block ref="2bd339d85ee3b33e513359ce781b60cc" prefix=" " category="inline-code"></block>啟動復原工作流程。</block>
  <block id="a81c00e3c6d8a561ee64ced3b7ca0a69" category="paragraph"><block ref="a81c00e3c6d8a561ee64ced3b7ca0a69" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9e75d1f767cd936b1747bcf7d879de87" category="paragraph"><block ref="9e75d1f767cd936b1747bcf7d879de87" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b9df42e1c46b607266d10c3d6047754" category="paragraph"><block ref="4b9df42e1c46b607266d10c3d6047754" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c2dcdd9443132bd5bfde3beeb7c8ec0" category="paragraph"><block ref="4c2dcdd9443132bd5bfde3beeb7c8ec0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b34f206cc03c4a2957e0dc1a529dc29" category="paragraph"><block ref="3b34f206cc03c4a2957e0dc1a529dc29" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1876a126bb30d124d4ce83afe66d3e09" category="paragraph"><block ref="1876a126bb30d124d4ce83afe66d3e09" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49fc40acb6f58593bcf91ebe4f767336" category="paragraph"><block ref="49fc40acb6f58593bcf91ebe4f767336" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7405f99edab815706f8763fe14a3587b" category="paragraph"><block ref="7405f99edab815706f8763fe14a3587b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0c199d70e7019bbaed298c974d51a440" category="list-text">從 DB VM ora_01，驗證資料庫的復原/復原是否成功前滾到其最新狀態並還原了測試表。</block>
  <block id="e902731ca71b8d6f3fd85319cfab2a70" category="paragraph">在此範例中，最近的備份集用於複製不同軟體安裝中的 DB VM ora_02 和 VCF 中的 ORACLE_HOME 上的資料庫。</block>
  <block id="11ca26aa1b6ef9aa055d3bbfa787304e" category="list-text">再次開啟資料庫NTAP1備份清單。選擇最近的資料備份集，點選<block ref="ff24590464659ee8cdec688128c35f89" prefix=" " category="inline-code"></block>按鈕啟動資料庫克隆工作流程。</block>
  <block id="f55da0989cc3bf506fc949e0a930bba8" category="paragraph"><block ref="f55da0989cc3bf506fc949e0a930bba8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4592237458b4b234c6ad49941e35fca7" category="paragraph"><block ref="4592237458b4b234c6ad49941e35fca7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="900b3b01b70ff3dfa061c370394c20d1" category="list-text">選擇VCF中的ora_02作為目標資料庫克隆主機。主機上應該安裝並配置相同的 Oracle 資料庫軟體。</block>
  <block id="45a4ecbf5e87d541ec78a88557c8ecf0" category="paragraph"><block ref="45a4ecbf5e87d541ec78a88557c8ecf0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5b13482d2f42f30ce29b2e73167f205" category="paragraph"><block ref="f5b13482d2f42f30ce29b2e73167f205" category="inline-image-macro-rx" type="image"></block></block>
  <block id="facd55edf242677ab9c6bd42674e871d" category="list-text">您可以變更複製資料庫參數以滿足克隆資料庫的配置或資源要求。</block>
  <block id="42e152d1514166da84bf8a9cb2bbcff6" category="paragraph"><block ref="42e152d1514166da84bf8a9cb2bbcff6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8bddca6e47861c5daf7a84db4656b023" category="paragraph"><block ref="8bddca6e47861c5daf7a84db4656b023" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2e8288753cde5975be0cea5d26b70faa" category="paragraph"><block ref="2e8288753cde5975be0cea5d26b70faa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e6071bbf07da326e351b605b797203d" category="paragraph"><block ref="8e6071bbf07da326e351b605b797203d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="acbadad61e7ffc80605cdac2c224003e" category="paragraph"><block ref="acbadad61e7ffc80605cdac2c224003e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="74c1617600b118b68903b6dbbc37362b" category="list-text">從 DB VM ora_02 驗證克隆的資料庫並查詢測試表。</block>
  <block id="d0caaae21ff57a6da3b954572e19d5fc" category="paragraph">這樣就完成了SnapCenter在 VCF 中備份、還原和克隆 Oracle 資料庫的示範。</block>
  <block id="653a98af1c9a004c51b4e7358f06db9a" category="summary">該解決方案提供了 PostgreSQL 資料庫部署和 HA/DR 設定、故障轉移、基於 FSx ONTAP儲存產品內建的NetApp SnapMirror技術和 AWS 中的NetApp Ansible 自動化工具包的重新同步的概述和詳細資訊。</block>
  <block id="e5f44d648a9d8c4db4e2b580d3370fbf" category="doc">TR-4956：AWS FSx/EC2 中的自動化 PostgreSQL 高可用性部署與災難復原</block>
  <block id="b997a984dad34493c1769c47b99c113b" category="paragraph">該解決方案提供了基於 FSx ONTAP儲存產品內建的NetApp SnapMirror技術和 AWS 中的NetApp Ansible 自動化工具包的 PostgreSQL 資料庫部署和 HA/DR 設定、故障轉移、重新同步的概述和詳細資訊。</block>
  <block id="03784a7c5600d29113972955e602a944" category="inline-link-macro">資料庫引擎</block>
  <block id="1d8f1bdc206db1d9edd9fa46f02aa08c" category="paragraph">PostgreSQL 是一個廣泛使用的開源資料庫，在十大最受歡迎資料庫引擎中排名第四。<block ref="6e2d0e5987102894082cbdb135303e4d" category="inline-link-macro-rx"></block> 。一方面，PostgreSQL 因其免許可、開源模式而廣受歡迎，同時仍具有複雜的功能。另一方面，由於它是開源的，因此缺乏關於高可用性和災難復原（HA/DR）領域的生產級資料庫部署的詳細指導，尤其是在公有雲中。一般來說，建立一個具有熱備用、溫備用、流複製等功能的典型 PostgreSQL HA/DR 系統可能很困難。透過提升備用站點然後切換回主站點來測試 HA/DR 環境可能會對生產造成乾擾。當讀取工作負載部署在串流熱備用系統上時，主資料庫上有充分記錄的效能問題。</block>
  <block id="3ba3cda3d91af072810327bfd691205c" category="paragraph">在本文檔中，我們示範如何擺脫應用程式層級 PostgreSQL 串流 HA/DR 解決方案，並使用儲存層級複製建置基於 AWS FSx ONTAP儲存和 EC2 運算執行個體的 PostgreSQL HA/DR 解決方案。與傳統的 PostgreSQL 應用程式級 HA/DR 流複製相比，該解決方案創建了一個更簡單、更可比的系統，並提供了相同的結果。</block>
  <block id="e2543d0568626be8ab6adad9d9a78652" category="paragraph">該解決方案基於經過驗證的成熟NetApp SnapMirror存儲級複製技術構建，該技術可用於 AWS 原生 FSX ONTAP雲端存儲，以實現 PostgreSQL HA/DR。使用NetApp解決方案團隊提供的自動化工具包可以輕鬆實現。它提供類似的功能，同時透過基於應用程式級流的 HA/DR 解決方案消除主站點的複雜性和效能拖累。該解決方案可以輕鬆部署和測試，而不會影響活動主站點。</block>
  <block id="f67bd3c0833b1d6bf90bb26a55f0a9ce" category="list-text">在公用 AWS 雲端中為 PostgreSQL 提供生產級 HA/DR 部署</block>
  <block id="420a5f3809172bb0dc9d501758fe94d2" category="list-text">在公用 AWS 雲端中測試和驗證 PostgreSQL 工作負載</block>
  <block id="c9d6a5076f52c5abce5f2003446ab211" category="list-text">測試並驗證基於NetApp SnapMirror複製技術的 PostgreSQL HA/DR 策略</block>
  <block id="4a7bde15fa2753ce507cef621fd789b2" category="list-text">有興趣在公有 AWS 雲端中部署具有 HA/DR 的 PostgreSQL 的 DBA。</block>
  <block id="c5e04df584e0992a5dbdae10d89ded97" category="list-text">對在公用 AWS 雲端中測試 PostgreSQL 工作負載感興趣的資料庫解決方案架構師。</block>
  <block id="ba083ee91407315383bac538162833ff" category="list-text">有興趣部署和管理部署到 AWS FSx 儲存的 PostgreSQL 實例的儲存管理員。</block>
  <block id="73ad058c671f3e1e105d92585f5ece7a" category="list-text">有興趣在 AWS FSx/EC2 中建立 PostgreSQL 環境的應用程式擁有者。</block>
  <block id="bfa420253f0a67626a51ce1fa045944c" category="inline-image-macro">此圖提供了 PostgreSQL 混合雲解決方案的組織詳細圖片，包括本地端和 AWS 網站。</block>
  <block id="66b44e40d76d390f30ee34c066fa49a2" category="paragraph"><block ref="66b44e40d76d390f30ee34c066fa49a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="011fedf4050817b8826f95a53d9555b2" category="cell">目前版本</block>
  <block id="0b70cdec9293f5625e5aaae9cdd38526" category="cell">同一 VPC 和可用區中的兩個 FSx HA 對作為主 HA 集群和備用 HA 集群</block>
  <block id="e3d6d4b94f9415561957f8c22f5fea2e" category="cell">兩個 EC2 T2 xlarge 作為主運算執行個體和備用運算執行個體</block>
  <block id="3008feb4272787858d4d27f7e8acb08b" category="cell">Ansible 控制器</block>
  <block id="26b9568eac10de69d574b84626735921" category="cell">本地 Centos VM/4vCPU/8G</block>
  <block id="7f151fffe66dad0021b1918085977654" category="cell">用於在本地或雲端託管 Ansible 自動化控制器的虛擬機</block>
  <block id="04cd32c57cf3229ae9374fc80cd50d96" category="cell">CentOS Linux 版本 8.2.2004（核心）</block>
  <block id="63b6df5ba9d257bb0f6fbda5541d9171" category="cell">在本地實驗室中部署託管 Ansible 控制器</block>
  <block id="399bd1ee587245ecac6f39beaa99886f" category="cell">PostgreSQL</block>
  <block id="a3c20b719830dc5fda947c7b6f3e42be" category="cell">版本 14.5</block>
  <block id="f8c3d3a84c62eb07a1009aacdc46a50f" category="cell">自動化從 postgresql.ora yum repo 中提取最新可用的 PostgreSQL 版本</block>
  <block id="202351f581b52c61061d29151c81d061" category="cell">版本 2.10.3</block>
  <block id="d222003898249e4a560d569acb0b5563" category="cell">使用需求手冊安裝所需集合和函式庫的先決條件</block>
  <block id="b062352f67359ac6729601c60a9a57a2" category="list-text">*PostgreSQL 資料庫備份、還原和還原。 * PostgreSQL 資料庫支援多種備份方法，例如使用 pg_dump 進行邏輯備份、使用 pg_basebackup 或較低層級的 OS 備份命令進行實體線上備份以及儲存層級一致的快照。此解決方案使用NetApp一致性群組快照在備用站點對 PostgreSQL 資料庫資料和 WAL 磁碟區進行備份、還原和還原。  NetApp一致性群組磁碟區快照在將 I/O 寫入儲存時對其進行排序，並保護資料庫資料檔案的完整性。</block>
  <block id="a28c157802547f294e145f164007d752" category="list-text">EC2 運算執行個體。在這些測試和驗證中，我們使用 AWS EC2 t2.xlarge 執行個體類型作為 PostgreSQL 資料庫計算執行個體。 NetApp建議在部署中使用 M5 類型的 EC2 執行個體作為 PostgreSQL 的計算實例，因為它針對資料庫工作負載進行了最佳化。備用計算實例應始終與為 FSx HA 叢集部署的被動（備用）檔案系統部署在同一區域中。</block>
  <block id="d7aed04148f8b6ba1b91a7ed84d3fd10" category="list-text">*FSx 儲存 HA 叢集單區域或多區域部署。 *在這些測試和驗證中，我們在單一 AWS 可用區中部署了一個 FSx HA 叢集。對於生產部署， NetApp建議在兩個不同的可用區部署 FSx HA 對。如果主伺服器和備用伺服器之間需要特定的距離，則可以在不同區域設定災難復原備用 HA 對，以實現業務連續性。  FSx HA 叢集始終在 HA 對中配置，該 HA 對在主動-被動檔案系統中同步鏡像，以提供儲存級冗餘。</block>
  <block id="c6f1f46bc7e80b73e6d77a7f862e0625" category="list-text">PostgreSQL 資料和日誌放置。典型的 PostgreSQL 部署共用相同的根目錄或磁碟區用於資料和日誌檔案。在我們的測試和驗證中，我們將 PostgreSQL 資料和日誌分成兩個單獨的磁碟區以提高效能。資料目錄中使用軟連結指向託管 PostgreSQL WAL 日誌和存檔 WAL 日誌的日誌目錄或磁碟區。</block>
  <block id="6e6dddb70c24cf218d0163faa3fb6a8f" category="list-text">*PostgreSQL 服務啟動延遲計時器。 *此解決方案使用 NFS 掛載磁碟區來儲存 PostgreSQL 資料庫檔案和 WAL 日誌檔案。在資料庫主機重新啟動期間，PostgreSQL 服務可能會在未安裝磁碟區的情況下嘗試啟動。這會導致資料庫服務啟動失敗。  PostgreSQL 資料庫需要 10 到 15 秒的計時器延遲才能正確啟動。</block>
  <block id="ee79ca09fee704e63d972baa3c1319a2" category="list-text">*RPO/RTO 確保業務連續性。 * FSx 資料從主伺服器到備用伺服器的 DR 複製是基於 ASYNC，這意味著 RPO 取決於 Snapshot 備份和SnapMirror複製的頻率。更高的 Snapshot 副本和SnapMirror複製頻率可降低 RPO。因此，災難發生時的潛在資料遺失和增量儲存成本之間存在平衡。我們已經確定，Snapshot 副本和SnapMirror複製可以在低至 5 分鐘的間隔內實現 RPO，並且 PostgreSQL 通常可以在一分鐘內於 DR 備用站點恢復 RTO。</block>
  <block id="cbeb123cc0c2c950a65a0c39f8412dc4" category="list-text">*資料庫備份。 *將 PostgreSQL 資料庫從本機資料中心實作或移轉到 AWS FSx 儲存後，資料會在 FSx HA 對中自動同步鏡像以進行保護。一旦發生災難，資料將透過複製的備用站點得到進一步保護。對於長期備份保留或資料保護， NetApp建議使用內建的 PostgreSQL pg_basebackup 公用程式來執行可移植到 S3 blob 儲存體的完整資料庫備份。</block>
  <block id="d2598d7d09e212cad1231cd233c5f7dc" category="paragraph">按照下面概述的詳細說明，可以使用基於NetApp Ansible 的自動化工具包自動完成此解決方案的部署。</block>
  <block id="7cfbd2a753781ece3080a48b0a56dad2" category="inline-link-macro">na_postgresql_aws_deploy_hadr</block>
  <block id="fce91619a13ef0fd71e3ffe1da6b5724" category="list-text">閱讀自動化工具包 READme.md 中的說明<block ref="139722adb31b9bbcb8f923b221d78595" category="inline-link-macro-rx"></block>。</block>
  <block id="9a1c6815d4b1e7dc53acf5a926ab662e" category="list-text">觀看以下影片示範。</block>
  <block id="5cf04a9bbc1dcc2fadd56ff48a750287" category="video-title">自動化 PostgreSQL 部署與保護</block>
  <block id="c73ece4b7be6bb88143afe096ded59aa" category="list-text">配置所需的參數文件<block ref="85cf4e6d42a71e693fd780c8b29accdd" prefix="(" category="inline-code"></block>，<block ref="0c83664bfb17d8d2c0bbc3551297e488" prefix=" " category="inline-code"></block> ，<block ref="cb8e25d5e6251a20afadf4c5f4b626bb" prefix=" " category="inline-code"></block> ) 透過在相關部分的範本中輸入使用者特定的參數。然後使用複製按鈕將檔案複製到 Ansible 控制器主機。</block>
  <block id="00aaa5ff8fbd0841ab311f7d9b1e4e78" category="section-title">自動部署的先決條件</block>
  <block id="eb03aa8f939650517c1c56a6d0b9ad2f" category="list-text">從 AWS EC2 控制台，您必須部署兩個 EC2 Linux 執行個體，一個作為主網站上的主 PostgreSQL DB 伺服器，另一個作為備用 DR 網站上的伺服器。為了在主 DR 站點和備用 DR 站點實現計算冗餘，請部署兩個額外的 EC2 Linux 執行個體作為備用 PostgreSQL DB 伺服器。有關環境設定的更多詳細信息，請參閱上一節中的架構圖。還請查看<block ref="32934851360be4fd00506586c2cbc221" category="inline-link-macro-rx"></block>了解更多。</block>
  <block id="db01fe05d3d3aed74c46d6d290dd1cab" category="list-text">從 AWS EC2 控制台部署兩個 FSx ONTAP儲存 HA 叢集來託管 PostgreSQL 資料庫磁碟區。如果您不熟悉 FSx 儲存的部署，請參閱文檔<block ref="3aa2f9e2ff4e46f232bd5ec63657d0d7" category="inline-link-macro-rx"></block>以獲得逐步說明。</block>
  <block id="7053a216e34d0f83be18a65f22ce62ce" category="list-text">建立一個 Centos Linux VM 來託管 Ansible 控制器。 Ansible 控制器可以位於本機或 AWS 雲端。如果它位於本地，則必須具有與 VPC、EC2 Linux 實例和 FSx 儲存叢集的 SSH 連線。</block>
  <block id="aaac1ea7463ef799eaafc693b16b1f81" category="inline-link-macro">NetApp解決方案自動化入門</block>
  <block id="5f064367e08e42aa3f3156a0eeaa0ca8" category="list-text">依照資源中的「在 RHEL/CentOS 上為 CLI 部署設定 Ansible 控制節點」部分所述設定 Ansible 控制器<block ref="bbf9e73d195c905907d3c05f6204320d" category="inline-link-macro-rx"></block>。</block>
  <block id="007fa0067fff9abdcd3e5b9ce9f20c06" category="list-text">從公共NetApp GitHub 網站複製自動化工具包的副本。</block>
  <block id="0ca21e6da2c89e765706d9a77f412898" category="list-text">從工具包根目錄執行先決條件劇本來安裝 Ansible 控制器所需的集合和函式庫。</block>
  <block id="df40cb16c4a24c991c143fbddeedd0bc" category="list-text">檢索資料庫主機變數檔案所需的 EC2 FSx 執行個體參數<block ref="ea858a411f1af6150f14b84176148712" prefix=" " category="inline-code"></block>和全域變數文件<block ref="cb8e25d5e6251a20afadf4c5f4b626bb" prefix=" " category="inline-code"></block>配置。</block>
  <block id="57c7844b0a299340cf9b625ce4a0745a" category="section-title">設定 hosts 文件</block>
  <block id="ed578fbfbec5634c4fa508cde5bc4e85" category="paragraph">將主 FSx ONTAP叢集管理 IP 和 EC2 執行個體主機名稱輸入到 hosts 檔案中。</block>
  <block id="6ef214427ca7b42201d0b0508f56df98" category="section-title">配置host_vars資料夾中的host_name.yml文件</block>
  <block id="77ac1da2cd356e327eb4bfc4c5a21bcc" category="section-title">配置vars資料夾中的全域fsx_vars.yml文件</block>
  <block id="d56625a35762821798a2f3dd55ead05d" category="section-title">PostgreSQL 部署和 HA/DR 設定</block>
  <block id="943a124028d8f011631df765453640dc" category="paragraph">以下任務在主 EC2 DB 伺服器主機上部署 PostgreSQL DB 伺服器服務並在主站點初始化資料庫。然後在備用站點設定備用主 EC2 DB 伺服器主機。最後，從主站點 FSx 叢集到備用站點 FSx 叢集建立 DB 磁碟區複製，以實現災難復原。</block>
  <block id="08f6dd070ef1adfcbe3d7f3c70b08905" category="list-text">在主 FSx 叢集上建立 DB 卷，並在主 EC2 執行個體主機上設定 postgresql。</block>
  <block id="bf22091495c9a041dcbdba3a97795095" category="list-text">設定備用 DR EC2 執行個體主機。</block>
  <block id="f2dd18dfc82378171d01bdd3f956bc6f" category="list-text">設定 FSx ONTAP叢集對等和資料庫磁碟區複製。</block>
  <block id="d681aef28cf1f863d0683a6896f12995" category="list-text">將前面的步驟合併為單步驟 PostgreSQL 部署和 HA/DR 設定。</block>
  <block id="fe217a2e30a79cebc71db6d5cb676a71" category="list-text">若要在主網站或備用網站設定備用 PostgreSQL DB 主機，請註解掉主機檔案 [dr_postgresql] 部分中的所有其他伺服器，然後使用對應的目標主機（例如主網站上的 psql_01ps 或備用 EC2 運算執行個體）執行 postgresql_standby_setup.yml 劇本。確保主機參數檔如<block ref="7c0f59fa275836ef9c4f28bec839acca" prefix=" " category="inline-code"></block>配置在<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block>目錄。</block>
  <block id="d3ecdce9695eacdb90ec80fa276865d4" category="section-title">PostgreSQL 資料庫快照備份並複製到備用站點</block>
  <block id="3b320790a7f864b473e3baa86de785fe" category="paragraph">PostgreSQL 資料庫快照備份和複製到備用網站可以在 Ansible 控制器上以使用者定義的間隔進行控制和執行。我們已經驗證間隔可以低至 5 分鐘。因此，當主站點發生故障時，如果故障發生在下一次計劃快照備份之前，則可能會有 5 分鐘的資料遺失。</block>
  <block id="421057a9fa982de2a1c1f79f5f03d750" category="section-title">故障轉移到災難復原備用站點</block>
  <block id="6ddcc779c247e4adb5b5a56a34edd75d" category="paragraph">為了將 PostgreSQL HA/DR 系統作為 DR 練習進行測試，請透過執行下列劇本在備用網站上的主備用 EC2 DB 執行個體上執行故障轉移和 PostgreSQL 資料庫復原。在實際的 DR 場景中，對實際故障轉移到 DR 站點執行相同的操作。</block>
  <block id="724a617bc1dcc9b26fedb732f63a569d" category="section-title">故障轉移測試後重新同步複製的資料庫卷</block>
  <block id="6a08e960bd12a4fcddfd08082fbece4b" category="paragraph">故障轉移測試後執行重新同步以重新建立資料庫磁碟區SnapMirror複製。</block>
  <block id="145966bc8e38b26c384abaf4e450f6a7" category="section-title">由於 EC2 計算執行個體故障，從主 EC2 資料庫伺服器故障轉移到備用 EC2 資料庫伺服器</block>
  <block id="32d16eeba786f125b3c1e4750ad34e08" category="paragraph">NetApp建議執行手動故障轉移或使用可能需要許可證的成熟 OS 叢集軟體。</block>
  <block id="a123daaac5749e4d0965aca160f0adfd" category="list-text">NetApp解決方案自動化</block>
  <block id="efd1209a6356c489b62e6d27e7914fb3" category="paragraph"><block ref="efd1209a6356c489b62e6d27e7914fb3" category="inline-link-macro-rx"></block></block>
  <block id="0208d173d842cfec8be8dad63b708882" category="summary">該解決方案透過NetApp SnapCenter資料庫管理 UI 工具提供了公有雲或本機ONTAP儲存上的 PostgreSQL 資料庫備份、復原和複製的概述和詳細資訊。</block>
  <block id="86afe5e672706ebf07a25cefdaf65a83" category="doc">TR-5000：使用SnapCenter在ONTAP上進行 PostgreSQL 資料庫備份、復原和克隆</block>
  <block id="b0a4a4b16084579b9fb08abd84fc9200" category="paragraph">在本文檔中，我們展示了使用非常用戶友好的SnapCenter UI 工具在公有雲或本地的NetApp ONTAP儲存上對 PostgreSQL 資料庫的保護和管理。</block>
  <block id="ff6a47e55ebc21d8a14740c025974a4c" category="list-text">備份和還原在公有雲或本地的NetApp ONTAP儲存上部署的 PostgreSQL 資料庫。</block>
  <block id="0082c0db1963117376abf882b6d7b931" category="list-text">管理 PostgreSQL 資料庫快照和複製副本，以加速應用程式開發並改善資料生命週期管理。</block>
  <block id="bfd25b929e933678d469923b32058ad4" category="list-text">一位 DBA 想要在NetApp ONTAP儲存上部署 PostgreSQL 資料庫。</block>
  <block id="0bd9df05e1b49801909e3e3c2420bc5e" category="list-text">一位資料庫解決方案架構師想要在NetApp ONTAP儲存上測試 PostgreSQL 工作負載。</block>
  <block id="cc6d7c78a5d2bbe29ba930d9350cc604" category="list-text">一位儲存管理員想要在NetApp ONTAP儲存上部署和管理 PostgreSQL 資料庫。</block>
  <block id="d86607cdb1a8c3ac3bbfd6e85898c33f" category="list-text">希望在NetApp ONTAP儲存上建立 PostgreSQL 資料庫的應用程式擁有者。</block>
  <block id="6f510a5066e949832609cf0e09e0d8f6" category="inline-image-macro">此圖提供了使用SnapCenter進行 PostgreSQL 備份、復原和複製的詳細圖片。</block>
  <block id="c14c539bd15c52bf4cbdae2bfb825a79" category="paragraph"><block ref="c14c539bd15c52bf4cbdae2bfb825a79" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1672d070f346948fb25e819b40bb3ade" category="cell">NetApp AFF A220</block>
  <block id="624ebd65ecbd0b6f332df1b7eba2c765" category="cell">版本 9.12.1P2</block>
  <block id="8ca87a47b2fcf81dd40142a6a32994e5" category="cell">磁碟架 DS224-12，IOM12E 模組，24 個磁碟/12 TiB 容量</block>
  <block id="465ebb14ba960c957b9556c49d0b833c" category="cell">VMware vSphere 群集</block>
  <block id="ca307f4e3ed38941bf4f8edd45ba05b8" category="cell">版本 6.7</block>
  <block id="a6ab034252d4b84947848f05595a81c2" category="cell">4 個NetApp HCI H410C 計算 ESXi 節點</block>
  <block id="f9fa8e4ec8d4dfd8388984164c7cfd07" category="cell">PostgreSQL 資料庫</block>
  <block id="134c70e6eb14194780a6359f17cc4310" category="cell">版本 14.13</block>
  <block id="7dc0bda5f0004471cce88c42838480bc" category="cell">使用 HammerDB tpcc 架構填入 PostgreSQL 資料庫集群</block>
  <block id="5e62c3b48256169734f39b488e4f9d7a" category="cell">將資料和日誌分離到不同的掛載點</block>
  <block id="37d7df2dbb98a2882a22b3ecade3b0e3" category="section-title">實驗室環境中的 PostgreSQL 資料庫配置</block>
  <block id="880863f85b2815165e7ac105506b208c" category="cell">psql01</block>
  <block id="1358bd019e82f5018e9e8cfc36ef6a41" category="cell">主資料庫伺服器</block>
  <block id="e76e361abe7f4e8b566774c9bcca08f8" category="cell">/pgdata、/pglogs ONTAP儲存上的 NFS 磁碟區掛載</block>
  <block id="db3efa9cd192776a04c743c134f1916b" category="cell">psql02</block>
  <block id="3ecf136d176922e6f3931b519567c35f" category="cell">克隆資料庫伺服器</block>
  <block id="3dc32132e76aaa74475ec3ea0d44d554" category="cell">/pgdata_clone、/pglogs_clone NFS 精簡克隆卷在ONTAP儲存上掛載</block>
  <block id="c09c0b95c6847bc3d6ff6de15094ac78" category="paragraph">以下部分提供了在公有雲或本機的NetApp ONTAP儲存上部署、配置SnapCenter以及 PostgreSQL 資料庫備份、復原和複製的逐步流程。</block>
  <block id="7e7efb7e7b278c5ce5253a775d1c8313" category="inline-link-macro">AWS FSx/EC2 中的自動化 PostgreSQL 高可用性部署與災難復原</block>
  <block id="b3bff6e76bf725332f7c508ee39d953e" category="list-text">部署需要在ONTAP儲存上運行兩個現有的 PostgreSQL 資料庫，一個作為主資料庫伺服器，另一個作為克隆資料庫伺服器。有關在ONTAP上部署 PostgreSQL 資料庫的參考，請參閱 TR-4956：<block ref="8126b81fc116f151aaaff9f3a552fb15" category="inline-link-macro-rx"></block> ，尋找主實例上的 PostgreSQL 自動部署劇本。</block>
  <block id="e7e7b30ec48b23043db7c916c4df64a8" category="list-text">配置 Windows 伺服器以運行最新版本的NetApp SnapCenter UI 工具。詳細資訊請參考以下連結：<block ref="131e9eb1b10c693e5b08c2ea655bbc23" category="inline-link-macro-rx"></block> 。</block>
  <block id="db810f259bfbdfcbd49b2e60f2b18bcd" category="paragraph">我們建議透過線上<block ref="709a64672cb1b481d7e1d00abe15371a" category="inline-link-macro-rx"></block>在繼續進行SnapCenter安裝和設定之前：。下面提供了在ONTAP上為 PostgreSQL 安裝和設定SnapCenter software的步驟的進階摘要。</block>
  <block id="7b8b31d8c8cb538a930b9ccb8f9f08a4" category="list-text">從SnapCenter Windows 伺服器下載並安裝最新的 Java JDK<block ref="1a0bb7a886be273015991771cf1b1190" category="inline-link-macro-rx"></block> 。關閉 Windows 防火牆。</block>
  <block id="d12211135ff96a41848a6b55b09edc14" category="list-text">從SnapCenter Windows 伺服器下載並安裝或更新SnapCenter 6.0 Windows 先決條件：PowerShell - PowerShell-7.4.3-win-x64.msi 和 .Net 主機套件 - dotnet-hosting-8.0.6-win。</block>
  <block id="a76f9b9e5a7dcbabe5996af8a905ab9a" category="list-text">從SnapCenter Windows 伺服器，從NetApp支援網站下載並安裝最新版本（目前為 6.0）的SnapCenter安裝執行檔：<block ref="f0da1a8fe9efadb5bab3d3f47fea4f67" category="inline-link-macro-rx"></block> 。</block>
  <block id="1376d3475bdd5060c0e89308f0afdee0" category="list-text">從資料庫 DB VM 為管理員使用者啟用 ssh 無密碼身份驗證<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>並且無需密碼即可獲得其 sudo 權限。</block>
  <block id="0f0497916335b81b650f8e666e4f87fb" category="list-text">從資料庫 DB VM 停止並停用 Linux 防火牆守護程式。安裝 java-11-openjdk。</block>
  <block id="98485ba3e816ef2c376e735eaaca1996" category="list-text">從SnapCenter Windows 伺服器啟動瀏覽器，透過連接埠 8146 使用 Windows 本機管理員使用者或網域使用者憑證登入SnapCenter 。</block>
  <block id="abd24445739e5a7754ac103143f18d3a" category="list-text">從<block ref="c4646a4d73e5bf2cf1843bda6cd9f769" prefix=" " category="inline-code"></block>，為SnapCenter管理目標建立憑證。在這個示範案例中，它們是用於登入 DB 伺服器 VM 的 Linux 使用者管理員和用於 PostgreSQL 存取的 postgres 憑證。</block>
  <block id="8889f151bdda6708396be51876a8ff8d" category="paragraph"><block ref="8889f151bdda6708396be51876a8ff8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="677b94a89e12424ac5cbd93888053f2a" category="admonition">在建立憑證之前重設 PostgreSQL 使用者 postgres 密碼。</block>
  <block id="fd264fac64919245c8d695dbfd26a480" category="list-text">從<block ref="5c6ab1284b6b7a5a7102854a969c99be" prefix=" " category="inline-code"></block>選項卡，新增<block ref="dbc7df65565b4f36db0a469d1e54a440" prefix=" " category="inline-code"></block>具有ONTAP叢集管理員憑證。對於Azure NetApp Files，您需要建立用於容量池存取的特定憑證。</block>
  <block id="a7837619aa2e63c32a8ae9ba2572273c" category="paragraph"><block ref="3f452db27d93b3b21830089bd789d431" category="inline-image-macro-rx" type="image"></block> <block ref="36761126796ab413463a554efb0001ca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="502b2a8980e06e76734f80a068d0b06c" category="list-text">從<block ref="8124579383e90243e4b06323d2b37f8d" prefix=" " category="inline-code"></block>選項卡，新增 PostgreSQL DB VM，在 Linux 上安裝 PostgreSQL 的SnapCenter插件。</block>
  <block id="07880f6edf31c3c2ac8b2a6b4b2081dd" category="paragraph"><block ref="ef48b75130c272576b13e5d1b6c5308c" category="inline-image-macro-rx" type="image"></block> <block ref="95682b2bc05155e7e29326f779550a7f" category="inline-image-macro-rx" type="image"></block> <block ref="8b708809baf85183238eec9c3f938af2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="529c952afb482fc77011cc6bd24f129d" category="list-text">一旦在資料庫伺服器虛擬機器上安裝了主機插件，主機上的資料庫就會自動發現並可見<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡。</block>
  <block id="83120b6ff085b221f66d9c0f071d5bdf" category="paragraph"><block ref="83120b6ff085b221f66d9c0f071d5bdf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ad7cd840125fb6f07e266c4bc3c1eb5" category="paragraph">初始自動發現的 PostgreSQL 叢集在其叢集名稱旁邊顯示一個紅色鎖。必須使用上一節中SnapCenter設定期間建立的 PostgreSQL 資料庫憑證來解鎖它。然後，您需要建立並套用備份策略來保護資料庫。最後，手動或透過排程器執行備份以建立 SnapShot 備份。以下部分示範了逐步的過程。</block>
  <block id="96faaeef1e288b118e8b631cb8ab3aa2" category="list-text">解鎖 PostgreSQL 叢集。</block>
  <block id="2571003ef690a80c9c0bf4e39d778f57" category="list-text">導航至<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡，其中列出了在資料庫虛擬機器上安裝SnapCenter插件後發現的 PostgreSQL 叢集。最初，它是鎖定的，並且<block ref="58d4fcf0afd65a0eb3857a2d3e254c8c" prefix=" " category="inline-code"></block>資料庫叢集顯示為<block ref="4aa6066b3ed6d1b995450c6c7ad4a3d8" prefix=" " category="inline-code"></block>。</block>
  <block id="e414a538146036b1e6ca9525797b59e0" category="paragraph"><block ref="e414a538146036b1e6ca9525797b59e0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="77b1c18fa518724e1236456c858ba584" category="list-text">按一下叢集名稱，然後<block ref="b79be9bf75eddcfcf0eaf3eaae45af53" prefix=" " category="inline-code"></block>開啟憑證配置頁面。</block>
  <block id="db726e19c56a88309707d21cd42936d6" category="paragraph"><block ref="db726e19c56a88309707d21cd42936d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eb5db70e92095f4efa76e82f7939bbeb" category="list-text">選擇<block ref="e8a48653851e28c69d0506508fb27fc5" prefix=" " category="inline-code"></block>在先前的SnapCenter設定期間所建立的憑證。</block>
  <block id="adcd09c398b23e75b6b2c5076322d334" category="paragraph"><block ref="adcd09c398b23e75b6b2c5076322d334" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76b9f4973756486f704884356cfe956d" category="list-text">一旦應用憑證，叢集將被解鎖。</block>
  <block id="13804670af016195555b93b9b804463c" category="paragraph"><block ref="13804670af016195555b93b9b804463c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c05439d1de79d9c345b3085afda8e4e6" category="list-text">建立 PostgreSQL 備份策略。</block>
  <block id="c602ab5dbbe71f61cf71910ed3d1c0ea" category="list-text">導航至<block ref="51ac4bf63a0c6a9cefa7ba69b4154ef1" prefix=" " category="inline-code"></block>-<block ref="0b9e4bd17df66a1924ad40a4509486a6" prefix=" " category="inline-code"></block>然後點擊<block ref="03c2e7e41ffc181a4e84080b4710e81e" prefix=" " category="inline-code"></block>建立備份策略。</block>
  <block id="b9dfbe8d7e0d9c8d48609a4276e63f04" category="paragraph"><block ref="b9dfbe8d7e0d9c8d48609a4276e63f04" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2e8b3ca749686249fcd8ef481245e875" category="list-text">命名備份策略。</block>
  <block id="13f2a9283fd70543178a65bf3549fb32" category="paragraph"><block ref="13f2a9283fd70543178a65bf3549fb32" category="inline-image-macro-rx" type="image"></block></block>
  <block id="578d9a13279df5d9ea7b35c9fc8e7b98" category="list-text">選擇儲存類型。預設備份設定應該適用於大多數情況。</block>
  <block id="61fa41332f45b70301d4b2d002c1438c" category="paragraph"><block ref="61fa41332f45b70301d4b2d002c1438c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ca19e822e81192c8cf149ac143b265ae" category="list-text">定義備份頻率和快照保留。</block>
  <block id="03f265d1356b7666cc080eb131e88f9e" category="paragraph"><block ref="03f265d1356b7666cc080eb131e88f9e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="15f8e466c9cd82504fc845cd9332b11b" category="list-text">如果資料庫磁碟區複製到輔助位置，則可以選擇輔助複製。</block>
  <block id="f7e5cabbc57d98886ee55e1fca1b2c0f" category="paragraph"><block ref="f7e5cabbc57d98886ee55e1fca1b2c0f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="04aae0c8fa5dccdca948a5fbe2dc70b8" category="list-text">查看摘要和<block ref="a20ddccbb6f808ec42cd66323e6c6061" prefix=" " category="inline-code"></block>建立備份策略。</block>
  <block id="0662f913c0e57dce93102b020558785e" category="paragraph"><block ref="4f2248ac7b84dbe69e1721ddfaf3f337" category="inline-image-macro-rx" type="image"></block> <block ref="c3a39cff8cb25160f7ed4a399072cdaa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c7a20b4d56ae0aaf45c44165115aeff" category="list-text">應用備份策略來保護 PostgreSQL 資料庫。</block>
  <block id="d443cf7412994ece6c3ca26fd8e41564" category="list-text">返回<block ref="be8545ae7ab0276e15898aae7acfbd7a" prefix=" " category="inline-code"></block>在選項卡中，按一下叢集名稱以啟動 PostgreSQL 叢集保護工作流程。</block>
  <block id="c8a83073208f72761bad05d7d00e4992" category="paragraph"><block ref="c8a83073208f72761bad05d7d00e4992" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9233033e8cb4e25b59690b7ce57b92b0" category="list-text">接受預設<block ref="d5b084b03b5aab3967861dd719a68968" prefix=" " category="inline-code"></block>。此頁面上的許多選項不適用於自動發現的目標。</block>
  <block id="e505e2a9a93ad9795a3a2bc7da12bacb" category="paragraph"><block ref="e505e2a9a93ad9795a3a2bc7da12bacb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39c2db3deae4cef924f42236c1adbf9c" category="list-text">應用剛剛建立的備份策略。如果需要，請新增備份計畫。</block>
  <block id="4ad9f9dbfbff9cfdceaa05a96c88267e" category="paragraph"><block ref="4ad9f9dbfbff9cfdceaa05a96c88267e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe3641a010d1ff6f82662dafebee518a" category="list-text">如果需要備份通知，請提供電子郵件設定。</block>
  <block id="8e651d737b144135225cf947df0c9dc8" category="paragraph"><block ref="8e651d737b144135225cf947df0c9dc8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b327947defdbe57ec5d913a55ca76ac4" category="list-text">審查摘要和<block ref="a20ddccbb6f808ec42cd66323e6c6061" prefix=" " category="inline-code"></block>實施備份策略。現在 PostgreSQL 叢集受到保護。</block>
  <block id="739b5dc8cca62aa2e4a75d12a56f08e9" category="paragraph"><block ref="739b5dc8cca62aa2e4a75d12a56f08e9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="77f6fec794580b2b4858c5f4e7509626" category="list-text">根據備份計劃或叢集備份拓撲執行備份，按一下<block ref="9a9852432e1a7055c64fef6ff8f6dd65" prefix=" " category="inline-code"></block>觸發手動按需備份。</block>
  <block id="50edd2fb9b477367c86f22e57105f807" category="paragraph"><block ref="f37272777cd8868058d66bffd162513d" category="inline-image-macro-rx" type="image"></block> <block ref="b41e1a7e9ebfb657f9e30e2914353178" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d9ade48a065ecfbd218afb0eadbaf239" category="list-text">監控備份作業<block ref="d2986ac8cb6bd55892099c1ffd6b1f6f" prefix=" " category="inline-code"></block>選項卡。備份大型資料庫通常需要幾分鐘，在我們的測試案例中，備份接近 1TB 的資料庫磁碟區大約需要 4 分鐘。</block>
  <block id="e2757abc2f7f647849775a6428defa79" category="paragraph"><block ref="e2757abc2f7f647849775a6428defa79" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c6323ab216acd62daadbfba4b3ec72ce" category="paragraph">在此資料庫復原示範中，我們展示了 PostgreSQL 資料庫叢集的時間點復原。首先，使用SnapCenter在ONTAP儲存上建立資料庫磁碟區的 SnapShot 備份。然後，登入資料庫，建立測試表，記下時間戳，然後刪除測試表。現在從備份開始恢復，直到建立測試表的時間戳，以恢復已刪除的表。以下內容擷取了使用SnapCenter UI 進行 PostgreSQL 資料庫時間點復原的工作流程和驗證的詳細資訊。</block>
  <block id="30603c41394f7491df013d9baa50dbf6" category="list-text">登入 PostgreSQL<block ref="e8a48653851e28c69d0506508fb27fc5" prefix=" " category="inline-code"></block>用戶。建立然後刪除一個測試表。</block>
  <block id="eb62842761a932b02da6c4cf55d64467" category="list-text">從<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡，開啟資料庫備份頁面。選擇要還原的 SnapShot 備份。然後，點擊<block ref="2bd339d85ee3b33e513359ce781b60cc" prefix=" " category="inline-code"></block>按鈕啟動資料庫復原工作流程。執行時間點復原時請注意備份的時間戳記。</block>
  <block id="84942db335626931f46c547d8bea0443" category="paragraph"><block ref="84942db335626931f46c547d8bea0443" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dbe57512be8bd275e479f50fe17aa78f" category="list-text">選擇<block ref="d4df13b7b67d28291a4967c9f76598a9" prefix=" " category="inline-code"></block>。目前，完整的資源是唯一的選擇。</block>
  <block id="dbdf41c5c64fe9bb8ad4a841622b0f8c" category="paragraph"><block ref="dbdf41c5c64fe9bb8ad4a841622b0f8c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7de1ed3464b5a06c38a965757c7a04fe" category="list-text">為了<block ref="ec47ba775b6cce559706e86f20fde009" prefix=" " category="inline-code"></block>， 選擇<block ref="129686c9823d4288bb3b45b13af000ec" prefix=" " category="inline-code"></block>並輸入恢復前滾至的時間戳記。</block>
  <block id="28836d0a660cf881fa94228cd1026586" category="paragraph"><block ref="28836d0a660cf881fa94228cd1026586" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2eda5ae4387f3a70e2347a034cc9dbed" category="list-text">這<block ref="ced009502445c11dc6162d3d7758d07b" prefix=" " category="inline-code"></block>允許在復原/復原操作之前針對資料庫執行腳本，或將其保留為黑色。</block>
  <block id="25fe7f0bae341be80e154bb1b060bd74" category="paragraph"><block ref="25fe7f0bae341be80e154bb1b060bd74" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a4593198c96ed2233f198af8ced4bd7f" category="list-text">這<block ref="5fa20aa4f779d0f14b1c9545ded7baa6" prefix=" " category="inline-code"></block>允許在復原/復原操作後對資料庫執行腳本，或將其保留為黑色。</block>
  <block id="402b95e44ccba2b8b4b39ac5d260da72" category="paragraph"><block ref="402b95e44ccba2b8b4b39ac5d260da72" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ab8f9d86658caf8a09dc0ae54e251d7" category="paragraph"><block ref="3ab8f9d86658caf8a09dc0ae54e251d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="75088a6e38910cb6847b87bd57ba937a" category="list-text">審查工作摘要和<block ref="a20ddccbb6f808ec42cd66323e6c6061" prefix=" " category="inline-code"></block>開始恢復工作。</block>
  <block id="65e7cbbf460e630c000608524748457d" category="paragraph"><block ref="65e7cbbf460e630c000608524748457d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="841c1b65187e697011e91b1db980de9c" category="paragraph"><block ref="841c1b65187e697011e91b1db980de9c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="11ac2011dd9dc2421978bc449b6395c9" category="list-text">登入 PostgreSQL<block ref="e8a48653851e28c69d0506508fb27fc5" prefix=" " category="inline-code"></block>使用者並驗證測試表是否已恢復。</block>
  <block id="582af225dd8e934ba8d6926f2df8462c" category="paragraph">透過SnapCenter克隆 PostgreSQL 資料庫叢集會從來源資料卷的快照備份中建立一個新的精簡克隆磁碟區。更重要的是，與其他方法相比，它快速（幾分鐘）且高效，可以克隆生產資料庫以支援開發或測試。因此，它大大降低了儲存成本並改善了資料庫應用程式生命週期管理。以下部分示範了使用SnapCenter UI 複製 PostgreSQL 資料庫的工作流程。</block>
  <block id="583bd7e8d60315274fdc25c8e5c3f74b" category="list-text">驗證克隆過程。再次在測試表中插入一行。然後運行備份以捕獲測試資料。</block>
  <block id="2de672ab8b866fedc2bf90f571060980" category="list-text">從<block ref="ddcf50c29294d4414f3f7c1bbc892cb5" prefix=" " category="inline-code"></block>選項卡，開啟資料庫叢集備份頁面。選擇包含測試資料的資料庫備份快照。然後，點擊<block ref="d329fd777726c300d7a044e482b967e7" prefix=" " category="inline-code"></block>按鈕啟動資料庫克隆工作流程。</block>
  <block id="c0faaffb0e7463a446213cce24d0ecc0" category="paragraph"><block ref="c0faaffb0e7463a446213cce24d0ecc0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d5baf4bc9cb40283c777aa0b045944fc" category="list-text">選擇與來源資料庫伺服器不同的資料庫伺服器主機。選擇目標主機上未使用的 TCP 連接埠 543x。</block>
  <block id="3d0e90f74aab0b8c85bea9f019e5b5df" category="paragraph"><block ref="3d0e90f74aab0b8c85bea9f019e5b5df" category="inline-image-macro-rx" type="image"></block></block>
  <block id="836b4d8e8ec3303ebe8363f432c65bd4" category="list-text">輸入克隆操作之前或之後執行的任何腳本。</block>
  <block id="cbdb8d7fbf1e56310d090c03326e19d9" category="paragraph"><block ref="cbdb8d7fbf1e56310d090c03326e19d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9fbd7c2563256da70e05b443d82747d2" category="paragraph"><block ref="9fbd7c2563256da70e05b443d82747d2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c8a16d3a6bf836b8134ee4e876c688a6" category="list-text">審查摘要和<block ref="a20ddccbb6f808ec42cd66323e6c6061" prefix=" " category="inline-code"></block>啟動克隆過程。</block>
  <block id="e0146ad317cf32ca7f43031ac4936470" category="paragraph"><block ref="e0146ad317cf32ca7f43031ac4936470" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6bf5ea7f8f55895d7d88247b7bce20c8" category="paragraph"><block ref="6bf5ea7f8f55895d7d88247b7bce20c8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e11fa846760366244d9202b92d30955" category="paragraph"><block ref="8e11fa846760366244d9202b92d30955" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d0aaa839d8d5f53a06bb0f0c101731b6" category="list-text">在目標資料庫伺服器主機上驗證克隆的資料庫叢集。</block>
  <block id="20084f3b89c7a2f2188c293bbfb15918" category="paragraph"><block ref="20084f3b89c7a2f2188c293bbfb15918" category="inline-link-macro-rx"></block></block>
  <block id="10b2aec15aae4d935355e27497e66c5f" category="summary">一系列影片和示範討論了 NetApp 眾多解決方案的功能</block>
  <block id="0a280221d417c887229dcf2fb82d03da" category="doc">觀看有關NetApp開源資料庫解決方案的影片和演示</block>
  <block id="c24eb24cff42f2f4cb18033c948982f1" category="paragraph">與NetApp一起探索開源資料庫的資料庫解決方案。</block>
  <block id="5b70a7f45ddd32cacfe28af238662d3d" category="video-title">PostgreSQL 自動部署、HA/DR 複製設定、故障轉移、重新同步</block>
  <block id="6540af8f67ebb2e360ec621818ae2244" category="doc">觀看有關NetApp的 Oracle 資料庫解決方案的影片和演示</block>
  <block id="de87544950491bfc780917668ccef43c" category="paragraph">探索 NetApp 的綜合影片庫，其中包含NetApp針對 Oracle 的資料庫解決方案。每個集合都重點介紹了針對企業工作負載的實用解決方案、整合最佳實踐和現代資料庫管理。</block>
  <block id="bcd88b2fc5783b2d005dae0d02ee27b0" category="section-title">部署和自動化</block>
  <block id="3c1997d1c3baaf5cbfe55f26b8001c10" category="video-title">使用 ASM 從 GCNV 上的 DataGuard 備用伺服器自動複製 Oracle DB</block>
  <block id="9efcc0ad3c93b238cc0495e3c87b715f" category="video-title">使用 Ansible 在FlexPod上自動部署 Oracle 19c RAC</block>
  <block id="bfc99c60db13c79f3bec1440ef75ea3a" category="section-title">備份、還原和克隆</block>
  <block id="938d46c61cee67ddb1711167aba9f463" category="video-title">第 4a 部分 - 使用SnapCenter UI 從複製的備用副本克隆用於開發/測試的資料庫</block>
  <block id="09b285fbf39efff75f085bbadedde45e" category="video-title">第 4b 部分 - 使用SnapCenter UI 進行資料庫備份、還原和克隆</block>
  <block id="45885d9d91879afc9c37a8b3e046aac4" category="video-title">第 4c 部分 - 使用BlueXP SaaS Apps 備份和還原進行資料庫備份和還原</block>
  <block id="befb671d4726ae8f3ef8dab781033dcc" category="video-title">使用儲存快照進行 Oracle 多租用戶可插拔資料庫克隆</block>
  <block id="5255e744c8d781088cf41d09d7e36c01" category="section-title">現代化與遷移</block>
  <block id="17380577cd51f141b6dff37ee29d0805" category="video-title">第 1 部分 - 利用 AWS 和 FSx ONTAP中的混合雲實現 Oracle 現代化</block>
  <block id="369b9aec1beb25441dc7c7fb46bc0fc6" category="video-title">第 2a 部分 - 使用自動化 PDB 遷移將資料庫從本地遷移到 AWS，並實現最高可用性</block>
  <block id="2edb94ef9695015c5cd01fec59bcc782" category="video-title">第 2b 部分 - 使用BlueXP控制台透過SnapMirror將資料庫從本地遷移到 AWS</block>
  <block id="f18e8bcc857ce0b078e974c3f0ccf5cb" category="section-title">高可用性、災難復原和複製</block>
  <block id="59fa2b2110d3350efd262bd841c10975" category="video-title">第 3 部分 - 自動資料庫 HA/DR 複製設定、故障轉移、重新同步</block>
  <block id="e257c31f05ab40b766b6abee28bfd5fd" category="doc">觀看有關NetApp SQL Server 資料庫解決方案的影片和演示</block>
  <block id="ba4a53a72528eb0c7be5c86b38558399" category="paragraph">觀看有關使用NetApp的 SQL Server 資料庫資料庫解決方案的影片。</block>
  <block id="a5d647feb3f163e0333891f5484df24d" category="video-title">使用Amazon FSx ONTAP在 AWS EC2 上部署 SQL Server</block>
  <block id="6efb1daf837012f866ff5d278e9fa94f" category="summary">NetApp資料庫解決方案附件的最新變更日誌。</block>
  <block id="4a0cf7e1e14c17dc208e75d79ec06134" category="doc">NetApp資料庫解決方案的新功能</block>
  <block id="83451d3d21ca1fb627e22751c0bc12c4" category="paragraph">了解資料庫解決方案的新功能。</block>
  <block id="bab52961b58c502c7991d35556c25367" category="section-title">2025年8月18日</block>
  <block id="47e26e0d5bbeef43c544dd9ae72e66b0" category="inline-link-macro">NetApp解決方案系列</block>
  <block id="840125a006aee7dc0e8efd313e7b614e" category="paragraph">NetApp解決方案網站現在是<block ref="f083b096ae581e72c5ab727ef8bd5732" category="inline-link-macro-rx"></block>，其中包括以下網站：</block>
  <block id="e87298059f60b0844dc971f315184cf5" category="inline-link-macro">NetApp人工智慧解決方案</block>
  <block id="ac42ca0e1f789a8367b40d9824726778" category="list-text"><block ref="ac42ca0e1f789a8367b40d9824726778" category="inline-link-macro-rx"></block></block>
  <block id="9cae574c1dc1ca50a949c1e889637ba7" category="inline-link-macro">NetApp容器解決方案</block>
  <block id="31d1ae0120af1d791e4320e17eb10687" category="list-text"><block ref="31d1ae0120af1d791e4320e17eb10687" category="inline-link-macro-rx"></block></block>
  <block id="3947417923606d3599bcba7a82f71f1b" category="inline-link-macro">NetApp資料管理解決方案</block>
  <block id="56c054d4bb919790ebe189f7a7d11c3c" category="list-text"><block ref="56c054d4bb919790ebe189f7a7d11c3c" category="inline-link-macro-rx"></block></block>
  <block id="9bb3e58246c5654a6d8e08a7bddd60ec" category="list-text">NetApp資料庫解決方案</block>
  <block id="a37049a2a78422ac5627c7987db5c337" category="inline-link-macro">NetApp公有雲與混合雲解決方案</block>
  <block id="144417321224efbf0afc2ae665a84a46" category="list-text"><block ref="144417321224efbf0afc2ae665a84a46" category="inline-link-macro-rx"></block></block>
  <block id="2729aba3baa90aaaed37b282e515f6e4" category="inline-link-macro">適用於 SAP 的NetApp解決方案</block>
  <block id="5e056430559fb77ac659dbb71ecce256" category="list-text"><block ref="5e056430559fb77ac659dbb71ecce256" category="inline-link-macro-rx"></block></block>
  <block id="4ead908c2ca3b4c7156e0e703642415d" category="inline-link-macro">NetApp虛擬化解決方案</block>
  <block id="3100186c9f62cec85ac05309c5d10217" category="list-text"><block ref="3100186c9f62cec85ac05309c5d10217" category="inline-link-macro-rx"></block></block>
  <block id="279cfd690e69d2bed1bbe733dc99b31e" category="sidebar">NetApp資料庫解決方案是一套策略與技術能力，展現了NetApp儲存在各大企業資料庫中的能力。</block>
  <block id="4156bf7ad90273c885ab4d182a53809a" category="sidebar">NetApp企業資料庫解決方案是一套策略與技術能力，展現了NetApp儲存在各大企業資料庫中的能力。</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="sidebar">開始</block>
  <block id="33871b6190a8d5adbe8b15282054766c" category="sidebar">什麼是新的</block>
  <block id="d6b9ea32b921a9f56de32062ba4b94f3" category="sidebar">部落格</block>
  <block id="de42653a3a04e4aefa258105632011d4" category="sidebar">影片和演示</block>
  <block id="ae5730a15c3528c9703ea67ae24a7833" category="sidebar">適用於Amazon FSx for ONTAP 的Oracle</block>
  <block id="9727d6d2e0af471edc45d5f975582f75" category="sidebar">在 AWS EC2 中部署 Oracle HA</block>
  <block id="9a512e395c60d9ecfa257afc805c4ec6" category="sidebar">在 FSx ONTAP上部署 Oracle</block>
  <block id="8c2c4d00957841c79c4d6ac4b4d0b132" category="sidebar">使用 FSx ONTAP在 VMware Cloud 上執行 Oracle</block>
  <block id="b97556532b01ad38b054552c28318ba8" category="sidebar">使用 FSx ONTAP降低 Data Guard 成本</block>
  <block id="e715a8cac89c930fe15882a3b18971bf" category="sidebar">在 FSx ONTAP上還原並克隆 Oracle VLDB</block>
  <block id="571c97c7b1dee69efb848be73bb1c028" category="sidebar">在 FSx/EC2 上保護和部署 Oracle</block>
  <block id="090508cde04f264f9c230748f68cd0ff" category="sidebar">適用於Azure NetApp Files的Oracle</block>
  <block id="150bc25b813aa8a3e09febd108a03d47" category="sidebar">在 ANF 上部署 Oracle VLDB</block>
  <block id="974f0493d067b45b7e91b94229fc1176" category="sidebar">使用 ANF 降低 Data Guard 成本</block>
  <block id="c06329dff30487420677a3c25b155195" category="sidebar">在 ANF 上恢復並克隆 Oracle VLDB</block>
  <block id="c106be60d8793552a7922fe7d84ef632" category="sidebar">使用 NFS 在Azure NetApp Files上部署 Oracle</block>
  <block id="6234d7c091322d248f7d708876dce5a6" category="sidebar">在 ANF 上部署和遷移 Oracle</block>
  <block id="99ef5097c44400a46470fd5f23637be4" category="sidebar">Oracle 適用於 Google Cloud</block>
  <block id="67a1a09611116d04603468dc094fb6d0" category="sidebar">優化 Google Cloud 上的 Oracle VLDB 備份與恢復</block>
  <block id="8174debba33e64bd04a88069853151ad" category="sidebar">在 Google Cloud 上使用 Data Guard 部署 Oracle VLDB</block>
  <block id="e6f0c3be7bd07e8ec3d6f27fd281636f" category="sidebar">查看 Google Cloud 上的 Oracle 儲存解決方案</block>
  <block id="1bb0fdcb752942858433bb15a81fd3e1" category="sidebar">適用於雲端和本地端的 SQL 伺服器解決方案</block>
  <block id="2d3ee711b69d74e8c520788ec742835f" category="sidebar">在 AWS FSx ONTAP上備份和還原 SQL Server</block>
  <block id="a85dc1fbad340687161342496dc0d487" category="sidebar">使用 FSx ONTAP在 AWS EC2 上執行 SQL Server</block>
  <block id="9240b0a4d8bbf9eb8d2ddb8dd3296260" category="sidebar">在Azure NetApp Files上執行 SQL Server</block>
  <block id="236922ec8febdbdaff2ea5410b84b2c2" category="sidebar">將本機 SQL 工作負載遷移至 FSx ONTAP</block>
  <block id="39067cf084f47533139355bf90aa7629" category="sidebar">在 Windows 上使用叢集資料ONTAP 的SAP 與 Microsoft SQL Server</block>
  <block id="13d3aa69bc69a44fa5de6d2bb88a7fb7" category="sidebar">現代化 Microsoft SQL Server</block>
  <block id="3ca11780da61eb707393ab7209c1c402" category="sidebar">採用ONTAP的 Microsoft SQL Server 的最佳實踐</block>
  <block id="d725f17f7af1db4c6409301f03741431" category="sidebar">EF 系列 Microsoft SQL Server 的最佳實踐</block>
  <block id="015e528254d9c6d2f8768070035f3bb6" category="sidebar">混合雲資料庫解決方案</block>
  <block id="a1963b628ec07c1a4ff0d4f55af534cf" category="sidebar">使用 VCF 中的vVols部署和保護 Oracle RAC</block>
  <block id="d40fb31cd591f68543a4b63d4de565f7" category="sidebar">使用 VCF 中的vVols部署和保護 Oracle SI</block>
  <block id="64862bc8f3a9cee846ff01326a559437" category="sidebar">使用 NFS 在NetApp C 系列上部署 Oracle</block>
  <block id="ffc819195b5fafcc848fb445d9a256b9" category="sidebar">使用 iSCSI 在NetApp ASA上部署 Oracle</block>
  <block id="28e1849f5511a949a329191836e34c92" category="sidebar">透過自動化在ONTAP上部署 Oracle19c</block>
  <block id="8a45683486bc8b478a3d7b91a71d448c" category="sidebar">在NetApp EF 系列上執行 Oracle 資料庫</block>
  <block id="8a05b26b3229c5c737c8a6dc618e4f1f" category="sidebar">開源資料庫</block>
  <block id="525ee0a5080d64b5df771a5ff66fdf4e" category="sidebar">在 AWS FSx/EC2 中部署 PostgreSQL 資料庫並設定災難復原</block>
  <block id="290294dfbb12a5801fa4969156ac736c" category="sidebar">ONTAP上的 MySQL 資料庫</block>
  <block id="6fabfc29f0b3a196c8407c190bb67293" category="sidebar">適用於資料庫的SnapCenter</block>
  <block id="4c6c494e6accfb5f79a5a55a9f502111" category="sidebar">使用SnapCenter在ONTAP上備份和複製 PostgreSQL</block>
  <block id="1c4ec2d5f9bd3129e17f35c67d064ead" category="sidebar">自動化設定、克隆和刷新 Oracle 資料庫</block>
  <block id="e10888e7f9e324aa90d57c8362b94b43" category="sidebar">在 Microsoft Azure NetApp File 中自動部署 Oracle</block>
  <block id="4e6197d31c21c5dc2048c6f623a132e5" category="sidebar">使用SnapCenter部署混合雲資料庫解決方案</block>
  <block id="ff60f9e1276c69fda13b3a4f3c170eea" category="sidebar">資料庫自動化工具包</block>
  <block id="b4878d2bd5728448bc4d4d566ced64bb" category="sidebar">使用 ASM 自動化 GCNV 上的 Oracle 克隆生命週期</block>
  <block id="c0eba4be997131d4466a5f0ca8da4463" category="sidebar">使用 ASM 自動化 ANF 上的 Oracle 克隆生命週期</block>
  <block id="935567dbc5e5dface4969d172a289ca5" category="sidebar">使用 PDB 重定位遷移 Oracle</block>
  <block id="2a3ce7c986d03a29d8e02470ec34e396" category="sidebar">使用Amazon FSx for NetApp ONTAP部署 Oracle HA/DR</block>
  <block id="01d3110a47518d755aa71530c30135c9" category="sidebar">Amazon FSx for NetApp ONTAP</block>
  <block id="7350e91854bfa849be06d5cd48d8321d" category="sidebar">在 AWS 中部署 PostgreSQL</block>
  <block id="e95b75f557af9310f3d9c6299286a533" category="sidebar">解決方案請求和回饋</block>
  <block id="776ab15fef436c9315c14738509d299e" category="sidebar">提出新的解決方案</block>
  <block id="cfdaac8ef24ac5b2612570c34da00954" category="sidebar">提供解決方案回饋</block>
  <block id="74f147b5050a83e2f17403b8cf652de0" category="sidebar">探索 NetApp 的綜合視訊庫，展示涵蓋 Oracle、SQL Server 和開源資料庫的資料庫解決方案。每個集合都專注於特定的用例和整合場景。</block>
  <block id="1a10d5f94107a8b01986811847c40bb3" category="sidebar">NetApp資料庫解決方案視頻</block>
  <block id="c0a394fcf82b9c71d6d09426d3c2ff7a" category="sidebar">觀看有關使用NetApp的 Oracle、SQL Server、開源和混合資料庫解決方案的影片。</block>
  <block id="80d12e518e5e57b41940fc60b9767799" category="sidebar">Oracle 資料庫視訊</block>
  <block id="e005cc668ae927bb11468eaea8939fd3" category="sidebar">高可用性、災難復原和複製</block>
  <block id="84522df2c422f53bb8c28b69e33d81f5" category="sidebar">SQL Server 和開源資料庫視頻</block>
  <block id="9ecb8eb6518d5fb0d48187a3a8fe6f01" category="sidebar">SQL Server 影片</block>
  <block id="e538067572baf04e5a80c1a3dfdee826" category="sidebar">開源資料庫視頻</block>
  <block id="114dd74d303c1a7a0ca71b00760474ba" category="sidebar">資料庫解決方案</block>
  <block id="7971b65756ed6daabdb37d67874e0dbb" category="sidebar">AWS 雲端</block>
  <block id="f79dc2068fcf2265241e4f9f6d3892b8" category="sidebar">使用 Pacemaker Clustering 和 FSx ONTAP在 AWS EC2 中實作 Oracle HA</block>
  <block id="42f50c71268208e2ec344d3cd2a9a691" category="sidebar">使用 iSCSI 在Amazon FSx ONTAP上簡化、自動化 Oracle 部署</block>
  <block id="64de5a7dfd6282ca282a38cee5f5a0b6" category="sidebar">使用 iSCSI 在Amazon FSx ONTAP上簡化、自動化 Oracle 部署</block>
  <block id="8d4ab3d80a936103be6c5ad407f12335" category="sidebar">VMware Cloud on AWS 中的 Oracle 以及用戶端安裝的 FSx ONTAP</block>
  <block id="571c3c1a53637956756540259d1b4c11" category="sidebar">使用Amazon FSx ONTAP降低 Oracle Active Data Guard 成本</block>
  <block id="998e18ee910f7610303d504847d5f06d" category="sidebar">使用Amazon FSx ONTAP降低 Oracle Active Data Guard 成本</block>
  <block id="1f5891fe66fe85319fc1d076ceb8c604" category="sidebar">使用Amazon FSx ONTAP快速復原和克隆 Oracle VLDB</block>
  <block id="6e6fa0d6a0c9cc4ff7b09a8dfc32bd84" category="sidebar">使用Amazon FSx ONTAP快速復原和克隆 Oracle VLDB</block>
  <block id="9755d896e4f9ca9108f85fb00c9429d2" category="sidebar">Oracle 19c 在 AWS FSx/EC2 上使用 NFS/ASM 獨立重啟</block>
  <block id="309f62df43e29b5bb0a1ec7e6c3e1c43" category="sidebar">使用 iSCSI/ASM 在 AWS FSx/EC2 上部署和保護 Oracle 資料庫</block>
  <block id="5081e4816da4cb3b09aa6fc9e618b15f" category="sidebar">使用 iSCSI/ASM 在 AWS FSx/EC2 上部署和保護 Oracle 資料庫</block>
  <block id="8dccbd41bb4436a6cf63741ef9f9f9d5" category="sidebar">AWS EC2 上的 Oracle 資料庫部署和 FSx 最佳實踐</block>
  <block id="d842058c0e8814799a596324a98e5323" category="sidebar">AWS EC2 上的 Oracle 資料庫部署和 FSx 最佳實踐</block>
  <block id="5ac7b083aa99c6ec0d7a272c37dc611d" category="sidebar">部署流程</block>
  <block id="71ab9d8f34c9ab92ef83627b823e9825" category="sidebar">資料庫管理</block>
  <block id="c3b88d5ff29715f5f8dd3c907b3f1bc3" category="sidebar">資料庫遷移</block>
  <block id="83399f78bd83aa045ee6f6e7d51bc5fa" category="sidebar">Azure 雲端</block>
  <block id="be9d5210892e9637d00ac53e1404724d" category="sidebar">ANF 上的高吞吐量 Oracle VLDB 實現</block>
  <block id="443d052ccf1b623e95a76c453c9b19f4" category="sidebar">高吞吐量 Oracle VLDB 在 ANF 上的實現</block>
  <block id="2fadf2cda0f69a4641f81c17acb81602" category="sidebar">使用Azure NetApp Files降低 Oracle Active Data Guard 成本</block>
  <block id="967c88214a8b348dcebff5cfc0b978fb" category="sidebar">使用 ANF 上的增量合併快速復原 Oracle VLDB</block>
  <block id="c90c43251c42b6636335f78ddce9094b" category="sidebar">使用 ANF 上的增量合併快速復原 Oracle VLDB</block>
  <block id="40aa34ba60592cc4b4c8b00b9ccf6240" category="sidebar">使用 NFS 在Azure NetApp Files上簡化、自動化 Oracle 部署</block>
  <block id="574c3ced17d944413584e89df38ac5c5" category="sidebar">針對 ANF 的 Oracle 資料庫部署與遷移最佳實踐</block>
  <block id="0e6883e4af152807aa920a0eeadf0482" category="sidebar">針對 ANF 的 Oracle 資料庫部署與遷移最佳實踐</block>
  <block id="56ef2682280ac110060b881925a87b80" category="sidebar">Google雲</block>
  <block id="bf134cab228a61f0b253ca70ec608fd6" category="sidebar">使用Google Cloud NetApp Volumes上的伺服器內增量合併優化 Oracle VLDB 備份與復原</block>
  <block id="6484ffcad1504019ca921cf712d4cdde" category="sidebar">使用Google Cloud NetApp Volumes上的伺服器內增量合併優化 Oracle VLDB 備份和還原</block>
  <block id="8924310da0def7ad0ddcbe7d9739a158" category="sidebar">使用 Data Guard 在Google Cloud NetApp Volumes上實現高吞吐量 Oracle VLDB</block>
  <block id="30a12495834244cfa9f600ebbccc6196" category="sidebar">使用 Data Guard 在 GCNV 上實現高吞吐量 Oracle VLDB</block>
  <block id="ca93abca0899efda7bb04e7579656e75" category="sidebar">概述：Oracle 資料庫與Google Cloud NetApp Volumes</block>
  <block id="ea9d5b870a4d8ca5671f6250b7d07541" category="sidebar">本地和混合雲</block>
  <block id="2b484f28f18f20d85d20028c6ee55ab4" category="sidebar">使用vVols在 VCF 中部署和保護 Oracle RAC</block>
  <block id="9f61fd2b757f5758c07d0a9a117098f0" category="sidebar">使用vVols在 VCF 中部署和保護 Oracle RAC</block>
  <block id="0826b4c0567cf966831f76745a9081b2" category="sidebar">使用vVols在 VCF 中部署和保護 Oracle SI</block>
  <block id="836cb906f52ed0e393be18cb078522a3" category="sidebar">使用vVols在 VCF 中部署和保護 Oracle SI</block>
  <block id="d4d9306febc80e3bab7d6accb928772c" category="sidebar">使用 NFS 在NetApp C 系列上實現簡化、自動化的 Oracle 部署</block>
  <block id="1299a93be9dfa863b3a25fbfb997e6f6" category="sidebar">使用 iSCSI 在NetApp ASA上實現簡化、自動化的 Oracle 部署</block>
  <block id="366a32367c76504b66f48c17b771a662" category="sidebar">使用 iSCSI 在NetApp ASA上實現簡化、自動化的 Oracle 部署</block>
  <block id="5a4f68b5b79ab9178902e8b5d02bad52" category="sidebar">FlexPod DataCenter 上的 Oracle 19c RAC 資料庫，透過 FC 使用Cisco UCS 和NetApp AFF A800</block>
  <block id="14c4dbb7c61081eee1c499c4cf138c96" category="sidebar">FlexPod DataCenter 上的 Oracle 19c RAC 資料庫，採用Cisco UCS 和NetApp AFF A800透過 FC 運行</block>
  <block id="0a2866cc3e2ba203c7e2e3ebeca395be" category="sidebar">使用NetApp Cluster Data ONTAP在 UNIX 和 NFS 上安裝 Oracle 的 SAP</block>
  <block id="c6264b98810c0566ac11ca7130b5e0dc" category="sidebar">在 NFS 上自動部署 Oracle 19c for ONTAP</block>
  <block id="e9dcec3e531a3cec5ee733f23baab91d" category="sidebar">在 NFS 上自動部署 Oracle 19c for ONTAP</block>
  <block id="094d840522ee81c5fc0f61fd15568853" category="sidebar">入門和要求</block>
  <block id="a02e4cb19544ad716abaf594270969ad" category="sidebar">自動化 Oracle 19c AWX/Tower 部署</block>
  <block id="ef1f1c0442b12bd50bf4f9444a78c10f" category="sidebar">自動化 Oracle 19c CLI 部署</block>
  <block id="0ac88e3b9d83acd02b3e66ecdd21d42c" category="sidebar">自動化 Oracle 資料保護</block>
  <block id="3e9d3644ee18a66c51ddd16b668eaa5a" category="sidebar">自動化 Oracle 資料保護</block>
  <block id="76476f02ec31c850419864c41ee54a23" category="sidebar">針對 AWX/Tower 的自動化 Oracle 資料保護</block>
  <block id="e994e7cce04879f77e879252b05c2146" category="sidebar">NetApp EF 系列上的 Oracle 資料庫</block>
  <block id="78898e52fcbdc5337204a384f2456d4f" category="sidebar">微軟 SQL 伺服器</block>
  <block id="3d9841f85bcf366fc5a9893eb039254a" category="sidebar">AWS FSx ONTAP上的 Microsoft SQL Server 備份與復原</block>
  <block id="62fdfaf6f9dd1d46f2f23b4b2e1bb196" category="sidebar">AWS FSx ONTAP上的 Microsoft SQL Server 備份與復原</block>
  <block id="148d2aaa0a7c8052b05acda85cf8f070" category="sidebar">使用Amazon FSx ONTAP在 AWS EC2 上執行 SQL Server</block>
  <block id="760b7d532df381143dc946fd59bf0b62" category="sidebar">Azure NetApp Files上的 SQL Server</block>
  <block id="61def2ac347af2f10fd60cd67052a311" category="sidebar">參考設計（即時高級設計）</block>
  <block id="2c09e46a03d2358a54b88941caf365b6" category="sidebar">在 Windows 上使用 Clustered Data ONTAP 的SAP 與 Microsoft SQL Server</block>
  <block id="89447eb7454239e11376250fa04a88f7" category="sidebar">在 Windows 上使用 Cluster Data ONTAP 的SAP 與 Microsoft SQL Server</block>
  <block id="7c02456b91ace7501ea6f18d1657dcf7" category="sidebar">現代化 Microsoft SQL Server</block>
  <block id="9d816887d40a5251f5427d7cacd2c573" category="sidebar">搭載ONTAP的 Microsoft SQL Server 最佳實務指南</block>
  <block id="61baed6667c7e3ae83d95c8b1c634c2e" category="sidebar">適用於NetApp EF 系列的 Microsoft SQL Server 最佳實務指南</block>
  <block id="5c008a8422e884d74da1d4b50a7ada55" category="sidebar">適用於NetApp EF 系列的 Microsoft SQL Server 最佳實務指南</block>
  <block id="610c3d73e215aa97295b0176a950b976" category="sidebar">AWS FSx/EC2 中的自動化 PostgreSQL HA 部署與 DR</block>
  <block id="1ae3eccde141a365ede8f18b188ae588" category="sidebar">AWS FSx/EC2 中的自動化 PostgreSQL HA 部署與 DR</block>
  <block id="880e1cadc75e63cb5d99a01b614c2c5f" category="sidebar">NetApp ONTAP上的 MySQL 資料庫</block>
  <block id="a778c2474db5f0263c74583332c37399" category="sidebar">NetApp ONTAP上的 MySQL 資料庫</block>
  <block id="c6846442fcc36b333d5b22aac4e0fef5" category="sidebar">ONTAP上的 PostgreSQL 備份、還原和克隆</block>
  <block id="2de363e9c11e72fe1c95728c8cf3e449" category="sidebar">SnapCenter Oracle 克隆生命週期</block>
  <block id="d7ea87ae176596e65c20709701590891" category="sidebar">ANF 上的 Oracle 資料庫備份、復原和克隆</block>
  <block id="8a708dc28e6881f4ca61b1dac86fb745" category="sidebar">適用於 Oracle 的BlueXP SaaS - Azure</block>
  <block id="72fabf1add0034062f091db87a4723b3" category="sidebar">適用於 Oracle 的BlueXP SaaS - AWS</block>
  <block id="5f95fbda20eeb9ce0859afe2ac6f42fa" category="sidebar">解決方案要求</block>
  <block id="59f8ae0d5c4ba13dee4828e2727c8859" category="sidebar">本地入門</block>
  <block id="73eef3ab50fbcc7a042deef357b9fa33" category="sidebar">真實客戶案例研究</block>
  <block id="04b7cda1d19d446c6e853fc038db5a5e" category="sidebar">醫療產品公司將本地 SQL 工作負載遷移到Amazon FSx ONTAP以降低成本</block>
  <block id="ffb66354e0d5475c4786ced5e4cb81cb" category="sidebar">透過伺服器內映像備份實現 Oracle VLDB 克隆生命週期自動化</block>
  <block id="2dbf851934e823cf50e5fcbe910b69d5" category="sidebar">使用 ASM 在 GCNV 上實現 Oracle 克隆生命週期自動化</block>
  <block id="eca7922520811a928d6d61402cc26bcc" category="sidebar">使用 ASM 在 ANF 上實現 Oracle 克隆生命週期自動化</block>
  <block id="5fd324f4fd7639d5700e6b973c7a6840" category="sidebar">SnapCenter Oracle 克隆生命週期</block>
  <block id="f4d8825927d11df25770df5e00d6a52e" category="sidebar">Oracle 遷移</block>
  <block id="d8c849deb1477c8cfaee422dd193388f" category="sidebar">Oracle HA/DR 與 AWS FSx ONTAP</block>
  <block id="20f7635cace61e3ed7b6537e403c5ceb" category="sidebar">AWS FSx ONTAP和 EC2 配置</block>
  <block id="409c22336fbfc84b2d2683964f89c253" category="sidebar">資料庫大小調整工具包</block>
  <block id="6f0e1094a5c97fb9eb0f2f06af18b3f7" category="sidebar">Oracle ANF 大小調整指南</block>
  <block id="554cfab3938e21d9270bd6b75931f96f" category="sidebar">影片</block>
  <block id="5ffbe0deb5b41148dc58e63a20df8411" category="sidebar">Oracle 資料庫</block>
  <block id="39a2008d48dcc4f61288e4668979970c" category="sidebar">SQL Server 資料庫</block>
</blocks>